"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),reactRedux=require("react-redux");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React);function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("production"!==process.env.NODE_ENV){var o=Y[e],i=o?"function"==typeof o?o.apply(null,r):o:"unknown error nr: "+e;throw Error("[Immer] "+i)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function t(e){return!!e&&!!e[Q]}function r(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Z}(e)||Array.isArray(e)||!!e[L]||!!e.constructor[L]||s(e)||v(e))}function i(e,t,r){void 0===r&&(r=!1),0===o(e)?(r?Object.keys:nn)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function o(e){var t=e[Q];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:s(e)?2:v(e)?3:0}function u(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function a(e,t){return 2===o(e)?e.get(t):e[t]}function f(e,t,r){var n=o(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function s(e){return X&&e instanceof Map}function v(e){return q&&e instanceof Set}function p(e){return e.o||e.t}function l(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=tn(e);delete t[Q];for(var r=nn(t),n=0;n<r.length;n++){var o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function d(e,n){return void 0===n&&(n=!1),y(e)||t(e)||!r(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=h),Object.freeze(e),n&&i(e,(function(e,t){return d(t,!0)}),!0)),e}function h(){n(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b(e){var t=rn[e];return t||n(18,e),t}function m(e,t){rn[e]||(rn[e]=t)}function _(){return"production"===process.env.NODE_ENV||U||n(0),U}function j(e,t){t&&(b("Patches"),e.u=[],e.s=[],e.v=t)}function O(e){g(e),e.p.forEach(S),e.p=null}function g(e){e===U&&(U=e.l)}function w(e){return U={p:[],l:U,h:e,m:!0,_:0}}function S(e){var t=e[Q];0===t.i||1===t.i?t.j():t.O=!0}function P(e,t){t._=t.p.length;var o=t.p[0],i=void 0!==e&&e!==o;return t.h.g||b("ES5").S(t,e,i),i?(o[Q].P&&(O(t),n(4)),r(e)&&(e=M(t,e),t.l||x(t,e)),t.u&&b("Patches").M(o[Q],e,t.u,t.s)):e=M(t,o,[]),O(t),t.u&&t.v(t.u,t.s),e!==H?e:void 0}function M(e,t,r){if(y(t))return t;var n=t[Q];if(!n)return i(t,(function(o,i){return A(e,n,t,o,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return x(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=l(n.k):n.o;i(3===n.i?new Set(o):o,(function(t,i){return A(e,n,o,t,i,r)})),x(e,o,!1),r&&e.u&&b("Patches").R(n,r,e.u,e.s)}return n.o}function A(e,o,i,a,s,c){if("production"!==process.env.NODE_ENV&&s===i&&n(5),t(s)){var l=M(e,s,c&&o&&3!==o.i&&!u(o.D,a)?c.concat(a):void 0);if(f(i,a,l),!t(l))return;e.m=!1}if(r(s)&&!y(s)){if(!e.h.F&&e._<1)return;M(e,s),o&&o.A.l||x(e,s)}}function x(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&d(t,r)}function z(e,t){var r=e[Q];return(r?p(r):e)[t]}function I(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function k(e){e.P||(e.P=!0,e.l&&k(e.l))}function E(e){e.o||(e.o=l(e.t))}function R(e,t,r){var n=s(t)?b("MapSet").N(t,r):v(t)?b("MapSet").T(t,r):e.g?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:_(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=n,i=en;r&&(o=[n],i=on);var a=Proxy.revocable(o,i),s=a.revoke,c=a.proxy;return n.k=c,n.j=s,c}(t,r):b("ES5").J(t,r);return(r?r.A:_()).p.push(n),n}function D(e){return t(e)||n(22,e),function e(t){if(!r(t))return t;var n,s=t[Q],c=o(t);if(s){if(!s.P&&(s.i<4||!b("ES5").K(s)))return s.t;s.I=!0,n=F(t,c),s.I=!1}else n=F(t,c);return i(n,(function(t,r){s&&a(s.t,t)===r||f(n,t,e(r))})),3===c?new Set(n):n}(e)}function F(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return l(e)}function N(){function e(e,t){var r=l[e];return r?r.enumerable=t:l[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[Q];return"production"!==process.env.NODE_ENV&&s(t),en.get(t,e)},set:function(t){var r=this[Q];"production"!==process.env.NODE_ENV&&s(r),en.set(r,e,t)}},r}function r(e){for(var t=e.length-1;t>=0;t--){var r=e[t][Q];if(!r.P)switch(r.i){case 5:a(r)&&k(r);break;case 4:o(r)&&k(r)}}}function o(e){for(var t=e.t,r=e.k,n=nn(r),o=n.length-1;o>=0;o--){var i=n[o];if(i!==Q){var a=t[i];if(void 0===a&&!u(t,i))return!0;var s=r[i],l=s&&s[Q];if(l?l.t!==a:!c(s,a))return!0}}var d=!!t[Q];return n.length!==nn(t).length+(d?0:1)}function a(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}function s(e){e.O&&n(3,JSON.stringify(p(e)))}var l={};m("ES5",{J:function(t,r){var n=Array.isArray(t),o=function(t,r){if(t){for(var n=Array(r.length),o=0;o<r.length;o++)Object.defineProperty(n,""+o,e(o,!0));return n}var i=tn(r);delete i[Q];for(var a=nn(i),s=0;s<a.length;s++){var c=a[s];i[c]=e(c,t||!!i[c].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,t),i={i:n?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:t,k:o,o:null,O:!1,C:!1};return Object.defineProperty(o,Q,{value:i,writable:!0}),o},S:function(e,n,o){o?t(n)&&n[Q].A===e&&r(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[Q];if(r){var n=r.t,o=r.k,s=r.D,c=r.i;if(4===c)i(o,(function(t){t!==Q&&(void 0!==n[t]||u(n,t)?s[t]||e(o[t]):(s[t]=!0,k(r)))})),i(n,(function(e){void 0!==o[e]||u(o,e)||(s[e]=!1,k(r))}));else if(5===c){if(a(r)&&(k(r),s.length=!0),o.length<n.length)for(var l=o.length;l<n.length;l++)s[l]=!1;else for(var d=n.length;d<o.length;d++)s[d]=!0;for(var f=Math.min(o.length,n.length),p=0;p<f;p++)void 0===s[p]&&e(o[p])}}}}(e.p[0]),r(e.p))},K:function(e){return 4===e.i?o(e):a(e)}})}var G,U,W="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),X="undefined"!=typeof Map,q="undefined"!=typeof Set,B="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q=W?Symbol.for("immer-state"):"__$immer_state",Y={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Z=""+Object.prototype.constructor,nn="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,tn=Object.getOwnPropertyDescriptors||function(e){var t={};return nn(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},rn={},en={get:function(e,t){if(t===Q)return e;var n=p(e);if(!u(n,t))return function(e,t,r){var n,o=I(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.k):void 0}(e,n,t);var o=n[t];return e.I||!r(o)?o:o===z(e.t,t)?(E(e),e.o[t]=R(e.A.h,o,e)):o},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,r){var n=I(p(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var o=z(p(e),t),i=null==o?void 0:o[Q];if(i&&i.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(c(r,o)&&(void 0!==r||u(e.t,t)))return!0;E(e),k(e)}return e.o[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==z(e.t,t)||t in e.t?(e.D[t]=!1,E(e),k(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=p(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(e,t){on[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),on.deleteProperty=function(e,t){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),en.deleteProperty.call(this,e[0],t)},on.set=function(e,t,r){return"production"!==process.env.NODE_ENV&&"length"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,e[0],t,r,e[0])};var un=function(){function e(e){var t=this;this.g=B,this.F=!0,this.produce=function(e,o,i){if("function"==typeof e&&"function"!=typeof o){var a=o;o=e;var s=t;return function(e){var t=this;void 0===e&&(e=a);for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return s.produce(e,(function(e){var r;return(r=o).call.apply(r,[t,e].concat(n))}))}}var c;if("function"!=typeof o&&n(6),void 0!==i&&"function"!=typeof i&&n(7),r(e)){var u=w(t),l=R(t,e,void 0),f=!0;try{c=o(l),f=!1}finally{f?O(u):g(u)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(e){return j(u,i),P(e,u)}),(function(e){throw O(u),e})):(j(u,i),P(c,u))}if(!e||"object"!=typeof e){if((c=o(e))===H)return;return void 0===c&&(c=e),t.F&&d(c,!0),c}n(21,e)},this.produceWithPatches=function(e,r){return"function"==typeof e?function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(o))}))}:[t.produce(e,r,(function(e,t){n=e,o=t})),n,o];var n,o},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var o=e.prototype;return o.createDraft=function(e){r(e)||n(8),t(e)&&(e=D(e));var o=w(this),i=R(this,e,void 0);return i[Q].C=!0,g(o),i},o.finishDraft=function(e,t){var r=e&&e[Q];"production"!==process.env.NODE_ENV&&(r&&r.C||n(9),r.I&&n(10));var o=r.A;return j(o,t),P(void 0,o)},o.setAutoFreeze=function(e){this.F=e},o.setUseProxies=function(e){e&&!B&&n(20),this.g=e},o.applyPatches=function(e,r){var n;for(n=r.length-1;n>=0;n--){var o=r[n];if(0===o.path.length&&"replace"===o.op){e=o.value;break}}var i=b("Patches").$;return t(e)?i(e,r):this.produce(e,(function(e){return i(e,r.slice(n+1))}))},e}(),an=new un,fn=an.produce;an.produceWithPatches.bind(an),an.setAutoFreeze.bind(an),an.setUseProxies.bind(an),an.applyPatches.bind(an),an.createDraft.bind(an),an.finishDraft.bind(an);var createNextState2=fn;function formatProdErrorMessage(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function miniKindOf(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;switch(t){case"boolean":case"string":case"number":case"symbol":case"function":return t}if(Array.isArray(e))return"array";if(isDate(e))return"date";if(isError(e))return"error";var r=ctorName(e);switch(r){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return r}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")}function ctorName(e){return"function"==typeof e.constructor?e.constructor.name:null}function isError(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}function isDate(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}function kindOf(e){var t=typeof e;return"production"!==process.env.NODE_ENV&&(t=miniKindOf(e)),t}function warning(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function getUnexpectedStateShapeWarningMessage(e,t,r,n){var o=Object.keys(t),i=r&&r.type===ActionTypes.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===o.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!isPlainObject(e))return"The "+i+' has unexpected type of "'+kindOf(e)+'". Expected argument to be an object with the following keys: "'+o.join('", "')+'"';var a=Object.keys(e).filter((function(e){return!t.hasOwnProperty(e)&&!n[e]}));return a.forEach((function(e){n[e]=!0})),r&&r.type===ActionTypes.REPLACE?void 0:a.length>0?"Unexpected "+(a.length>1?"keys":"key")+' "'+a.join('", "')+'" found in '+i+'. Expected to find one of the known reducer keys instead: "'+o.join('", "')+'". Unexpected keys will be ignored.':void 0}function assertReducerShape(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:ActionTypes.INIT}))throw new Error("production"===process.env.NODE_ENV?formatProdErrorMessage(12):'The slice reducer for key "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()}))throw new Error("production"===process.env.NODE_ENV?formatProdErrorMessage(13):'The slice reducer for key "'+t+"\" returned undefined when probed with a random type. Don't try to handle '"+ActionTypes.INIT+'\' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}function combineReducers(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];"production"!==process.env.NODE_ENV&&void 0===e[o]&&warning('No reducer provided for key "'+o+'"'),"function"==typeof e[o]&&(r[o]=e[o])}var i,a,s=Object.keys(r);"production"!==process.env.NODE_ENV&&(i={});try{assertReducerShape(r)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;if("production"!==process.env.NODE_ENV){var n=getUnexpectedStateShapeWarningMessage(e,r,t,i);n&&warning(n)}for(var o=!1,c={},u=0;u<s.length;u++){var l=s[u],d=r[l],f=e[l],p=d(f,t);if(void 0===p){var h=t&&t.type;throw new Error("production"===process.env.NODE_ENV?formatProdErrorMessage(14):"When called with an action of type "+(h?'"'+String(h)+'"':"(unknown type)")+', the slice reducer for key "'+l+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.')}c[l]=p,o=o||p!==f}return(o=o||s.length!==Object.keys(e).length)?c:e}}function isCrushed(){}function defaultEqualityCheck(e,t){return e===t}function areArgumentsShallowlyEqual(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}function defaultMemoize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultEqualityCheck,r=null,n=null;return function(){return areArgumentsShallowlyEqual(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}function getDependencies(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}function createSelectorCreator(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=0,a=n.pop(),s=getDependencies(n),c=e.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(r)),u=e((function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return c.apply(null,e)}));return u.resultFunc=a,u.dependencies=s,u.recomputations=function(){return i},u.resetRecomputations=function(){return i=0},u}}"production"!==process.env.NODE_ENV&&"string"==typeof isCrushed.name&&"isCrushed"!==isCrushed.name&&warning('You are currently using minified code outside of NODE_ENV === "production". This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) to ensure you have the correct code for your production build.'),createSelectorCreator(defaultMemoize);var __extends=(extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),extendStatics,__spreadArray=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=function(e,t,r){return t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},__spreadValues=function(e,t){for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var n=0,o=__getOwnPropSymbols(t);n<o.length;n++){r=o[n];__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r])}return e};function createAction(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return __spreadValues(__spreadValues({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function executeReducerBuilderCallback(e){var t,r={},n=[],o={addCase:function(e,i){if("production"!==process.env.NODE_ENV){if(n.length>0)throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");if(t)throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`")}var a="string"==typeof e?e:e.type;if(a in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[a]=i,o},addMatcher:function(e,r){if("production"!==process.env.NODE_ENV&&t)throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return n.push({matcher:e,reducer:r}),o},addDefaultCase:function(e){if("production"!==process.env.NODE_ENV&&t)throw new Error("`builder.addDefaultCase` can only be called once");return t=e,o}};return e(o),[r,n,t]}function createReducer(e,n,o,i){void 0===o&&(o=[]);var a="function"==typeof n?executeReducerBuilderCallback(n):[n,o,i],s=a[0],c=a[1],u=a[2],l=createNextState2(e,(function(){}));return function(e,n){void 0===e&&(e=l);var o=__spreadArray([s[n.type]],c.filter((function(e){return(0,e.matcher)(n)})).map((function(e){return e.reducer})));return 0===o.filter((function(e){return!!e})).length&&(o=[u]),o.reduce((function(e,o){if(o){var i;if(t(e))return void 0===(i=o(e,n))?e:i;if(r(e))return createNextState2(e,(function(e){return o(e,n)}));if(void 0===(i=o(e,n))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}return e}),e)}}function getType2(e,t){return e+"/"+t}function createSlice(e){var t=e.name,r=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var n=e.reducers||{},o="function"==typeof e.extraReducers?executeReducerBuilderCallback(e.extraReducers):[e.extraReducers],i=o[0],a=void 0===i?{}:i,s=o[1],c=void 0===s?[]:s,u=o[2],l=void 0===u?void 0:u,d=Object.keys(n),f={},p={},h={};d.forEach((function(e){var r,o,i=n[e],a=getType2(t,e);"reducer"in i?(r=i.reducer,o=i.prepare):r=i,f[e]=r,p[a]=r,h[e]=o?createAction(a,o):createAction(a)}));var y=createReducer(r,__spreadValues(__spreadValues({},a),p),c,l);return{name:t,reducer:y,actions:h,caseReducers:f}}!function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}__extends(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,__spreadArray([void 0],e[0].concat(this)))):new(t.bind.apply(t,__spreadArray([void 0],e.concat(this))))}}(Array),process.env.NODE_ENV,process.env.NODE_ENV,N();let nanoid=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let n=63&r[e];t+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return t};var commonjsGlobal$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},dist$1={};Object.defineProperty(dist$1,"__esModule",{value:!0});var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==commonjsGlobal$1?commonjsGlobal$1:"undefined"!=typeof self?self:{},indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,a(e))}}))}var base64$1={};!function(e){var t=base64$1;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;t.encode=function(e,t,n){for(var o,i=null,a=[],s=0,c=0;t<n;){var u=e[t++];switch(c){case 0:a[s++]=r[u>>2],o=(3&u)<<4,c=1;break;case 1:a[s++]=r[o|u>>4],o=(15&u)<<2,c=2;break;case 2:a[s++]=r[o|u>>6],a[s++]=r[63&u],c=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=r[o],a[s++]=61,1===c&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var i="invalid encoding";t.decode=function(e,t,r){for(var o,a=r,s=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&s>1)break;if(void 0===(u=n[u]))throw Error(i);switch(s){case 0:o=u,s=1;break;case 1:t[r++]=o<<2|(48&u)>>4,o=u,s=2;break;case 2:t[r++]=(15&o)<<4|(60&u)>>2,o=u,s=3;break;case 3:t[r++]=(3&o)<<6|u,s=0}}if(1===s)throw Error(i);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}();var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this};var float=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,o,i+t),e((a<<31|s/4294967296)>>>0,o,i+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=n*Math.pow(2,-c))>>>0,o,i+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,o,i+r)}}}function r(e,t,r,n,o){var i=e(n,o+t),a=e(n,o+r),s=2*(a>>31)+1,c=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===c?u?NaN:s*(1/0):0===c?5e-324*s*u:s*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={};!function(e){var t=utf8$2;t.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},t.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],a=0;t<r;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},t.write=function(e,t,r){for(var n,o,i=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}}();var pool_1=pool;function pool(e,t,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return e(r);a+r>n&&(i=e(n),a=0);var s=t.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new LongBits$2(r,n)},LongBits$2.from=function(e){if("number"==typeof e)return LongBits$2.fromNumber(e);if(util$5.isString(e)){if(!util$5.Long)return LongBits$2.fromNumber(parseInt(e,10));e=util$5.Long.fromString(e)}return e.low||e.high?new LongBits$2(e.low>>>0,e.high>>>0):zero},LongBits$2.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},LongBits$2.prototype.toLong=function(e){return util$5.Long?new util$5.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function(e){return e===zeroHash?zero:new LongBits$2((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits$2.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$2.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits$2.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits$2.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10},function(e){var t=minimal$1;function r(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function n(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=aspromise,t.base64=base64$1,t.EventEmitter=eventemitter,t.float=float,t.inquire=inquire_1,t.utf8=utf8$2,t.pool=pool_1,t.LongBits=longbits,t.global="undefined"!=typeof window&&window||void 0!==commonjsGlobal&&commonjsGlobal||"undefined"!=typeof self&&self||commonjsGlobal,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isNode=Boolean(t.global.process&&t.global.process.versions&&t.global.process.versions.node),t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},t.merge=r,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=n,t.ProtocolError=n("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}();var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer$1.create=create$1(),Writer$1.alloc=function(e){return new util$4.Array(e)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer$1.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer$1.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer$1.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer$1.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(e){return this._push(util$4.float.writeFloatLE,4,e)},Writer$1.prototype.double=function(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer$1.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var r=Writer$1.alloc(t=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(t)._push(writeBytes,t,e)},Writer$1.prototype.string=function(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer$1.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}function writeStringBuffer(e,t,r){e.length<40?util$3.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&"set"===util$3.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},BufferWriter.prototype.bytes=function(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this},BufferWriter.prototype.string=function(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create=function(){return util$2.Buffer?function(e){return(Reader$1.create=function(e){return util$2.Buffer.isBuffer(e)?new BufferReader$1(e):create_array(e)})(e)}:create_array},value;function readLongVarint(){var e=new LongBits(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.create=create(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader$1.prototype.int32=function(){return 0|this.uint32()},Reader$1.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader$1.prototype.bool=function(){return 0!==this.uint32()},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader$1.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader$1.prototype.string=function(){var e=this.bytes();return utf8.read(e,0,e.length)},Reader$1.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader._configure();var rpc={},service=Service,util=minimal$1;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,n,o,i){if(!o)throw TypeError("request must be specified");var a=this;if(!i)return util.asPromise(e,a,t,r,n,o);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,r){if(e)return a.emit("error",e,t),i(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),i(e)}return a.emit("data",r,t),i(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){i(e)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},rpc.Service=service;var roots={};!function(e){var t=indexMinimal;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=minimal$1,t.rpc=rpc,t.roots=roots,t.configure=r,r()}();var minimal=indexMinimal,$protobuf=minimal,$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={}),valuesById,values;$root.Action=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.id="",e.prototype.setDevice=null,e.prototype.removeDevice=null,e.prototype.setWebRtcStream=null,e.prototype.setActivity=null,e.prototype.setHost=null,e.prototype.addTrophy=null,e.prototype.setContent=null,e.prototype.sendChatMessage=null,e.prototype.userJoin=null,e.prototype.userLeave=null,e.prototype.endClass=null,e.prototype.heartbeat=null,Object.defineProperty(e.prototype,"action",{get:$util.oneOfGetter(t=["setDevice","removeDevice","setWebRtcStream","setActivity","setHost","addTrophy","setContent","sendChatMessage","userJoin","userLeave","endClass","heartbeat"]),set:$util.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),null!=e.heartbeat&&Object.hasOwnProperty.call(e,"heartbeat")&&$root.Heartbeat.encode(e.heartbeat,t.uint32(18).fork()).ldelim(),null!=e.setDevice&&Object.hasOwnProperty.call(e,"setDevice")&&$root.SetDevice.encode(e.setDevice,t.uint32(26).fork()).ldelim(),null!=e.removeDevice&&Object.hasOwnProperty.call(e,"removeDevice")&&$root.RemoveDevice.encode(e.removeDevice,t.uint32(34).fork()).ldelim(),null!=e.setWebRtcStream&&Object.hasOwnProperty.call(e,"setWebRtcStream")&&$root.SetWebRTCStream.encode(e.setWebRtcStream,t.uint32(42).fork()).ldelim(),null!=e.setActivity&&Object.hasOwnProperty.call(e,"setActivity")&&$root.SetActivity.encode(e.setActivity,t.uint32(50).fork()).ldelim(),null!=e.setHost&&Object.hasOwnProperty.call(e,"setHost")&&$root.SetHost.encode(e.setHost,t.uint32(58).fork()).ldelim(),null!=e.addTrophy&&Object.hasOwnProperty.call(e,"addTrophy")&&$root.AddTrophy.encode(e.addTrophy,t.uint32(66).fork()).ldelim(),null!=e.setContent&&Object.hasOwnProperty.call(e,"setContent")&&$root.SetContent.encode(e.setContent,t.uint32(74).fork()).ldelim(),null!=e.sendChatMessage&&Object.hasOwnProperty.call(e,"sendChatMessage")&&$root.SendChatMessage.encode(e.sendChatMessage,t.uint32(82).fork()).ldelim(),null!=e.userJoin&&Object.hasOwnProperty.call(e,"userJoin")&&$root.UserJoin.encode(e.userJoin,t.uint32(90).fork()).ldelim(),null!=e.userLeave&&Object.hasOwnProperty.call(e,"userLeave")&&$root.UserLeave.encode(e.userLeave,t.uint32(98).fork()).ldelim(),null!=e.endClass&&Object.hasOwnProperty.call(e,"endClass")&&$root.EndClass.encode(e.endClass,t.uint32(106).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Action;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id=e.string();break;case 3:n.setDevice=$root.SetDevice.decode(e,e.uint32());break;case 4:n.removeDevice=$root.RemoveDevice.decode(e,e.uint32());break;case 5:n.setWebRtcStream=$root.SetWebRTCStream.decode(e,e.uint32());break;case 6:n.setActivity=$root.SetActivity.decode(e,e.uint32());break;case 7:n.setHost=$root.SetHost.decode(e,e.uint32());break;case 8:n.addTrophy=$root.AddTrophy.decode(e,e.uint32());break;case 9:n.setContent=$root.SetContent.decode(e,e.uint32());break;case 10:n.sendChatMessage=$root.SendChatMessage.decode(e,e.uint32());break;case 11:n.userJoin=$root.UserJoin.decode(e,e.uint32());break;case 12:n.userLeave=$root.UserLeave.decode(e,e.uint32());break;case 13:n.endClass=$root.EndClass.decode(e,e.uint32());break;case 2:n.heartbeat=$root.Heartbeat.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.id&&e.hasOwnProperty("id")&&!$util.isString(e.id))return"id: string expected";if(null!=e.setDevice&&e.hasOwnProperty("setDevice")&&(t.action=1,r=$root.SetDevice.verify(e.setDevice)))return"setDevice."+r;if(null!=e.removeDevice&&e.hasOwnProperty("removeDevice")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.RemoveDevice.verify(e.removeDevice))return"removeDevice."+r}if(null!=e.setWebRtcStream&&e.hasOwnProperty("setWebRtcStream")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.SetWebRTCStream.verify(e.setWebRtcStream))return"setWebRtcStream."+r}if(null!=e.setActivity&&e.hasOwnProperty("setActivity")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.SetActivity.verify(e.setActivity))return"setActivity."+r}if(null!=e.setHost&&e.hasOwnProperty("setHost")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.SetHost.verify(e.setHost))return"setHost."+r}if(null!=e.addTrophy&&e.hasOwnProperty("addTrophy")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.AddTrophy.verify(e.addTrophy))return"addTrophy."+r}if(null!=e.setContent&&e.hasOwnProperty("setContent")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.SetContent.verify(e.setContent))return"setContent."+r}if(null!=e.sendChatMessage&&e.hasOwnProperty("sendChatMessage")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.SendChatMessage.verify(e.sendChatMessage))return"sendChatMessage."+r}if(null!=e.userJoin&&e.hasOwnProperty("userJoin")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.UserJoin.verify(e.userJoin))return"userJoin."+r}if(null!=e.userLeave&&e.hasOwnProperty("userLeave")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.UserLeave.verify(e.userLeave))return"userLeave."+r}if(null!=e.endClass&&e.hasOwnProperty("endClass")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.EndClass.verify(e.endClass))return"endClass."+r}if(null!=e.heartbeat&&e.hasOwnProperty("heartbeat")){if(1===t.action)return"action: multiple values";var r;if(t.action=1,r=$root.Heartbeat.verify(e.heartbeat))return"heartbeat."+r}return null},e.fromObject=function(e){if(e instanceof $root.Action)return e;var t=new $root.Action;if(null!=e.id&&(t.id=String(e.id)),null!=e.setDevice){if("object"!=typeof e.setDevice)throw TypeError(".Action.setDevice: object expected");t.setDevice=$root.SetDevice.fromObject(e.setDevice)}if(null!=e.removeDevice){if("object"!=typeof e.removeDevice)throw TypeError(".Action.removeDevice: object expected");t.removeDevice=$root.RemoveDevice.fromObject(e.removeDevice)}if(null!=e.setWebRtcStream){if("object"!=typeof e.setWebRtcStream)throw TypeError(".Action.setWebRtcStream: object expected");t.setWebRtcStream=$root.SetWebRTCStream.fromObject(e.setWebRtcStream)}if(null!=e.setActivity){if("object"!=typeof e.setActivity)throw TypeError(".Action.setActivity: object expected");t.setActivity=$root.SetActivity.fromObject(e.setActivity)}if(null!=e.setHost){if("object"!=typeof e.setHost)throw TypeError(".Action.setHost: object expected");t.setHost=$root.SetHost.fromObject(e.setHost)}if(null!=e.addTrophy){if("object"!=typeof e.addTrophy)throw TypeError(".Action.addTrophy: object expected");t.addTrophy=$root.AddTrophy.fromObject(e.addTrophy)}if(null!=e.setContent){if("object"!=typeof e.setContent)throw TypeError(".Action.setContent: object expected");t.setContent=$root.SetContent.fromObject(e.setContent)}if(null!=e.sendChatMessage){if("object"!=typeof e.sendChatMessage)throw TypeError(".Action.sendChatMessage: object expected");t.sendChatMessage=$root.SendChatMessage.fromObject(e.sendChatMessage)}if(null!=e.userJoin){if("object"!=typeof e.userJoin)throw TypeError(".Action.userJoin: object expected");t.userJoin=$root.UserJoin.fromObject(e.userJoin)}if(null!=e.userLeave){if("object"!=typeof e.userLeave)throw TypeError(".Action.userLeave: object expected");t.userLeave=$root.UserLeave.fromObject(e.userLeave)}if(null!=e.endClass){if("object"!=typeof e.endClass)throw TypeError(".Action.endClass: object expected");t.endClass=$root.EndClass.fromObject(e.endClass)}if(null!=e.heartbeat){if("object"!=typeof e.heartbeat)throw TypeError(".Action.heartbeat: object expected");t.heartbeat=$root.Heartbeat.fromObject(e.heartbeat)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.id=""),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),null!=e.heartbeat&&e.hasOwnProperty("heartbeat")&&(r.heartbeat=$root.Heartbeat.toObject(e.heartbeat,t),t.oneofs&&(r.action="heartbeat")),null!=e.setDevice&&e.hasOwnProperty("setDevice")&&(r.setDevice=$root.SetDevice.toObject(e.setDevice,t),t.oneofs&&(r.action="setDevice")),null!=e.removeDevice&&e.hasOwnProperty("removeDevice")&&(r.removeDevice=$root.RemoveDevice.toObject(e.removeDevice,t),t.oneofs&&(r.action="removeDevice")),null!=e.setWebRtcStream&&e.hasOwnProperty("setWebRtcStream")&&(r.setWebRtcStream=$root.SetWebRTCStream.toObject(e.setWebRtcStream,t),t.oneofs&&(r.action="setWebRtcStream")),null!=e.setActivity&&e.hasOwnProperty("setActivity")&&(r.setActivity=$root.SetActivity.toObject(e.setActivity,t),t.oneofs&&(r.action="setActivity")),null!=e.setHost&&e.hasOwnProperty("setHost")&&(r.setHost=$root.SetHost.toObject(e.setHost,t),t.oneofs&&(r.action="setHost")),null!=e.addTrophy&&e.hasOwnProperty("addTrophy")&&(r.addTrophy=$root.AddTrophy.toObject(e.addTrophy,t),t.oneofs&&(r.action="addTrophy")),null!=e.setContent&&e.hasOwnProperty("setContent")&&(r.setContent=$root.SetContent.toObject(e.setContent,t),t.oneofs&&(r.action="setContent")),null!=e.sendChatMessage&&e.hasOwnProperty("sendChatMessage")&&(r.sendChatMessage=$root.SendChatMessage.toObject(e.sendChatMessage,t),t.oneofs&&(r.action="sendChatMessage")),null!=e.userJoin&&e.hasOwnProperty("userJoin")&&(r.userJoin=$root.UserJoin.toObject(e.userJoin,t),t.oneofs&&(r.action="userJoin")),null!=e.userLeave&&e.hasOwnProperty("userLeave")&&(r.userLeave=$root.UserLeave.toObject(e.userLeave,t),t.oneofs&&(r.action="userLeave")),null!=e.endClass&&e.hasOwnProperty("endClass")&&(r.endClass=$root.EndClass.toObject(e.endClass,t),t.oneofs&&(r.action="endClass")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.ActionAcknowledgement=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id="",e.prototype.error="",e.prototype.code=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&t.uint32(18).string(e.error),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.ActionAcknowledgement;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id=e.string();break;case 2:n.error=e.string();break;case 3:n.code=e.uint32();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.id&&e.hasOwnProperty("id")&&!$util.isString(e.id)?"id: string expected":null!=e.error&&e.hasOwnProperty("error")&&!$util.isString(e.error)?"error: string expected":null!=e.code&&e.hasOwnProperty("code")&&!$util.isInteger(e.code)?"code: integer expected":null},e.fromObject=function(e){if(e instanceof $root.ActionAcknowledgement)return e;var t=new $root.ActionAcknowledgement;return null!=e.id&&(t.id=String(e.id)),null!=e.error&&(t.error=String(e.error)),null!=e.code&&(t.code=e.code>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.id="",r.error="",r.code=0),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),null!=e.error&&e.hasOwnProperty("error")&&(r.error=e.error),null!=e.code&&e.hasOwnProperty("code")&&(r.code=e.code),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.UserJoin=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UserJoin;e.pos<r;){var o=e.uint32();e.skipType(7&o)}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof $root.UserJoin?e:new $root.UserJoin},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.UserLeave=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UserLeave;e.pos<r;){var o=e.uint32();e.skipType(7&o)}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof $root.UserLeave?e:new $root.UserLeave},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.EndClass=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.EndClass;e.pos<r;){var o=e.uint32();e.skipType(7&o)}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof $root.EndClass?e:new $root.EndClass},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.Heartbeat=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Heartbeat;e.pos<r;){var o=e.uint32();e.skipType(7&o)}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof $root.Heartbeat?e:new $root.Heartbeat},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.SetDevice=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.deviceId="",e.prototype.device=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.deviceId&&Object.hasOwnProperty.call(e,"deviceId")&&t.uint32(10).string(e.deviceId),null!=e.device&&Object.hasOwnProperty.call(e,"device")&&$root.Device.encode(e.device,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.SetDevice;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.deviceId=e.string();break;case 2:n.device=$root.Device.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.deviceId&&e.hasOwnProperty("deviceId")&&!$util.isString(e.deviceId))return"deviceId: string expected";if(null!=e.device&&e.hasOwnProperty("device")){var t=$root.Device.verify(e.device);if(t)return"device."+t}return null},e.fromObject=function(e){if(e instanceof $root.SetDevice)return e;var t=new $root.SetDevice;if(null!=e.deviceId&&(t.deviceId=String(e.deviceId)),null!=e.device){if("object"!=typeof e.device)throw TypeError(".SetDevice.device: object expected");t.device=$root.Device.fromObject(e.device)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.deviceId="",r.device=null),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&(r.deviceId=e.deviceId),null!=e.device&&e.hasOwnProperty("device")&&(r.device=$root.Device.toObject(e.device,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.RemoveDevice=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.RemoveDevice;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.id&&e.hasOwnProperty("id")&&!$util.isString(e.id)?"id: string expected":null},e.fromObject=function(e){if(e instanceof $root.RemoveDevice)return e;var t=new $root.RemoveDevice;return null!=e.id&&(t.id=String(e.id)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.id=""),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.SetWebRTCStream=function(){function e(e){if(this.streams=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.deviceId="",e.prototype.streams=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.deviceId&&Object.hasOwnProperty.call(e,"deviceId")&&t.uint32(10).string(e.deviceId),null!=e.streams&&e.streams.length)for(var r=0;r<e.streams.length;++r)$root.WebRTCStream.encode(e.streams[r],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.SetWebRTCStream;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.deviceId=e.string();break;case 2:n.streams&&n.streams.length||(n.streams=[]),n.streams.push($root.WebRTCStream.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.deviceId&&e.hasOwnProperty("deviceId")&&!$util.isString(e.deviceId))return"deviceId: string expected";if(null!=e.streams&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var r=$root.WebRTCStream.verify(e.streams[t]);if(r)return"streams."+r}}return null},e.fromObject=function(e){if(e instanceof $root.SetWebRTCStream)return e;var t=new $root.SetWebRTCStream;if(null!=e.deviceId&&(t.deviceId=String(e.deviceId)),e.streams){if(!Array.isArray(e.streams))throw TypeError(".SetWebRTCStream.streams: array expected");t.streams=[];for(var r=0;r<e.streams.length;++r){if("object"!=typeof e.streams[r])throw TypeError(".SetWebRTCStream.streams: object expected");t.streams[r]=$root.WebRTCStream.fromObject(e.streams[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.streams=[]),t.defaults&&(r.deviceId=""),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&(r.deviceId=e.deviceId),e.streams&&e.streams.length){r.streams=[];for(var n=0;n<e.streams.length;++n)r.streams[n]=$root.WebRTCStream.toObject(e.streams[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.SetActivity=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.deviceId="",e.prototype.activity=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.deviceId&&Object.hasOwnProperty.call(e,"deviceId")&&t.uint32(10).string(e.deviceId),null!=e.activity&&Object.hasOwnProperty.call(e,"activity")&&$root.Activity.encode(e.activity,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.SetActivity;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.deviceId=e.string();break;case 2:n.activity=$root.Activity.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.deviceId&&e.hasOwnProperty("deviceId")&&!$util.isString(e.deviceId))return"deviceId: string expected";if(null!=e.activity&&e.hasOwnProperty("activity")){var t=$root.Activity.verify(e.activity);if(t)return"activity."+t}return null},e.fromObject=function(e){if(e instanceof $root.SetActivity)return e;var t=new $root.SetActivity;if(null!=e.deviceId&&(t.deviceId=String(e.deviceId)),null!=e.activity){if("object"!=typeof e.activity)throw TypeError(".SetActivity.activity: object expected");t.activity=$root.Activity.fromObject(e.activity)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.deviceId="",r.activity=null),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&(r.deviceId=e.deviceId),null!=e.activity&&e.hasOwnProperty("activity")&&(r.activity=$root.Activity.toObject(e.activity,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.SetHost=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.SetHost;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.id&&e.hasOwnProperty("id")&&!$util.isString(e.id)?"id: string expected":null},e.fromObject=function(e){if(e instanceof $root.SetHost)return e;var t=new $root.SetHost;return null!=e.id&&(t.id=String(e.id)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.id=""),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.AddTrophy=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.trophyId="",e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.userId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.trophyId&&Object.hasOwnProperty.call(e,"trophyId")&&t.uint32(10).string(e.trophyId),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(16).uint64(e.timestamp),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(26).string(e.userId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.AddTrophy;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trophyId=e.string();break;case 2:n.timestamp=e.uint64();break;case 3:n.userId=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.trophyId&&e.hasOwnProperty("trophyId")&&!$util.isString(e.trophyId)?"trophyId: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!($util.isInteger(e.timestamp)||e.timestamp&&$util.isInteger(e.timestamp.low)&&$util.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null!=e.userId&&e.hasOwnProperty("userId")&&!$util.isString(e.userId)?"userId: string expected":null},e.fromObject=function(e){if(e instanceof $root.AddTrophy)return e;var t=new $root.AddTrophy;return null!=e.trophyId&&(t.trophyId=String(e.trophyId)),null!=e.timestamp&&($util.Long?(t.timestamp=$util.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),null!=e.userId&&(t.userId=String(e.userId)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.trophyId="",$util.Long){var n=new $util.Long(0,0,!0);r.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timestamp=t.longs===String?"0":0;r.userId=""}return null!=e.trophyId&&e.hasOwnProperty("trophyId")&&(r.trophyId=e.trophyId),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?$util.Long.prototype.toString.call(e.timestamp):t.longs===Number?new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),null!=e.userId&&e.hasOwnProperty("userId")&&(r.userId=e.userId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.SetContent=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.content=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&$root.Content.encode(e.content,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.SetContent;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.content=$root.Content.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.content&&e.hasOwnProperty("content")){var t=$root.Content.verify(e.content);if(t)return"content."+t}return null},e.fromObject=function(e){if(e instanceof $root.SetContent)return e;var t=new $root.SetContent;if(null!=e.content){if("object"!=typeof e.content)throw TypeError(".SetContent.content: object expected");t.content=$root.Content.fromObject(e.content)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.content=null),null!=e.content&&e.hasOwnProperty("content")&&(r.content=$root.Content.toObject(e.content,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.SendChatMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(10).string(e.message),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.SendChatMessage;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.message=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!$util.isString(e.message)?"message: string expected":null},e.fromObject=function(e){if(e instanceof $root.SendChatMessage)return e;var t=new $root.SendChatMessage;return null!=e.message&&(t.message=String(e.message)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.message=""),null!=e.message&&e.hasOwnProperty("message")&&(r.message=e.message),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.StateChanges=function(){function e(e){if(this.changes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.changes=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.changes&&e.changes.length)for(var r=0;r<e.changes.length;++r)$root.StateDiff.encode(e.changes[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.StateChanges;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.changes&&n.changes.length||(n.changes=[]),n.changes.push($root.StateDiff.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.changes&&e.hasOwnProperty("changes")){if(!Array.isArray(e.changes))return"changes: array expected";for(var t=0;t<e.changes.length;++t){var r=$root.StateDiff.verify(e.changes[t]);if(r)return"changes."+r}}return null},e.fromObject=function(e){if(e instanceof $root.StateChanges)return e;var t=new $root.StateChanges;if(e.changes){if(!Array.isArray(e.changes))throw TypeError(".StateChanges.changes: array expected");t.changes=[];for(var r=0;r<e.changes.length;++r){if("object"!=typeof e.changes[r])throw TypeError(".StateChanges.changes: object expected");t.changes[r]=$root.StateDiff.fromObject(e.changes[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.changes=[]),e.changes&&e.changes.length){r.changes=[];for(var n=0;n<e.changes.length;++n)r.changes[n]=$root.StateDiff.toObject(e.changes[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.StateDiff=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.setState=null,e.prototype.addParticipants=null,e.prototype.removeParticipants=null,e.prototype.changeContent=null,e.prototype.changeHost=null,e.prototype.appendChatMessage=null,e.prototype.receiveTrophy=null,e.prototype.classEnded=null,Object.defineProperty(e.prototype,"action",{get:$util.oneOfGetter(t=["setState","addParticipants","removeParticipants","changeContent","changeHost","appendChatMessage","receiveTrophy","classEnded"]),set:$util.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.setState&&Object.hasOwnProperty.call(e,"setState")&&$root.State.encode(e.setState,t.uint32(10).fork()).ldelim(),null!=e.addParticipants&&Object.hasOwnProperty.call(e,"addParticipants")&&$root.AddParticipants.encode(e.addParticipants,t.uint32(18).fork()).ldelim(),null!=e.removeParticipants&&Object.hasOwnProperty.call(e,"removeParticipants")&&$root.RemoveParticipants.encode(e.removeParticipants,t.uint32(26).fork()).ldelim(),null!=e.changeContent&&Object.hasOwnProperty.call(e,"changeContent")&&$root.ChangeContent.encode(e.changeContent,t.uint32(34).fork()).ldelim(),null!=e.changeHost&&Object.hasOwnProperty.call(e,"changeHost")&&$root.ChangeHost.encode(e.changeHost,t.uint32(42).fork()).ldelim(),null!=e.appendChatMessage&&Object.hasOwnProperty.call(e,"appendChatMessage")&&$root.AppendChatMessage.encode(e.appendChatMessage,t.uint32(50).fork()).ldelim(),null!=e.receiveTrophy&&Object.hasOwnProperty.call(e,"receiveTrophy")&&$root.ReceiveTrophy.encode(e.receiveTrophy,t.uint32(58).fork()).ldelim(),null!=e.classEnded&&Object.hasOwnProperty.call(e,"classEnded")&&$root.ClassEnded.encode(e.classEnded,t.uint32(130).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.StateDiff;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.setState=$root.State.decode(e,e.uint32());break;case 2:n.addParticipants=$root.AddParticipants.decode(e,e.uint32());break;case 3:n.removeParticipants=$root.RemoveParticipants.decode(e,e.uint32());break;case 4:n.changeContent=$root.ChangeContent.decode(e,e.uint32());break;case 5:n.changeHost=$root.ChangeHost.decode(e,e.uint32());break;case 6:n.appendChatMessage=$root.AppendChatMessage.decode(e,e.uint32());break;case 7:n.receiveTrophy=$root.ReceiveTrophy.decode(e,e.uint32());break;case 16:n.classEnded=$root.ClassEnded.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.setState&&e.hasOwnProperty("setState")&&(t.action=1,r=$root.State.verify(e.setState)))return"setState."+r;if(null!=e.addParticipants&&e.hasOwnProperty("addParticipants")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.AddParticipants.verify(e.addParticipants))return"addParticipants."+r}if(null!=e.removeParticipants&&e.hasOwnProperty("removeParticipants")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.RemoveParticipants.verify(e.removeParticipants))return"removeParticipants."+r}if(null!=e.changeContent&&e.hasOwnProperty("changeContent")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.ChangeContent.verify(e.changeContent))return"changeContent."+r}if(null!=e.changeHost&&e.hasOwnProperty("changeHost")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.ChangeHost.verify(e.changeHost))return"changeHost."+r}if(null!=e.appendChatMessage&&e.hasOwnProperty("appendChatMessage")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.AppendChatMessage.verify(e.appendChatMessage))return"appendChatMessage."+r}if(null!=e.receiveTrophy&&e.hasOwnProperty("receiveTrophy")){if(1===t.action)return"action: multiple values";if(t.action=1,r=$root.ReceiveTrophy.verify(e.receiveTrophy))return"receiveTrophy."+r}if(null!=e.classEnded&&e.hasOwnProperty("classEnded")){if(1===t.action)return"action: multiple values";var r;if(t.action=1,r=$root.ClassEnded.verify(e.classEnded))return"classEnded."+r}return null},e.fromObject=function(e){if(e instanceof $root.StateDiff)return e;var t=new $root.StateDiff;if(null!=e.setState){if("object"!=typeof e.setState)throw TypeError(".StateDiff.setState: object expected");t.setState=$root.State.fromObject(e.setState)}if(null!=e.addParticipants){if("object"!=typeof e.addParticipants)throw TypeError(".StateDiff.addParticipants: object expected");t.addParticipants=$root.AddParticipants.fromObject(e.addParticipants)}if(null!=e.removeParticipants){if("object"!=typeof e.removeParticipants)throw TypeError(".StateDiff.removeParticipants: object expected");t.removeParticipants=$root.RemoveParticipants.fromObject(e.removeParticipants)}if(null!=e.changeContent){if("object"!=typeof e.changeContent)throw TypeError(".StateDiff.changeContent: object expected");t.changeContent=$root.ChangeContent.fromObject(e.changeContent)}if(null!=e.changeHost){if("object"!=typeof e.changeHost)throw TypeError(".StateDiff.changeHost: object expected");t.changeHost=$root.ChangeHost.fromObject(e.changeHost)}if(null!=e.appendChatMessage){if("object"!=typeof e.appendChatMessage)throw TypeError(".StateDiff.appendChatMessage: object expected");t.appendChatMessage=$root.AppendChatMessage.fromObject(e.appendChatMessage)}if(null!=e.receiveTrophy){if("object"!=typeof e.receiveTrophy)throw TypeError(".StateDiff.receiveTrophy: object expected");t.receiveTrophy=$root.ReceiveTrophy.fromObject(e.receiveTrophy)}if(null!=e.classEnded){if("object"!=typeof e.classEnded)throw TypeError(".StateDiff.classEnded: object expected");t.classEnded=$root.ClassEnded.fromObject(e.classEnded)}return t},e.toObject=function(e,t){t||(t={});var r={};return null!=e.setState&&e.hasOwnProperty("setState")&&(r.setState=$root.State.toObject(e.setState,t),t.oneofs&&(r.action="setState")),null!=e.addParticipants&&e.hasOwnProperty("addParticipants")&&(r.addParticipants=$root.AddParticipants.toObject(e.addParticipants,t),t.oneofs&&(r.action="addParticipants")),null!=e.removeParticipants&&e.hasOwnProperty("removeParticipants")&&(r.removeParticipants=$root.RemoveParticipants.toObject(e.removeParticipants,t),t.oneofs&&(r.action="removeParticipants")),null!=e.changeContent&&e.hasOwnProperty("changeContent")&&(r.changeContent=$root.ChangeContent.toObject(e.changeContent,t),t.oneofs&&(r.action="changeContent")),null!=e.changeHost&&e.hasOwnProperty("changeHost")&&(r.changeHost=$root.ChangeHost.toObject(e.changeHost,t),t.oneofs&&(r.action="changeHost")),null!=e.appendChatMessage&&e.hasOwnProperty("appendChatMessage")&&(r.appendChatMessage=$root.AppendChatMessage.toObject(e.appendChatMessage,t),t.oneofs&&(r.action="appendChatMessage")),null!=e.receiveTrophy&&e.hasOwnProperty("receiveTrophy")&&(r.receiveTrophy=$root.ReceiveTrophy.toObject(e.receiveTrophy,t),t.oneofs&&(r.action="receiveTrophy")),null!=e.classEnded&&e.hasOwnProperty("classEnded")&&(r.classEnded=$root.ClassEnded.toObject(e.classEnded,t),t.oneofs&&(r.action="classEnded")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.Participant=function(){function e(e){if(this.devices={},this.trophies=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.devices=$util.emptyObject,e.prototype.trophies=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.devices&&Object.hasOwnProperty.call(e,"devices"))for(var r=Object.keys(e.devices),n=0;n<r.length;++n)t.uint32(18).fork().uint32(8).uint32(r[n]),$root.Device.encode(e.devices[r[n]],t.uint32(18).fork()).ldelim().ldelim();if(null!=e.trophies&&e.trophies.length)for(n=0;n<e.trophies.length;++n)$root.Trophy.encode(e.trophies[n],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n=void 0===t?e.len:e.pos+t,o=new $root.Participant;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.name=e.string();break;case 2:e.skip().pos++,o.devices===$util.emptyObject&&(o.devices={}),r=e.uint32(),e.pos++,o.devices[r]=$root.Device.decode(e,e.uint32());break;case 3:o.trophies&&o.trophies.length||(o.trophies=[]),o.trophies.push($root.Trophy.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!$util.isString(e.name))return"name: string expected";if(null!=e.devices&&e.hasOwnProperty("devices")){if(!$util.isObject(e.devices))return"devices: object expected";for(var t=Object.keys(e.devices),r=0;r<t.length;++r){if(!$util.key32Re.test(t[r]))return"devices: integer key{k:uint32} expected";if(n=$root.Device.verify(e.devices[t[r]]))return"devices."+n}}if(null!=e.trophies&&e.hasOwnProperty("trophies")){if(!Array.isArray(e.trophies))return"trophies: array expected";for(r=0;r<e.trophies.length;++r){var n;if(n=$root.Trophy.verify(e.trophies[r]))return"trophies."+n}}return null},e.fromObject=function(e){if(e instanceof $root.Participant)return e;var t=new $root.Participant;if(null!=e.name&&(t.name=String(e.name)),e.devices){if("object"!=typeof e.devices)throw TypeError(".Participant.devices: object expected");t.devices={};for(var r=Object.keys(e.devices),n=0;n<r.length;++n){if("object"!=typeof e.devices[r[n]])throw TypeError(".Participant.devices: object expected");t.devices[r[n]]=$root.Device.fromObject(e.devices[r[n]])}}if(e.trophies){if(!Array.isArray(e.trophies))throw TypeError(".Participant.trophies: array expected");for(t.trophies=[],n=0;n<e.trophies.length;++n){if("object"!=typeof e.trophies[n])throw TypeError(".Participant.trophies: object expected");t.trophies[n]=$root.Trophy.fromObject(e.trophies[n])}}return t},e.toObject=function(e,t){t||(t={});var r,n={};if((t.arrays||t.defaults)&&(n.trophies=[]),(t.objects||t.defaults)&&(n.devices={}),t.defaults&&(n.name=""),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),e.devices&&(r=Object.keys(e.devices)).length){n.devices={};for(var o=0;o<r.length;++o)n.devices[r[o]]=$root.Device.toObject(e.devices[r[o]],t)}if(e.trophies&&e.trophies.length)for(n.trophies=[],o=0;o<e.trophies.length;++o)n.trophies[o]=$root.Trophy.toObject(e.trophies[o],t);return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.State=function(){function e(e){if(this.participants={},this.chatMessages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.roomId="",e.prototype.participants=$util.emptyObject,e.prototype.host="",e.prototype.content=null,e.prototype.chatMessages=$util.emptyArray,e.prototype.endTimestamp=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.roomId&&Object.hasOwnProperty.call(e,"roomId")&&t.uint32(10).string(e.roomId),null!=e.participants&&Object.hasOwnProperty.call(e,"participants"))for(var r=Object.keys(e.participants),n=0;n<r.length;++n)t.uint32(18).fork().uint32(10).string(r[n]),$root.Participant.encode(e.participants[r[n]],t.uint32(18).fork()).ldelim().ldelim();if(null!=e.host&&Object.hasOwnProperty.call(e,"host")&&t.uint32(26).string(e.host),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&$root.Content.encode(e.content,t.uint32(34).fork()).ldelim(),null!=e.chatMessages&&e.chatMessages.length)for(n=0;n<e.chatMessages.length;++n)$root.ChatMessage.encode(e.chatMessages[n],t.uint32(42).fork()).ldelim();return null!=e.endTimestamp&&Object.hasOwnProperty.call(e,"endTimestamp")&&t.uint32(48).uint32(e.endTimestamp),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n=void 0===t?e.len:e.pos+t,o=new $root.State;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.roomId=e.string();break;case 2:e.skip().pos++,o.participants===$util.emptyObject&&(o.participants={}),r=e.string(),e.pos++,o.participants[r]=$root.Participant.decode(e,e.uint32());break;case 3:o.host=e.string();break;case 4:o.content=$root.Content.decode(e,e.uint32());break;case 5:o.chatMessages&&o.chatMessages.length||(o.chatMessages=[]),o.chatMessages.push($root.ChatMessage.decode(e,e.uint32()));break;case 6:o.endTimestamp=e.uint32();break;default:e.skipType(7&i)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.roomId&&e.hasOwnProperty("roomId")&&!$util.isString(e.roomId))return"roomId: string expected";if(null!=e.participants&&e.hasOwnProperty("participants")){if(!$util.isObject(e.participants))return"participants: object expected";for(var t=Object.keys(e.participants),r=0;r<t.length;++r)if(n=$root.Participant.verify(e.participants[t[r]]))return"participants."+n}if(null!=e.host&&e.hasOwnProperty("host")&&!$util.isString(e.host))return"host: string expected";if(null!=e.content&&e.hasOwnProperty("content")&&(n=$root.Content.verify(e.content)))return"content."+n;if(null!=e.chatMessages&&e.hasOwnProperty("chatMessages")){if(!Array.isArray(e.chatMessages))return"chatMessages: array expected";for(r=0;r<e.chatMessages.length;++r){var n;if(n=$root.ChatMessage.verify(e.chatMessages[r]))return"chatMessages."+n}}return null!=e.endTimestamp&&e.hasOwnProperty("endTimestamp")&&!$util.isInteger(e.endTimestamp)?"endTimestamp: integer expected":null},e.fromObject=function(e){if(e instanceof $root.State)return e;var t=new $root.State;if(null!=e.roomId&&(t.roomId=String(e.roomId)),e.participants){if("object"!=typeof e.participants)throw TypeError(".State.participants: object expected");t.participants={};for(var r=Object.keys(e.participants),n=0;n<r.length;++n){if("object"!=typeof e.participants[r[n]])throw TypeError(".State.participants: object expected");t.participants[r[n]]=$root.Participant.fromObject(e.participants[r[n]])}}if(null!=e.host&&(t.host=String(e.host)),null!=e.content){if("object"!=typeof e.content)throw TypeError(".State.content: object expected");t.content=$root.Content.fromObject(e.content)}if(e.chatMessages){if(!Array.isArray(e.chatMessages))throw TypeError(".State.chatMessages: array expected");for(t.chatMessages=[],n=0;n<e.chatMessages.length;++n){if("object"!=typeof e.chatMessages[n])throw TypeError(".State.chatMessages: object expected");t.chatMessages[n]=$root.ChatMessage.fromObject(e.chatMessages[n])}}return null!=e.endTimestamp&&(t.endTimestamp=e.endTimestamp>>>0),t},e.toObject=function(e,t){t||(t={});var r,n={};if((t.arrays||t.defaults)&&(n.chatMessages=[]),(t.objects||t.defaults)&&(n.participants={}),t.defaults&&(n.roomId="",n.host="",n.content=null,n.endTimestamp=0),null!=e.roomId&&e.hasOwnProperty("roomId")&&(n.roomId=e.roomId),e.participants&&(r=Object.keys(e.participants)).length){n.participants={};for(var o=0;o<r.length;++o)n.participants[r[o]]=$root.Participant.toObject(e.participants[r[o]],t)}if(null!=e.host&&e.hasOwnProperty("host")&&(n.host=e.host),null!=e.content&&e.hasOwnProperty("content")&&(n.content=$root.Content.toObject(e.content,t)),e.chatMessages&&e.chatMessages.length)for(n.chatMessages=[],o=0;o<e.chatMessages.length;++o)n.chatMessages[o]=$root.ChatMessage.toObject(e.chatMessages[o],t);return null!=e.endTimestamp&&e.hasOwnProperty("endTimestamp")&&(n.endTimestamp=e.endTimestamp),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.AddParticipants=function(){function e(e){if(this.participants={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.participants=$util.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.participants&&Object.hasOwnProperty.call(e,"participants"))for(var r=Object.keys(e.participants),n=0;n<r.length;++n)t.uint32(10).fork().uint32(10).string(r[n]),$root.Participant.encode(e.participants[r[n]],t.uint32(18).fork()).ldelim().ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n=void 0===t?e.len:e.pos+t,o=new $root.AddParticipants;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:e.skip().pos++,o.participants===$util.emptyObject&&(o.participants={}),r=e.string(),e.pos++,o.participants[r]=$root.Participant.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.participants&&e.hasOwnProperty("participants")){if(!$util.isObject(e.participants))return"participants: object expected";for(var t=Object.keys(e.participants),r=0;r<t.length;++r){var n=$root.Participant.verify(e.participants[t[r]]);if(n)return"participants."+n}}return null},e.fromObject=function(e){if(e instanceof $root.AddParticipants)return e;var t=new $root.AddParticipants;if(e.participants){if("object"!=typeof e.participants)throw TypeError(".AddParticipants.participants: object expected");t.participants={};for(var r=Object.keys(e.participants),n=0;n<r.length;++n){if("object"!=typeof e.participants[r[n]])throw TypeError(".AddParticipants.participants: object expected");t.participants[r[n]]=$root.Participant.fromObject(e.participants[r[n]])}}return t},e.toObject=function(e,t){t||(t={});var r,n={};if((t.objects||t.defaults)&&(n.participants={}),e.participants&&(r=Object.keys(e.participants)).length){n.participants={};for(var o=0;o<r.length;++o)n.participants[r[o]]=$root.Participant.toObject(e.participants[r[o]],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.RemoveParticipants=function(){function e(e){if(this.participants=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.participants=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.participants&&e.participants.length)for(var r=0;r<e.participants.length;++r)t.uint32(10).string(e.participants[r]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.RemoveParticipants;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.participants&&n.participants.length||(n.participants=[]),n.participants.push(e.string());break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.participants&&e.hasOwnProperty("participants")){if(!Array.isArray(e.participants))return"participants: array expected";for(var t=0;t<e.participants.length;++t)if(!$util.isString(e.participants[t]))return"participants: string[] expected"}return null},e.fromObject=function(e){if(e instanceof $root.RemoveParticipants)return e;var t=new $root.RemoveParticipants;if(e.participants){if(!Array.isArray(e.participants))throw TypeError(".RemoveParticipants.participants: array expected");t.participants=[];for(var r=0;r<e.participants.length;++r)t.participants[r]=String(e.participants[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.participants=[]),e.participants&&e.participants.length){r.participants=[];for(var n=0;n<e.participants.length;++n)r.participants[n]=e.participants[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.ChangeContent=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.content=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&$root.Content.encode(e.content,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.ChangeContent;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.content=$root.Content.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.content&&e.hasOwnProperty("content")){var t=$root.Content.verify(e.content);if(t)return"content."+t}return null},e.fromObject=function(e){if(e instanceof $root.ChangeContent)return e;var t=new $root.ChangeContent;if(null!=e.content){if("object"!=typeof e.content)throw TypeError(".ChangeContent.content: object expected");t.content=$root.Content.fromObject(e.content)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.content=null),null!=e.content&&e.hasOwnProperty("content")&&(r.content=$root.Content.toObject(e.content,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.ChangeHost=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.hostId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.hostId&&Object.hasOwnProperty.call(e,"hostId")&&t.uint32(10).string(e.hostId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.ChangeHost;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.hostId=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.hostId&&e.hasOwnProperty("hostId")&&!$util.isString(e.hostId)?"hostId: string expected":null},e.fromObject=function(e){if(e instanceof $root.ChangeHost)return e;var t=new $root.ChangeHost;return null!=e.hostId&&(t.hostId=String(e.hostId)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.hostId=""),null!=e.hostId&&e.hasOwnProperty("hostId")&&(r.hostId=e.hostId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.AppendChatMessage=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.messages=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.messages&&e.messages.length)for(var r=0;r<e.messages.length;++r)$root.ChatMessage.encode(e.messages[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.AppendChatMessage;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.messages&&n.messages.length||(n.messages=[]),n.messages.push($root.ChatMessage.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.messages&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var r=$root.ChatMessage.verify(e.messages[t]);if(r)return"messages."+r}}return null},e.fromObject=function(e){if(e instanceof $root.AppendChatMessage)return e;var t=new $root.AppendChatMessage;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".AppendChatMessage.messages: array expected");t.messages=[];for(var r=0;r<e.messages.length;++r){if("object"!=typeof e.messages[r])throw TypeError(".AppendChatMessage.messages: object expected");t.messages[r]=$root.ChatMessage.fromObject(e.messages[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.messages=[]),e.messages&&e.messages.length){r.messages=[];for(var n=0;n<e.messages.length;++n)r.messages[n]=$root.ChatMessage.toObject(e.messages[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.ReceiveTrophy=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.trophy=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.trophy&&Object.hasOwnProperty.call(e,"trophy")&&$root.Trophy.encode(e.trophy,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.ReceiveTrophy;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trophy=$root.Trophy.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.trophy&&e.hasOwnProperty("trophy")){var t=$root.Trophy.verify(e.trophy);if(t)return"trophy."+t}return null},e.fromObject=function(e){if(e instanceof $root.ReceiveTrophy)return e;var t=new $root.ReceiveTrophy;if(null!=e.trophy){if("object"!=typeof e.trophy)throw TypeError(".ReceiveTrophy.trophy: object expected");t.trophy=$root.Trophy.fromObject(e.trophy)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.trophy=null),null!=e.trophy&&e.hasOwnProperty("trophy")&&(r.trophy=$root.Trophy.toObject(e.trophy,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.ClassEnded=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.ClassEnded;e.pos<r;){var o=e.uint32();e.skipType(7&o)}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof $root.ClassEnded?e:new $root.ClassEnded},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.Device=function(){function e(e){if(this.webRTCStreams=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.activity=null,e.prototype.webRTCStreams=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.activity&&Object.hasOwnProperty.call(e,"activity")&&$root.Activity.encode(e.activity,t.uint32(10).fork()).ldelim(),null!=e.webRTCStreams&&e.webRTCStreams.length)for(var r=0;r<e.webRTCStreams.length;++r)$root.WebRTCStream.encode(e.webRTCStreams[r],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Device;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.activity=$root.Activity.decode(e,e.uint32());break;case 2:n.webRTCStreams&&n.webRTCStreams.length||(n.webRTCStreams=[]),n.webRTCStreams.push($root.WebRTCStream.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.activity&&e.hasOwnProperty("activity")&&(r=$root.Activity.verify(e.activity)))return"activity."+r;if(null!=e.webRTCStreams&&e.hasOwnProperty("webRTCStreams")){if(!Array.isArray(e.webRTCStreams))return"webRTCStreams: array expected";for(var t=0;t<e.webRTCStreams.length;++t){var r;if(r=$root.WebRTCStream.verify(e.webRTCStreams[t]))return"webRTCStreams."+r}}return null},e.fromObject=function(e){if(e instanceof $root.Device)return e;var t=new $root.Device;if(null!=e.activity){if("object"!=typeof e.activity)throw TypeError(".Device.activity: object expected");t.activity=$root.Activity.fromObject(e.activity)}if(e.webRTCStreams){if(!Array.isArray(e.webRTCStreams))throw TypeError(".Device.webRTCStreams: array expected");t.webRTCStreams=[];for(var r=0;r<e.webRTCStreams.length;++r){if("object"!=typeof e.webRTCStreams[r])throw TypeError(".Device.webRTCStreams: object expected");t.webRTCStreams[r]=$root.WebRTCStream.fromObject(e.webRTCStreams[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.webRTCStreams=[]),t.defaults&&(r.activity=null),null!=e.activity&&e.hasOwnProperty("activity")&&(r.activity=$root.Activity.toObject(e.activity,t)),e.webRTCStreams&&e.webRTCStreams.length){r.webRTCStreams=[];for(var n=0;n<e.webRTCStreams.length;++n)r.webRTCStreams[n]=$root.WebRTCStream.toObject(e.webRTCStreams[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.Activity=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id="",e.prototype.streamId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),null!=e.streamId&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(18).string(e.streamId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Activity;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id=e.string();break;case 2:n.streamId=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.id&&e.hasOwnProperty("id")&&!$util.isString(e.id)?"id: string expected":null!=e.streamId&&e.hasOwnProperty("streamId")&&!$util.isString(e.streamId)?"streamId: string expected":null},e.fromObject=function(e){if(e instanceof $root.Activity)return e;var t=new $root.Activity;return null!=e.id&&(t.id=String(e.id)),null!=e.streamId&&(t.streamId=String(e.streamId)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.id="",r.streamId=""),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),null!=e.streamId&&e.hasOwnProperty("streamId")&&(r.streamId=e.streamId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.WebRTCStream=function(){function e(e){if(this.tracks=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id="",e.prototype.label="",e.prototype.tracks=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),null!=e.label&&Object.hasOwnProperty.call(e,"label")&&t.uint32(18).string(e.label),null!=e.tracks&&e.tracks.length)for(var r=0;r<e.tracks.length;++r)$root.WebRTCTrack.encode(e.tracks[r],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.WebRTCStream;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id=e.string();break;case 2:n.label=e.string();break;case 3:n.tracks&&n.tracks.length||(n.tracks=[]),n.tracks.push($root.WebRTCTrack.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.id&&e.hasOwnProperty("id")&&!$util.isString(e.id))return"id: string expected";if(null!=e.label&&e.hasOwnProperty("label")&&!$util.isString(e.label))return"label: string expected";if(null!=e.tracks&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var r=$root.WebRTCTrack.verify(e.tracks[t]);if(r)return"tracks."+r}}return null},e.fromObject=function(e){if(e instanceof $root.WebRTCStream)return e;var t=new $root.WebRTCStream;if(null!=e.id&&(t.id=String(e.id)),null!=e.label&&(t.label=String(e.label)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".WebRTCStream.tracks: array expected");t.tracks=[];for(var r=0;r<e.tracks.length;++r){if("object"!=typeof e.tracks[r])throw TypeError(".WebRTCStream.tracks: object expected");t.tracks[r]=$root.WebRTCTrack.fromObject(e.tracks[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.tracks=[]),t.defaults&&(r.id="",r.label=""),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),null!=e.label&&e.hasOwnProperty("label")&&(r.label=e.label),e.tracks&&e.tracks.length){r.tracks=[];for(var n=0;n<e.tracks.length;++n)r.tracks[n]=$root.WebRTCTrack.toObject(e.tracks[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.WebRTCTrack=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.id="",e.prototype.sfu="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),null!=e.sfu&&Object.hasOwnProperty.call(e,"sfu")&&t.uint32(18).string(e.sfu),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.WebRTCTrack;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id=e.string();break;case 2:n.sfu=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.id&&e.hasOwnProperty("id")&&!$util.isString(e.id)?"id: string expected":null!=e.sfu&&e.hasOwnProperty("sfu")&&!$util.isString(e.sfu)?"sfu: string expected":null},e.fromObject=function(e){if(e instanceof $root.WebRTCTrack)return e;var t=new $root.WebRTCTrack;return null!=e.id&&(t.id=String(e.id)),null!=e.sfu&&(t.sfu=String(e.sfu)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.id="",r.sfu=""),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),null!=e.sfu&&e.hasOwnProperty("sfu")&&(r.sfu=e.sfu),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.Trophy=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.trophy="",e.prototype.timestamp=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.trophy&&Object.hasOwnProperty.call(e,"trophy")&&t.uint32(10).string(e.trophy),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(16).uint32(e.timestamp),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Trophy;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trophy=e.string();break;case 2:n.timestamp=e.uint32();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.trophy&&e.hasOwnProperty("trophy")&&!$util.isString(e.trophy)?"trophy: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!$util.isInteger(e.timestamp)?"timestamp: integer expected":null},e.fromObject=function(e){if(e instanceof $root.Trophy)return e;var t=new $root.Trophy;return null!=e.trophy&&(t.trophy=String(e.trophy)),null!=e.timestamp&&(t.timestamp=e.timestamp>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.trophy="",r.timestamp=0),null!=e.trophy&&e.hasOwnProperty("trophy")&&(r.trophy=e.trophy),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&(r.timestamp=e.timestamp),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.ChatMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.message="",e.prototype.fromUser="",e.prototype.timestamp=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(10).string(e.message),null!=e.fromUser&&Object.hasOwnProperty.call(e,"fromUser")&&t.uint32(18).string(e.fromUser),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).uint32(e.timestamp),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.ChatMessage;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.message=e.string();break;case 2:n.fromUser=e.string();break;case 3:n.timestamp=e.uint32();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!$util.isString(e.message)?"message: string expected":null!=e.fromUser&&e.hasOwnProperty("fromUser")&&!$util.isString(e.fromUser)?"fromUser: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!$util.isInteger(e.timestamp)?"timestamp: integer expected":null},e.fromObject=function(e){if(e instanceof $root.ChatMessage)return e;var t=new $root.ChatMessage;return null!=e.message&&(t.message=String(e.message)),null!=e.fromUser&&(t.fromUser=String(e.fromUser)),null!=e.timestamp&&(t.timestamp=e.timestamp>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.message="",r.fromUser="",r.timestamp=0),null!=e.message&&e.hasOwnProperty("message")&&(r.message=e.message),null!=e.fromUser&&e.hasOwnProperty("fromUser")&&(r.fromUser=e.fromUser),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&(r.timestamp=e.timestamp),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.ContentType=(valuesById={},values=Object.create(valuesById),values[valuesById[0]="Blank"]=0,values[valuesById[1]="WebRtcStream"]=1,values[valuesById[2]="ActivityStream"]=2,values[valuesById[3]="H5P"]=3,values[valuesById[4]="Image"]=4,values[valuesById[5]="Video"]=5,values[valuesById[6]="Audio"]=6,values),$root.Content=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.type=0,e.prototype.id="",e.prototype.url="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(18).string(e.id),null!=e.url&&Object.hasOwnProperty.call(e,"url")&&t.uint32(26).string(e.url),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Content;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.type=e.int32();break;case 2:n.id=e.string();break;case 3:n.url=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:}return null!=e.id&&e.hasOwnProperty("id")&&!$util.isString(e.id)?"id: string expected":null!=e.url&&e.hasOwnProperty("url")&&!$util.isString(e.url)?"url: string expected":null},e.fromObject=function(e){if(e instanceof $root.Content)return e;var t=new $root.Content;switch(e.type){case"Blank":case 0:t.type=0;break;case"WebRtcStream":case 1:t.type=1;break;case"ActivityStream":case 2:t.type=2;break;case"H5P":case 3:t.type=3;break;case"Image":case 4:t.type=4;break;case"Video":case 5:t.type=5;break;case"Audio":case 6:t.type=6}return null!=e.id&&(t.id=String(e.id)),null!=e.url&&(t.url=String(e.url)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.type=t.enums===String?"Blank":0,r.id="",r.url=""),null!=e.type&&e.hasOwnProperty("type")&&(r.type=t.enums===String?$root.ContentType[e.type]:e.type),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),null!=e.url&&e.hasOwnProperty("url")&&(r.url=e.url),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}();var dist=$root,_default=dist$1.default=dist,ConnectionStatus;class Network{constructor(e,t,r){this.dispatch=e,this.selector=t,this.ws=r}async initWs(e){return this.ws||(this.ws=new Promise(((t,r)=>{this.dispatch(setConnectionStatus(exports.ConnectionStatus.Connecting));const n=new WebSocket(e,["live"]);n.binaryType="arraybuffer",n.addEventListener("open",(e=>{t(n),this.dispatch(setConnectionError(!1)),this.dispatch(setConnectionStatus(exports.ConnectionStatus.Connected)),this.sendHeartbeat(n)})),n.addEventListener("close",(e=>{this.ws=void 0,r(e),this.dispatch(setConnectionStatus(exports.ConnectionStatus.Disconnected))})),n.addEventListener("error",(e=>{r(e),this.dispatch(setConnectionError(!0))})),n.addEventListener("message",(({data:e})=>this.onNetworkMessage(n,e)))}))),this.ws}async send(e){if(!this.ws)throw Error("websocket has not been initialised");const t=dist$1.Action.encode({id:nanoid(),...e}).finish();(await this.ws).send(t)}async close(e){(await this.ws)?.close(200,e)}onNetworkMessage(e,t){if(t instanceof ArrayBuffer)try{console.log(t)}catch(t){e.close(4400,"Parse error")}else e.close(4401,"Binary only protocol")}sendHeartbeat(e,t=1e3){if(e.readyState!==WebSocket.OPEN)return;const r=new Uint8Array(0);e.send(r),setTimeout((()=>this.sendHeartbeat(e,t)),t)}}exports.ConnectionStatus=void 0,ConnectionStatus=exports.ConnectionStatus||(exports.ConnectionStatus={}),ConnectionStatus[ConnectionStatus.Connecting=0]="Connecting",ConnectionStatus[ConnectionStatus.Connected=1]="Connected",ConnectionStatus[ConnectionStatus.Disconnected=2]="Disconnected";const setConnectionError=createAction("setConnectionError"),connectionError=createReducer(!1,(e=>e.addCase(setConnectionError,((e,{payload:t})=>t)))),setConnectionStatus=createAction("setConnectionState"),connectionStatus=createReducer(exports.ConnectionStatus.Disconnected,(e=>e.addCase(setConnectionStatus,((e,{payload:t})=>t)))),networkReducer=combineReducers({connectionStatus:connectionStatus,connectionError:connectionError});function getDevices(e,t){const r=t[e];if(!r)throw new Error(`Unable to find user with ID: ${e} in the class participant list`);return r.devices||(r.devices={}),r.devices}function getDevice(e,t,r){if(!t)throw new Error("No device ID was provided");const n=getDevices(e,r)[t];if(!n)throw new Error(`Unable to find Device ID: '${t}' in registered devices for user ${e}`);return n}function generateStateDiff(e,t){const r=parseParticipants(e.participants||{},t.participants||{});return(e.chatMessages||[]).length<(t.chatMessages||[]).length&&r.push({appendChatMessage:{messages:(t.chatMessages||[]).slice(Math.max((e.chatMessages||[]).length,0))}}),e.host!==t.host&&r.push({changeHost:{hostId:t.host}}),e.content!==t.content&&r.push({changeContent:{content:t.content}}),t.endTimestamp&&r.push({classEnded:{}}),r}function parseParticipants(e,t){const r=[],n=new Set(Object.keys(e)),o=Object.keys(t),i={};for(const r of o)n.has(r)?(e[r]!==t[r]&&(i[r]=t[r]),n.delete(r)):i[r]=t[r];return Object.keys(i).length>0&&r.push({addParticipants:{participants:i}}),n.size>0&&r.push({removeParticipants:{participants:[...n]}}),r}const initialState$1={roomId:null,participants:{},host:null,chatMessages:[],content:_default.ContentType.Blank,endTimestamp:null},userJoinReducer=(e,t)=>{const{context:{userId:r,name:n}}=t.payload;let{participants:o}=e;o||(o={});const i={name:n,devices:{},trophies:[]};return o[r]=i,e},userLeaveReducer=(e,t)=>{const{context:{userId:r}}=t.payload;let{participants:n}=e;return n||(n={}),delete n[r],e},sendChatMessageReducer=(e,t)=>{const{context:{userId:r},payload:{message:n}}=t.payload;if(!n||0===n.length)return e;const o={fromUser:r,message:n,timestamp:Date.now()};return e.chatMessages||(e.chatMessages=[]),e.chatMessages.push(o),e},setHostReducer=(e,t)=>{const{payload:{id:r}}=t.payload;return e.host=r,e},addTrophyReducer=(e,t)=>{const r=e.participants||{},n=t.payload.payload;let o;return o=n.userId?[n.userId]:Object.keys(r),o.forEach((e=>{const t=r[e];if(!t)throw new Error(`Unable to find user with ID: ${e} in the class participant list`);const o=t.trophies||[];0===o.length&&(t.trophies=o),o.push(n)})),e},setDeviceReducer=(e,t)=>{const{context:{userId:r},payload:{device:n,deviceId:o}}=t.payload;if(!n)throw new Error("No device was provided");if(!o)throw new Error("No device id was provided");const{participants:i}=e;return getDevices(r,i||{})[o]=n,e},removeDeviceReducer=(e,t)=>{const{context:{userId:r},payload:{id:n}}=t.payload;if(!n)throw new Error("No device id was provided");const{participants:o}=e;return delete getDevices(r,o||{})[n],e},setWebRtcStreamReducer=(e,t)=>{const{context:{userId:r},payload:{deviceId:n,streams:o}}=t.payload,{participants:i}=e;return getDevice(r,n,i||{}).webRTCStreams=o,e},setActivityReducer=(e,t)=>{const{context:{userId:r},payload:{deviceId:n,activity:o}}=t.payload,{participants:i}=e;return getDevice(r,n,i||{}).activity=o,e},setContentReducer=(e,t)=>{const{payload:{content:r}}=t.payload;return e.content=r,e},roomSlice$1=createSlice({name:"room",initialState:initialState$1,reducers:{userJoin:userJoinReducer,userLeave:userLeaveReducer,sendChatMessage:sendChatMessageReducer,setHost:setHostReducer,addTrophy:addTrophyReducer,setDevice:setDeviceReducer,removeDevice:removeDeviceReducer,setWebRtcStream:setWebRtcStreamReducer,setActivity:setActivityReducer,setContent:setContentReducer}}),Actions$1=roomSlice$1.actions,roomReducer$1=roomSlice$1.reducer,INITIAL_ROOM_STATE$1=initialState$1;var index$1=Object.freeze({__proto__:null,roomReducer:roomReducer$1,Actions:Actions$1,INITIAL_ROOM_STATE:INITIAL_ROOM_STATE$1,generateStateDiff:generateStateDiff});const initialState={roomId:null,participants:{},host:null,chatMessages:[],content:_default.ContentType.Blank,endTimestamp:null},setStateReducer=(e,t)=>({...e,...t.payload}),addParticipantsReducer=(e,t)=>{const{participants:r}=t.payload;return r?(Object.entries(r).forEach((([t,r])=>{e.participants[t]=r})),e):e},removeParticipantsReducer=(e,t)=>{const{participants:r}=t.payload;return r?(r.forEach((t=>{delete e.participants[t]})),e):e},changeContentReducer=(e,t)=>(e.content=t.payload.content,e),changeHostReducer=(e,t)=>(e.host=t.payload.hostId,e),appendChatMessageReducer=(e,t)=>(e.chatMessages=[...e.chatMessages??[],...t.payload.messages??[]],e),receiveTrophyReducer=(e,t)=>e,classEndedReducer=(e,t)=>(e.endTimestamp=Date.now(),e),roomSlice=createSlice({name:"room",initialState:initialState,reducers:{setState:setStateReducer,addParticipants:addParticipantsReducer,removeParticipants:removeParticipantsReducer,changeContent:changeContentReducer,changeHost:changeHostReducer,appendChatMessage:appendChatMessageReducer,receiveTrophy:receiveTrophyReducer,classEnded:classEndedReducer}}),Actions=roomSlice.actions,roomReducer=roomSlice.reducer,INITIAL_ROOM_STATE=initialState,reducer=combineReducers({network:networkReducer});var index=Object.freeze({__proto__:null,reducer:reducer,roomReducer:roomReducer,Actions:Actions,INITIAL_ROOM_STATE:INITIAL_ROOM_STATE,Network:Network,get ConnectionStatus(){return exports.ConnectionStatus},setConnectionError:setConnectionError,connectionError:connectionError,setConnectionStatus:setConnectionStatus,connectionStatus:connectionStatus,networkReducer:networkReducer});const NetworkContext=React__default.default.createContext(null);NetworkContext.displayName="KidsloopLiveNetwork";const NetworkProvider=({children:e,selector:t})=>{const r=reactRedux.useDispatch(),n=React.useMemo((()=>new Network(r,t)),[]);return React__default.default.createElement(NetworkContext.Provider,{value:n},e)};function useAddMessage(){const e=React.useContext(NetworkContext),[t,r]=React.useState(!1),[n,o]=React.useState(),[i,a]=React.useState(!1);return{addMessage:async t=>{try{a(!0),await e.send({sendChatMessage:{message:t}}),r(!0)}catch(e){o(e)}finally{a(!1)}},result:t,loading:i,error:n}}function useJoinClass(){const e=React.useContext(NetworkContext),[t,r]=React.useState(!1),[n,o]=React.useState(),[i,a]=React.useState(!1);return{joinClass:async t=>{try{a(!0),await e.initWs(t),r(!0)}catch(e){o(e)}finally{a(!1)}},result:t,loading:i,error:n}}function useLeaveClass(){const e=React.useContext(NetworkContext),[t,r]=React.useState(!1),[n,o]=React.useState(),[i,a]=React.useState(!1);return{leaveClass:async t=>{try{a(!0),await e.close(t),r(!0)}catch(e){o(e)}finally{a(!1)}},result:t,loading:i,error:n}}function useSetContent(){const e=React.useContext(NetworkContext),[t,r]=React.useState(!1),[n,o]=React.useState(),[i,a]=React.useState(!1);return{setContent:async t=>{try{a(!0),await e.send({setContent:{content:t}}),r(!0)}catch(e){o(e)}finally{a(!1)}},result:t,loading:i,error:n}}function useConnectionState(e){const t=React.useContext(NetworkContext),r=reactRedux.useSelector((e=>t.selector(e).network.connectionStatus)),n=reactRedux.useSelector((e=>t.selector(e).network.connectionError));return r===exports.ConnectionStatus.Disconnected&&e&&t.initWs(e),{connectionStatus:r,connectionError:n}}function useNetwork(){return React.useContext(NetworkContext)}function useMessages(){const e=useNetwork();return reactRedux.useSelector((t=>e.selector(t).network.messages||[]))}exports.Client=index,exports.NetworkContext=NetworkContext,exports.NetworkProvider=NetworkProvider,exports.Server=index$1,exports.useAddMessage=useAddMessage,exports.useConnectionState=useConnectionState,exports.useJoinClass=useJoinClass,exports.useLeaveClass=useLeaveClass,exports.useMessages=useMessages,exports.useSetContent=useSetContent;
//# sourceMappingURL=index.js.map
