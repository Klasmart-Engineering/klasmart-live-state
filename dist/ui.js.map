{"version":3,"file":"ui.js","sources":["../src/models.ts","../src/types.ts","../src/redux/authorization.ts","../src/redux/class.ts","../src/protobuf/state.ts","../src/protobuf/actions.ts","../src/react/networkContext.ts","../src/react/hooks/actions.ts","../src/react/hooks/handler.ts","../src/react/hooks/state.ts","../src/react/hooks/userDevice.ts","../node_modules/tslib/tslib.es6.js","../node_modules/ms/index.js","../node_modules/debug/src/common.js","../node_modules/debug/src/browser.js","../node_modules/bowser/es5.js","../node_modules/mediasoup-client/lib/Logger.js","../node_modules/mediasoup-client/lib/EnhancedEventEmitter.js","../node_modules/mediasoup-client/lib/errors.js","../node_modules/mediasoup-client/lib/utils.js","../node_modules/h264-profile-level-id/index.js","../node_modules/mediasoup-client/lib/ortc.js","../node_modules/awaitqueue/lib/index.js","../node_modules/mediasoup-client/lib/Producer.js","../node_modules/mediasoup-client/lib/Consumer.js","../node_modules/mediasoup-client/lib/DataProducer.js","../node_modules/mediasoup-client/lib/DataConsumer.js","../node_modules/mediasoup-client/lib/Transport.js","../node_modules/sdp-transform/lib/grammar.js","../node_modules/sdp-transform/lib/parser.js","../node_modules/sdp-transform/lib/writer.js","../node_modules/sdp-transform/lib/index.js","../node_modules/mediasoup-client/lib/handlers/sdp/commonUtils.js","../node_modules/mediasoup-client/lib/handlers/sdp/unifiedPlanUtils.js","../node_modules/mediasoup-client/lib/handlers/HandlerInterface.js","../node_modules/mediasoup-client/lib/handlers/sdp/MediaSection.js","../node_modules/mediasoup-client/lib/handlers/sdp/RemoteSdp.js","../node_modules/mediasoup-client/lib/scalabilityModes.js","../node_modules/mediasoup-client/lib/handlers/Chrome74.js","../node_modules/mediasoup-client/lib/handlers/Chrome70.js","../node_modules/mediasoup-client/lib/handlers/sdp/planBUtils.js","../node_modules/mediasoup-client/lib/handlers/Chrome67.js","../node_modules/mediasoup-client/lib/handlers/Chrome55.js","../node_modules/mediasoup-client/lib/handlers/Firefox60.js","../node_modules/mediasoup-client/lib/handlers/Safari12.js","../node_modules/mediasoup-client/lib/handlers/Safari11.js","../node_modules/mediasoup-client/lib/handlers/ortc/edgeUtils.js","../node_modules/mediasoup-client/lib/handlers/Edge11.js","../node_modules/mediasoup-client/lib/handlers/ReactNative.js","../node_modules/mediasoup-client/lib/Device.js","../node_modules/mediasoup-client/lib/RtpParameters.js","../node_modules/mediasoup-client/lib/SctpParameters.js","../node_modules/mediasoup-client/lib/types.js","../node_modules/mediasoup-client/lib/index.js","../src/network/websocketTransport.ts","../src/network/promiseCompleter.ts","../src/redux/webrtc.ts","../src/network/sfu.ts","../src/react/rtcContext.tsx","../src/react/hooks/webrtc.ts","../node_modules/nanoid/index.prod.js","../node_modules/@protobufjs/aspromise/index.js","../node_modules/@protobufjs/base64/index.js","../node_modules/@protobufjs/eventemitter/index.js","../node_modules/@protobufjs/float/index.js","../node_modules/@protobufjs/inquire/index.js","../node_modules/@protobufjs/utf8/index.js","../node_modules/@protobufjs/pool/index.js","../node_modules/protobufjs/src/util/longbits.js","../node_modules/protobufjs/src/util/minimal.js","../node_modules/protobufjs/src/writer.js","../node_modules/protobufjs/src/writer_buffer.js","../node_modules/protobufjs/src/reader.js","../node_modules/protobufjs/src/reader_buffer.js","../node_modules/protobufjs/src/rpc/service.js","../node_modules/protobufjs/src/rpc.js","../node_modules/protobufjs/src/roots.js","../node_modules/protobufjs/src/index-minimal.js","../node_modules/protobufjs/minimal.js","../src/protobuf/index.js","../node_modules/redux/es/redux.js","../node_modules/eventemitter3/index.js","../src/redux/network.ts","../src/network/network.ts","../src/react/networkProvider.tsx","../src/react/rtcProvider.tsx","../src/redux/reducer.ts","../src/roles.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-empty-interface */\n\nimport { NewType } from \"./types\";\n\nexport enum FeedbackType {\n  END_CLASS,\n  LEAVE_CLASS,\n}\n\nexport enum QuickFeedbackType {\n  VIDEO,\n  AUDIO,\n  PRESENTATION,\n  OTHER,\n}\n\nexport interface QuickFeedback {\n  type: QuickFeedbackType;\n  stars: number | null;\n}\n\nexport interface PageEventIn {\n  sequenceNumber: number;\n  isKeyframe: boolean;\n  eventsSinceKeyframe: number;\n  eventData: string;\n}\n\nexport enum ContentType {\n  Blank = \"Blank\",\n\n  // ActivityStreamID\n  Stream = \"Stream\", // Consume a DOM (Activity) stream\n  // URLs\n  Activity = \"Activity\", //Produce a DOM (Activity) Stream\n  Video = \"Video\", //\n  Audio = \"Audio\",\n  Image = \"Image\",\n  //WebRTC Stream IDs\n  Camera = \"Camera\",\n  Screen = \"Screen\",\n}\n\nexport type UserID = NewType<string, \"UserID\">;\nexport const newUserId = (value: string): UserID => value as UserID;\n\nexport type DeviceID = NewType<string, \"DeviceID\">;\nexport const newDeviceId = (value: string): DeviceID => value as DeviceID;\n\nexport type ActivityStreamID = NewType<string, \"ActivityStreamID\">;\nexport const newActivityStreamId = (value: string): ActivityStreamID =>\n  value as ActivityStreamID;\n\nexport type WebRTCStreamID = NewType<string, \"WebRTCStreamID\">;\nexport const newWebRtcStreamId = (value: string): WebRTCStreamID =>\n  value as WebRTCStreamID;\n\nexport type Timestamp = NewType<number, \"Timestamp\">;\nexport const newTimestamp = (value: number): Timestamp => value as Timestamp;\n\nexport type TrophyType = NewType<string, \"TrophyType\">;\nexport const newTrophyType = (value: string): TrophyType => value as TrophyType;\n\nexport type UserRole = NewType<string, \"UserRole\">;\nexport const newUserRole = (role: string): UserRole =>\n  role.toLowerCase() as UserRole;\n\n// Class State\n// Change to Union\nexport interface Content {\n  type: ContentType;\n  contentLocation: string;\n}\n\nexport interface Trophy {\n  timestamp: Timestamp;\n  type: TrophyType;\n  from: UserID;\n}\n\nexport interface UserState {\n  id: UserID;\n  name: string;\n  role: UserRole;\n  trophies: Trophy[];\n  deviceIds: DeviceID[];\n}\n\nexport interface DeviceState {\n  id: DeviceID;\n  userId: UserID;\n  activityStreamID?: ActivityStreamID;\n  webRTCStreamIDs: WebRTCStreamID[];\n}\n\nexport interface ChatMessageState {\n  userId: UserID;\n  timestamp: Timestamp;\n  text: string;\n}\n\nexport interface ClassState {\n  users: Record<UserID, UserState>;\n  devices: Record<DeviceID, DeviceState>;\n\n  chatMessages: ChatMessageState[];\n  content: Content;\n  hostDeviceId?: DeviceID;\n  classEndTime?: Timestamp;\n}\n\nexport interface ChatMessageNotification {\n  id: string;\n  user: UserState;\n  message: string;\n}\n\nexport interface ContentNotification {\n  type: ContentType;\n  contentId: string;\n}\n\nexport interface SessionNotification {\n  // webRTC: WebRTC\n}\n\nexport interface TrophyNotification {\n  from: string;\n  user: string;\n  kind: string;\n}\n\nexport interface VideoSynchronize {}\nexport interface WhiteboardStateOut {}\nexport interface WhiteboardEventOut {}\nexport interface ClassNotification {\n  chatMessage: ChatMessageNotification;\n  join: DeviceState;\n  leave: DeviceState;\n  content: ContentNotification;\n  trophy: TrophyNotification;\n\n  //webRTC deprecated?\n  sfu: string;\n  session: SessionNotification;\n}\n","export type ValueOf<T> = T[keyof T];\n\nexport type NewType<T, NewTypeName> = T & {\n  /**\n   * This is not available at runtime\n   */\n  readonly __COMPILETIME_TYPE__: NewTypeName;\n};\n\nexport const keys = <O>(o: O): (keyof O)[] => {\n    return Object.keys(o) as (keyof O)[];\n};\n\nexport const values = <O>(o: O): ValueOf<O>[] => {\n    return Object.values(o) as ValueOf<O>[];\n};\n\nexport const entries = <O>(o: O): [keyof O, ValueOf<O>][] => {\n    return Object.entries(o) as [keyof O, ValueOf<O>][];\n};\n","import { UserRole } from \"../models\";\n\nexport function isAllowedToBecomeHost(role: UserRole): boolean {\n    switch (role.toLowerCase()) {\n    case \"teacher\":\n        return true;\n    default:\n        return false;\n    }\n}\n","import { CaseReducer, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { WritableDraft } from \"immer/dist/internal\";\nimport {\n    ContentType,\n    ClassState,\n    UserID,\n    Content,\n    ChatMessageState,\n    DeviceID,\n    ActivityStreamID,\n    DeviceState,\n    Trophy,\n    UserRole,\n    Timestamp,\n} from \"../models\";\nimport { ValueOf, values } from \"../types\";\nimport { isAllowedToBecomeHost } from \"./authorization\";\n\ntype Reducer<P = void, T extends string = string> = CaseReducer<\n  ClassState,\n  PayloadAction<P, T>\n>;\n\nexport const INITIAL_ROOM_STATE: ClassState = {\n    users: {},\n    devices: {},\n    chatMessages: [],\n    content: {\n        type: ContentType.Blank,\n        contentLocation: \"\",\n    },\n    hostDeviceId: undefined,\n    classEndTime: undefined,\n};\n\nconst join: Reducer<{ state: ClassState; deviceId: DeviceID }> = (\n    _state,\n    action\n) => action.payload.state;\n\nconst endClass: Reducer<{ timestamp: Timestamp }> = (state, action) => {\n    state.classEndTime = action.payload.timestamp;\n};\n\nconst deviceConnect: Reducer<{\n  name: string;\n  device: DeviceState;\n  role: UserRole;\n}> = (state, action) => {\n    const { name, device, role } = action.payload;\n    //Device\n    state.devices[device.id] = device;\n    //User\n    const userId = device.userId;\n    const user = state.users[userId];\n    if (user) {\n        user.deviceIds.push(device.id);\n    } else {\n        state.users[userId] = {\n            id: userId,\n            name,\n            role,\n            deviceIds: [device.id],\n            trophies: [],\n        };\n    }\n    if (!state.hostDeviceId && isAllowedToBecomeHost(role)) {\n        state.hostDeviceId = device.id;\n    }\n};\n\nconst deviceDisconnect: Reducer<{ deviceId: DeviceID }> = (state, action) => {\n    const { deviceId } = action.payload;\n    const device = state.devices[deviceId] as\n    | WritableDraft<DeviceState>\n    | undefined;\n    delete state.devices[deviceId];\n    if (!device) {\n        return;\n    }\n\n    if (state.hostDeviceId === device.id) {\n        state.hostDeviceId = undefined;\n        const userIds = Object.keys(state.users) as UserID[];\n        // userIds.sort(); sort may be unecessary\n        // It ensures deterministic evaluation on all clients, regardless of the keys array ordering\n        // Which could be affected by serialization and deserialization during network messages\n        userIds.sort();\n        for (const userId of userIds) {\n            const user = state.users[userId];\n            if (!user) {\n                continue;\n            }\n            const deviceId = user.deviceIds[0];\n            if (!deviceId) {\n                continue;\n            }\n            if (isAllowedToBecomeHost(user.role)) {\n                state.hostDeviceId = deviceId;\n                break;\n            }\n        }\n    }\n};\n\nconst setHost: Reducer<DeviceID> = (state, action) => {\n    state.hostDeviceId = action.payload;\n};\n\nconst setContent: Reducer<Content> = (state, action) => {\n    state.content = action.payload;\n};\n\nconst addChatMessage: Reducer<ChatMessageState> = (state, action) => {\n    const chatMessage = action.payload;\n    state.chatMessages.push(chatMessage);\n};\n\nconst setActivityStreamId: Reducer<{\n  deviceId: DeviceID;\n  activityStreamId?: ActivityStreamID;\n}> = (state, action) => {\n    const { deviceId, activityStreamId } = action.payload;\n    const device = state.devices[deviceId];\n    if (!device) {\n        return;\n    }\n    device.activityStreamID = activityStreamId;\n};\n\nconst rewardTrophyToUser: Reducer<{ to: UserID; trophy: Trophy }> = (\n    state,\n    action\n) => {\n    const { to, trophy } = action.payload;\n    state.users[to]?.trophies.push(trophy);\n};\n\nconst rewardTrophyToAll: Reducer<{ trophy: Trophy }> = (state, action) => {\n    const { trophy } = action.payload;\n    values(state.users).forEach((user) => user.trophies.push(trophy));\n};\n\nexport const classSliceActionPrefix = \"class\";\nexport const classSlice = createSlice({\n    name: classSliceActionPrefix,\n    initialState: INITIAL_ROOM_STATE,\n    reducers: {\n        join,\n        endClass,\n        deviceConnect,\n        deviceDisconnect,\n        setHost,\n        setContent,\n        addChatMessage,\n        setActivityStreamId,\n        rewardTrophyToUser,\n        rewardTrophyToAll,\n    },\n});\n\nexport const classReducer = classSlice.reducer;\nexport const classActions = classSlice.actions;\nexport type ClassActionType = keyof typeof classActions;\nexport type ClassAction = ReturnType<ValueOf<typeof classActions>>;\n\nexport type ClassActionTypeToPayload = {\n  [K in keyof typeof classActions]: ReturnType<\n    typeof classActions[K]\n  >[\"payload\"];\n};\n","import { IChatMessage, IClassState, IContent, IDevice, ITrophy, IUser } from \".\";\nimport { Content, ContentType, newDeviceId, DeviceState, Trophy, newUserId, newWebRtcStreamId, newActivityStreamId, newTimestamp, ChatMessageState, ClassState, DeviceID, UserState, newUserRole, UserID, newTrophyType } from \"../models\";\nimport { values } from \"../types\";\n\n\nexport function validateChatMessage({text,timestamp,userId}: IChatMessage): ChatMessageState | undefined {\n    if(!text) { console.error(\"IChatMessage is missing text\"); return; }\n    if(!timestamp) { console.error(\"IChatMessage is missing timestamp\"); return; }\n    if(!userId) { console.error(\"IChatMessage is missing userId\"); return; }\n\n    return {\n        userId: newUserId(userId),\n        timestamp: newTimestamp(timestamp),\n        text,\n    };\n}\n\nexport function validateContentType(content: string): ContentType | undefined {\n    // In the case that string is not a member of the enum,\n    // this function will return undefined\n    // Due to casting content to 'as keyof typeof ContentType'\n    // the contentType variable has been explicitly defined as Optional\n    const contentType: ContentType | undefined = ContentType[content as keyof typeof ContentType];\n    return contentType;\n}\n\nexport function validateContent(content: IContent): Content | undefined {\n    if (!content.type) { console.error(\"IContent is missing type\"); return; }\n    if (!content.contentLocation) { console.error(\"IContent is missing type\"); return; }\n\n    const type = validateContentType(content.type);\n    if(!type) { console.error(`IContent has an invalid type '${content.type}'`); return; }\n    const contentLocation = content.contentLocation;\n    return { type, contentLocation };\n}\n\n/**\n * This function attempts to return a valid ClassState\n * In the case that it recieves an invalid state it prints an error describing the error\n * and then attempts to let provide a sensible default to allow the user to proceed despite the malformed state message\n *\n * @param classState\n * @returns\n */\nexport function validateState(classState: IClassState): ClassState | undefined {\n\n    const chatMessages: ChatMessageState[] = [];\n    if(classState.chatMessages) {\n        classState.chatMessages.forEach((m) => {\n            const validChatMessage = validateChatMessage(m);\n            if(!validChatMessage) { console.error(\"IClassState has an invalid chatMessage\"); return; }\n            chatMessages.push(validChatMessage);\n        });\n    } else {\n        console.error(\"IClassState is missing chatMessages\");\n    }\n\n    let content = { type: ContentType.Blank, contentLocation: \"\" };\n    if(classState.content) {\n        const validContent = validateContent(classState.content);\n        if(validContent) {\n            content = validContent;\n        } else {\n            console.error(\"IClassState has an invalid content\");\n        }\n    } else {\n        console.error(\"IClassState is missing content\");\n    }\n\n    const devices: Record<DeviceID, DeviceState> = {};\n    if (classState.devices) {\n        Object.values(classState.devices).forEach((device) => {\n            const validatedDevice = validateDevice(device);\n            if(!validatedDevice) { console.error(\"IClassState has invalid device\"); return; }\n            devices[validatedDevice.id] = validatedDevice;\n        });\n    } else {\n        console.error(\"IClassState is missing devices\");\n    }\n\n\n    const users: Record<UserID, UserState> = {};\n    if (classState.users) {\n        Object.values(classState.users).forEach((user) => {\n            const validUser = validateUser(user);\n            if(!validUser) { console.error(\"IClassState has invalid user\"); return; }\n            const priorDeviceCount = validUser.deviceIds.length;\n            validUser.deviceIds = validUser.deviceIds.filter((deviceId) => (deviceId in devices));\n            if(validUser.deviceIds.length !== priorDeviceCount) { console.error(\"Removed unknown DeviceID from IUser\"); }\n            users[validUser.id] = validUser;\n        });\n    } else {\n        console.error(\"IClassState is missing users\");\n    }\n\n\n    for(const device of values(devices)) {\n        if(!users.hasOwnProperty(device.userId)) {\n            console.error(`Device(${device.id}) references unknown User(${device.userId})`);\n        }\n    }\n\n    return {\n        chatMessages,\n        content,\n        devices,\n        users,\n        classEndTime: classState.classEndedTime ? newTimestamp(classState.classEndedTime) : undefined,\n        hostDeviceId: classState.hostDeviceId ? newDeviceId(classState.hostDeviceId) : undefined,\n    };\n}\n\nexport function validateUser(user: IUser): UserState | undefined {\n    if(!user.id) { console.error(\"IUser is missing id\"); return; }\n    if(!user.deviceIds) { console.error(\"IUser is missing deviceIds\"); return; }\n    if(!user.name) { console.error(\"IUser is missing name\"); return; }\n    if(!user.role) { console.error(\"IUser is missing role\"); return; }\n\n    const trophies: Trophy[] = [];\n    for(const trophy of trophies) {\n        const validTrophy = validateTrophy(trophy);\n        if(validTrophy) { trophies.push(validTrophy); }\n    }\n\n    return {\n        id: newUserId(user.id),\n        deviceIds: user.deviceIds.map((id) => newDeviceId(id)),\n        name: user.name,\n        role: newUserRole(user.role),\n        trophies,\n    };\n}\n\nexport function validateDevice({id, activityStreamId, userId, webRtcStreamIds}: IDevice): DeviceState | undefined {\n    if(!id) { console.error(\"IDevice is missing id\"); return; }\n    if(!userId) { console.error(\"IDevice is missing userId\"); return; }\n    return {\n        id: newDeviceId(id),\n        userId: newUserId(userId),\n        activityStreamID: activityStreamId ? newActivityStreamId(activityStreamId) : undefined,\n        webRTCStreamIDs: webRtcStreamIds?.map((id) => newWebRtcStreamId(id)) || []\n    };\n}\n\nexport function validateTrophy(trophy: ITrophy): Trophy | undefined {\n    if (!trophy.timestamp) { console.error(\"ITrophy is missing trophy.timestamp\"); return; }\n    if (!trophy.type) { console.error(\"ITrophy is missing trophy.type\"); return; }\n    if (!trophy.fromUserId) { console.error(\"ITrophy is missing trophy.fromUserId\"); return; }\n    //TODO: Handle uint64\n    const timestamp = trophy.timestamp;\n    const type = newTrophyType(trophy.type);\n    const from = newUserId(trophy.fromUserId);\n    return { timestamp, type, from };\n}\n\n","import { IActivityStreamIdChangedEvent, IClassEndedEvent, IClassMessage, IContentChangedEvent, IDeviceConnectedEvent, IDeviceDisconnectedEvent, IHostChangedEvent, IJoinEvent, INewChatMessageEvent, ITrophyRewardedToAllEvent, ITrophyRewardedToUserEvent } from \".\";\nimport { newActivityStreamId, newDeviceId, newTimestamp, newUserId, newUserRole } from \"../models\";\nimport { ClassAction, classActions } from \"../redux/class\";\nimport { validateChatMessage, validateContent, validateDevice, validateState, validateTrophy } from \"./state\";\n\n\nexport function messageToClassAction(message: IClassMessage): ClassAction | undefined {\n    if(message.activityStreamIdChanged) {\n        return activityStreamIdChangedAction(message.activityStreamIdChanged);\n    }\n    if(message.classEnded) {\n        return classEndedAction(message.classEnded);\n    }\n    if(message.contentChanged) {\n        return contentChangedAction(message.contentChanged);\n    }\n    if(message.deviceConnected) {\n        return deviceConnectedAction(message.deviceConnected);\n    }\n    if(message.deviceDisconnected) {\n        return deviceDisconnectedAction(message.deviceDisconnected);\n    }\n    if(message.hostChanged) {\n        return hostChangedAction(message.hostChanged);\n    }\n    if(message.newChatMessage) {\n        return newChatMessageAction(message.newChatMessage);\n    }\n    if(message.joinEvent) {\n        return joinAction(message.joinEvent);\n    }\n    if(message.trophyRewardedToAll) {\n        return trophyRewardedToAllAction(message.trophyRewardedToAll);\n    }\n    if(message.trophyRewardedToUser) {\n        return trophyRewardedToUserAction(message.trophyRewardedToUser);\n    }\n    return undefined;\n}\n\nexport function activityStreamIdChangedAction(event: IActivityStreamIdChangedEvent): ReturnType<typeof classActions.setActivityStreamId> | undefined {\n    if(!event.deviceId) { console.error(\"IActivityStreamIdChangedEvent missing deviceId\"); return; }\n\n    return classActions.setActivityStreamId({\n        deviceId: newDeviceId(event.deviceId),\n        activityStreamId: event.activityStreamId ? newActivityStreamId(event.activityStreamId) : undefined,\n    });\n}\n\nexport function classEndedAction(event: IClassEndedEvent): ReturnType<typeof classActions.endClass> | undefined {\n    if(!event.timestamp) { console.error(\"IClassEndedEvent is missing timestamp\"); return; }\n    const timestamp = newTimestamp(event.timestamp);\n    return classActions.endClass({timestamp});\n}\n\nexport function contentChangedAction(event: IContentChangedEvent): ReturnType<typeof classActions.setContent> | undefined {\n    if(!event.content) { console.error(\"IContentChangedEvent is missing content\"); return; }\n\n    const content = validateContent(event.content);\n    if(!content) { return; }\n\n    return classActions.setContent(content);\n}\n\nexport function deviceConnectedAction(event: IDeviceConnectedEvent): ReturnType<typeof classActions.deviceConnect> | undefined {\n    if(!event.name) { console.error(\"IDeviceConnectedEvent is missing name\"); return; }\n    if(!event.role) { console.error(\"IDeviceConnectedEvent is missing role\"); return; }\n    if(!event.device) { console.error(\"IDeviceConnectedEvent is missing device\"); return; }\n\n    const device = validateDevice(event.device);\n    if(!device) { return; }\n\n    return classActions.deviceConnect({\n        name: event.name,\n        role: newUserRole(event.role),\n        device,\n    });\n}\n\nexport function deviceDisconnectedAction({deviceId}: IDeviceDisconnectedEvent): ReturnType<typeof classActions.deviceDisconnect> | undefined {\n    if(!deviceId) { console.error(\"IDeviceDisconnectedEvent is missing deviceId\"); return; }\n\n    return classActions.deviceDisconnect({\n        deviceId: newDeviceId(deviceId),\n    });\n}\n\nexport function hostChangedAction(event: IHostChangedEvent): ReturnType<typeof classActions.setHost> | undefined {\n    if(!event.hostDeviceId) { console.error(\"IHostChangedEvent is missing hostDeviceId\"); return; }\n\n    const hostDeviceId = newDeviceId(event.hostDeviceId);\n\n    return classActions.setHost(hostDeviceId);\n}\n\nexport function newChatMessageAction(event: INewChatMessageEvent): ReturnType<typeof classActions.addChatMessage> | undefined {\n    if(!event.chatMessage) { console.error(\"INewChatMessageEvent is missing chatMessage\"); return; }\n\n    const chatMessage = validateChatMessage(event.chatMessage);\n    if(!chatMessage) { return; }\n\n    return classActions.addChatMessage(chatMessage);\n}\n\nexport function joinAction(event: IJoinEvent): ReturnType<typeof classActions.join> | undefined {\n    if(!event.state) { console.error(\"ISetClassStateEvent is missing state\"); return; }\n    if(!event.deviceId) { console.error(\"ISetClassStateEvent is missing deviceId\"); return; }\n    const state = validateState(event.state);\n    if(!state) { return; }\n    return classActions.join({\n        state,\n        deviceId: newDeviceId(event.deviceId),\n    });\n}\n\nexport function trophyRewardedToAllAction(event: ITrophyRewardedToAllEvent): ReturnType<typeof classActions.rewardTrophyToAll> | undefined {\n    if(!event.trophy) { console.error(\"ITrophyRewardedToAllEvent is missing trophy\"); return; }\n\n    const trophy = validateTrophy(event.trophy);\n    if(!trophy) { return; }\n\n    return classActions.rewardTrophyToAll({ trophy });\n}\n\nexport function trophyRewardedToUserAction(event: ITrophyRewardedToUserEvent): ReturnType<typeof classActions.rewardTrophyToUser> | undefined {\n    if(!event.toUserId) { console.error(\"ITrophyRewardedToAllEvent is missing toUserId\"); return; }\n    if(!event.trophy) { console.error(\"ITrophyRewardedToAllEvent is missing trophy\"); return; }\n\n    const trophy = validateTrophy(event.trophy);\n    if(!trophy) { return; }\n\n    return classActions.rewardTrophyToUser({\n        to: newUserId(event.toUserId),\n        trophy,\n    });\n}\n","import React from \"react\";\nimport { Network } from \"../network/network\";\n\nexport const NetworkContext = React.createContext<Network<unknown>>(\n  null as any\n);\nNetworkContext.displayName = \"KidsloopLiveNetwork\";\n\nexport default NetworkContext;\n","import { useContext } from \"react\";\nimport { useAsyncCallback } from \"react-async-hook\";\nimport {\n    ActivityStreamID,\n    Content,\n    DeviceID,\n    TrophyType,\n    UserID,\n} from \"../../models\";\nimport { IClassRequest } from \"../../protobuf\";\nimport NetworkContext from \"../networkContext\";\n\nexport function useJoinClass() {\n    const network = useContext(NetworkContext);\n    const initWs = (url: string) => network.connect(url);\n    const { execute: joinClass, status } = useAsyncCallback(initWs, {\n        onError: (e) => console.error(e),\n    });\n    return { joinClass, status };\n}\n\nexport function useLeaveClass() {\n    const network = useContext(NetworkContext);\n    const close = (reason?: string) => network.disconnect(4200, reason);\n    const { execute: leaveClass, status } = useAsyncCallback(close);\n    return { leaveClass, status };\n}\n\nexport function useEndClass() {\n    const { execute, status } = useNetworkAction(() => ({ endClass: {} }));\n    return { endClass: execute, status };\n}\n\nexport function useRewardTrophyToAll() {\n    const { execute, status } = useNetworkAction((trophyType: TrophyType) => ({\n        rewardTrophyToAll: {\n            trophyType,\n        },\n    }));\n    return { rewardTrophyToAll: execute, status };\n}\n\nexport function useRewardTrophyToUser() {\n    const { execute, status } = useNetworkAction(\n        (trophyType: TrophyType, toUserId: UserID) => ({\n            rewardTrophyToUser: {\n                trophyType,\n                toUserId,\n            },\n        })\n    );\n    return { rewardTrophyToUser: execute, status };\n}\n\nexport function useSendChatMessage() {\n    const { execute, status } = useNetworkAction((text: string) => ({\n        sendChatMessage: {\n            text,\n        },\n    }));\n    return { sendChatMessage: execute, status };\n}\n\nexport function useSetActivityStreamId() {\n    const { execute, status } = useNetworkAction(\n        (activityStreamId?: ActivityStreamID) => ({\n            setActivityStreamId: {\n                activityStreamId,\n            },\n        })\n    );\n    return { setActivityStreamId: execute, status };\n}\n\nexport function useSetContent() {\n    const { execute, status } = useNetworkAction((content: Content) => ({\n        setContent: {\n            content,\n        },\n    }));\n    return { setContent: execute, status };\n}\n\nexport function useSetHost() {\n    const { execute, status } = useNetworkAction((hostDeviceId: DeviceID) => ({\n        setHost: { hostDeviceId },\n    }));\n    return { setHost: execute, status };\n}\n\nfunction useNetworkAction<Args extends any[] = any[]>(\n    buildRequest: (...args: Args) => IClassRequest\n) {\n    const network = useContext(NetworkContext);\n    const sendRequest = async (...args: Args) => {\n        const request = buildRequest(...args);\n        await network.send(request);\n    };\n    return useAsyncCallback(sendRequest);\n}\n","import { useContext, useEffect } from \"react\";\nimport {\n    ClassActionType,\n    ClassActionTypeToPayload,\n    NetworkContext,\n    State,\n} from \"../../ui\";\n\nexport type NetworkHandlerCallback<T extends ClassActionType> = (\n  payload: ClassActionTypeToPayload[T],\n  state: State\n) => unknown;\n\nexport function useNetworkHandler<T extends ClassActionType = ClassActionType>(\n    actionType: T,\n    callback: NetworkHandlerCallback<T>\n) {\n    const network = useContext(NetworkContext);\n    // TODO: How to accommodate additional Action types, other than ClassAction\n    useEffect(() => network.onClassAction(actionType, callback), [network]);\n}\n","import { useContext } from \"react\";\nimport NetworkContext from \"../networkContext\";\nimport { useSelector } from \"react-redux\";\nimport { State } from \"../../redux/reducer\";\n\nexport function useNetworkState<T = unknown>(\n    selector: (state: State) => T,\n    equalityCheck?: (left: T, right: T) => boolean\n) {\n    const network = useContext(NetworkContext);\n    return useSelector(\n        (state) => selector(network.selector(state)),\n        equalityCheck\n    );\n}\n","import {\n    DeviceID,\n    DeviceState,\n    UserID,\n    UserRole,\n    UserState,\n} from \"../../models\";\nimport { NewType } from \"../../types\";\nimport { State } from \"../../ui\";\nimport { useNetworkState } from \"./state\";\n\nexport type UserDeviceID = NewType<string, \"UserDeviceID\">;\n\n// TODO: Consider changing this to a hash\nexport const newUserDeviceId = (\n    userId: UserID,\n    deviceId: DeviceID\n): UserDeviceID => JSON.stringify([userId, deviceId]) as UserDeviceID;\n\nexport interface UserDevice {\n  id: UserDeviceID;\n  user: UserState;\n  device: DeviceState;\n}\n\nexport const useUserDevices = (filterRole?: UserRole) =>\n    useNetworkState((state) => {\n        const userDevices: UserDevice[] = [];\n        for (const user of Object.values(state.class.users)) {\n            if (filterRole !== undefined && user.role !== filterRole) {\n                continue;\n            }\n\n            for (const deviceId of user.deviceIds) {\n                const device = state.class.devices[deviceId];\n                if (!device) {\n                    continue;\n                }\n                const id = newUserDeviceId(user.id, device.id);\n                userDevices.push({ id, user, device });\n            }\n        }\n        return userDevices;\n    });\n\nconst resolveUserDevice = (state: State, deviceId: DeviceID) => {\n    const device = state.class.devices[deviceId];\n    if (!device) {\n        return;\n    }\n\n    const user = state.class.users[device.userId];\n    if (!user) {\n        return;\n    }\n\n    return {\n        id: newUserDeviceId(user.id, device.id),\n        device,\n        user,\n    };\n};\n\nexport const useHostUserDevice = () =>\n    useNetworkState((state) => {\n        if (!state.class.hostDeviceId) {\n            return;\n        }\n        return resolveUserDevice(state, state.class.hostDeviceId);\n    });\n\nexport const useLocalUserDevice = () =>\n    useNetworkState((state) => {\n        if (!state.network.myDeviceId) {\n            return;\n        }\n        return resolveUserDevice(state, state.network.myDeviceId);\n    });\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bowser=t():e.bowser=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=90)}({17:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var n=r(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||\"\"},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||\"\"},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case\"NT\":return\"NT\";case\"XP\":return\"XP\";case\"NT 5.0\":return\"2000\";case\"NT 5.1\":return\"XP\";case\"NT 5.2\":return\"2003\";case\"NT 6.0\":return\"Vista\";case\"NT 6.1\":return\"7\";case\"NT 6.2\":return\"8\";case\"NT 6.3\":return\"8.1\";case\"NT 10.0\":return\"10\";default:return}},e.getMacOSVersionName=function(e){var t=e.split(\".\").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return\"Leopard\";case 6:return\"Snow Leopard\";case 7:return\"Lion\";case 8:return\"Mountain Lion\";case 9:return\"Mavericks\";case 10:return\"Yosemite\";case 11:return\"El Capitan\";case 12:return\"Sierra\";case 13:return\"High Sierra\";case 14:return\"Mojave\";case 15:return\"Catalina\";default:return}},e.getAndroidVersionName=function(e){var t=e.split(\".\").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?\"Cupcake\":1===t[0]&&t[1]>=6?\"Donut\":2===t[0]&&t[1]<2?\"Eclair\":2===t[0]&&2===t[1]?\"Froyo\":2===t[0]&&t[1]>2?\"Gingerbread\":3===t[0]?\"Honeycomb\":4===t[0]&&t[1]<1?\"Ice Cream Sandwich\":4===t[0]&&t[1]<4?\"Jelly Bean\":4===t[0]&&t[1]>=4?\"KitKat\":5===t[0]?\"Lollipop\":6===t[0]?\"Marshmallow\":7===t[0]?\"Nougat\":8===t[0]?\"Oreo\":9===t[0]?\"Pie\":void 0},e.getVersionPrecision=function(e){return e.split(\".\").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var i=e.getVersionPrecision(t),s=e.getVersionPrecision(r),a=Math.max(i,s),o=0,u=e.map([t,r],(function(t){var r=a-e.getVersionPrecision(t),n=t+new Array(r+1).join(\".0\");return e.map(n.split(\".\"),(function(e){return new Array(20-e.length).join(\"0\")+e})).reverse()}));for(n&&(o=a-Math.min(i,s)),a-=1;a>=o;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===o)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var i=e[r];if(t(i,r))return i}},e.assign=function(e){for(var t,r,n=e,i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var o=function(){var e=s[t];\"object\"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,r=s.length;t<r;t+=1)o();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||\"\"},e}();t.default=i,e.exports=t.default},18:function(e,t,r){\"use strict\";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0;t.BROWSER_ALIASES_MAP={\"Amazon Silk\":\"amazon_silk\",\"Android Browser\":\"android\",Bada:\"bada\",BlackBerry:\"blackberry\",Chrome:\"chrome\",Chromium:\"chromium\",Electron:\"electron\",Epiphany:\"epiphany\",Firefox:\"firefox\",Focus:\"focus\",Generic:\"generic\",\"Google Search\":\"google_search\",Googlebot:\"googlebot\",\"Internet Explorer\":\"ie\",\"K-Meleon\":\"k_meleon\",Maxthon:\"maxthon\",\"Microsoft Edge\":\"edge\",\"MZ Browser\":\"mz\",\"NAVER Whale Browser\":\"naver\",Opera:\"opera\",\"Opera Coast\":\"opera_coast\",PhantomJS:\"phantomjs\",Puffin:\"puffin\",QupZilla:\"qupzilla\",QQ:\"qq\",QQLite:\"qqlite\",Safari:\"safari\",Sailfish:\"sailfish\",\"Samsung Internet for Android\":\"samsung_internet\",SeaMonkey:\"seamonkey\",Sleipnir:\"sleipnir\",Swing:\"swing\",Tizen:\"tizen\",\"UC Browser\":\"uc\",Vivaldi:\"vivaldi\",\"WebOS Browser\":\"webos\",WeChat:\"wechat\",\"Yandex Browser\":\"yandex\",Roku:\"roku\"};t.BROWSER_MAP={amazon_silk:\"Amazon Silk\",android:\"Android Browser\",bada:\"Bada\",blackberry:\"BlackBerry\",chrome:\"Chrome\",chromium:\"Chromium\",electron:\"Electron\",epiphany:\"Epiphany\",firefox:\"Firefox\",focus:\"Focus\",generic:\"Generic\",googlebot:\"Googlebot\",google_search:\"Google Search\",ie:\"Internet Explorer\",k_meleon:\"K-Meleon\",maxthon:\"Maxthon\",edge:\"Microsoft Edge\",mz:\"MZ Browser\",naver:\"NAVER Whale Browser\",opera:\"Opera\",opera_coast:\"Opera Coast\",phantomjs:\"PhantomJS\",puffin:\"Puffin\",qupzilla:\"QupZilla\",qq:\"QQ Browser\",qqlite:\"QQ Browser Lite\",safari:\"Safari\",sailfish:\"Sailfish\",samsung_internet:\"Samsung Internet for Android\",seamonkey:\"SeaMonkey\",sleipnir:\"Sleipnir\",swing:\"Swing\",tizen:\"Tizen\",uc:\"UC Browser\",vivaldi:\"Vivaldi\",webos:\"WebOS Browser\",wechat:\"WeChat\",yandex:\"Yandex Browser\"};t.PLATFORMS_MAP={tablet:\"tablet\",mobile:\"mobile\",desktop:\"desktop\",tv:\"tv\"};t.OS_MAP={WindowsPhone:\"Windows Phone\",Windows:\"Windows\",MacOS:\"macOS\",iOS:\"iOS\",Android:\"Android\",WebOS:\"WebOS\",BlackBerry:\"BlackBerry\",Bada:\"Bada\",Tizen:\"Tizen\",Linux:\"Linux\",ChromeOS:\"Chrome OS\",PlayStation4:\"PlayStation 4\",Roku:\"Roku\"};t.ENGINE_MAP={EdgeHTML:\"EdgeHTML\",Blink:\"Blink\",Trident:\"Trident\",Presto:\"Presto\",Gecko:\"Gecko\",WebKit:\"WebKit\"}},90:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},s=r(18);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){}var t,r,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),\"string\"!=typeof e)throw new Error(\"UserAgent should be a string\");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:\"BROWSER_MAP\",get:function(){return s.BROWSER_MAP}},{key:\"ENGINE_MAP\",get:function(){return s.ENGINE_MAP}},{key:\"OS_MAP\",get:function(){return s.OS_MAP}},{key:\"PLATFORMS_MAP\",get:function(){return s.PLATFORMS_MAP}}],(r=null)&&a(t.prototype,r),n&&a(t,n),e}();t.default=o,e.exports=t.default},91:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var n=u(r(92)),i=u(r(93)),s=u(r(94)),a=u(r(95)),o=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||\"\"===e)throw new Error(\"UserAgent parameter can't be empty\");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=o.default.find(n.default,(function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||\"\":this.getBrowser().name||\"\"},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=o.default.find(i.default,(function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||\"\":t||\"\"},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||\"\":t||\"\"},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=o.default.find(s.default,(function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||\"\":this.getEngine().name||\"\"},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find(a.default,(function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return o.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,i={},s=0;if(Object.keys(e).forEach((function(t){var a=e[t];\"string\"==typeof a?(i[t]=a,s+=1):\"object\"==typeof a&&(r[t]=a,n+=1)})),n>0){var a=Object.keys(r),u=o.default.find(a,(function(e){return t.isOS(e)}));if(u){var d=this.satisfies(r[u]);if(void 0!==d)return d}var c=o.default.find(a,(function(e){return t.isPlatform(e)}));if(c){var f=this.satisfies(r[c]);if(void 0!==f)return f}}if(s>0){var l=Object.keys(i),h=o.default.find(l,(function(e){return t.isBrowser(e,!0)}));if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),i=o.default.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,i=this.getBrowserVersion();if(\"string\"==typeof i)return\">\"===e[0]||\"<\"===e[0]?(r=e.substr(1),\"=\"===e[1]?(n=!0,r=e.substr(2)):t=[],\">\"===e[0]?t.push(1):t.push(-1)):\"=\"===e[0]?r=e.substr(1):\"~\"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(o.default.compareVersions(i,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n};var s=/version\\/(\\d+(\\.?_?\\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:\"Googlebot\"},r=i.default.getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:\"Opera\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\\/|opios/i],describe:function(e){var t={name:\"Opera\"},r=i.default.getFirstMatch(/(?:opr|opios)[\\s/](\\S+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:\"Samsung Internet for Android\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:\"NAVER Whale Browser\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:\"MZ Browser\"},r=i.default.getFirstMatch(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:\"Focus\"},r=i.default.getFirstMatch(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:\"Swing\"},r=i.default.getFirstMatch(/(?:swing)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:\"Opera Coast\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\\/\\d+(?:.?_?\\d+)+/i],describe:function(e){var t={name:\"Opera Touch\"},r=i.default.getFirstMatch(/(?:opt)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:\"Yandex Browser\"},r=i.default.getFirstMatch(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:\"UC Browser\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:\"Maxthon\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:\"Epiphany\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:\"Puffin\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:\"Sleipnir\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:\"K-Meleon\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:\"WeChat\"},r=i.default.getFirstMatch(/(?:micromessenger)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?\"QQ Browser Lite\":\"QQ Browser\"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\\d+(\\.?_?\\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:\"Internet Explorer\"},r=i.default.getFirstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\\sedg\\//i],describe:function(e){var t={name:\"Microsoft Edge\"},r=i.default.getFirstMatch(/\\sedg\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:\"Microsoft Edge\"},r=i.default.getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:\"Vivaldi\"},r=i.default.getFirstMatch(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:\"SeaMonkey\"},r=i.default.getFirstMatch(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:\"Sailfish\"},r=i.default.getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:\"Amazon Silk\"},r=i.default.getFirstMatch(/silk\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:\"PhantomJS\"},r=i.default.getFirstMatch(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:\"SlimerJS\"},r=i.default.getFirstMatch(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe:function(e){var t={name:\"BlackBerry\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:\"WebOS Browser\"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:\"Bada\"},r=i.default.getFirstMatch(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:\"Tizen\"},r=i.default.getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:\"QupZilla\"},r=i.default.getFirstMatch(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:\"Firefox\"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:\"Electron\"},r=i.default.getFirstMatch(/(?:electron)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:\"Miui\"},r=i.default.getFirstMatch(/(?:MiuiBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:\"Chromium\"},r=i.default.getFirstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:\"Chrome\"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:\"Google Search\"},r=i.default.getFirstMatch(/(?:GSA)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:\"Android Browser\"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:\"PlayStation 4\"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:\"Safari\"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search(\"\\\\(\")?/^(.*)\\/(.*)[ \\t]\\((.*)/:/^(.*)\\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18);var a=[{test:[/Roku\\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\\/DVP-(\\d+\\.\\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i,e),r=i.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\\//],describe:function(e){var t={name:s.OS_MAP.iOS},r=i.default.getSecondMatch(/(Version\\/)(\\d[\\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\\d+(\\.?_?\\d+)+)/i,e).replace(/[_\\s]/g,\".\"),r=i.default.getMacOSVersionName(t),n={name:s.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i,e).replace(/[_\\s]/g,\".\");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=i.default.getFirstMatch(/android[\\s/-](\\d+(\\.\\d+)*)/i,e),r=i.default.getAndroidVersionName(t),n={name:s.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i,e)||i.default.getFirstMatch(/\\bbb(\\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18);var a=[{test:[/googlebot/i],describe:function(){return{type:\"bot\",vendor:\"Google\"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&\"Nova\",r={type:s.PLATFORMS_MAP.mobile,vendor:\"Huawei\"};return t&&(r.model=t),r}},{test:[/nexus\\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Nexus\"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Apple\",model:\"iPad\"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Apple\",model:\"iPad\"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Amazon\",model:\"Kindle Fire HD 7\"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Amazon\"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:\"Apple\",model:t}}},{test:[/nexus\\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"Nexus\"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"blackberry\"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"BlackBerry\"}}},{test:function(e){return\"bada\"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"windows phone\"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"Microsoft\"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(\".\")[0]);return\"android\"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return\"android\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"macos\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:\"Apple\"}}},{test:function(e){return\"windows\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return\"linux\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return\"playstation 4\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return\"roku\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18);var a=[{test:function(e){return\"microsoft edge\"===e.getBrowserName(!0)},describe:function(e){if(/\\sedg\\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\\/(\\d+(\\.?_?\\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\\/537\\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=a,e.exports=t.default}})}));","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Logger = void 0;\nconst debug_1 = __importDefault(require(\"debug\"));\nconst APP_NAME = 'mediasoup-client';\nclass Logger {\n    constructor(prefix) {\n        if (prefix) {\n            this._debug = (0, debug_1.default)(`${APP_NAME}:${prefix}`);\n            this._warn = (0, debug_1.default)(`${APP_NAME}:WARN:${prefix}`);\n            this._error = (0, debug_1.default)(`${APP_NAME}:ERROR:${prefix}`);\n        }\n        else {\n            this._debug = (0, debug_1.default)(APP_NAME);\n            this._warn = (0, debug_1.default)(`${APP_NAME}:WARN`);\n            this._error = (0, debug_1.default)(`${APP_NAME}:ERROR`);\n        }\n        /* eslint-disable no-console */\n        this._debug.log = console.info.bind(console);\n        this._warn.log = console.warn.bind(console);\n        this._error.log = console.error.bind(console);\n        /* eslint-enable no-console */\n    }\n    get debug() {\n        return this._debug;\n    }\n    get warn() {\n        return this._warn;\n    }\n    get error() {\n        return this._error;\n    }\n}\nexports.Logger = Logger;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EnhancedEventEmitter = void 0;\nconst events_1 = require(\"events\");\nconst Logger_1 = require(\"./Logger\");\nconst logger = new Logger_1.Logger('EnhancedEventEmitter');\nclass EnhancedEventEmitter extends events_1.EventEmitter {\n    constructor() {\n        super();\n        this.setMaxListeners(Infinity);\n    }\n    safeEmit(event, ...args) {\n        const numListeners = this.listenerCount(event);\n        try {\n            return this.emit(event, ...args);\n        }\n        catch (error) {\n            logger.error('safeEmit() | event listener threw an error [event:%s]:%o', event, error);\n            return Boolean(numListeners);\n        }\n    }\n    async safeEmitAsPromise(event, ...args) {\n        return new Promise((resolve, reject) => {\n            try {\n                this.emit(event, ...args, resolve, reject);\n            }\n            catch (error) {\n                logger.error('safeEmitAsPromise() | event listener threw an error [event:%s]:%o', event, error);\n                reject(error);\n            }\n        });\n    }\n}\nexports.EnhancedEventEmitter = EnhancedEventEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InvalidStateError = exports.UnsupportedError = void 0;\n/**\n * Error indicating not support for something.\n */\nclass UnsupportedError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'UnsupportedError';\n        if (Error.hasOwnProperty('captureStackTrace')) // Just in V8.\n         {\n            // @ts-ignore\n            Error.captureStackTrace(this, UnsupportedError);\n        }\n        else {\n            this.stack = (new Error(message)).stack;\n        }\n    }\n}\nexports.UnsupportedError = UnsupportedError;\n/**\n * Error produced when calling a method in an invalid state.\n */\nclass InvalidStateError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'InvalidStateError';\n        if (Error.hasOwnProperty('captureStackTrace')) // Just in V8.\n         {\n            // @ts-ignore\n            Error.captureStackTrace(this, InvalidStateError);\n        }\n        else {\n            this.stack = (new Error(message)).stack;\n        }\n    }\n}\nexports.InvalidStateError = InvalidStateError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateRandomNumber = exports.clone = void 0;\n/**\n * Clones the given data.\n */\nfunction clone(data, defaultValue) {\n    if (typeof data === 'undefined')\n        return defaultValue;\n    return JSON.parse(JSON.stringify(data));\n}\nexports.clone = clone;\n/**\n * Generates a random positive integer.\n */\nfunction generateRandomNumber() {\n    return Math.round(Math.random() * 10000000);\n}\nexports.generateRandomNumber = generateRandomNumber;\n","const debug = require('debug')('h264-profile-level-id');\n\n/* eslint-disable no-console */\ndebug.log = console.info.bind(console);\n/* eslint-enable no-console */\n\nconst ProfileConstrainedBaseline = 1;\nconst ProfileBaseline = 2;\nconst ProfileMain = 3;\nconst ProfileConstrainedHigh = 4;\nconst ProfileHigh = 5;\n\nexports.ProfileConstrainedBaseline = ProfileConstrainedBaseline;\nexports.ProfileBaseline = ProfileBaseline;\nexports.ProfileMain = ProfileMain;\nexports.ProfileConstrainedHigh = ProfileConstrainedHigh;\nexports.ProfileHigh = ProfileHigh;\n\n// All values are equal to ten times the level number, except level 1b which is\n// special.\nconst Level1_b = 0;\nconst Level1 = 10;\nconst Level1_1 = 11;\nconst Level1_2 = 12;\nconst Level1_3 = 13;\nconst Level2 = 20;\nconst Level2_1 = 21;\nconst Level2_2 = 22;\nconst Level3 = 30;\nconst Level3_1 = 31;\nconst Level3_2 = 32;\nconst Level4 = 40;\nconst Level4_1 = 41;\nconst Level4_2 = 42;\nconst Level5 = 50;\nconst Level5_1 = 51;\nconst Level5_2 = 52;\n\nexports.Level1_b = Level1_b;\nexports.Level1 = Level1;\nexports.Level1_1 = Level1_1;\nexports.Level1_2 = Level1_2;\nexports.Level1_3 = Level1_3;\nexports.Level2 = Level2;\nexports.Level2_1 = Level2_1;\nexports.Level2_2 = Level2_2;\nexports.Level3 = Level3;\nexports.Level3_1 = Level3_1;\nexports.Level3_2 = Level3_2;\nexports.Level4 = Level4;\nexports.Level4_1 = Level4_1;\nexports.Level4_2 = Level4_2;\nexports.Level5 = Level5;\nexports.Level5_1 = Level5_1;\nexports.Level5_2 = Level5_2;\n\nclass ProfileLevelId\n{\n\tconstructor(profile, level)\n\t{\n\t\tthis.profile = profile;\n\t\tthis.level = level;\n\t}\n}\n\nexports.ProfileLevelId = ProfileLevelId;\n\n// Default ProfileLevelId.\n//\n// TODO: The default should really be profile Baseline and level 1 according to\n// the spec: https://tools.ietf.org/html/rfc6184#section-8.1. In order to not\n// break backwards compatibility with older versions of WebRTC where external\n// codecs don't have any parameters, use profile ConstrainedBaseline level 3_1\n// instead. This workaround will only be done in an interim period to allow\n// external clients to update their code.\n//\n// http://crbug/webrtc/6337.\nconst DefaultProfileLevelId =\n\tnew ProfileLevelId(ProfileConstrainedBaseline, Level3_1);\n\n// For level_idc=11 and profile_idc=0x42, 0x4D, or 0x58, the constraint set3\n// flag specifies if level 1b or level 1.1 is used.\nconst ConstraintSet3Flag = 0x10;\n\n// Class for matching bit patterns such as \"x1xx0000\" where 'x' is allowed to be\n// either 0 or 1.\nclass BitPattern\n{\n\tconstructor(str)\n\t{\n\t\tthis._mask = ~byteMaskString('x', str);\n\t\tthis._maskedValue = byteMaskString('1', str);\n\t}\n\n\tisMatch(value)\n\t{\n\t\treturn this._maskedValue === (value & this._mask);\n\t}\n}\n\n// Class for converting between profile_idc/profile_iop to Profile.\nclass ProfilePattern\n{\n\tconstructor(profile_idc, profile_iop, profile)\n\t{\n\t\tthis.profile_idc = profile_idc;\n\t\tthis.profile_iop = profile_iop;\n\t\tthis.profile = profile;\n\t}\n}\n\n// This is from https://tools.ietf.org/html/rfc6184#section-8.1.\nconst ProfilePatterns =\n[\n\tnew ProfilePattern(0x42, new BitPattern('x1xx0000'), ProfileConstrainedBaseline),\n\tnew ProfilePattern(0x4D, new BitPattern('1xxx0000'), ProfileConstrainedBaseline),\n\tnew ProfilePattern(0x58, new BitPattern('11xx0000'), ProfileConstrainedBaseline),\n\tnew ProfilePattern(0x42, new BitPattern('x0xx0000'), ProfileBaseline),\n\tnew ProfilePattern(0x58, new BitPattern('10xx0000'), ProfileBaseline),\n\tnew ProfilePattern(0x4D, new BitPattern('0x0x0000'), ProfileMain),\n\tnew ProfilePattern(0x64, new BitPattern('00000000'), ProfileHigh),\n\tnew ProfilePattern(0x64, new BitPattern('00001100'), ProfileConstrainedHigh)\n];\n\n/**\n * Parse profile level id that is represented as a string of 3 hex bytes.\n * Nothing will be returned if the string is not a recognized H264 profile\n * level id.\n *\n * @param {String} str - profile-level-id value as a string of 3 hex bytes.\n *\n * @returns {ProfileLevelId}\n */\nexports.parseProfileLevelId = function(str)\n{\n\t// The string should consist of 3 bytes in hexadecimal format.\n\tif (typeof str !== 'string' || str.length !== 6)\n\t\treturn null;\n\n\tconst profile_level_id_numeric = parseInt(str, 16);\n\n\tif (profile_level_id_numeric === 0)\n\t\treturn null;\n\n\t// Separate into three bytes.\n\tconst level_idc = profile_level_id_numeric & 0xFF;\n\tconst profile_iop = (profile_level_id_numeric >> 8) & 0xFF;\n\tconst profile_idc = (profile_level_id_numeric >> 16) & 0xFF;\n\n\t// Parse level based on level_idc and constraint set 3 flag.\n\tlet level;\n\n\tswitch (level_idc)\n\t{\n\t\tcase Level1_1:\n\t\t{\n\t\t\tlevel = (profile_iop & ConstraintSet3Flag) !== 0 ? Level1_b : Level1_1;\n\t\t\tbreak;\n\t\t}\n\t\tcase Level1:\n\t\tcase Level1_2:\n\t\tcase Level1_3:\n\t\tcase Level2:\n\t\tcase Level2_1:\n\t\tcase Level2_2:\n\t\tcase Level3:\n\t\tcase Level3_1:\n\t\tcase Level3_2:\n\t\tcase Level4:\n\t\tcase Level4_1:\n\t\tcase Level4_2:\n\t\tcase Level5:\n\t\tcase Level5_1:\n\t\tcase Level5_2:\n\t\t{\n\t\t\tlevel = level_idc;\n\t\t\tbreak;\n\t\t}\n\t\t// Unrecognized level_idc.\n\t\tdefault:\n\t\t{\n\t\t\tdebug('parseProfileLevelId() | unrecognized level_idc:%s', level_idc);\n\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// Parse profile_idc/profile_iop into a Profile enum.\n\tfor (const pattern of ProfilePatterns)\n\t{\n\t\tif (\n\t\t\tprofile_idc === pattern.profile_idc &&\n\t\t\tpattern.profile_iop.isMatch(profile_iop)\n\t\t)\n\t\t{\n\t\t\treturn new ProfileLevelId(pattern.profile, level);\n\t\t}\n\t}\n\n\tdebug('parseProfileLevelId() | unrecognized profile_idc/profile_iop combination');\n\n\treturn null;\n};\n\n/**\n * Returns canonical string representation as three hex bytes of the profile\n * level id, or returns nothing for invalid profile level ids.\n *\n * @param {ProfileLevelId} profile_level_id\n *\n * @returns {String}\n */\nexports.profileLevelIdToString = function(profile_level_id)\n{\n\t// Handle special case level == 1b.\n\tif (profile_level_id.level == Level1_b)\n\t{\n\t\tswitch (profile_level_id.profile)\n\t\t{\n\t\t\tcase ProfileConstrainedBaseline:\n\t\t\t{\n\t\t\t\treturn '42f00b';\n\t\t\t}\n\t\t\tcase ProfileBaseline:\n\t\t\t{\n\t\t\t\treturn '42100b';\n\t\t\t}\n\t\t\tcase ProfileMain:\n\t\t\t{\n\t\t\t\treturn '4d100b';\n\t\t\t}\n\t\t\t// Level 1_b is not allowed for other profiles.\n\t\t\tdefault:\n\t\t\t{\n\t\t\t\tdebug(\n\t\t\t\t\t'profileLevelIdToString() | Level 1_b not is allowed for profile:%s',\n\t\t\t\t\tprofile_level_id.profile);\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\n\tlet profile_idc_iop_string;\n\n\tswitch (profile_level_id.profile)\n\t{\n\t\tcase ProfileConstrainedBaseline:\n\t\t{\n\t\t\tprofile_idc_iop_string = '42e0';\n\t\t\tbreak;\n\t\t}\n\t\tcase ProfileBaseline:\n\t\t{\n\t\t\tprofile_idc_iop_string = '4200';\n\t\t\tbreak;\n\t\t}\n\t\tcase ProfileMain:\n\t\t{\n\t\t\tprofile_idc_iop_string = '4d00';\n\t\t\tbreak;\n\t\t}\n\t\tcase ProfileConstrainedHigh:\n\t\t{\n\t\t\tprofile_idc_iop_string = '640c';\n\t\t\tbreak;\n\t\t}\n\t\tcase ProfileHigh:\n\t\t{\n\t\t\tprofile_idc_iop_string = '6400';\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\t{\n\t\t\tdebug(\n\t\t\t\t'profileLevelIdToString() | unrecognized profile:%s',\n\t\t\t\tprofile_level_id.profile);\n\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tlet levelStr = (profile_level_id.level).toString(16);\n\n\tif (levelStr.length === 1)\n\t\tlevelStr = `0${levelStr}`;\n\n\treturn `${profile_idc_iop_string}${levelStr}`;\n};\n\n/**\n * Parse profile level id that is represented as a string of 3 hex bytes\n * contained in an SDP key-value map. A default profile level id will be\n * returned if the profile-level-id key is missing. Nothing will be returned if\n * the key is present but the string is invalid.\n *\n * @param {Object} [params={}] - Codec parameters object.\n *\n * @returns {ProfileLevelId}\n */\nexports.parseSdpProfileLevelId = function(params = {})\n{\n\tconst profile_level_id = params['profile-level-id'];\n\n\treturn !profile_level_id\n\t\t? DefaultProfileLevelId\n\t\t: exports.parseProfileLevelId(profile_level_id);\n};\n\n/**\n * Returns true if the parameters have the same H264 profile, i.e. the same\n * H264 profile (Baseline, High, etc).\n *\n * @param {Object} [params1={}] - Codec parameters object.\n * @param {Object} [params2={}] - Codec parameters object.\n *\n * @returns {Boolean}\n */\nexports.isSameProfile = function(params1 = {}, params2 = {})\n{\n\tconst profile_level_id_1 = exports.parseSdpProfileLevelId(params1);\n\tconst profile_level_id_2 = exports.parseSdpProfileLevelId(params2);\n\n\t// Compare H264 profiles, but not levels.\n\treturn Boolean(\n\t\tprofile_level_id_1 &&\n\t\tprofile_level_id_2 &&\n\t\tprofile_level_id_1.profile === profile_level_id_2.profile\n\t);\n};\n\n/**\n * Generate codec parameters that will be used as answer in an SDP negotiation\n * based on local supported parameters and remote offered parameters. Both\n * local_supported_params and remote_offered_params represent sendrecv media\n * descriptions, i.e they are a mix of both encode and decode capabilities. In\n * theory, when the profile in local_supported_params represent a strict superset\n * of the profile in remote_offered_params, we could limit the profile in the\n * answer to the profile in remote_offered_params.\n *\n * However, to simplify the code, each supported H264 profile should be listed\n * explicitly in the list of local supported codecs, even if they are redundant.\n * Then each local codec in the list should be tested one at a time against the\n * remote codec, and only when the profiles are equal should this function be\n * called. Therefore, this function does not need to handle profile intersection,\n * and the profile of local_supported_params and remote_offered_params must be\n * equal before calling this function. The parameters that are used when\n * negotiating are the level part of profile-level-id and level-asymmetry-allowed.\n *\n * @param {Object} [local_supported_params={}]\n * @param {Object} [remote_offered_params={}]\n *\n * @returns {String} Canonical string representation as three hex bytes of the\n *   profile level id, or null if no one of the params have profile-level-id.\n *\n * @throws {TypeError} If Profile mismatch or invalid params.\n */\nexports.generateProfileLevelIdForAnswer = function(\n\tlocal_supported_params = {},\n\tremote_offered_params = {}\n)\n{\n\t// If both local and remote params do not contain profile-level-id, they are\n\t// both using the default profile. In this case, don't return anything.\n\tif (\n\t\t!local_supported_params['profile-level-id'] &&\n\t\t!remote_offered_params['profile-level-id']\n\t)\n\t{\n\t\tdebug(\n\t\t\t'generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params');\n\n\t\treturn null;\n\t}\n\n\t// Parse profile-level-ids.\n\tconst local_profile_level_id =\n\t\texports.parseSdpProfileLevelId(local_supported_params);\n\tconst remote_profile_level_id =\n\t\texports.parseSdpProfileLevelId(remote_offered_params);\n\n\t// The local and remote codec must have valid and equal H264 Profiles.\n\tif (!local_profile_level_id)\n\t\tthrow new TypeError('invalid local_profile_level_id');\n\n\tif (!remote_profile_level_id)\n\t\tthrow new TypeError('invalid remote_profile_level_id');\n\n\tif (local_profile_level_id.profile !== remote_profile_level_id.profile)\n\t\tthrow new TypeError('H264 Profile mismatch');\n\n\t// Parse level information.\n\tconst level_asymmetry_allowed = (\n\t\tisLevelAsymmetryAllowed(local_supported_params) &&\n\t\tisLevelAsymmetryAllowed(remote_offered_params)\n\t);\n\n\tconst local_level = local_profile_level_id.level;\n\tconst remote_level = remote_profile_level_id.level;\n\tconst min_level = minLevel(local_level, remote_level);\n\n\t// Determine answer level. When level asymmetry is not allowed, level upgrade\n\t// is not allowed, i.e., the level in the answer must be equal to or lower\n\t// than the level in the offer.\n\tconst answer_level = level_asymmetry_allowed ? local_level : min_level;\n\n\tdebug(\n\t\t'generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]',\n\t\tlocal_profile_level_id.profile, answer_level);\n\n\t// Return the resulting profile-level-id for the answer parameters.\n\treturn exports.profileLevelIdToString(\n\t\tnew ProfileLevelId(local_profile_level_id.profile, answer_level));\n};\n\n// Convert a string of 8 characters into a byte where the positions containing\n// character c will have their bit set. For example, c = 'x', str = \"x1xx0000\"\n// will return 0b10110000.\nfunction byteMaskString(c, str)\n{\n\treturn (\n\t\t((str[0] === c) << 7) | ((str[1] === c) << 6) | ((str[2] === c) << 5) |\n\t\t((str[3] === c) << 4)\t| ((str[4] === c) << 3)\t| ((str[5] === c) << 2)\t|\n\t\t((str[6] === c) << 1)\t| ((str[7] === c) << 0)\n\t);\n}\n\n// Compare H264 levels and handle the level 1b case.\nfunction isLessLevel(a, b)\n{\n\tif (a === Level1_b)\n\t\treturn b !== Level1 && b !== Level1_b;\n\n\tif (b === Level1_b)\n\t\treturn a !== Level1;\n\n\treturn a < b;\n}\n\nfunction minLevel(a, b)\n{\n\treturn isLessLevel(a, b) ? a : b;\n}\n\nfunction isLevelAsymmetryAllowed(params = {})\n{\n\tconst level_asymmetry_allowed = params['level-asymmetry-allowed'];\n\n\treturn (\n\t\tlevel_asymmetry_allowed === 1 ||\n\t\tlevel_asymmetry_allowed === '1'\n\t);\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canReceive = exports.canSend = exports.generateProbatorRtpParameters = exports.reduceCodecs = exports.getSendingRemoteRtpParameters = exports.getSendingRtpParameters = exports.getRecvRtpCapabilities = exports.getExtendedRtpCapabilities = exports.validateSctpStreamParameters = exports.validateSctpParameters = exports.validateNumSctpStreams = exports.validateSctpCapabilities = exports.validateRtcpParameters = exports.validateRtpEncodingParameters = exports.validateRtpHeaderExtensionParameters = exports.validateRtpCodecParameters = exports.validateRtpParameters = exports.validateRtpHeaderExtension = exports.validateRtcpFeedback = exports.validateRtpCodecCapability = exports.validateRtpCapabilities = void 0;\nconst h264 = __importStar(require(\"h264-profile-level-id\"));\nconst utils = __importStar(require(\"./utils\"));\nconst RTP_PROBATOR_MID = 'probator';\nconst RTP_PROBATOR_SSRC = 1234;\nconst RTP_PROBATOR_CODEC_PAYLOAD_TYPE = 127;\n/**\n * Validates RtpCapabilities. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateRtpCapabilities(caps) {\n    if (typeof caps !== 'object')\n        throw new TypeError('caps is not an object');\n    // codecs is optional. If unset, fill with an empty array.\n    if (caps.codecs && !Array.isArray(caps.codecs))\n        throw new TypeError('caps.codecs is not an array');\n    else if (!caps.codecs)\n        caps.codecs = [];\n    for (const codec of caps.codecs) {\n        validateRtpCodecCapability(codec);\n    }\n    // headerExtensions is optional. If unset, fill with an empty array.\n    if (caps.headerExtensions && !Array.isArray(caps.headerExtensions))\n        throw new TypeError('caps.headerExtensions is not an array');\n    else if (!caps.headerExtensions)\n        caps.headerExtensions = [];\n    for (const ext of caps.headerExtensions) {\n        validateRtpHeaderExtension(ext);\n    }\n}\nexports.validateRtpCapabilities = validateRtpCapabilities;\n/**\n * Validates RtpCodecCapability. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateRtpCodecCapability(codec) {\n    const MimeTypeRegex = new RegExp('^(audio|video)/(.+)', 'i');\n    if (typeof codec !== 'object')\n        throw new TypeError('codec is not an object');\n    // mimeType is mandatory.\n    if (!codec.mimeType || typeof codec.mimeType !== 'string')\n        throw new TypeError('missing codec.mimeType');\n    const mimeTypeMatch = MimeTypeRegex.exec(codec.mimeType);\n    if (!mimeTypeMatch)\n        throw new TypeError('invalid codec.mimeType');\n    // Just override kind with media component of mimeType.\n    codec.kind = mimeTypeMatch[1].toLowerCase();\n    // preferredPayloadType is optional.\n    if (codec.preferredPayloadType && typeof codec.preferredPayloadType !== 'number')\n        throw new TypeError('invalid codec.preferredPayloadType');\n    // clockRate is mandatory.\n    if (typeof codec.clockRate !== 'number')\n        throw new TypeError('missing codec.clockRate');\n    // channels is optional. If unset, set it to 1 (just if audio).\n    if (codec.kind === 'audio') {\n        if (typeof codec.channels !== 'number')\n            codec.channels = 1;\n    }\n    else {\n        delete codec.channels;\n    }\n    // parameters is optional. If unset, set it to an empty object.\n    if (!codec.parameters || typeof codec.parameters !== 'object')\n        codec.parameters = {};\n    for (const key of Object.keys(codec.parameters)) {\n        let value = codec.parameters[key];\n        if (value === undefined) {\n            codec.parameters[key] = '';\n            value = '';\n        }\n        if (typeof value !== 'string' && typeof value !== 'number') {\n            throw new TypeError(`invalid codec parameter [key:${key}s, value:${value}]`);\n        }\n        // Specific parameters validation.\n        if (key === 'apt') {\n            if (typeof value !== 'number')\n                throw new TypeError('invalid codec apt parameter');\n        }\n    }\n    // rtcpFeedback is optional. If unset, set it to an empty array.\n    if (!codec.rtcpFeedback || !Array.isArray(codec.rtcpFeedback))\n        codec.rtcpFeedback = [];\n    for (const fb of codec.rtcpFeedback) {\n        validateRtcpFeedback(fb);\n    }\n}\nexports.validateRtpCodecCapability = validateRtpCodecCapability;\n/**\n * Validates RtcpFeedback. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateRtcpFeedback(fb) {\n    if (typeof fb !== 'object')\n        throw new TypeError('fb is not an object');\n    // type is mandatory.\n    if (!fb.type || typeof fb.type !== 'string')\n        throw new TypeError('missing fb.type');\n    // parameter is optional. If unset set it to an empty string.\n    if (!fb.parameter || typeof fb.parameter !== 'string')\n        fb.parameter = '';\n}\nexports.validateRtcpFeedback = validateRtcpFeedback;\n/**\n * Validates RtpHeaderExtension. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateRtpHeaderExtension(ext) {\n    if (typeof ext !== 'object')\n        throw new TypeError('ext is not an object');\n    // kind is mandatory.\n    if (ext.kind !== 'audio' && ext.kind !== 'video')\n        throw new TypeError('invalid ext.kind');\n    // uri is mandatory.\n    if (!ext.uri || typeof ext.uri !== 'string')\n        throw new TypeError('missing ext.uri');\n    // preferredId is mandatory.\n    if (typeof ext.preferredId !== 'number')\n        throw new TypeError('missing ext.preferredId');\n    // preferredEncrypt is optional. If unset set it to false.\n    if (ext.preferredEncrypt && typeof ext.preferredEncrypt !== 'boolean')\n        throw new TypeError('invalid ext.preferredEncrypt');\n    else if (!ext.preferredEncrypt)\n        ext.preferredEncrypt = false;\n    // direction is optional. If unset set it to sendrecv.\n    if (ext.direction && typeof ext.direction !== 'string')\n        throw new TypeError('invalid ext.direction');\n    else if (!ext.direction)\n        ext.direction = 'sendrecv';\n}\nexports.validateRtpHeaderExtension = validateRtpHeaderExtension;\n/**\n * Validates RtpParameters. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateRtpParameters(params) {\n    if (typeof params !== 'object')\n        throw new TypeError('params is not an object');\n    // mid is optional.\n    if (params.mid && typeof params.mid !== 'string')\n        throw new TypeError('params.mid is not a string');\n    // codecs is mandatory.\n    if (!Array.isArray(params.codecs))\n        throw new TypeError('missing params.codecs');\n    for (const codec of params.codecs) {\n        validateRtpCodecParameters(codec);\n    }\n    // headerExtensions is optional. If unset, fill with an empty array.\n    if (params.headerExtensions && !Array.isArray(params.headerExtensions))\n        throw new TypeError('params.headerExtensions is not an array');\n    else if (!params.headerExtensions)\n        params.headerExtensions = [];\n    for (const ext of params.headerExtensions) {\n        validateRtpHeaderExtensionParameters(ext);\n    }\n    // encodings is optional. If unset, fill with an empty array.\n    if (params.encodings && !Array.isArray(params.encodings))\n        throw new TypeError('params.encodings is not an array');\n    else if (!params.encodings)\n        params.encodings = [];\n    for (const encoding of params.encodings) {\n        validateRtpEncodingParameters(encoding);\n    }\n    // rtcp is optional. If unset, fill with an empty object.\n    if (params.rtcp && typeof params.rtcp !== 'object')\n        throw new TypeError('params.rtcp is not an object');\n    else if (!params.rtcp)\n        params.rtcp = {};\n    validateRtcpParameters(params.rtcp);\n}\nexports.validateRtpParameters = validateRtpParameters;\n/**\n * Validates RtpCodecParameters. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateRtpCodecParameters(codec) {\n    const MimeTypeRegex = new RegExp('^(audio|video)/(.+)', 'i');\n    if (typeof codec !== 'object')\n        throw new TypeError('codec is not an object');\n    // mimeType is mandatory.\n    if (!codec.mimeType || typeof codec.mimeType !== 'string')\n        throw new TypeError('missing codec.mimeType');\n    const mimeTypeMatch = MimeTypeRegex.exec(codec.mimeType);\n    if (!mimeTypeMatch)\n        throw new TypeError('invalid codec.mimeType');\n    // payloadType is mandatory.\n    if (typeof codec.payloadType !== 'number')\n        throw new TypeError('missing codec.payloadType');\n    // clockRate is mandatory.\n    if (typeof codec.clockRate !== 'number')\n        throw new TypeError('missing codec.clockRate');\n    const kind = mimeTypeMatch[1].toLowerCase();\n    // channels is optional. If unset, set it to 1 (just if audio).\n    if (kind === 'audio') {\n        if (typeof codec.channels !== 'number')\n            codec.channels = 1;\n    }\n    else {\n        delete codec.channels;\n    }\n    // parameters is optional. If unset, set it to an empty object.\n    if (!codec.parameters || typeof codec.parameters !== 'object')\n        codec.parameters = {};\n    for (const key of Object.keys(codec.parameters)) {\n        let value = codec.parameters[key];\n        if (value === undefined) {\n            codec.parameters[key] = '';\n            value = '';\n        }\n        if (typeof value !== 'string' && typeof value !== 'number') {\n            throw new TypeError(`invalid codec parameter [key:${key}s, value:${value}]`);\n        }\n        // Specific parameters validation.\n        if (key === 'apt') {\n            if (typeof value !== 'number')\n                throw new TypeError('invalid codec apt parameter');\n        }\n    }\n    // rtcpFeedback is optional. If unset, set it to an empty array.\n    if (!codec.rtcpFeedback || !Array.isArray(codec.rtcpFeedback))\n        codec.rtcpFeedback = [];\n    for (const fb of codec.rtcpFeedback) {\n        validateRtcpFeedback(fb);\n    }\n}\nexports.validateRtpCodecParameters = validateRtpCodecParameters;\n/**\n * Validates RtpHeaderExtensionParameteters. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateRtpHeaderExtensionParameters(ext) {\n    if (typeof ext !== 'object')\n        throw new TypeError('ext is not an object');\n    // uri is mandatory.\n    if (!ext.uri || typeof ext.uri !== 'string')\n        throw new TypeError('missing ext.uri');\n    // id is mandatory.\n    if (typeof ext.id !== 'number')\n        throw new TypeError('missing ext.id');\n    // encrypt is optional. If unset set it to false.\n    if (ext.encrypt && typeof ext.encrypt !== 'boolean')\n        throw new TypeError('invalid ext.encrypt');\n    else if (!ext.encrypt)\n        ext.encrypt = false;\n    // parameters is optional. If unset, set it to an empty object.\n    if (!ext.parameters || typeof ext.parameters !== 'object')\n        ext.parameters = {};\n    for (const key of Object.keys(ext.parameters)) {\n        let value = ext.parameters[key];\n        if (value === undefined) {\n            ext.parameters[key] = '';\n            value = '';\n        }\n        if (typeof value !== 'string' && typeof value !== 'number')\n            throw new TypeError('invalid header extension parameter');\n    }\n}\nexports.validateRtpHeaderExtensionParameters = validateRtpHeaderExtensionParameters;\n/**\n * Validates RtpEncodingParameters. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateRtpEncodingParameters(encoding) {\n    if (typeof encoding !== 'object')\n        throw new TypeError('encoding is not an object');\n    // ssrc is optional.\n    if (encoding.ssrc && typeof encoding.ssrc !== 'number')\n        throw new TypeError('invalid encoding.ssrc');\n    // rid is optional.\n    if (encoding.rid && typeof encoding.rid !== 'string')\n        throw new TypeError('invalid encoding.rid');\n    // rtx is optional.\n    if (encoding.rtx && typeof encoding.rtx !== 'object') {\n        throw new TypeError('invalid encoding.rtx');\n    }\n    else if (encoding.rtx) {\n        // RTX ssrc is mandatory if rtx is present.\n        if (typeof encoding.rtx.ssrc !== 'number')\n            throw new TypeError('missing encoding.rtx.ssrc');\n    }\n    // dtx is optional. If unset set it to false.\n    if (!encoding.dtx || typeof encoding.dtx !== 'boolean')\n        encoding.dtx = false;\n    // scalabilityMode is optional.\n    if (encoding.scalabilityMode && typeof encoding.scalabilityMode !== 'string')\n        throw new TypeError('invalid encoding.scalabilityMode');\n}\nexports.validateRtpEncodingParameters = validateRtpEncodingParameters;\n/**\n * Validates RtcpParameters. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateRtcpParameters(rtcp) {\n    if (typeof rtcp !== 'object')\n        throw new TypeError('rtcp is not an object');\n    // cname is optional.\n    if (rtcp.cname && typeof rtcp.cname !== 'string')\n        throw new TypeError('invalid rtcp.cname');\n    // reducedSize is optional. If unset set it to true.\n    if (!rtcp.reducedSize || typeof rtcp.reducedSize !== 'boolean')\n        rtcp.reducedSize = true;\n}\nexports.validateRtcpParameters = validateRtcpParameters;\n/**\n * Validates SctpCapabilities. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateSctpCapabilities(caps) {\n    if (typeof caps !== 'object')\n        throw new TypeError('caps is not an object');\n    // numStreams is mandatory.\n    if (!caps.numStreams || typeof caps.numStreams !== 'object')\n        throw new TypeError('missing caps.numStreams');\n    validateNumSctpStreams(caps.numStreams);\n}\nexports.validateSctpCapabilities = validateSctpCapabilities;\n/**\n * Validates NumSctpStreams. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateNumSctpStreams(numStreams) {\n    if (typeof numStreams !== 'object')\n        throw new TypeError('numStreams is not an object');\n    // OS is mandatory.\n    if (typeof numStreams.OS !== 'number')\n        throw new TypeError('missing numStreams.OS');\n    // MIS is mandatory.\n    if (typeof numStreams.MIS !== 'number')\n        throw new TypeError('missing numStreams.MIS');\n}\nexports.validateNumSctpStreams = validateNumSctpStreams;\n/**\n * Validates SctpParameters. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateSctpParameters(params) {\n    if (typeof params !== 'object')\n        throw new TypeError('params is not an object');\n    // port is mandatory.\n    if (typeof params.port !== 'number')\n        throw new TypeError('missing params.port');\n    // OS is mandatory.\n    if (typeof params.OS !== 'number')\n        throw new TypeError('missing params.OS');\n    // MIS is mandatory.\n    if (typeof params.MIS !== 'number')\n        throw new TypeError('missing params.MIS');\n    // maxMessageSize is mandatory.\n    if (typeof params.maxMessageSize !== 'number')\n        throw new TypeError('missing params.maxMessageSize');\n}\nexports.validateSctpParameters = validateSctpParameters;\n/**\n * Validates SctpStreamParameters. It may modify given data by adding missing\n * fields with default values.\n * It throws if invalid.\n */\nfunction validateSctpStreamParameters(params) {\n    if (typeof params !== 'object')\n        throw new TypeError('params is not an object');\n    // streamId is mandatory.\n    if (typeof params.streamId !== 'number')\n        throw new TypeError('missing params.streamId');\n    // ordered is optional.\n    let orderedGiven = false;\n    if (typeof params.ordered === 'boolean')\n        orderedGiven = true;\n    else\n        params.ordered = true;\n    // maxPacketLifeTime is optional.\n    if (params.maxPacketLifeTime && typeof params.maxPacketLifeTime !== 'number')\n        throw new TypeError('invalid params.maxPacketLifeTime');\n    // maxRetransmits is optional.\n    if (params.maxRetransmits && typeof params.maxRetransmits !== 'number')\n        throw new TypeError('invalid params.maxRetransmits');\n    if (params.maxPacketLifeTime && params.maxRetransmits)\n        throw new TypeError('cannot provide both maxPacketLifeTime and maxRetransmits');\n    if (orderedGiven &&\n        params.ordered &&\n        (params.maxPacketLifeTime || params.maxRetransmits)) {\n        throw new TypeError('cannot be ordered with maxPacketLifeTime or maxRetransmits');\n    }\n    else if (!orderedGiven && (params.maxPacketLifeTime || params.maxRetransmits)) {\n        params.ordered = false;\n    }\n    // label is optional.\n    if (params.label && typeof params.label !== 'string')\n        throw new TypeError('invalid params.label');\n    // protocol is optional.\n    if (params.protocol && typeof params.protocol !== 'string')\n        throw new TypeError('invalid params.protocol');\n}\nexports.validateSctpStreamParameters = validateSctpStreamParameters;\n/**\n * Generate extended RTP capabilities for sending and receiving.\n */\nfunction getExtendedRtpCapabilities(localCaps, remoteCaps) {\n    const extendedRtpCapabilities = {\n        codecs: [],\n        headerExtensions: []\n    };\n    // Match media codecs and keep the order preferred by remoteCaps.\n    for (const remoteCodec of remoteCaps.codecs || []) {\n        if (isRtxCodec(remoteCodec))\n            continue;\n        const matchingLocalCodec = (localCaps.codecs || [])\n            .find((localCodec) => (matchCodecs(localCodec, remoteCodec, { strict: true, modify: true })));\n        if (!matchingLocalCodec)\n            continue;\n        const extendedCodec = {\n            mimeType: matchingLocalCodec.mimeType,\n            kind: matchingLocalCodec.kind,\n            clockRate: matchingLocalCodec.clockRate,\n            channels: matchingLocalCodec.channels,\n            localPayloadType: matchingLocalCodec.preferredPayloadType,\n            localRtxPayloadType: undefined,\n            remotePayloadType: remoteCodec.preferredPayloadType,\n            remoteRtxPayloadType: undefined,\n            localParameters: matchingLocalCodec.parameters,\n            remoteParameters: remoteCodec.parameters,\n            rtcpFeedback: reduceRtcpFeedback(matchingLocalCodec, remoteCodec)\n        };\n        extendedRtpCapabilities.codecs.push(extendedCodec);\n    }\n    // Match RTX codecs.\n    for (const extendedCodec of extendedRtpCapabilities.codecs) {\n        const matchingLocalRtxCodec = localCaps.codecs\n            .find((localCodec) => (isRtxCodec(localCodec) &&\n            localCodec.parameters.apt === extendedCodec.localPayloadType));\n        const matchingRemoteRtxCodec = remoteCaps.codecs\n            .find((remoteCodec) => (isRtxCodec(remoteCodec) &&\n            remoteCodec.parameters.apt === extendedCodec.remotePayloadType));\n        if (matchingLocalRtxCodec && matchingRemoteRtxCodec) {\n            extendedCodec.localRtxPayloadType = matchingLocalRtxCodec.preferredPayloadType;\n            extendedCodec.remoteRtxPayloadType = matchingRemoteRtxCodec.preferredPayloadType;\n        }\n    }\n    // Match header extensions.\n    for (const remoteExt of remoteCaps.headerExtensions) {\n        const matchingLocalExt = localCaps.headerExtensions\n            .find((localExt) => (matchHeaderExtensions(localExt, remoteExt)));\n        if (!matchingLocalExt)\n            continue;\n        const extendedExt = {\n            kind: remoteExt.kind,\n            uri: remoteExt.uri,\n            sendId: matchingLocalExt.preferredId,\n            recvId: remoteExt.preferredId,\n            encrypt: matchingLocalExt.preferredEncrypt,\n            direction: 'sendrecv'\n        };\n        switch (remoteExt.direction) {\n            case 'sendrecv':\n                extendedExt.direction = 'sendrecv';\n                break;\n            case 'recvonly':\n                extendedExt.direction = 'sendonly';\n                break;\n            case 'sendonly':\n                extendedExt.direction = 'recvonly';\n                break;\n            case 'inactive':\n                extendedExt.direction = 'inactive';\n                break;\n        }\n        extendedRtpCapabilities.headerExtensions.push(extendedExt);\n    }\n    return extendedRtpCapabilities;\n}\nexports.getExtendedRtpCapabilities = getExtendedRtpCapabilities;\n/**\n * Generate RTP capabilities for receiving media based on the given extended\n * RTP capabilities.\n */\nfunction getRecvRtpCapabilities(extendedRtpCapabilities) {\n    const rtpCapabilities = {\n        codecs: [],\n        headerExtensions: []\n    };\n    for (const extendedCodec of extendedRtpCapabilities.codecs) {\n        const codec = {\n            mimeType: extendedCodec.mimeType,\n            kind: extendedCodec.kind,\n            preferredPayloadType: extendedCodec.remotePayloadType,\n            clockRate: extendedCodec.clockRate,\n            channels: extendedCodec.channels,\n            parameters: extendedCodec.localParameters,\n            rtcpFeedback: extendedCodec.rtcpFeedback\n        };\n        rtpCapabilities.codecs.push(codec);\n        // Add RTX codec.\n        if (!extendedCodec.remoteRtxPayloadType)\n            continue;\n        const rtxCodec = {\n            mimeType: `${extendedCodec.kind}/rtx`,\n            kind: extendedCodec.kind,\n            preferredPayloadType: extendedCodec.remoteRtxPayloadType,\n            clockRate: extendedCodec.clockRate,\n            parameters: {\n                apt: extendedCodec.remotePayloadType\n            },\n            rtcpFeedback: []\n        };\n        rtpCapabilities.codecs.push(rtxCodec);\n        // TODO: In the future, we need to add FEC, CN, etc, codecs.\n    }\n    for (const extendedExtension of extendedRtpCapabilities.headerExtensions) {\n        // Ignore RTP extensions not valid for receiving.\n        if (extendedExtension.direction !== 'sendrecv' &&\n            extendedExtension.direction !== 'recvonly') {\n            continue;\n        }\n        const ext = {\n            kind: extendedExtension.kind,\n            uri: extendedExtension.uri,\n            preferredId: extendedExtension.recvId,\n            preferredEncrypt: extendedExtension.encrypt,\n            direction: extendedExtension.direction\n        };\n        rtpCapabilities.headerExtensions.push(ext);\n    }\n    return rtpCapabilities;\n}\nexports.getRecvRtpCapabilities = getRecvRtpCapabilities;\n/**\n * Generate RTP parameters of the given kind for sending media.\n * NOTE: mid, encodings and rtcp fields are left empty.\n */\nfunction getSendingRtpParameters(kind, extendedRtpCapabilities) {\n    const rtpParameters = {\n        mid: undefined,\n        codecs: [],\n        headerExtensions: [],\n        encodings: [],\n        rtcp: {}\n    };\n    for (const extendedCodec of extendedRtpCapabilities.codecs) {\n        if (extendedCodec.kind !== kind)\n            continue;\n        const codec = {\n            mimeType: extendedCodec.mimeType,\n            payloadType: extendedCodec.localPayloadType,\n            clockRate: extendedCodec.clockRate,\n            channels: extendedCodec.channels,\n            parameters: extendedCodec.localParameters,\n            rtcpFeedback: extendedCodec.rtcpFeedback\n        };\n        rtpParameters.codecs.push(codec);\n        // Add RTX codec.\n        if (extendedCodec.localRtxPayloadType) {\n            const rtxCodec = {\n                mimeType: `${extendedCodec.kind}/rtx`,\n                payloadType: extendedCodec.localRtxPayloadType,\n                clockRate: extendedCodec.clockRate,\n                parameters: {\n                    apt: extendedCodec.localPayloadType\n                },\n                rtcpFeedback: []\n            };\n            rtpParameters.codecs.push(rtxCodec);\n        }\n    }\n    for (const extendedExtension of extendedRtpCapabilities.headerExtensions) {\n        // Ignore RTP extensions of a different kind and those not valid for sending.\n        if ((extendedExtension.kind && extendedExtension.kind !== kind) ||\n            (extendedExtension.direction !== 'sendrecv' &&\n                extendedExtension.direction !== 'sendonly')) {\n            continue;\n        }\n        const ext = {\n            uri: extendedExtension.uri,\n            id: extendedExtension.sendId,\n            encrypt: extendedExtension.encrypt,\n            parameters: {}\n        };\n        rtpParameters.headerExtensions.push(ext);\n    }\n    return rtpParameters;\n}\nexports.getSendingRtpParameters = getSendingRtpParameters;\n/**\n * Generate RTP parameters of the given kind suitable for the remote SDP answer.\n */\nfunction getSendingRemoteRtpParameters(kind, extendedRtpCapabilities) {\n    const rtpParameters = {\n        mid: undefined,\n        codecs: [],\n        headerExtensions: [],\n        encodings: [],\n        rtcp: {}\n    };\n    for (const extendedCodec of extendedRtpCapabilities.codecs) {\n        if (extendedCodec.kind !== kind)\n            continue;\n        const codec = {\n            mimeType: extendedCodec.mimeType,\n            payloadType: extendedCodec.localPayloadType,\n            clockRate: extendedCodec.clockRate,\n            channels: extendedCodec.channels,\n            parameters: extendedCodec.remoteParameters,\n            rtcpFeedback: extendedCodec.rtcpFeedback\n        };\n        rtpParameters.codecs.push(codec);\n        // Add RTX codec.\n        if (extendedCodec.localRtxPayloadType) {\n            const rtxCodec = {\n                mimeType: `${extendedCodec.kind}/rtx`,\n                payloadType: extendedCodec.localRtxPayloadType,\n                clockRate: extendedCodec.clockRate,\n                parameters: {\n                    apt: extendedCodec.localPayloadType\n                },\n                rtcpFeedback: []\n            };\n            rtpParameters.codecs.push(rtxCodec);\n        }\n    }\n    for (const extendedExtension of extendedRtpCapabilities.headerExtensions) {\n        // Ignore RTP extensions of a different kind and those not valid for sending.\n        if ((extendedExtension.kind && extendedExtension.kind !== kind) ||\n            (extendedExtension.direction !== 'sendrecv' &&\n                extendedExtension.direction !== 'sendonly')) {\n            continue;\n        }\n        const ext = {\n            uri: extendedExtension.uri,\n            id: extendedExtension.sendId,\n            encrypt: extendedExtension.encrypt,\n            parameters: {}\n        };\n        rtpParameters.headerExtensions.push(ext);\n    }\n    // Reduce codecs' RTCP feedback. Use Transport-CC if available, REMB otherwise.\n    if (rtpParameters.headerExtensions.some((ext) => (ext.uri === 'http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01'))) {\n        for (const codec of rtpParameters.codecs) {\n            codec.rtcpFeedback = (codec.rtcpFeedback || [])\n                .filter((fb) => fb.type !== 'goog-remb');\n        }\n    }\n    else if (rtpParameters.headerExtensions.some((ext) => (ext.uri === 'http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time'))) {\n        for (const codec of rtpParameters.codecs) {\n            codec.rtcpFeedback = (codec.rtcpFeedback || [])\n                .filter((fb) => fb.type !== 'transport-cc');\n        }\n    }\n    else {\n        for (const codec of rtpParameters.codecs) {\n            codec.rtcpFeedback = (codec.rtcpFeedback || [])\n                .filter((fb) => (fb.type !== 'transport-cc' &&\n                fb.type !== 'goog-remb'));\n        }\n    }\n    return rtpParameters;\n}\nexports.getSendingRemoteRtpParameters = getSendingRemoteRtpParameters;\n/**\n * Reduce given codecs by returning an array of codecs \"compatible\" with the\n * given capability codec. If no capability codec is given, take the first\n * one(s).\n *\n * Given codecs must be generated by ortc.getSendingRtpParameters() or\n * ortc.getSendingRemoteRtpParameters().\n *\n * The returned array of codecs also include a RTX codec if available.\n */\nfunction reduceCodecs(codecs, capCodec) {\n    const filteredCodecs = [];\n    // If no capability codec is given, take the first one (and RTX).\n    if (!capCodec) {\n        filteredCodecs.push(codecs[0]);\n        if (isRtxCodec(codecs[1]))\n            filteredCodecs.push(codecs[1]);\n    }\n    // Otherwise look for a compatible set of codecs.\n    else {\n        for (let idx = 0; idx < codecs.length; ++idx) {\n            if (matchCodecs(codecs[idx], capCodec)) {\n                filteredCodecs.push(codecs[idx]);\n                if (isRtxCodec(codecs[idx + 1]))\n                    filteredCodecs.push(codecs[idx + 1]);\n                break;\n            }\n        }\n        if (filteredCodecs.length === 0)\n            throw new TypeError('no matching codec found');\n    }\n    return filteredCodecs;\n}\nexports.reduceCodecs = reduceCodecs;\n/**\n * Create RTP parameters for a Consumer for the RTP probator.\n */\nfunction generateProbatorRtpParameters(videoRtpParameters) {\n    // Clone given reference video RTP parameters.\n    videoRtpParameters = utils.clone(videoRtpParameters, {});\n    // This may throw.\n    validateRtpParameters(videoRtpParameters);\n    const rtpParameters = {\n        mid: RTP_PROBATOR_MID,\n        codecs: [],\n        headerExtensions: [],\n        encodings: [{ ssrc: RTP_PROBATOR_SSRC }],\n        rtcp: { cname: 'probator' }\n    };\n    rtpParameters.codecs.push(videoRtpParameters.codecs[0]);\n    rtpParameters.codecs[0].payloadType = RTP_PROBATOR_CODEC_PAYLOAD_TYPE;\n    rtpParameters.headerExtensions = videoRtpParameters.headerExtensions;\n    return rtpParameters;\n}\nexports.generateProbatorRtpParameters = generateProbatorRtpParameters;\n/**\n * Whether media can be sent based on the given RTP capabilities.\n */\nfunction canSend(kind, extendedRtpCapabilities) {\n    return extendedRtpCapabilities.codecs.\n        some((codec) => codec.kind === kind);\n}\nexports.canSend = canSend;\n/**\n * Whether the given RTP parameters can be received with the given RTP\n * capabilities.\n */\nfunction canReceive(rtpParameters, extendedRtpCapabilities) {\n    // This may throw.\n    validateRtpParameters(rtpParameters);\n    if (rtpParameters.codecs.length === 0)\n        return false;\n    const firstMediaCodec = rtpParameters.codecs[0];\n    return extendedRtpCapabilities.codecs\n        .some((codec) => codec.remotePayloadType === firstMediaCodec.payloadType);\n}\nexports.canReceive = canReceive;\nfunction isRtxCodec(codec) {\n    if (!codec)\n        return false;\n    return /.+\\/rtx$/i.test(codec.mimeType);\n}\nfunction matchCodecs(aCodec, bCodec, { strict = false, modify = false } = {}) {\n    const aMimeType = aCodec.mimeType.toLowerCase();\n    const bMimeType = bCodec.mimeType.toLowerCase();\n    if (aMimeType !== bMimeType)\n        return false;\n    if (aCodec.clockRate !== bCodec.clockRate)\n        return false;\n    if (aCodec.channels !== bCodec.channels)\n        return false;\n    // Per codec special checks.\n    switch (aMimeType) {\n        case 'video/h264':\n            {\n                // If strict matching check profile-level-id.\n                if (strict) {\n                    const aPacketizationMode = aCodec.parameters['packetization-mode'] || 0;\n                    const bPacketizationMode = bCodec.parameters['packetization-mode'] || 0;\n                    if (aPacketizationMode !== bPacketizationMode)\n                        return false;\n                    if (!h264.isSameProfile(aCodec.parameters, bCodec.parameters))\n                        return false;\n                    let selectedProfileLevelId;\n                    try {\n                        selectedProfileLevelId =\n                            h264.generateProfileLevelIdForAnswer(aCodec.parameters, bCodec.parameters);\n                    }\n                    catch (error) {\n                        return false;\n                    }\n                    if (modify) {\n                        if (selectedProfileLevelId) {\n                            aCodec.parameters['profile-level-id'] = selectedProfileLevelId;\n                            bCodec.parameters['profile-level-id'] = selectedProfileLevelId;\n                        }\n                        else {\n                            delete aCodec.parameters['profile-level-id'];\n                            delete bCodec.parameters['profile-level-id'];\n                        }\n                    }\n                }\n                break;\n            }\n        case 'video/vp9':\n            {\n                // If strict matching check profile-id.\n                if (strict) {\n                    const aProfileId = aCodec.parameters['profile-id'] || 0;\n                    const bProfileId = bCodec.parameters['profile-id'] || 0;\n                    if (aProfileId !== bProfileId)\n                        return false;\n                }\n                break;\n            }\n    }\n    return true;\n}\nfunction matchHeaderExtensions(aExt, bExt) {\n    if (aExt.kind && bExt.kind && aExt.kind !== bExt.kind)\n        return false;\n    if (aExt.uri !== bExt.uri)\n        return false;\n    return true;\n}\nfunction reduceRtcpFeedback(codecA, codecB) {\n    const reducedRtcpFeedback = [];\n    for (const aFb of codecA.rtcpFeedback || []) {\n        const matchingBFb = (codecB.rtcpFeedback || [])\n            .find((bFb) => (bFb.type === aFb.type &&\n            (bFb.parameter === aFb.parameter || (!bFb.parameter && !aFb.parameter))));\n        if (matchingBFb)\n            reducedRtcpFeedback.push(matchingBFb);\n    }\n    return reducedRtcpFeedback;\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass AwaitQueue {\n    constructor({ ClosedErrorClass = Error, StoppedErrorClass = Error } = {\n        ClosedErrorClass: Error,\n        StoppedErrorClass: Error\n    }) {\n        // Closed flag.\n        this.closed = false;\n        // Queue of pending tasks.\n        this.pendingTasks = [];\n        // Error class used when rejecting a task due to AwaitQueue being closed.\n        this.ClosedErrorClass = Error;\n        // Error class used when rejecting a task due to AwaitQueue being stopped.\n        this.StoppedErrorClass = Error;\n        this.ClosedErrorClass = ClosedErrorClass;\n        this.StoppedErrorClass = StoppedErrorClass;\n    }\n    /**\n     * The number of ongoing enqueued tasks.\n     */\n    get size() {\n        return this.pendingTasks.length;\n    }\n    /**\n     * Closes the AwaitQueue. Pending tasks will be rejected with ClosedErrorClass\n     * error.\n     */\n    close() {\n        if (this.closed)\n            return;\n        this.closed = true;\n        for (const pendingTask of this.pendingTasks) {\n            pendingTask.stopped = true;\n            pendingTask.reject(new this.ClosedErrorClass('AwaitQueue closed'));\n        }\n        // Enpty the pending tasks array.\n        this.pendingTasks.length = 0;\n    }\n    /**\n     * Accepts a task as argument (and an optional task name) and enqueues it after\n     * pending tasks. Once processed, the push() method resolves (or rejects) with\n     * the result returned by the given task.\n     *\n     * The given task must return a Promise or directly a value.\n     */\n    push(task, name) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.closed)\n                throw new this.ClosedErrorClass('AwaitQueue closed');\n            if (typeof task !== 'function')\n                throw new TypeError('given task is not a function');\n            if (!task.name && name) {\n                try {\n                    Object.defineProperty(task, 'name', { value: name });\n                }\n                catch (error) { }\n            }\n            return new Promise((resolve, reject) => {\n                const pendingTask = {\n                    task,\n                    name,\n                    resolve,\n                    reject,\n                    stopped: false,\n                    enqueuedAt: new Date(),\n                    executedAt: undefined\n                };\n                // Append task to the queue.\n                this.pendingTasks.push(pendingTask);\n                // And run it if this is the only task in the queue.\n                if (this.pendingTasks.length === 1)\n                    this.next();\n            });\n        });\n    }\n    /**\n     * Make ongoing pending tasks reject with the given StoppedErrorClass error.\n     * The AwaitQueue instance is still usable for future tasks added via push()\n     * method.\n     */\n    stop() {\n        if (this.closed)\n            return;\n        for (const pendingTask of this.pendingTasks) {\n            pendingTask.stopped = true;\n            pendingTask.reject(new this.StoppedErrorClass('AwaitQueue stopped'));\n        }\n        // Enpty the pending tasks array.\n        this.pendingTasks.length = 0;\n    }\n    dump() {\n        const now = new Date();\n        return this.pendingTasks.map((pendingTask) => {\n            return {\n                task: pendingTask.task,\n                name: pendingTask.name,\n                enqueuedTime: pendingTask.executedAt\n                    ? pendingTask.executedAt.getTime() - pendingTask.enqueuedAt.getTime()\n                    : now.getTime() - pendingTask.enqueuedAt.getTime(),\n                executingTime: pendingTask.executedAt\n                    ? now.getTime() - pendingTask.executedAt.getTime()\n                    : 0\n            };\n        });\n    }\n    next() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Take the first pending task.\n            const pendingTask = this.pendingTasks[0];\n            if (!pendingTask)\n                return;\n            // Execute it.\n            yield this.executeTask(pendingTask);\n            // Remove the first pending task (the completed one) from the queue.\n            this.pendingTasks.shift();\n            // And continue.\n            this.next();\n        });\n    }\n    executeTask(pendingTask) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // If the task is stopped, ignore it.\n            if (pendingTask.stopped)\n                return;\n            pendingTask.executedAt = new Date();\n            try {\n                const result = yield pendingTask.task();\n                // If the task is stopped, ignore it.\n                if (pendingTask.stopped)\n                    return;\n                // Resolve the task with the returned result (if any).\n                pendingTask.resolve(result);\n            }\n            catch (error) {\n                // If the task is stopped, ignore it.\n                if (pendingTask.stopped)\n                    return;\n                // Reject the task with its own error.\n                pendingTask.reject(error);\n            }\n        });\n    }\n}\nexports.AwaitQueue = AwaitQueue;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Producer = void 0;\nconst Logger_1 = require(\"./Logger\");\nconst EnhancedEventEmitter_1 = require(\"./EnhancedEventEmitter\");\nconst errors_1 = require(\"./errors\");\nconst logger = new Logger_1.Logger('Producer');\nclass Producer extends EnhancedEventEmitter_1.EnhancedEventEmitter {\n    /**\n     * @emits transportclose\n     * @emits trackended\n     * @emits @replacetrack - (track: MediaStreamTrack | null)\n     * @emits @setmaxspatiallayer - (spatialLayer: string)\n     * @emits @setrtpencodingparameters - (params: any)\n     * @emits @getstats\n     * @emits @close\n     */\n    constructor({ id, localId, rtpSender, track, rtpParameters, stopTracks, disableTrackOnPause, zeroRtpOnPause, appData }) {\n        super();\n        // Closed flag.\n        this._closed = false;\n        // Observer instance.\n        this._observer = new EnhancedEventEmitter_1.EnhancedEventEmitter();\n        logger.debug('constructor()');\n        this._id = id;\n        this._localId = localId;\n        this._rtpSender = rtpSender;\n        this._track = track;\n        this._kind = track.kind;\n        this._rtpParameters = rtpParameters;\n        this._paused = disableTrackOnPause ? !track.enabled : false;\n        this._maxSpatialLayer = undefined;\n        this._stopTracks = stopTracks;\n        this._disableTrackOnPause = disableTrackOnPause;\n        this._zeroRtpOnPause = zeroRtpOnPause;\n        this._appData = appData;\n        this._onTrackEnded = this._onTrackEnded.bind(this);\n        // NOTE: Minor issue. If zeroRtpOnPause is true, we cannot emit the\n        // '@replacetrack' event here, so RTCRtpSender.track won't be null.\n        this._handleTrack();\n    }\n    /**\n     * Producer id.\n     */\n    get id() {\n        return this._id;\n    }\n    /**\n     * Local id.\n     */\n    get localId() {\n        return this._localId;\n    }\n    /**\n     * Whether the Producer is closed.\n     */\n    get closed() {\n        return this._closed;\n    }\n    /**\n     * Media kind.\n     */\n    get kind() {\n        return this._kind;\n    }\n    /**\n     * Associated RTCRtpSender.\n     */\n    get rtpSender() {\n        return this._rtpSender;\n    }\n    /**\n     * The associated track.\n     */\n    get track() {\n        return this._track;\n    }\n    /**\n     * RTP parameters.\n     */\n    get rtpParameters() {\n        return this._rtpParameters;\n    }\n    /**\n     * Whether the Producer is paused.\n     */\n    get paused() {\n        return this._paused;\n    }\n    /**\n     * Max spatial layer.\n     *\n     * @type {Number | undefined}\n     */\n    get maxSpatialLayer() {\n        return this._maxSpatialLayer;\n    }\n    /**\n     * App custom data.\n     */\n    get appData() {\n        return this._appData;\n    }\n    /**\n     * Invalid setter.\n     */\n    set appData(appData) {\n        throw new Error('cannot override appData object');\n    }\n    /**\n     * Observer.\n     *\n     * @emits close\n     * @emits pause\n     * @emits resume\n     * @emits trackended\n     */\n    get observer() {\n        return this._observer;\n    }\n    /**\n     * Closes the Producer.\n     */\n    close() {\n        if (this._closed)\n            return;\n        logger.debug('close()');\n        this._closed = true;\n        this._destroyTrack();\n        this.emit('@close');\n        // Emit observer event.\n        this._observer.safeEmit('close');\n    }\n    /**\n     * Transport was closed.\n     */\n    transportClosed() {\n        if (this._closed)\n            return;\n        logger.debug('transportClosed()');\n        this._closed = true;\n        this._destroyTrack();\n        this.safeEmit('transportclose');\n        // Emit observer event.\n        this._observer.safeEmit('close');\n    }\n    /**\n     * Get associated RTCRtpSender stats.\n     */\n    async getStats() {\n        if (this._closed)\n            throw new errors_1.InvalidStateError('closed');\n        return this.safeEmitAsPromise('@getstats');\n    }\n    /**\n     * Pauses sending media.\n     */\n    pause() {\n        logger.debug('pause()');\n        if (this._closed) {\n            logger.error('pause() | Producer closed');\n            return;\n        }\n        this._paused = true;\n        if (this._track && this._disableTrackOnPause) {\n            this._track.enabled = false;\n        }\n        if (this._zeroRtpOnPause) {\n            this.safeEmitAsPromise('@replacetrack', null)\n                .catch(() => { });\n        }\n        // Emit observer event.\n        this._observer.safeEmit('pause');\n    }\n    /**\n     * Resumes sending media.\n     */\n    resume() {\n        logger.debug('resume()');\n        if (this._closed) {\n            logger.error('resume() | Producer closed');\n            return;\n        }\n        this._paused = false;\n        if (this._track && this._disableTrackOnPause) {\n            this._track.enabled = true;\n        }\n        if (this._zeroRtpOnPause) {\n            this.safeEmitAsPromise('@replacetrack', this._track)\n                .catch(() => { });\n        }\n        // Emit observer event.\n        this._observer.safeEmit('resume');\n    }\n    /**\n     * Replaces the current track with a new one or null.\n     */\n    async replaceTrack({ track }) {\n        logger.debug('replaceTrack() [track:%o]', track);\n        if (this._closed) {\n            // This must be done here. Otherwise there is no chance to stop the given\n            // track.\n            if (track && this._stopTracks) {\n                try {\n                    track.stop();\n                }\n                catch (error) { }\n            }\n            throw new errors_1.InvalidStateError('closed');\n        }\n        else if (track && track.readyState === 'ended') {\n            throw new errors_1.InvalidStateError('track ended');\n        }\n        // Do nothing if this is the same track as the current handled one.\n        if (track === this._track) {\n            logger.debug('replaceTrack() | same track, ignored');\n            return;\n        }\n        if (!this._zeroRtpOnPause || !this._paused) {\n            await this.safeEmitAsPromise('@replacetrack', track);\n        }\n        // Destroy the previous track.\n        this._destroyTrack();\n        // Set the new track.\n        this._track = track;\n        // If this Producer was paused/resumed and the state of the new\n        // track does not match, fix it.\n        if (this._track && this._disableTrackOnPause) {\n            if (!this._paused)\n                this._track.enabled = true;\n            else if (this._paused)\n                this._track.enabled = false;\n        }\n        // Handle the effective track.\n        this._handleTrack();\n    }\n    /**\n     * Sets the video max spatial layer to be sent.\n     */\n    async setMaxSpatialLayer(spatialLayer) {\n        if (this._closed)\n            throw new errors_1.InvalidStateError('closed');\n        else if (this._kind !== 'video')\n            throw new errors_1.UnsupportedError('not a video Producer');\n        else if (typeof spatialLayer !== 'number')\n            throw new TypeError('invalid spatialLayer');\n        if (spatialLayer === this._maxSpatialLayer)\n            return;\n        await this.safeEmitAsPromise('@setmaxspatiallayer', spatialLayer);\n        this._maxSpatialLayer = spatialLayer;\n    }\n    /**\n     * Sets the DSCP value.\n     */\n    async setRtpEncodingParameters(params) {\n        if (this._closed)\n            throw new errors_1.InvalidStateError('closed');\n        else if (typeof params !== 'object')\n            throw new TypeError('invalid params');\n        await this.safeEmitAsPromise('@setrtpencodingparameters', params);\n    }\n    _onTrackEnded() {\n        logger.debug('track \"ended\" event');\n        this.safeEmit('trackended');\n        // Emit observer event.\n        this._observer.safeEmit('trackended');\n    }\n    _handleTrack() {\n        if (!this._track)\n            return;\n        this._track.addEventListener('ended', this._onTrackEnded);\n    }\n    _destroyTrack() {\n        if (!this._track)\n            return;\n        try {\n            this._track.removeEventListener('ended', this._onTrackEnded);\n            // Just stop the track unless the app set stopTracks: false.\n            if (this._stopTracks)\n                this._track.stop();\n        }\n        catch (error) { }\n    }\n}\nexports.Producer = Producer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Consumer = void 0;\nconst Logger_1 = require(\"./Logger\");\nconst EnhancedEventEmitter_1 = require(\"./EnhancedEventEmitter\");\nconst errors_1 = require(\"./errors\");\nconst logger = new Logger_1.Logger('Consumer');\nclass Consumer extends EnhancedEventEmitter_1.EnhancedEventEmitter {\n    /**\n     * @emits transportclose\n     * @emits trackended\n     * @emits @getstats\n     * @emits @close\n     * @emits @pause\n     * @emits @resume\n     */\n    constructor({ id, localId, producerId, rtpReceiver, track, rtpParameters, appData }) {\n        super();\n        // Closed flag.\n        this._closed = false;\n        // Observer instance.\n        this._observer = new EnhancedEventEmitter_1.EnhancedEventEmitter();\n        logger.debug('constructor()');\n        this._id = id;\n        this._localId = localId;\n        this._producerId = producerId;\n        this._rtpReceiver = rtpReceiver;\n        this._track = track;\n        this._rtpParameters = rtpParameters;\n        this._paused = !track.enabled;\n        this._appData = appData;\n        this._onTrackEnded = this._onTrackEnded.bind(this);\n        this._handleTrack();\n    }\n    /**\n     * Consumer id.\n     */\n    get id() {\n        return this._id;\n    }\n    /**\n     * Local id.\n     */\n    get localId() {\n        return this._localId;\n    }\n    /**\n     * Associated Producer id.\n     */\n    get producerId() {\n        return this._producerId;\n    }\n    /**\n     * Whether the Consumer is closed.\n     */\n    get closed() {\n        return this._closed;\n    }\n    /**\n     * Media kind.\n     */\n    get kind() {\n        return this._track.kind;\n    }\n    /**\n     * Associated RTCRtpReceiver.\n     */\n    get rtpReceiver() {\n        return this._rtpReceiver;\n    }\n    /**\n     * The associated track.\n     */\n    get track() {\n        return this._track;\n    }\n    /**\n     * RTP parameters.\n     */\n    get rtpParameters() {\n        return this._rtpParameters;\n    }\n    /**\n     * Whether the Consumer is paused.\n     */\n    get paused() {\n        return this._paused;\n    }\n    /**\n     * App custom data.\n     */\n    get appData() {\n        return this._appData;\n    }\n    /**\n     * Invalid setter.\n     */\n    set appData(appData) {\n        throw new Error('cannot override appData object');\n    }\n    /**\n     * Observer.\n     *\n     * @emits close\n     * @emits pause\n     * @emits resume\n     * @emits trackended\n     */\n    get observer() {\n        return this._observer;\n    }\n    /**\n     * Closes the Consumer.\n     */\n    close() {\n        if (this._closed)\n            return;\n        logger.debug('close()');\n        this._closed = true;\n        this._destroyTrack();\n        this.emit('@close');\n        // Emit observer event.\n        this._observer.safeEmit('close');\n    }\n    /**\n     * Transport was closed.\n     */\n    transportClosed() {\n        if (this._closed)\n            return;\n        logger.debug('transportClosed()');\n        this._closed = true;\n        this._destroyTrack();\n        this.safeEmit('transportclose');\n        // Emit observer event.\n        this._observer.safeEmit('close');\n    }\n    /**\n     * Get associated RTCRtpReceiver stats.\n     */\n    async getStats() {\n        if (this._closed)\n            throw new errors_1.InvalidStateError('closed');\n        return this.safeEmitAsPromise('@getstats');\n    }\n    /**\n     * Pauses receiving media.\n     */\n    pause() {\n        logger.debug('pause()');\n        if (this._closed) {\n            logger.error('pause() | Consumer closed');\n            return;\n        }\n        this._paused = true;\n        this._track.enabled = false;\n        this.emit('@pause');\n        // Emit observer event.\n        this._observer.safeEmit('pause');\n    }\n    /**\n     * Resumes receiving media.\n     */\n    resume() {\n        logger.debug('resume()');\n        if (this._closed) {\n            logger.error('resume() | Consumer closed');\n            return;\n        }\n        this._paused = false;\n        this._track.enabled = true;\n        this.emit('@resume');\n        // Emit observer event.\n        this._observer.safeEmit('resume');\n    }\n    _onTrackEnded() {\n        logger.debug('track \"ended\" event');\n        this.safeEmit('trackended');\n        // Emit observer event.\n        this._observer.safeEmit('trackended');\n    }\n    _handleTrack() {\n        this._track.addEventListener('ended', this._onTrackEnded);\n    }\n    _destroyTrack() {\n        try {\n            this._track.removeEventListener('ended', this._onTrackEnded);\n            this._track.stop();\n        }\n        catch (error) { }\n    }\n}\nexports.Consumer = Consumer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DataProducer = void 0;\nconst Logger_1 = require(\"./Logger\");\nconst EnhancedEventEmitter_1 = require(\"./EnhancedEventEmitter\");\nconst errors_1 = require(\"./errors\");\nconst logger = new Logger_1.Logger('DataProducer');\nclass DataProducer extends EnhancedEventEmitter_1.EnhancedEventEmitter {\n    /**\n     * @emits transportclose\n     * @emits open\n     * @emits error - (error: Error)\n     * @emits close\n     * @emits bufferedamountlow\n     * @emits @close\n     */\n    constructor({ id, dataChannel, sctpStreamParameters, appData }) {\n        super();\n        // Closed flag.\n        this._closed = false;\n        // Observer instance.\n        this._observer = new EnhancedEventEmitter_1.EnhancedEventEmitter();\n        logger.debug('constructor()');\n        this._id = id;\n        this._dataChannel = dataChannel;\n        this._sctpStreamParameters = sctpStreamParameters;\n        this._appData = appData;\n        this._handleDataChannel();\n    }\n    /**\n     * DataProducer id.\n     */\n    get id() {\n        return this._id;\n    }\n    /**\n     * Whether the DataProducer is closed.\n     */\n    get closed() {\n        return this._closed;\n    }\n    /**\n     * SCTP stream parameters.\n     */\n    get sctpStreamParameters() {\n        return this._sctpStreamParameters;\n    }\n    /**\n     * DataChannel readyState.\n     */\n    get readyState() {\n        return this._dataChannel.readyState;\n    }\n    /**\n     * DataChannel label.\n     */\n    get label() {\n        return this._dataChannel.label;\n    }\n    /**\n     * DataChannel protocol.\n     */\n    get protocol() {\n        return this._dataChannel.protocol;\n    }\n    /**\n     * DataChannel bufferedAmount.\n     */\n    get bufferedAmount() {\n        return this._dataChannel.bufferedAmount;\n    }\n    /**\n     * DataChannel bufferedAmountLowThreshold.\n     */\n    get bufferedAmountLowThreshold() {\n        return this._dataChannel.bufferedAmountLowThreshold;\n    }\n    /**\n     * Set DataChannel bufferedAmountLowThreshold.\n     */\n    set bufferedAmountLowThreshold(bufferedAmountLowThreshold) {\n        this._dataChannel.bufferedAmountLowThreshold = bufferedAmountLowThreshold;\n    }\n    /**\n     * App custom data.\n     */\n    get appData() {\n        return this._appData;\n    }\n    /**\n     * Invalid setter.\n     */\n    set appData(appData) {\n        throw new Error('cannot override appData object');\n    }\n    /**\n     * Observer.\n     *\n     * @emits close\n     */\n    get observer() {\n        return this._observer;\n    }\n    /**\n     * Closes the DataProducer.\n     */\n    close() {\n        if (this._closed)\n            return;\n        logger.debug('close()');\n        this._closed = true;\n        this._dataChannel.close();\n        this.emit('@close');\n        // Emit observer event.\n        this._observer.safeEmit('close');\n    }\n    /**\n     * Transport was closed.\n     */\n    transportClosed() {\n        if (this._closed)\n            return;\n        logger.debug('transportClosed()');\n        this._closed = true;\n        this._dataChannel.close();\n        this.safeEmit('transportclose');\n        // Emit observer event.\n        this._observer.safeEmit('close');\n    }\n    /**\n     * Send a message.\n     *\n     * @param {String|Blob|ArrayBuffer|ArrayBufferView} data.\n     */\n    send(data) {\n        logger.debug('send()');\n        if (this._closed)\n            throw new errors_1.InvalidStateError('closed');\n        this._dataChannel.send(data);\n    }\n    _handleDataChannel() {\n        this._dataChannel.addEventListener('open', () => {\n            if (this._closed)\n                return;\n            logger.debug('DataChannel \"open\" event');\n            this.safeEmit('open');\n        });\n        this._dataChannel.addEventListener('error', (event) => {\n            if (this._closed)\n                return;\n            let { error } = event;\n            if (!error)\n                error = new Error('unknown DataChannel error');\n            if (error.errorDetail === 'sctp-failure') {\n                logger.error('DataChannel SCTP error [sctpCauseCode:%s]: %s', error.sctpCauseCode, error.message);\n            }\n            else {\n                logger.error('DataChannel \"error\" event: %o', error);\n            }\n            this.safeEmit('error', error);\n        });\n        this._dataChannel.addEventListener('close', () => {\n            if (this._closed)\n                return;\n            logger.warn('DataChannel \"close\" event');\n            this._closed = true;\n            this.emit('@close');\n            this.safeEmit('close');\n        });\n        this._dataChannel.addEventListener('message', () => {\n            if (this._closed)\n                return;\n            logger.warn('DataChannel \"message\" event in a DataProducer, message discarded');\n        });\n        this._dataChannel.addEventListener('bufferedamountlow', () => {\n            if (this._closed)\n                return;\n            this.safeEmit('bufferedamountlow');\n        });\n    }\n}\nexports.DataProducer = DataProducer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DataConsumer = void 0;\nconst Logger_1 = require(\"./Logger\");\nconst EnhancedEventEmitter_1 = require(\"./EnhancedEventEmitter\");\nconst logger = new Logger_1.Logger('DataConsumer');\nclass DataConsumer extends EnhancedEventEmitter_1.EnhancedEventEmitter {\n    /**\n     * @emits transportclose\n     * @emits open\n     * @emits error - (error: Error)\n     * @emits close\n     * @emits message - (message: any)\n     * @emits @close\n     */\n    constructor({ id, dataProducerId, dataChannel, sctpStreamParameters, appData }) {\n        super();\n        // Closed flag.\n        this._closed = false;\n        // Observer instance.\n        this._observer = new EnhancedEventEmitter_1.EnhancedEventEmitter();\n        logger.debug('constructor()');\n        this._id = id;\n        this._dataProducerId = dataProducerId;\n        this._dataChannel = dataChannel;\n        this._sctpStreamParameters = sctpStreamParameters;\n        this._appData = appData;\n        this._handleDataChannel();\n    }\n    /**\n     * DataConsumer id.\n     */\n    get id() {\n        return this._id;\n    }\n    /**\n     * Associated DataProducer id.\n     */\n    get dataProducerId() {\n        return this._dataProducerId;\n    }\n    /**\n     * Whether the DataConsumer is closed.\n     */\n    get closed() {\n        return this._closed;\n    }\n    /**\n     * SCTP stream parameters.\n     */\n    get sctpStreamParameters() {\n        return this._sctpStreamParameters;\n    }\n    /**\n     * DataChannel readyState.\n     */\n    get readyState() {\n        return this._dataChannel.readyState;\n    }\n    /**\n     * DataChannel label.\n     */\n    get label() {\n        return this._dataChannel.label;\n    }\n    /**\n     * DataChannel protocol.\n     */\n    get protocol() {\n        return this._dataChannel.protocol;\n    }\n    /**\n     * DataChannel binaryType.\n     */\n    get binaryType() {\n        return this._dataChannel.binaryType;\n    }\n    /**\n     * Set DataChannel binaryType.\n     */\n    set binaryType(binaryType) {\n        this._dataChannel.binaryType = binaryType;\n    }\n    /**\n     * App custom data.\n     */\n    get appData() {\n        return this._appData;\n    }\n    /**\n     * Invalid setter.\n     */\n    set appData(appData) {\n        throw new Error('cannot override appData object');\n    }\n    /**\n     * Observer.\n     *\n     * @emits close\n     */\n    get observer() {\n        return this._observer;\n    }\n    /**\n     * Closes the DataConsumer.\n     */\n    close() {\n        if (this._closed)\n            return;\n        logger.debug('close()');\n        this._closed = true;\n        this._dataChannel.close();\n        this.emit('@close');\n        // Emit observer event.\n        this._observer.safeEmit('close');\n    }\n    /**\n     * Transport was closed.\n     */\n    transportClosed() {\n        if (this._closed)\n            return;\n        logger.debug('transportClosed()');\n        this._closed = true;\n        this._dataChannel.close();\n        this.safeEmit('transportclose');\n        // Emit observer event.\n        this._observer.safeEmit('close');\n    }\n    _handleDataChannel() {\n        this._dataChannel.addEventListener('open', () => {\n            if (this._closed)\n                return;\n            logger.debug('DataChannel \"open\" event');\n            this.safeEmit('open');\n        });\n        this._dataChannel.addEventListener('error', (event) => {\n            if (this._closed)\n                return;\n            let { error } = event;\n            if (!error)\n                error = new Error('unknown DataChannel error');\n            if (error.errorDetail === 'sctp-failure') {\n                logger.error('DataChannel SCTP error [sctpCauseCode:%s]: %s', error.sctpCauseCode, error.message);\n            }\n            else {\n                logger.error('DataChannel \"error\" event: %o', error);\n            }\n            this.safeEmit('error', error);\n        });\n        this._dataChannel.addEventListener('close', () => {\n            if (this._closed)\n                return;\n            logger.warn('DataChannel \"close\" event');\n            this._closed = true;\n            this.emit('@close');\n            this.safeEmit('close');\n        });\n        this._dataChannel.addEventListener('message', (event) => {\n            if (this._closed)\n                return;\n            this.safeEmit('message', event.data);\n        });\n    }\n}\nexports.DataConsumer = DataConsumer;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transport = void 0;\nconst awaitqueue_1 = require(\"awaitqueue\");\nconst Logger_1 = require(\"./Logger\");\nconst EnhancedEventEmitter_1 = require(\"./EnhancedEventEmitter\");\nconst errors_1 = require(\"./errors\");\nconst utils = __importStar(require(\"./utils\"));\nconst ortc = __importStar(require(\"./ortc\"));\nconst Producer_1 = require(\"./Producer\");\nconst Consumer_1 = require(\"./Consumer\");\nconst DataProducer_1 = require(\"./DataProducer\");\nconst DataConsumer_1 = require(\"./DataConsumer\");\nconst logger = new Logger_1.Logger('Transport');\nclass Transport extends EnhancedEventEmitter_1.EnhancedEventEmitter {\n    /**\n     * @emits connect - (transportLocalParameters: any, callback: Function, errback: Function)\n     * @emits connectionstatechange - (connectionState: ConnectionState)\n     * @emits produce - (producerLocalParameters: any, callback: Function, errback: Function)\n     * @emits producedata - (dataProducerLocalParameters: any, callback: Function, errback: Function)\n     */\n    constructor({ direction, id, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, appData, handlerFactory, extendedRtpCapabilities, canProduceByKind }) {\n        super();\n        // Closed flag.\n        this._closed = false;\n        // Transport connection state.\n        this._connectionState = 'new';\n        // Map of Producers indexed by id.\n        this._producers = new Map();\n        // Map of Consumers indexed by id.\n        this._consumers = new Map();\n        // Map of DataProducers indexed by id.\n        this._dataProducers = new Map();\n        // Map of DataConsumers indexed by id.\n        this._dataConsumers = new Map();\n        // Whether the Consumer for RTP probation has been created.\n        this._probatorConsumerCreated = false;\n        // AwaitQueue instance to make async tasks happen sequentially.\n        this._awaitQueue = new awaitqueue_1.AwaitQueue({ ClosedErrorClass: errors_1.InvalidStateError });\n        // Observer instance.\n        this._observer = new EnhancedEventEmitter_1.EnhancedEventEmitter();\n        logger.debug('constructor() [id:%s, direction:%s]', id, direction);\n        this._id = id;\n        this._direction = direction;\n        this._extendedRtpCapabilities = extendedRtpCapabilities;\n        this._canProduceByKind = canProduceByKind;\n        this._maxSctpMessageSize =\n            sctpParameters ? sctpParameters.maxMessageSize : null;\n        // Clone and sanitize additionalSettings.\n        additionalSettings = utils.clone(additionalSettings, {});\n        delete additionalSettings.iceServers;\n        delete additionalSettings.iceTransportPolicy;\n        delete additionalSettings.bundlePolicy;\n        delete additionalSettings.rtcpMuxPolicy;\n        delete additionalSettings.sdpSemantics;\n        this._handler = handlerFactory();\n        this._handler.run({\n            direction,\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters,\n            iceServers,\n            iceTransportPolicy,\n            additionalSettings,\n            proprietaryConstraints,\n            extendedRtpCapabilities\n        });\n        this._appData = appData;\n        this._handleHandler();\n    }\n    /**\n     * Transport id.\n     */\n    get id() {\n        return this._id;\n    }\n    /**\n     * Whether the Transport is closed.\n     */\n    get closed() {\n        return this._closed;\n    }\n    /**\n     * Transport direction.\n     */\n    get direction() {\n        return this._direction;\n    }\n    /**\n     * RTC handler instance.\n     */\n    get handler() {\n        return this._handler;\n    }\n    /**\n     * Connection state.\n     */\n    get connectionState() {\n        return this._connectionState;\n    }\n    /**\n     * App custom data.\n     */\n    get appData() {\n        return this._appData;\n    }\n    /**\n     * Invalid setter.\n     */\n    set appData(appData) {\n        throw new Error('cannot override appData object');\n    }\n    /**\n     * Observer.\n     *\n     * @emits close\n     * @emits newproducer - (producer: Producer)\n     * @emits newconsumer - (producer: Producer)\n     * @emits newdataproducer - (dataProducer: DataProducer)\n     * @emits newdataconsumer - (dataProducer: DataProducer)\n     */\n    get observer() {\n        return this._observer;\n    }\n    /**\n     * Close the Transport.\n     */\n    close() {\n        if (this._closed)\n            return;\n        logger.debug('close()');\n        this._closed = true;\n        // Close the AwaitQueue.\n        this._awaitQueue.close();\n        // Close the handler.\n        this._handler.close();\n        // Close all Producers.\n        for (const producer of this._producers.values()) {\n            producer.transportClosed();\n        }\n        this._producers.clear();\n        // Close all Consumers.\n        for (const consumer of this._consumers.values()) {\n            consumer.transportClosed();\n        }\n        this._consumers.clear();\n        // Close all DataProducers.\n        for (const dataProducer of this._dataProducers.values()) {\n            dataProducer.transportClosed();\n        }\n        this._dataProducers.clear();\n        // Close all DataConsumers.\n        for (const dataConsumer of this._dataConsumers.values()) {\n            dataConsumer.transportClosed();\n        }\n        this._dataConsumers.clear();\n        // Emit observer event.\n        this._observer.safeEmit('close');\n    }\n    /**\n     * Get associated Transport (RTCPeerConnection) stats.\n     *\n     * @returns {RTCStatsReport}\n     */\n    async getStats() {\n        if (this._closed)\n            throw new errors_1.InvalidStateError('closed');\n        return this._handler.getTransportStats();\n    }\n    /**\n     * Restart ICE connection.\n     */\n    async restartIce({ iceParameters }) {\n        logger.debug('restartIce()');\n        if (this._closed)\n            throw new errors_1.InvalidStateError('closed');\n        else if (!iceParameters)\n            throw new TypeError('missing iceParameters');\n        // Enqueue command.\n        return this._awaitQueue.push(async () => this._handler.restartIce(iceParameters), 'transport.restartIce()');\n    }\n    /**\n     * Update ICE servers.\n     */\n    async updateIceServers({ iceServers } = {}) {\n        logger.debug('updateIceServers()');\n        if (this._closed)\n            throw new errors_1.InvalidStateError('closed');\n        else if (!Array.isArray(iceServers))\n            throw new TypeError('missing iceServers');\n        // Enqueue command.\n        return this._awaitQueue.push(async () => this._handler.updateIceServers(iceServers), 'transport.updateIceServers()');\n    }\n    /**\n     * Create a Producer.\n     */\n    async produce({ track, encodings, codecOptions, codec, stopTracks = true, disableTrackOnPause = true, zeroRtpOnPause = false, appData = {} } = {}) {\n        logger.debug('produce() [track:%o]', track);\n        if (!track)\n            throw new TypeError('missing track');\n        else if (this._direction !== 'send')\n            throw new errors_1.UnsupportedError('not a sending Transport');\n        else if (!this._canProduceByKind[track.kind])\n            throw new errors_1.UnsupportedError(`cannot produce ${track.kind}`);\n        else if (track.readyState === 'ended')\n            throw new errors_1.InvalidStateError('track ended');\n        else if (this.listenerCount('connect') === 0 && this._connectionState === 'new')\n            throw new TypeError('no \"connect\" listener set into this transport');\n        else if (this.listenerCount('produce') === 0)\n            throw new TypeError('no \"produce\" listener set into this transport');\n        else if (appData && typeof appData !== 'object')\n            throw new TypeError('if given, appData must be an object');\n        // Enqueue command.\n        return this._awaitQueue.push(async () => {\n            let normalizedEncodings;\n            if (encodings && !Array.isArray(encodings)) {\n                throw TypeError('encodings must be an array');\n            }\n            else if (encodings && encodings.length === 0) {\n                normalizedEncodings = undefined;\n            }\n            else if (encodings) {\n                normalizedEncodings = encodings\n                    .map((encoding) => {\n                    const normalizedEncoding = { active: true };\n                    if (encoding.active === false)\n                        normalizedEncoding.active = false;\n                    if (typeof encoding.dtx === 'boolean')\n                        normalizedEncoding.dtx = encoding.dtx;\n                    if (typeof encoding.scalabilityMode === 'string')\n                        normalizedEncoding.scalabilityMode = encoding.scalabilityMode;\n                    if (typeof encoding.scaleResolutionDownBy === 'number')\n                        normalizedEncoding.scaleResolutionDownBy = encoding.scaleResolutionDownBy;\n                    if (typeof encoding.maxBitrate === 'number')\n                        normalizedEncoding.maxBitrate = encoding.maxBitrate;\n                    if (typeof encoding.maxFramerate === 'number')\n                        normalizedEncoding.maxFramerate = encoding.maxFramerate;\n                    if (typeof encoding.adaptivePtime === 'boolean')\n                        normalizedEncoding.adaptivePtime = encoding.adaptivePtime;\n                    if (typeof encoding.priority === 'string')\n                        normalizedEncoding.priority = encoding.priority;\n                    if (typeof encoding.networkPriority === 'string')\n                        normalizedEncoding.networkPriority = encoding.networkPriority;\n                    return normalizedEncoding;\n                });\n            }\n            const { localId, rtpParameters, rtpSender } = await this._handler.send({\n                track,\n                encodings: normalizedEncodings,\n                codecOptions,\n                codec\n            });\n            try {\n                // This will fill rtpParameters's missing fields with default values.\n                ortc.validateRtpParameters(rtpParameters);\n                const { id } = await this.safeEmitAsPromise('produce', {\n                    kind: track.kind,\n                    rtpParameters,\n                    appData\n                });\n                const producer = new Producer_1.Producer({\n                    id,\n                    localId,\n                    rtpSender,\n                    track,\n                    rtpParameters,\n                    stopTracks,\n                    disableTrackOnPause,\n                    zeroRtpOnPause,\n                    appData\n                });\n                this._producers.set(producer.id, producer);\n                this._handleProducer(producer);\n                // Emit observer event.\n                this._observer.safeEmit('newproducer', producer);\n                return producer;\n            }\n            catch (error) {\n                this._handler.stopSending(localId)\n                    .catch(() => { });\n                throw error;\n            }\n        }, 'transport.produce()')\n            // This catch is needed to stop the given track if the command above\n            // failed due to closed Transport.\n            .catch((error) => {\n            if (stopTracks) {\n                try {\n                    track.stop();\n                }\n                catch (error2) { }\n            }\n            throw error;\n        });\n    }\n    /**\n     * Create a Consumer to consume a remote Producer.\n     */\n    async consume({ id, producerId, kind, rtpParameters, appData = {} }) {\n        logger.debug('consume()');\n        rtpParameters = utils.clone(rtpParameters, undefined);\n        if (this._closed)\n            throw new errors_1.InvalidStateError('closed');\n        else if (this._direction !== 'recv')\n            throw new errors_1.UnsupportedError('not a receiving Transport');\n        else if (typeof id !== 'string')\n            throw new TypeError('missing id');\n        else if (typeof producerId !== 'string')\n            throw new TypeError('missing producerId');\n        else if (kind !== 'audio' && kind !== 'video')\n            throw new TypeError(`invalid kind '${kind}'`);\n        else if (this.listenerCount('connect') === 0 && this._connectionState === 'new')\n            throw new TypeError('no \"connect\" listener set into this transport');\n        else if (appData && typeof appData !== 'object')\n            throw new TypeError('if given, appData must be an object');\n        // Enqueue command.\n        return this._awaitQueue.push(async () => {\n            // Ensure the device can consume it.\n            const canConsume = ortc.canReceive(rtpParameters, this._extendedRtpCapabilities);\n            if (!canConsume)\n                throw new errors_1.UnsupportedError('cannot consume this Producer');\n            const { localId, rtpReceiver, track } = await this._handler.receive({ trackId: id, kind, rtpParameters });\n            const consumer = new Consumer_1.Consumer({\n                id,\n                localId,\n                producerId,\n                rtpReceiver,\n                track,\n                rtpParameters,\n                appData\n            });\n            this._consumers.set(consumer.id, consumer);\n            this._handleConsumer(consumer);\n            // If this is the first video Consumer and the Consumer for RTP probation\n            // has not yet been created, create it now.\n            if (!this._probatorConsumerCreated && kind === 'video') {\n                try {\n                    const probatorRtpParameters = ortc.generateProbatorRtpParameters(consumer.rtpParameters);\n                    await this._handler.receive({\n                        trackId: 'probator',\n                        kind: 'video',\n                        rtpParameters: probatorRtpParameters\n                    });\n                    logger.debug('consume() | Consumer for RTP probation created');\n                    this._probatorConsumerCreated = true;\n                }\n                catch (error) {\n                    logger.error('consume() | failed to create Consumer for RTP probation:%o', error);\n                }\n            }\n            // Emit observer event.\n            this._observer.safeEmit('newconsumer', consumer);\n            return consumer;\n        }, 'transport.consume()');\n    }\n    /**\n     * Create a DataProducer\n     */\n    async produceData({ ordered = true, maxPacketLifeTime, maxRetransmits, label = '', protocol = '', appData = {} } = {}) {\n        logger.debug('produceData()');\n        if (this._direction !== 'send')\n            throw new errors_1.UnsupportedError('not a sending Transport');\n        else if (!this._maxSctpMessageSize)\n            throw new errors_1.UnsupportedError('SCTP not enabled by remote Transport');\n        else if (this.listenerCount('connect') === 0 && this._connectionState === 'new')\n            throw new TypeError('no \"connect\" listener set into this transport');\n        else if (this.listenerCount('producedata') === 0)\n            throw new TypeError('no \"producedata\" listener set into this transport');\n        else if (appData && typeof appData !== 'object')\n            throw new TypeError('if given, appData must be an object');\n        if (maxPacketLifeTime || maxRetransmits)\n            ordered = false;\n        // Enqueue command.\n        return this._awaitQueue.push(async () => {\n            const { dataChannel, sctpStreamParameters } = await this._handler.sendDataChannel({\n                ordered,\n                maxPacketLifeTime,\n                maxRetransmits,\n                label,\n                protocol\n            });\n            // This will fill sctpStreamParameters's missing fields with default values.\n            ortc.validateSctpStreamParameters(sctpStreamParameters);\n            const { id } = await this.safeEmitAsPromise('producedata', {\n                sctpStreamParameters,\n                label,\n                protocol,\n                appData\n            });\n            const dataProducer = new DataProducer_1.DataProducer({ id, dataChannel, sctpStreamParameters, appData });\n            this._dataProducers.set(dataProducer.id, dataProducer);\n            this._handleDataProducer(dataProducer);\n            // Emit observer event.\n            this._observer.safeEmit('newdataproducer', dataProducer);\n            return dataProducer;\n        }, 'transport.produceData()');\n    }\n    /**\n     * Create a DataConsumer\n     */\n    async consumeData({ id, dataProducerId, sctpStreamParameters, label = '', protocol = '', appData = {} }) {\n        logger.debug('consumeData()');\n        sctpStreamParameters = utils.clone(sctpStreamParameters, undefined);\n        if (this._closed)\n            throw new errors_1.InvalidStateError('closed');\n        else if (this._direction !== 'recv')\n            throw new errors_1.UnsupportedError('not a receiving Transport');\n        else if (!this._maxSctpMessageSize)\n            throw new errors_1.UnsupportedError('SCTP not enabled by remote Transport');\n        else if (typeof id !== 'string')\n            throw new TypeError('missing id');\n        else if (typeof dataProducerId !== 'string')\n            throw new TypeError('missing dataProducerId');\n        else if (this.listenerCount('connect') === 0 && this._connectionState === 'new')\n            throw new TypeError('no \"connect\" listener set into this transport');\n        else if (appData && typeof appData !== 'object')\n            throw new TypeError('if given, appData must be an object');\n        // This may throw.\n        ortc.validateSctpStreamParameters(sctpStreamParameters);\n        // Enqueue command.\n        return this._awaitQueue.push(async () => {\n            const { dataChannel } = await this._handler.receiveDataChannel({\n                sctpStreamParameters,\n                label,\n                protocol\n            });\n            const dataConsumer = new DataConsumer_1.DataConsumer({\n                id,\n                dataProducerId,\n                dataChannel,\n                sctpStreamParameters,\n                appData\n            });\n            this._dataConsumers.set(dataConsumer.id, dataConsumer);\n            this._handleDataConsumer(dataConsumer);\n            // Emit observer event.\n            this._observer.safeEmit('newdataconsumer', dataConsumer);\n            return dataConsumer;\n        }, 'transport.consumeData()');\n    }\n    _handleHandler() {\n        const handler = this._handler;\n        handler.on('@connect', ({ dtlsParameters }, callback, errback) => {\n            if (this._closed) {\n                errback(new errors_1.InvalidStateError('closed'));\n                return;\n            }\n            this.safeEmit('connect', { dtlsParameters }, callback, errback);\n        });\n        handler.on('@connectionstatechange', (connectionState) => {\n            if (connectionState === this._connectionState)\n                return;\n            logger.debug('connection state changed to %s', connectionState);\n            this._connectionState = connectionState;\n            if (!this._closed)\n                this.safeEmit('connectionstatechange', connectionState);\n        });\n    }\n    _handleProducer(producer) {\n        producer.on('@close', () => {\n            this._producers.delete(producer.id);\n            if (this._closed)\n                return;\n            this._awaitQueue.push(async () => this._handler.stopSending(producer.localId), 'producer @close event')\n                .catch((error) => logger.warn('producer.close() failed:%o', error));\n        });\n        producer.on('@replacetrack', (track, callback, errback) => {\n            this._awaitQueue.push(async () => this._handler.replaceTrack(producer.localId, track), 'producer @replacetrack event')\n                .then(callback)\n                .catch(errback);\n        });\n        producer.on('@setmaxspatiallayer', (spatialLayer, callback, errback) => {\n            this._awaitQueue.push(async () => (this._handler.setMaxSpatialLayer(producer.localId, spatialLayer)), 'producer @setmaxspatiallayer event')\n                .then(callback)\n                .catch(errback);\n        });\n        producer.on('@setrtpencodingparameters', (params, callback, errback) => {\n            this._awaitQueue.push(async () => (this._handler.setRtpEncodingParameters(producer.localId, params)), 'producer @setrtpencodingparameters event')\n                .then(callback)\n                .catch(errback);\n        });\n        producer.on('@getstats', (callback, errback) => {\n            if (this._closed)\n                return errback(new errors_1.InvalidStateError('closed'));\n            this._handler.getSenderStats(producer.localId)\n                .then(callback)\n                .catch(errback);\n        });\n    }\n    _handleConsumer(consumer) {\n        consumer.on('@close', () => {\n            this._consumers.delete(consumer.id);\n            if (this._closed)\n                return;\n            this._awaitQueue.push(async () => this._handler.stopReceiving(consumer.localId), 'consumer @close event')\n                .catch(() => { });\n        });\n        consumer.on('@pause', () => {\n            this._awaitQueue.push(async () => this._handler.pauseReceiving(consumer.localId), 'consumer @pause event')\n                .catch(() => { });\n        });\n        consumer.on('@resume', () => {\n            this._awaitQueue.push(async () => this._handler.resumeReceiving(consumer.localId), 'consumer @resume event')\n                .catch(() => { });\n        });\n        consumer.on('@getstats', (callback, errback) => {\n            if (this._closed)\n                return errback(new errors_1.InvalidStateError('closed'));\n            this._handler.getReceiverStats(consumer.localId)\n                .then(callback)\n                .catch(errback);\n        });\n    }\n    _handleDataProducer(dataProducer) {\n        dataProducer.on('@close', () => {\n            this._dataProducers.delete(dataProducer.id);\n        });\n    }\n    _handleDataConsumer(dataConsumer) {\n        dataConsumer.on('@close', () => {\n            this._dataConsumers.delete(dataConsumer.id);\n        });\n    }\n}\nexports.Transport = Transport;\n","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{\n    // o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly...\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  // k: [{}], // outdated thing ignored\n  t: [{\n    // t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{\n    // c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{\n    // b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{\n    // m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    {\n      // a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding)\n          ? 'rtpmap:%d %s/%s/%s'\n          : o.rate\n            ? 'rtpmap:%d %s/%s'\n            : 'rtpmap:%d %s';\n      }\n    },\n    {\n      // a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      // a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    {\n      // a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    {\n      // a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null)\n          ? 'rtcp:%d %s IP%d %s'\n          : 'rtcp:%d';\n      }\n    },\n    {\n      // a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%s trr-int %d'\n    },\n    {\n      // a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null)\n          ? 'rtcp-fb:%s %s %s'\n          : 'rtcp-fb:%s %s';\n      }\n    },\n    {\n      // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      // a=extmap:1/recvonly URI-gps-string\n      // a=extmap:3 urn:ietf:params:rtp-hdrext:encrypt urn:ietf:params:rtp-hdrext:smpte-tc 25@600/24\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'encrypt-uri', 'uri', 'config'],\n      format: function (o) {\n        return (\n          'extmap:%d' +\n          (o.direction ? '/%s' : '%v') +\n          (o['encrypt-uri'] ? ' %s' : '%v') +\n          ' %s' +\n          (o.config ? ' %s' : '')\n        );\n      }\n    },\n    {\n      // a=extmap-allow-mixed\n      name: 'extmapAllowMixed',\n      reg: /^(extmap-allow-mixed)/\n    },\n    {\n      // a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null)\n          ? 'crypto:%d %s %s %s'\n          : 'crypto:%d %s %s';\n      }\n    },\n    {\n      // a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    {\n      // a=connection:new\n      name: 'connectionType',\n      reg: /^connection:(new|existing)/,\n      format: 'connection:%s'\n    },\n    {\n      // a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    {\n      // a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    {\n      // a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'ptime:%d'\n    },\n    {\n      // a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'maxptime:%d'\n    },\n    {\n      // a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    {\n      // a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    {\n      // a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    {\n      // a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    {\n      // a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    {\n      // a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      // a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      // a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    {\n      // a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    {\n      // a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    {\n      // a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    {\n      // a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    {\n      // a=ssrc-group:FEC 1 2\n      // a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    {\n      // a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    {\n      // a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    {\n      // a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    {\n      // a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    {\n      // a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null)\n          ? 'sctpmap:%s %s %s'\n          : 'sctpmap:%s %s';\n      }\n    },\n    {\n      // a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    {\n      // a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    {\n      // a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      // a=imageattr:* send [x=800,y=640] recv *\n      // a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        // a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        // send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        // recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      // a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        // a=simulcast:\n        '^simulcast:' +\n        // send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        // space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        // end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // old simulcast draft 03 (implemented by Firefox)\n      //   https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      // a=simulcast: recv pt=97;98 send pt=97\n      // a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      // a=framerate:25\n      // a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    {\n      // RFC4570\n      // a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    {\n      // a=bundle-only\n      name: 'bundleOnly',\n      reg: /^(bundle-only)/\n    },\n    {\n      // a=label:1\n      name: 'label',\n      reg: /^label:(.+)/,\n      format: 'label:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-5\n      name: 'sctpPort',\n      reg: /^sctp-port:(\\d+)$/,\n      format: 'sctp-port:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-6\n      name: 'maxMessageSize',\n      reg: /^max-message-size:(\\d+)$/,\n      format: 'max-message-size:%s'\n    },\n    {\n      // RFC7273\n      // a=ts-refclk:ptp=IEEE1588-2008:39-A7-94-FF-FE-07-CB-D0:37\n      push:'tsRefClocks',\n      reg: /^ts-refclk:([^\\s=]*)(?:=(\\S*))?/,\n      names: ['clksrc', 'clksrcExt'],\n      format: function (o) {\n        return 'ts-refclk:%s' + (o.clksrcExt != null ? '=%s' : '');\n      }\n    },\n    {\n      // RFC7273\n      // a=mediaclk:direct=963214424\n      name:'mediaClk',\n      reg: /^mediaclk:(?:id=(\\S*))? *([^\\s=]*)(?:=(\\S*))?(?: *rate=(\\d+)\\/(\\d+))?/,\n      names: ['id', 'mediaClockName', 'mediaClockValue', 'rateNumerator', 'rateDenominator'],\n      format: function (o) {\n        var str = 'mediaclk:';\n        str += (o.id != null ? 'id=%s %s' : '%v%s');\n        str += (o.mediaClockValue != null ? '=%s' : '');\n        str += (o.rateNumerator != null ? ' rate=%s' : '');\n        str += (o.rateDenominator != null ? '/%s' : '');\n        return str;\n      }\n    },\n    {\n      // a=keywds:keywords\n      name: 'keywords',\n      reg: /^keywds:(.+)$/,\n      format: 'keywds:%s'\n    },\n    {\n      // a=content:main\n      name: 'content',\n      reg: /^content:(.+)/,\n      format: 'content:%s'\n    },\n    // BFCP https://tools.ietf.org/html/rfc4583\n    {\n      // a=floorctrl:c-s\n      name: 'bfcpFloorCtrl',\n      reg: /^floorctrl:(c-only|s-only|c-s)/,\n      format: 'floorctrl:%s'\n    },\n    {\n      // a=confid:1\n      name: 'bfcpConfId',\n      reg: /^confid:(\\d+)/,\n      format: 'confid:%s'\n    },\n    {\n      // a=userid:1\n      name: 'bfcpUserId',\n      reg: /^userid:(\\d+)/,\n      format: 'userid:%s'\n    },\n    {\n      // a=floorid:1\n      name: 'bfcpFloorId',\n      reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,\n      names: ['id', 'mStream'],\n      format: 'floorid:%s mstrm:%s'\n    },\n    {\n      // any a= that we don't understand is kept verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.toString().split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseParams = parser.parseParams;\nexports.parseFmtpConfig = parser.parseFmtpConfig; // Alias of parseParams().\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.applyCodecParameters = exports.getCname = exports.extractDtlsParameters = exports.extractRtpCapabilities = void 0;\nconst sdpTransform = __importStar(require(\"sdp-transform\"));\nfunction extractRtpCapabilities({ sdpObject }) {\n    // Map of RtpCodecParameters indexed by payload type.\n    const codecsMap = new Map();\n    // Array of RtpHeaderExtensions.\n    const headerExtensions = [];\n    // Whether a m=audio/video section has been already found.\n    let gotAudio = false;\n    let gotVideo = false;\n    for (const m of sdpObject.media) {\n        const kind = m.type;\n        switch (kind) {\n            case 'audio':\n                {\n                    if (gotAudio)\n                        continue;\n                    gotAudio = true;\n                    break;\n                }\n            case 'video':\n                {\n                    if (gotVideo)\n                        continue;\n                    gotVideo = true;\n                    break;\n                }\n            default:\n                {\n                    continue;\n                }\n        }\n        // Get codecs.\n        for (const rtp of m.rtp) {\n            const codec = {\n                kind: kind,\n                mimeType: `${kind}/${rtp.codec}`,\n                preferredPayloadType: rtp.payload,\n                clockRate: rtp.rate,\n                channels: rtp.encoding,\n                parameters: {},\n                rtcpFeedback: []\n            };\n            codecsMap.set(codec.preferredPayloadType, codec);\n        }\n        // Get codec parameters.\n        for (const fmtp of m.fmtp || []) {\n            const parameters = sdpTransform.parseParams(fmtp.config);\n            const codec = codecsMap.get(fmtp.payload);\n            if (!codec)\n                continue;\n            // Specials case to convert parameter value to string.\n            if (parameters && parameters.hasOwnProperty('profile-level-id'))\n                parameters['profile-level-id'] = String(parameters['profile-level-id']);\n            codec.parameters = parameters;\n        }\n        // Get RTCP feedback for each codec.\n        for (const fb of m.rtcpFb || []) {\n            const codec = codecsMap.get(fb.payload);\n            if (!codec)\n                continue;\n            const feedback = {\n                type: fb.type,\n                parameter: fb.subtype\n            };\n            if (!feedback.parameter)\n                delete feedback.parameter;\n            codec.rtcpFeedback.push(feedback);\n        }\n        // Get RTP header extensions.\n        for (const ext of m.ext || []) {\n            // Ignore encrypted extensions (not yet supported in mediasoup).\n            if (ext['encrypt-uri'])\n                continue;\n            const headerExtension = {\n                kind: kind,\n                uri: ext.uri,\n                preferredId: ext.value\n            };\n            headerExtensions.push(headerExtension);\n        }\n    }\n    const rtpCapabilities = {\n        codecs: Array.from(codecsMap.values()),\n        headerExtensions: headerExtensions\n    };\n    return rtpCapabilities;\n}\nexports.extractRtpCapabilities = extractRtpCapabilities;\nfunction extractDtlsParameters({ sdpObject }) {\n    const mediaObject = (sdpObject.media || [])\n        .find((m) => (m.iceUfrag && m.port !== 0));\n    if (!mediaObject)\n        throw new Error('no active media section found');\n    const fingerprint = mediaObject.fingerprint || sdpObject.fingerprint;\n    let role;\n    switch (mediaObject.setup) {\n        case 'active':\n            role = 'client';\n            break;\n        case 'passive':\n            role = 'server';\n            break;\n        case 'actpass':\n            role = 'auto';\n            break;\n    }\n    const dtlsParameters = {\n        role,\n        fingerprints: [\n            {\n                algorithm: fingerprint.type,\n                value: fingerprint.hash\n            }\n        ]\n    };\n    return dtlsParameters;\n}\nexports.extractDtlsParameters = extractDtlsParameters;\nfunction getCname({ offerMediaObject }) {\n    const ssrcCnameLine = (offerMediaObject.ssrcs || [])\n        .find((line) => line.attribute === 'cname');\n    if (!ssrcCnameLine)\n        return '';\n    return ssrcCnameLine.value;\n}\nexports.getCname = getCname;\n/**\n * Apply codec parameters in the given SDP m= section answer based on the\n * given RTP parameters of an offer.\n */\nfunction applyCodecParameters({ offerRtpParameters, answerMediaObject }) {\n    for (const codec of offerRtpParameters.codecs) {\n        const mimeType = codec.mimeType.toLowerCase();\n        // Avoid parsing codec parameters for unhandled codecs.\n        if (mimeType !== 'audio/opus')\n            continue;\n        const rtp = (answerMediaObject.rtp || [])\n            .find((r) => r.payload === codec.payloadType);\n        if (!rtp)\n            continue;\n        // Just in case.\n        answerMediaObject.fmtp = answerMediaObject.fmtp || [];\n        let fmtp = answerMediaObject.fmtp\n            .find((f) => f.payload === codec.payloadType);\n        if (!fmtp) {\n            fmtp = { payload: codec.payloadType, config: '' };\n            answerMediaObject.fmtp.push(fmtp);\n        }\n        const parameters = sdpTransform.parseParams(fmtp.config);\n        switch (mimeType) {\n            case 'audio/opus':\n                {\n                    const spropStereo = codec.parameters['sprop-stereo'];\n                    if (spropStereo !== undefined)\n                        parameters.stereo = spropStereo ? 1 : 0;\n                    break;\n                }\n        }\n        // Write the codec fmtp.config back.\n        fmtp.config = '';\n        for (const key of Object.keys(parameters)) {\n            if (fmtp.config)\n                fmtp.config += ';';\n            fmtp.config += `${key}=${parameters[key]}`;\n        }\n    }\n}\nexports.applyCodecParameters = applyCodecParameters;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.addLegacySimulcast = exports.getRtpEncodings = void 0;\nfunction getRtpEncodings({ offerMediaObject }) {\n    const ssrcs = new Set();\n    for (const line of offerMediaObject.ssrcs || []) {\n        const ssrc = line.id;\n        ssrcs.add(ssrc);\n    }\n    if (ssrcs.size === 0)\n        throw new Error('no a=ssrc lines found');\n    const ssrcToRtxSsrc = new Map();\n    // First assume RTX is used.\n    for (const line of offerMediaObject.ssrcGroups || []) {\n        if (line.semantics !== 'FID')\n            continue;\n        let [ssrc, rtxSsrc] = line.ssrcs.split(/\\s+/);\n        ssrc = Number(ssrc);\n        rtxSsrc = Number(rtxSsrc);\n        if (ssrcs.has(ssrc)) {\n            // Remove both the SSRC and RTX SSRC from the set so later we know that they\n            // are already handled.\n            ssrcs.delete(ssrc);\n            ssrcs.delete(rtxSsrc);\n            // Add to the map.\n            ssrcToRtxSsrc.set(ssrc, rtxSsrc);\n        }\n    }\n    // If the set of SSRCs is not empty it means that RTX is not being used, so take\n    // media SSRCs from there.\n    for (const ssrc of ssrcs) {\n        // Add to the map.\n        ssrcToRtxSsrc.set(ssrc, null);\n    }\n    const encodings = [];\n    for (const [ssrc, rtxSsrc] of ssrcToRtxSsrc) {\n        const encoding = { ssrc };\n        if (rtxSsrc)\n            encoding.rtx = { ssrc: rtxSsrc };\n        encodings.push(encoding);\n    }\n    return encodings;\n}\nexports.getRtpEncodings = getRtpEncodings;\n/**\n * Adds multi-ssrc based simulcast into the given SDP media section offer.\n */\nfunction addLegacySimulcast({ offerMediaObject, numStreams }) {\n    if (numStreams <= 1)\n        throw new TypeError('numStreams must be greater than 1');\n    // Get the SSRC.\n    const ssrcMsidLine = (offerMediaObject.ssrcs || [])\n        .find((line) => line.attribute === 'msid');\n    if (!ssrcMsidLine)\n        throw new Error('a=ssrc line with msid information not found');\n    const [streamId, trackId] = ssrcMsidLine.value.split(' ');\n    const firstSsrc = ssrcMsidLine.id;\n    let firstRtxSsrc;\n    // Get the SSRC for RTX.\n    (offerMediaObject.ssrcGroups || [])\n        .some((line) => {\n        if (line.semantics !== 'FID')\n            return false;\n        const ssrcs = line.ssrcs.split(/\\s+/);\n        if (Number(ssrcs[0]) === firstSsrc) {\n            firstRtxSsrc = Number(ssrcs[1]);\n            return true;\n        }\n        else {\n            return false;\n        }\n    });\n    const ssrcCnameLine = offerMediaObject.ssrcs\n        .find((line) => line.attribute === 'cname');\n    if (!ssrcCnameLine)\n        throw new Error('a=ssrc line with cname information not found');\n    const cname = ssrcCnameLine.value;\n    const ssrcs = [];\n    const rtxSsrcs = [];\n    for (let i = 0; i < numStreams; ++i) {\n        ssrcs.push(firstSsrc + i);\n        if (firstRtxSsrc)\n            rtxSsrcs.push(firstRtxSsrc + i);\n    }\n    offerMediaObject.ssrcGroups = [];\n    offerMediaObject.ssrcs = [];\n    offerMediaObject.ssrcGroups.push({\n        semantics: 'SIM',\n        ssrcs: ssrcs.join(' ')\n    });\n    for (let i = 0; i < ssrcs.length; ++i) {\n        const ssrc = ssrcs[i];\n        offerMediaObject.ssrcs.push({\n            id: ssrc,\n            attribute: 'cname',\n            value: cname\n        });\n        offerMediaObject.ssrcs.push({\n            id: ssrc,\n            attribute: 'msid',\n            value: `${streamId} ${trackId}`\n        });\n    }\n    for (let i = 0; i < rtxSsrcs.length; ++i) {\n        const ssrc = ssrcs[i];\n        const rtxSsrc = rtxSsrcs[i];\n        offerMediaObject.ssrcs.push({\n            id: rtxSsrc,\n            attribute: 'cname',\n            value: cname\n        });\n        offerMediaObject.ssrcs.push({\n            id: rtxSsrc,\n            attribute: 'msid',\n            value: `${streamId} ${trackId}`\n        });\n        offerMediaObject.ssrcGroups.push({\n            semantics: 'FID',\n            ssrcs: `${ssrc} ${rtxSsrc}`\n        });\n    }\n}\nexports.addLegacySimulcast = addLegacySimulcast;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HandlerInterface = void 0;\nconst EnhancedEventEmitter_1 = require(\"../EnhancedEventEmitter\");\nclass HandlerInterface extends EnhancedEventEmitter_1.EnhancedEventEmitter {\n    /**\n     * @emits @connect - (\n     *     { dtlsParameters: DtlsParameters },\n     *     callback: Function,\n     *     errback: Function\n     *   )\n     * @emits @connectionstatechange - (connectionState: ConnectionState)\n     */\n    constructor() {\n        super();\n    }\n}\nexports.HandlerInterface = HandlerInterface;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OfferMediaSection = exports.AnswerMediaSection = exports.MediaSection = void 0;\nconst utils = __importStar(require(\"../../utils\"));\nclass MediaSection {\n    constructor({ iceParameters, iceCandidates, dtlsParameters, planB = false }) {\n        this._mediaObject = {};\n        this._planB = planB;\n        if (iceParameters) {\n            this.setIceParameters(iceParameters);\n        }\n        if (iceCandidates) {\n            this._mediaObject.candidates = [];\n            for (const candidate of iceCandidates) {\n                const candidateObject = {};\n                // mediasoup does mandates rtcp-mux so candidates component is always\n                // RTP (1).\n                candidateObject.component = 1;\n                candidateObject.foundation = candidate.foundation;\n                candidateObject.ip = candidate.ip;\n                candidateObject.port = candidate.port;\n                candidateObject.priority = candidate.priority;\n                candidateObject.transport = candidate.protocol;\n                candidateObject.type = candidate.type;\n                if (candidate.tcpType)\n                    candidateObject.tcptype = candidate.tcpType;\n                this._mediaObject.candidates.push(candidateObject);\n            }\n            this._mediaObject.endOfCandidates = 'end-of-candidates';\n            this._mediaObject.iceOptions = 'renomination';\n        }\n        if (dtlsParameters) {\n            this.setDtlsRole(dtlsParameters.role);\n        }\n    }\n    get mid() {\n        return String(this._mediaObject.mid);\n    }\n    get closed() {\n        return this._mediaObject.port === 0;\n    }\n    getObject() {\n        return this._mediaObject;\n    }\n    setIceParameters(iceParameters) {\n        this._mediaObject.iceUfrag = iceParameters.usernameFragment;\n        this._mediaObject.icePwd = iceParameters.password;\n    }\n    disable() {\n        this._mediaObject.direction = 'inactive';\n        delete this._mediaObject.ext;\n        delete this._mediaObject.ssrcs;\n        delete this._mediaObject.ssrcGroups;\n        delete this._mediaObject.simulcast;\n        delete this._mediaObject.simulcast_03;\n        delete this._mediaObject.rids;\n    }\n    close() {\n        this._mediaObject.direction = 'inactive';\n        this._mediaObject.port = 0;\n        delete this._mediaObject.ext;\n        delete this._mediaObject.ssrcs;\n        delete this._mediaObject.ssrcGroups;\n        delete this._mediaObject.simulcast;\n        delete this._mediaObject.simulcast_03;\n        delete this._mediaObject.rids;\n        delete this._mediaObject.extmapAllowMixed;\n    }\n}\nexports.MediaSection = MediaSection;\nclass AnswerMediaSection extends MediaSection {\n    constructor({ iceParameters, iceCandidates, dtlsParameters, sctpParameters, plainRtpParameters, planB = false, offerMediaObject, offerRtpParameters, answerRtpParameters, codecOptions, extmapAllowMixed = false }) {\n        super({ iceParameters, iceCandidates, dtlsParameters, planB });\n        this._mediaObject.mid = String(offerMediaObject.mid);\n        this._mediaObject.type = offerMediaObject.type;\n        this._mediaObject.protocol = offerMediaObject.protocol;\n        if (!plainRtpParameters) {\n            this._mediaObject.connection = { ip: '127.0.0.1', version: 4 };\n            this._mediaObject.port = 7;\n        }\n        else {\n            this._mediaObject.connection =\n                {\n                    ip: plainRtpParameters.ip,\n                    version: plainRtpParameters.ipVersion\n                };\n            this._mediaObject.port = plainRtpParameters.port;\n        }\n        switch (offerMediaObject.type) {\n            case 'audio':\n            case 'video':\n                {\n                    this._mediaObject.direction = 'recvonly';\n                    this._mediaObject.rtp = [];\n                    this._mediaObject.rtcpFb = [];\n                    this._mediaObject.fmtp = [];\n                    for (const codec of answerRtpParameters.codecs) {\n                        const rtp = {\n                            payload: codec.payloadType,\n                            codec: getCodecName(codec),\n                            rate: codec.clockRate\n                        };\n                        if (codec.channels > 1)\n                            rtp.encoding = codec.channels;\n                        this._mediaObject.rtp.push(rtp);\n                        const codecParameters = utils.clone(codec.parameters, {});\n                        if (codecOptions) {\n                            const { opusStereo, opusFec, opusDtx, opusMaxPlaybackRate, opusMaxAverageBitrate, opusPtime, videoGoogleStartBitrate, videoGoogleMaxBitrate, videoGoogleMinBitrate } = codecOptions;\n                            const offerCodec = offerRtpParameters.codecs\n                                .find((c) => (c.payloadType === codec.payloadType));\n                            switch (codec.mimeType.toLowerCase()) {\n                                case 'audio/opus':\n                                    {\n                                        if (opusStereo !== undefined) {\n                                            offerCodec.parameters['sprop-stereo'] = opusStereo ? 1 : 0;\n                                            codecParameters.stereo = opusStereo ? 1 : 0;\n                                        }\n                                        if (opusFec !== undefined) {\n                                            offerCodec.parameters.useinbandfec = opusFec ? 1 : 0;\n                                            codecParameters.useinbandfec = opusFec ? 1 : 0;\n                                        }\n                                        if (opusDtx !== undefined) {\n                                            offerCodec.parameters.usedtx = opusDtx ? 1 : 0;\n                                            codecParameters.usedtx = opusDtx ? 1 : 0;\n                                        }\n                                        if (opusMaxPlaybackRate !== undefined) {\n                                            codecParameters.maxplaybackrate = opusMaxPlaybackRate;\n                                        }\n                                        if (opusMaxAverageBitrate !== undefined) {\n                                            codecParameters.maxaveragebitrate = opusMaxAverageBitrate;\n                                        }\n                                        if (opusPtime !== undefined) {\n                                            offerCodec.parameters.ptime = opusPtime;\n                                            codecParameters.ptime = opusPtime;\n                                        }\n                                        break;\n                                    }\n                                case 'video/vp8':\n                                case 'video/vp9':\n                                case 'video/h264':\n                                case 'video/h265':\n                                    {\n                                        if (videoGoogleStartBitrate !== undefined)\n                                            codecParameters['x-google-start-bitrate'] = videoGoogleStartBitrate;\n                                        if (videoGoogleMaxBitrate !== undefined)\n                                            codecParameters['x-google-max-bitrate'] = videoGoogleMaxBitrate;\n                                        if (videoGoogleMinBitrate !== undefined)\n                                            codecParameters['x-google-min-bitrate'] = videoGoogleMinBitrate;\n                                        break;\n                                    }\n                            }\n                        }\n                        const fmtp = {\n                            payload: codec.payloadType,\n                            config: ''\n                        };\n                        for (const key of Object.keys(codecParameters)) {\n                            if (fmtp.config)\n                                fmtp.config += ';';\n                            fmtp.config += `${key}=${codecParameters[key]}`;\n                        }\n                        if (fmtp.config)\n                            this._mediaObject.fmtp.push(fmtp);\n                        for (const fb of codec.rtcpFeedback) {\n                            this._mediaObject.rtcpFb.push({\n                                payload: codec.payloadType,\n                                type: fb.type,\n                                subtype: fb.parameter\n                            });\n                        }\n                    }\n                    this._mediaObject.payloads = answerRtpParameters.codecs\n                        .map((codec) => codec.payloadType)\n                        .join(' ');\n                    this._mediaObject.ext = [];\n                    for (const ext of answerRtpParameters.headerExtensions) {\n                        // Don't add a header extension if not present in the offer.\n                        const found = (offerMediaObject.ext || [])\n                            .some((localExt) => localExt.uri === ext.uri);\n                        if (!found)\n                            continue;\n                        this._mediaObject.ext.push({\n                            uri: ext.uri,\n                            value: ext.id\n                        });\n                    }\n                    // Allow both 1 byte and 2 bytes length header extensions.\n                    if (extmapAllowMixed &&\n                        offerMediaObject.extmapAllowMixed === 'extmap-allow-mixed') {\n                        this._mediaObject.extmapAllowMixed = 'extmap-allow-mixed';\n                    }\n                    // Simulcast.\n                    if (offerMediaObject.simulcast) {\n                        this._mediaObject.simulcast =\n                            {\n                                dir1: 'recv',\n                                list1: offerMediaObject.simulcast.list1\n                            };\n                        this._mediaObject.rids = [];\n                        for (const rid of offerMediaObject.rids || []) {\n                            if (rid.direction !== 'send')\n                                continue;\n                            this._mediaObject.rids.push({\n                                id: rid.id,\n                                direction: 'recv'\n                            });\n                        }\n                    }\n                    // Simulcast (draft version 03).\n                    else if (offerMediaObject.simulcast_03) {\n                        // eslint-disable-next-line camelcase\n                        this._mediaObject.simulcast_03 =\n                            {\n                                value: offerMediaObject.simulcast_03.value.replace(/send/g, 'recv')\n                            };\n                        this._mediaObject.rids = [];\n                        for (const rid of offerMediaObject.rids || []) {\n                            if (rid.direction !== 'send')\n                                continue;\n                            this._mediaObject.rids.push({\n                                id: rid.id,\n                                direction: 'recv'\n                            });\n                        }\n                    }\n                    this._mediaObject.rtcpMux = 'rtcp-mux';\n                    this._mediaObject.rtcpRsize = 'rtcp-rsize';\n                    if (this._planB && this._mediaObject.type === 'video')\n                        this._mediaObject.xGoogleFlag = 'conference';\n                    break;\n                }\n            case 'application':\n                {\n                    // New spec.\n                    if (typeof offerMediaObject.sctpPort === 'number') {\n                        this._mediaObject.payloads = 'webrtc-datachannel';\n                        this._mediaObject.sctpPort = sctpParameters.port;\n                        this._mediaObject.maxMessageSize = sctpParameters.maxMessageSize;\n                    }\n                    // Old spec.\n                    else if (offerMediaObject.sctpmap) {\n                        this._mediaObject.payloads = sctpParameters.port;\n                        this._mediaObject.sctpmap =\n                            {\n                                app: 'webrtc-datachannel',\n                                sctpmapNumber: sctpParameters.port,\n                                maxMessageSize: sctpParameters.maxMessageSize\n                            };\n                    }\n                    break;\n                }\n        }\n    }\n    setDtlsRole(role) {\n        switch (role) {\n            case 'client':\n                this._mediaObject.setup = 'active';\n                break;\n            case 'server':\n                this._mediaObject.setup = 'passive';\n                break;\n            case 'auto':\n                this._mediaObject.setup = 'actpass';\n                break;\n        }\n    }\n}\nexports.AnswerMediaSection = AnswerMediaSection;\nclass OfferMediaSection extends MediaSection {\n    constructor({ iceParameters, iceCandidates, dtlsParameters, sctpParameters, plainRtpParameters, planB = false, mid, kind, offerRtpParameters, streamId, trackId, oldDataChannelSpec = false }) {\n        super({ iceParameters, iceCandidates, dtlsParameters, planB });\n        this._mediaObject.mid = String(mid);\n        this._mediaObject.type = kind;\n        if (!plainRtpParameters) {\n            this._mediaObject.connection = { ip: '127.0.0.1', version: 4 };\n            if (!sctpParameters)\n                this._mediaObject.protocol = 'UDP/TLS/RTP/SAVPF';\n            else\n                this._mediaObject.protocol = 'UDP/DTLS/SCTP';\n            this._mediaObject.port = 7;\n        }\n        else {\n            this._mediaObject.connection =\n                {\n                    ip: plainRtpParameters.ip,\n                    version: plainRtpParameters.ipVersion\n                };\n            this._mediaObject.protocol = 'RTP/AVP';\n            this._mediaObject.port = plainRtpParameters.port;\n        }\n        switch (kind) {\n            case 'audio':\n            case 'video':\n                {\n                    this._mediaObject.direction = 'sendonly';\n                    this._mediaObject.rtp = [];\n                    this._mediaObject.rtcpFb = [];\n                    this._mediaObject.fmtp = [];\n                    if (!this._planB)\n                        this._mediaObject.msid = `${streamId || '-'} ${trackId}`;\n                    for (const codec of offerRtpParameters.codecs) {\n                        const rtp = {\n                            payload: codec.payloadType,\n                            codec: getCodecName(codec),\n                            rate: codec.clockRate\n                        };\n                        if (codec.channels > 1)\n                            rtp.encoding = codec.channels;\n                        this._mediaObject.rtp.push(rtp);\n                        const fmtp = {\n                            payload: codec.payloadType,\n                            config: ''\n                        };\n                        for (const key of Object.keys(codec.parameters)) {\n                            if (fmtp.config)\n                                fmtp.config += ';';\n                            fmtp.config += `${key}=${codec.parameters[key]}`;\n                        }\n                        if (fmtp.config)\n                            this._mediaObject.fmtp.push(fmtp);\n                        for (const fb of codec.rtcpFeedback) {\n                            this._mediaObject.rtcpFb.push({\n                                payload: codec.payloadType,\n                                type: fb.type,\n                                subtype: fb.parameter\n                            });\n                        }\n                    }\n                    this._mediaObject.payloads = offerRtpParameters.codecs\n                        .map((codec) => codec.payloadType)\n                        .join(' ');\n                    this._mediaObject.ext = [];\n                    for (const ext of offerRtpParameters.headerExtensions) {\n                        this._mediaObject.ext.push({\n                            uri: ext.uri,\n                            value: ext.id\n                        });\n                    }\n                    this._mediaObject.rtcpMux = 'rtcp-mux';\n                    this._mediaObject.rtcpRsize = 'rtcp-rsize';\n                    const encoding = offerRtpParameters.encodings[0];\n                    const ssrc = encoding.ssrc;\n                    const rtxSsrc = (encoding.rtx && encoding.rtx.ssrc)\n                        ? encoding.rtx.ssrc\n                        : undefined;\n                    this._mediaObject.ssrcs = [];\n                    this._mediaObject.ssrcGroups = [];\n                    if (offerRtpParameters.rtcp.cname) {\n                        this._mediaObject.ssrcs.push({\n                            id: ssrc,\n                            attribute: 'cname',\n                            value: offerRtpParameters.rtcp.cname\n                        });\n                    }\n                    if (this._planB) {\n                        this._mediaObject.ssrcs.push({\n                            id: ssrc,\n                            attribute: 'msid',\n                            value: `${streamId || '-'} ${trackId}`\n                        });\n                    }\n                    if (rtxSsrc) {\n                        if (offerRtpParameters.rtcp.cname) {\n                            this._mediaObject.ssrcs.push({\n                                id: rtxSsrc,\n                                attribute: 'cname',\n                                value: offerRtpParameters.rtcp.cname\n                            });\n                        }\n                        if (this._planB) {\n                            this._mediaObject.ssrcs.push({\n                                id: rtxSsrc,\n                                attribute: 'msid',\n                                value: `${streamId || '-'} ${trackId}`\n                            });\n                        }\n                        // Associate original and retransmission SSRCs.\n                        this._mediaObject.ssrcGroups.push({\n                            semantics: 'FID',\n                            ssrcs: `${ssrc} ${rtxSsrc}`\n                        });\n                    }\n                    break;\n                }\n            case 'application':\n                {\n                    // New spec.\n                    if (!oldDataChannelSpec) {\n                        this._mediaObject.payloads = 'webrtc-datachannel';\n                        this._mediaObject.sctpPort = sctpParameters.port;\n                        this._mediaObject.maxMessageSize = sctpParameters.maxMessageSize;\n                    }\n                    // Old spec.\n                    else {\n                        this._mediaObject.payloads = sctpParameters.port;\n                        this._mediaObject.sctpmap =\n                            {\n                                app: 'webrtc-datachannel',\n                                sctpmapNumber: sctpParameters.port,\n                                maxMessageSize: sctpParameters.maxMessageSize\n                            };\n                    }\n                    break;\n                }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    setDtlsRole(role) {\n        // Always 'actpass'.\n        this._mediaObject.setup = 'actpass';\n    }\n    planBReceive({ offerRtpParameters, streamId, trackId }) {\n        const encoding = offerRtpParameters.encodings[0];\n        const ssrc = encoding.ssrc;\n        const rtxSsrc = (encoding.rtx && encoding.rtx.ssrc)\n            ? encoding.rtx.ssrc\n            : undefined;\n        const payloads = this._mediaObject.payloads.split(' ');\n        for (const codec of offerRtpParameters.codecs) {\n            if (payloads.includes(String(codec.payloadType))) {\n                continue;\n            }\n            const rtp = {\n                payload: codec.payloadType,\n                codec: getCodecName(codec),\n                rate: codec.clockRate\n            };\n            if (codec.channels > 1)\n                rtp.encoding = codec.channels;\n            this._mediaObject.rtp.push(rtp);\n            const fmtp = {\n                payload: codec.payloadType,\n                config: ''\n            };\n            for (const key of Object.keys(codec.parameters)) {\n                if (fmtp.config)\n                    fmtp.config += ';';\n                fmtp.config += `${key}=${codec.parameters[key]}`;\n            }\n            if (fmtp.config)\n                this._mediaObject.fmtp.push(fmtp);\n            for (const fb of codec.rtcpFeedback) {\n                this._mediaObject.rtcpFb.push({\n                    payload: codec.payloadType,\n                    type: fb.type,\n                    subtype: fb.parameter\n                });\n            }\n        }\n        this._mediaObject.payloads += ` ${offerRtpParameters\n            .codecs\n            .filter((codec) => !this._mediaObject.payloads.includes(codec.payloadType))\n            .map((codec) => codec.payloadType)\n            .join(' ')}`;\n        this._mediaObject.payloads = this._mediaObject.payloads.trim();\n        if (offerRtpParameters.rtcp.cname) {\n            this._mediaObject.ssrcs.push({\n                id: ssrc,\n                attribute: 'cname',\n                value: offerRtpParameters.rtcp.cname\n            });\n        }\n        this._mediaObject.ssrcs.push({\n            id: ssrc,\n            attribute: 'msid',\n            value: `${streamId || '-'} ${trackId}`\n        });\n        if (rtxSsrc) {\n            if (offerRtpParameters.rtcp.cname) {\n                this._mediaObject.ssrcs.push({\n                    id: rtxSsrc,\n                    attribute: 'cname',\n                    value: offerRtpParameters.rtcp.cname\n                });\n            }\n            this._mediaObject.ssrcs.push({\n                id: rtxSsrc,\n                attribute: 'msid',\n                value: `${streamId || '-'} ${trackId}`\n            });\n            // Associate original and retransmission SSRCs.\n            this._mediaObject.ssrcGroups.push({\n                semantics: 'FID',\n                ssrcs: `${ssrc} ${rtxSsrc}`\n            });\n        }\n    }\n    planBStopReceiving({ offerRtpParameters }) {\n        const encoding = offerRtpParameters.encodings[0];\n        const ssrc = encoding.ssrc;\n        const rtxSsrc = (encoding.rtx && encoding.rtx.ssrc)\n            ? encoding.rtx.ssrc\n            : undefined;\n        this._mediaObject.ssrcs = this._mediaObject.ssrcs\n            .filter((s) => s.id !== ssrc && s.id !== rtxSsrc);\n        if (rtxSsrc) {\n            this._mediaObject.ssrcGroups = this._mediaObject.ssrcGroups\n                .filter((group) => group.ssrcs !== `${ssrc} ${rtxSsrc}`);\n        }\n    }\n}\nexports.OfferMediaSection = OfferMediaSection;\nfunction getCodecName(codec) {\n    const MimeTypeRegex = new RegExp('^(audio|video)/(.+)', 'i');\n    const mimeTypeMatch = MimeTypeRegex.exec(codec.mimeType);\n    if (!mimeTypeMatch)\n        throw new TypeError('invalid codec.mimeType');\n    return mimeTypeMatch[2];\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RemoteSdp = void 0;\nconst sdpTransform = __importStar(require(\"sdp-transform\"));\nconst Logger_1 = require(\"../../Logger\");\nconst MediaSection_1 = require(\"./MediaSection\");\nconst logger = new Logger_1.Logger('RemoteSdp');\nclass RemoteSdp {\n    constructor({ iceParameters, iceCandidates, dtlsParameters, sctpParameters, plainRtpParameters, planB = false }) {\n        // MediaSection instances with same order as in the SDP.\n        this._mediaSections = [];\n        // MediaSection indices indexed by MID.\n        this._midToIndex = new Map();\n        this._iceParameters = iceParameters;\n        this._iceCandidates = iceCandidates;\n        this._dtlsParameters = dtlsParameters;\n        this._sctpParameters = sctpParameters;\n        this._plainRtpParameters = plainRtpParameters;\n        this._planB = planB;\n        this._sdpObject =\n            {\n                version: 0,\n                origin: {\n                    address: '0.0.0.0',\n                    ipVer: 4,\n                    netType: 'IN',\n                    sessionId: 10000,\n                    sessionVersion: 0,\n                    username: 'mediasoup-client'\n                },\n                name: '-',\n                timing: { start: 0, stop: 0 },\n                media: []\n            };\n        // If ICE parameters are given, add ICE-Lite indicator.\n        if (iceParameters && iceParameters.iceLite) {\n            this._sdpObject.icelite = 'ice-lite';\n        }\n        // If DTLS parameters are given, assume WebRTC and BUNDLE.\n        if (dtlsParameters) {\n            this._sdpObject.msidSemantic = { semantic: 'WMS', token: '*' };\n            // NOTE: We take the latest fingerprint.\n            const numFingerprints = this._dtlsParameters.fingerprints.length;\n            this._sdpObject.fingerprint =\n                {\n                    type: dtlsParameters.fingerprints[numFingerprints - 1].algorithm,\n                    hash: dtlsParameters.fingerprints[numFingerprints - 1].value\n                };\n            this._sdpObject.groups = [{ type: 'BUNDLE', mids: '' }];\n        }\n        // If there are plain RPT parameters, override SDP origin.\n        if (plainRtpParameters) {\n            this._sdpObject.origin.address = plainRtpParameters.ip;\n            this._sdpObject.origin.ipVer = plainRtpParameters.ipVersion;\n        }\n    }\n    updateIceParameters(iceParameters) {\n        logger.debug('updateIceParameters() [iceParameters:%o]', iceParameters);\n        this._iceParameters = iceParameters;\n        this._sdpObject.icelite = iceParameters.iceLite ? 'ice-lite' : undefined;\n        for (const mediaSection of this._mediaSections) {\n            mediaSection.setIceParameters(iceParameters);\n        }\n    }\n    updateDtlsRole(role) {\n        logger.debug('updateDtlsRole() [role:%s]', role);\n        this._dtlsParameters.role = role;\n        for (const mediaSection of this._mediaSections) {\n            mediaSection.setDtlsRole(role);\n        }\n    }\n    getNextMediaSectionIdx() {\n        // If a closed media section is found, return its index.\n        for (let idx = 0; idx < this._mediaSections.length; ++idx) {\n            const mediaSection = this._mediaSections[idx];\n            if (mediaSection.closed)\n                return { idx, reuseMid: mediaSection.mid };\n        }\n        // If no closed media section is found, return next one.\n        return { idx: this._mediaSections.length };\n    }\n    send({ offerMediaObject, reuseMid, offerRtpParameters, answerRtpParameters, codecOptions, extmapAllowMixed = false }) {\n        const mediaSection = new MediaSection_1.AnswerMediaSection({\n            iceParameters: this._iceParameters,\n            iceCandidates: this._iceCandidates,\n            dtlsParameters: this._dtlsParameters,\n            plainRtpParameters: this._plainRtpParameters,\n            planB: this._planB,\n            offerMediaObject,\n            offerRtpParameters,\n            answerRtpParameters,\n            codecOptions,\n            extmapAllowMixed\n        });\n        // Unified-Plan with closed media section replacement.\n        if (reuseMid) {\n            this._replaceMediaSection(mediaSection, reuseMid);\n        }\n        // Unified-Plan or Plan-B with different media kind.\n        else if (!this._midToIndex.has(mediaSection.mid)) {\n            this._addMediaSection(mediaSection);\n        }\n        // Plan-B with same media kind.\n        else {\n            this._replaceMediaSection(mediaSection);\n        }\n    }\n    receive({ mid, kind, offerRtpParameters, streamId, trackId }) {\n        const idx = this._midToIndex.get(mid);\n        let mediaSection;\n        if (idx !== undefined)\n            mediaSection = this._mediaSections[idx];\n        // Unified-Plan or different media kind.\n        if (!mediaSection) {\n            mediaSection = new MediaSection_1.OfferMediaSection({\n                iceParameters: this._iceParameters,\n                iceCandidates: this._iceCandidates,\n                dtlsParameters: this._dtlsParameters,\n                plainRtpParameters: this._plainRtpParameters,\n                planB: this._planB,\n                mid,\n                kind,\n                offerRtpParameters,\n                streamId,\n                trackId\n            });\n            // Let's try to recycle a closed media section (if any).\n            // NOTE: Yes, we can recycle a closed m=audio section with a new m=video.\n            const oldMediaSection = this._mediaSections.find((m) => (m.closed));\n            if (oldMediaSection) {\n                this._replaceMediaSection(mediaSection, oldMediaSection.mid);\n            }\n            else {\n                this._addMediaSection(mediaSection);\n            }\n        }\n        // Plan-B.\n        else {\n            mediaSection.planBReceive({ offerRtpParameters, streamId, trackId });\n            this._replaceMediaSection(mediaSection);\n        }\n    }\n    disableMediaSection(mid) {\n        const idx = this._midToIndex.get(mid);\n        if (idx === undefined) {\n            throw new Error(`no media section found with mid '${mid}'`);\n        }\n        const mediaSection = this._mediaSections[idx];\n        mediaSection.disable();\n    }\n    closeMediaSection(mid) {\n        const idx = this._midToIndex.get(mid);\n        if (idx === undefined) {\n            throw new Error(`no media section found with mid '${mid}'`);\n        }\n        const mediaSection = this._mediaSections[idx];\n        // NOTE: Closing the first m section is a pain since it invalidates the\n        // bundled transport, so let's avoid it.\n        if (mid === this._firstMid) {\n            logger.debug('closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]', mid);\n            this.disableMediaSection(mid);\n            return;\n        }\n        mediaSection.close();\n        // Regenerate BUNDLE mids.\n        this._regenerateBundleMids();\n    }\n    planBStopReceiving({ mid, offerRtpParameters }) {\n        const idx = this._midToIndex.get(mid);\n        if (idx === undefined) {\n            throw new Error(`no media section found with mid '${mid}'`);\n        }\n        const mediaSection = this._mediaSections[idx];\n        mediaSection.planBStopReceiving({ offerRtpParameters });\n        this._replaceMediaSection(mediaSection);\n    }\n    sendSctpAssociation({ offerMediaObject }) {\n        const mediaSection = new MediaSection_1.AnswerMediaSection({\n            iceParameters: this._iceParameters,\n            iceCandidates: this._iceCandidates,\n            dtlsParameters: this._dtlsParameters,\n            sctpParameters: this._sctpParameters,\n            plainRtpParameters: this._plainRtpParameters,\n            offerMediaObject\n        });\n        this._addMediaSection(mediaSection);\n    }\n    receiveSctpAssociation({ oldDataChannelSpec = false } = {}) {\n        const mediaSection = new MediaSection_1.OfferMediaSection({\n            iceParameters: this._iceParameters,\n            iceCandidates: this._iceCandidates,\n            dtlsParameters: this._dtlsParameters,\n            sctpParameters: this._sctpParameters,\n            plainRtpParameters: this._plainRtpParameters,\n            mid: 'datachannel',\n            kind: 'application',\n            oldDataChannelSpec\n        });\n        this._addMediaSection(mediaSection);\n    }\n    getSdp() {\n        // Increase SDP version.\n        this._sdpObject.origin.sessionVersion++;\n        return sdpTransform.write(this._sdpObject);\n    }\n    _addMediaSection(newMediaSection) {\n        if (!this._firstMid)\n            this._firstMid = newMediaSection.mid;\n        // Add to the vector.\n        this._mediaSections.push(newMediaSection);\n        // Add to the map.\n        this._midToIndex.set(newMediaSection.mid, this._mediaSections.length - 1);\n        // Add to the SDP object.\n        this._sdpObject.media.push(newMediaSection.getObject());\n        // Regenerate BUNDLE mids.\n        this._regenerateBundleMids();\n    }\n    _replaceMediaSection(newMediaSection, reuseMid) {\n        // Store it in the map.\n        if (typeof reuseMid === 'string') {\n            const idx = this._midToIndex.get(reuseMid);\n            if (idx === undefined) {\n                throw new Error(`no media section found for reuseMid '${reuseMid}'`);\n            }\n            const oldMediaSection = this._mediaSections[idx];\n            // Replace the index in the vector with the new media section.\n            this._mediaSections[idx] = newMediaSection;\n            // Update the map.\n            this._midToIndex.delete(oldMediaSection.mid);\n            this._midToIndex.set(newMediaSection.mid, idx);\n            // Update the SDP object.\n            this._sdpObject.media[idx] = newMediaSection.getObject();\n            // Regenerate BUNDLE mids.\n            this._regenerateBundleMids();\n        }\n        else {\n            const idx = this._midToIndex.get(newMediaSection.mid);\n            if (idx === undefined) {\n                throw new Error(`no media section found with mid '${newMediaSection.mid}'`);\n            }\n            // Replace the index in the vector with the new media section.\n            this._mediaSections[idx] = newMediaSection;\n            // Update the SDP object.\n            this._sdpObject.media[idx] = newMediaSection.getObject();\n        }\n    }\n    _regenerateBundleMids() {\n        if (!this._dtlsParameters)\n            return;\n        this._sdpObject.groups[0].mids = this._mediaSections\n            .filter((mediaSection) => !mediaSection.closed)\n            .map((mediaSection) => mediaSection.mid)\n            .join(' ');\n    }\n}\nexports.RemoteSdp = RemoteSdp;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parse = void 0;\nconst ScalabilityModeRegex = new RegExp('^[LS]([1-9]\\\\d{0,1})T([1-9]\\\\d{0,1})');\nfunction parse(scalabilityMode) {\n    const match = ScalabilityModeRegex.exec(scalabilityMode || '');\n    if (match) {\n        return {\n            spatialLayers: Number(match[1]),\n            temporalLayers: Number(match[2])\n        };\n    }\n    else {\n        return {\n            spatialLayers: 1,\n            temporalLayers: 1\n        };\n    }\n}\nexports.parse = parse;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Chrome74 = void 0;\nconst sdpTransform = __importStar(require(\"sdp-transform\"));\nconst Logger_1 = require(\"../Logger\");\nconst utils = __importStar(require(\"../utils\"));\nconst ortc = __importStar(require(\"../ortc\"));\nconst sdpCommonUtils = __importStar(require(\"./sdp/commonUtils\"));\nconst sdpUnifiedPlanUtils = __importStar(require(\"./sdp/unifiedPlanUtils\"));\nconst HandlerInterface_1 = require(\"./HandlerInterface\");\nconst RemoteSdp_1 = require(\"./sdp/RemoteSdp\");\nconst scalabilityModes_1 = require(\"../scalabilityModes\");\nconst logger = new Logger_1.Logger('Chrome74');\nconst SCTP_NUM_STREAMS = { OS: 1024, MIS: 1024 };\nclass Chrome74 extends HandlerInterface_1.HandlerInterface {\n    constructor() {\n        super();\n        // Map of RTCTransceivers indexed by MID.\n        this._mapMidTransceiver = new Map();\n        // Local stream for sending.\n        this._sendStream = new MediaStream();\n        // Whether a DataChannel m=application section has been created.\n        this._hasDataChannelMediaSection = false;\n        // Sending DataChannel id value counter. Incremented for each new DataChannel.\n        this._nextSendSctpStreamId = 0;\n        // Got transport local and remote parameters.\n        this._transportReady = false;\n    }\n    /**\n     * Creates a factory function.\n     */\n    static createFactory() {\n        return () => new Chrome74();\n    }\n    get name() {\n        return 'Chrome74';\n    }\n    close() {\n        logger.debug('close()');\n        // Close RTCPeerConnection.\n        if (this._pc) {\n            try {\n                this._pc.close();\n            }\n            catch (error) { }\n        }\n    }\n    async getNativeRtpCapabilities() {\n        logger.debug('getNativeRtpCapabilities()');\n        const pc = new RTCPeerConnection({\n            iceServers: [],\n            iceTransportPolicy: 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'unified-plan'\n        });\n        try {\n            pc.addTransceiver('audio');\n            pc.addTransceiver('video');\n            const offer = await pc.createOffer();\n            try {\n                pc.close();\n            }\n            catch (error) { }\n            const sdpObject = sdpTransform.parse(offer.sdp);\n            const nativeRtpCapabilities = sdpCommonUtils.extractRtpCapabilities({ sdpObject });\n            return nativeRtpCapabilities;\n        }\n        catch (error) {\n            try {\n                pc.close();\n            }\n            catch (error2) { }\n            throw error;\n        }\n    }\n    async getNativeSctpCapabilities() {\n        logger.debug('getNativeSctpCapabilities()');\n        return {\n            numStreams: SCTP_NUM_STREAMS\n        };\n    }\n    run({ direction, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, extendedRtpCapabilities }) {\n        logger.debug('run()');\n        this._direction = direction;\n        this._remoteSdp = new RemoteSdp_1.RemoteSdp({\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters\n        });\n        this._sendingRtpParametersByKind =\n            {\n                audio: ortc.getSendingRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRtpParameters('video', extendedRtpCapabilities)\n            };\n        this._sendingRemoteRtpParametersByKind =\n            {\n                audio: ortc.getSendingRemoteRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRemoteRtpParameters('video', extendedRtpCapabilities)\n            };\n        if (dtlsParameters.role && dtlsParameters.role !== 'auto') {\n            this._forcedLocalDtlsRole = dtlsParameters.role === 'server'\n                ? 'client'\n                : 'server';\n        }\n        this._pc = new RTCPeerConnection({\n            iceServers: iceServers || [],\n            iceTransportPolicy: iceTransportPolicy || 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'unified-plan',\n            ...additionalSettings\n        }, proprietaryConstraints);\n        // Handle RTCPeerConnection connection status.\n        this._pc.addEventListener('iceconnectionstatechange', () => {\n            switch (this._pc.iceConnectionState) {\n                case 'checking':\n                    this.emit('@connectionstatechange', 'connecting');\n                    break;\n                case 'connected':\n                case 'completed':\n                    this.emit('@connectionstatechange', 'connected');\n                    break;\n                case 'failed':\n                    this.emit('@connectionstatechange', 'failed');\n                    break;\n                case 'disconnected':\n                    this.emit('@connectionstatechange', 'disconnected');\n                    break;\n                case 'closed':\n                    this.emit('@connectionstatechange', 'closed');\n                    break;\n            }\n        });\n    }\n    async updateIceServers(iceServers) {\n        logger.debug('updateIceServers()');\n        const configuration = this._pc.getConfiguration();\n        configuration.iceServers = iceServers;\n        this._pc.setConfiguration(configuration);\n    }\n    async restartIce(iceParameters) {\n        logger.debug('restartIce()');\n        // Provide the remote SDP handler with new remote ICE parameters.\n        this._remoteSdp.updateIceParameters(iceParameters);\n        if (!this._transportReady)\n            return;\n        if (this._direction === 'send') {\n            const offer = await this._pc.createOffer({ iceRestart: true });\n            logger.debug('restartIce() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n        }\n        else {\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            logger.debug('restartIce() | calling pc.setLocalDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n        }\n    }\n    async getTransportStats() {\n        return this._pc.getStats();\n    }\n    async send({ track, encodings, codecOptions, codec }) {\n        var _a;\n        this._assertSendDirection();\n        logger.debug('send() [kind:%s, track.id:%s]', track.kind, track.id);\n        if (encodings && encodings.length > 1) {\n            encodings.forEach((encoding, idx) => {\n                encoding.rid = `r${idx}`;\n            });\n        }\n        const sendingRtpParameters = utils.clone(this._sendingRtpParametersByKind[track.kind], {});\n        // This may throw.\n        sendingRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRtpParameters.codecs, codec);\n        const sendingRemoteRtpParameters = utils.clone(this._sendingRemoteRtpParametersByKind[track.kind], {});\n        // This may throw.\n        sendingRemoteRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRemoteRtpParameters.codecs, codec);\n        const mediaSectionIdx = this._remoteSdp.getNextMediaSectionIdx();\n        const transceiver = this._pc.addTransceiver(track, {\n            direction: 'sendonly',\n            streams: [this._sendStream],\n            sendEncodings: encodings\n        });\n        let offer = await this._pc.createOffer();\n        let localSdpObject = sdpTransform.parse(offer.sdp);\n        let offerMediaObject;\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        // Special case for VP9 with SVC.\n        let hackVp9Svc = false;\n        const layers = (0, scalabilityModes_1.parse)((encodings || [{}])[0].scalabilityMode);\n        if (encodings &&\n            encodings.length === 1 &&\n            layers.spatialLayers > 1 &&\n            sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/vp9') {\n            logger.debug('send() | enabling legacy simulcast for VP9 SVC');\n            hackVp9Svc = true;\n            localSdpObject = sdpTransform.parse(offer.sdp);\n            offerMediaObject = localSdpObject.media[mediaSectionIdx.idx];\n            sdpUnifiedPlanUtils.addLegacySimulcast({\n                offerMediaObject,\n                numStreams: layers.spatialLayers\n            });\n            offer = { type: 'offer', sdp: sdpTransform.write(localSdpObject) };\n        }\n        logger.debug('send() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        // We can now get the transceiver.mid.\n        const localId = transceiver.mid;\n        // Set MID.\n        sendingRtpParameters.mid = localId;\n        localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        offerMediaObject = localSdpObject.media[mediaSectionIdx.idx];\n        // Set RTCP CNAME.\n        sendingRtpParameters.rtcp.cname =\n            sdpCommonUtils.getCname({ offerMediaObject });\n        // Set RTP encodings by parsing the SDP offer if no encodings are given.\n        if (!encodings) {\n            sendingRtpParameters.encodings =\n                sdpUnifiedPlanUtils.getRtpEncodings({ offerMediaObject });\n        }\n        // Set RTP encodings by parsing the SDP offer and complete them with given\n        // one if just a single encoding has been given.\n        else if (encodings.length === 1) {\n            let newEncodings = sdpUnifiedPlanUtils.getRtpEncodings({ offerMediaObject });\n            Object.assign(newEncodings[0], encodings[0]);\n            // Hack for VP9 SVC.\n            if (hackVp9Svc)\n                newEncodings = [newEncodings[0]];\n            sendingRtpParameters.encodings = newEncodings;\n        }\n        // Otherwise if more than 1 encoding are given use them verbatim.\n        else {\n            sendingRtpParameters.encodings = encodings;\n        }\n        // If VP8 or H264 and there is effective simulcast, add scalabilityMode to\n        // each encoding.\n        if (sendingRtpParameters.encodings.length > 1 &&\n            (sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/vp8' ||\n                sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/h264')) {\n            for (const encoding of sendingRtpParameters.encodings) {\n                encoding.scalabilityMode = 'S1T3';\n            }\n        }\n        this._remoteSdp.send({\n            offerMediaObject,\n            reuseMid: mediaSectionIdx.reuseMid,\n            offerRtpParameters: sendingRtpParameters,\n            answerRtpParameters: sendingRemoteRtpParameters,\n            codecOptions,\n            extmapAllowMixed: true\n        });\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('send() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        // Store in the map.\n        this._mapMidTransceiver.set(localId, transceiver);\n        return {\n            localId,\n            rtpParameters: sendingRtpParameters,\n            rtpSender: transceiver.sender\n        };\n    }\n    async stopSending(localId) {\n        this._assertSendDirection();\n        logger.debug('stopSending() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        transceiver.sender.replaceTrack(null);\n        this._pc.removeTrack(transceiver.sender);\n        this._remoteSdp.closeMediaSection(transceiver.mid);\n        const offer = await this._pc.createOffer();\n        logger.debug('stopSending() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopSending() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        this._mapMidTransceiver.delete(localId);\n    }\n    async replaceTrack(localId, track) {\n        this._assertSendDirection();\n        if (track) {\n            logger.debug('replaceTrack() [localId:%s, track.id:%s]', localId, track.id);\n        }\n        else {\n            logger.debug('replaceTrack() [localId:%s, no track]', localId);\n        }\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        await transceiver.sender.replaceTrack(track);\n    }\n    async setMaxSpatialLayer(localId, spatialLayer) {\n        this._assertSendDirection();\n        logger.debug('setMaxSpatialLayer() [localId:%s, spatialLayer:%s]', localId, spatialLayer);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        const parameters = transceiver.sender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            if (idx <= spatialLayer)\n                encoding.active = true;\n            else\n                encoding.active = false;\n        });\n        await transceiver.sender.setParameters(parameters);\n    }\n    async setRtpEncodingParameters(localId, params) {\n        this._assertSendDirection();\n        logger.debug('setRtpEncodingParameters() [localId:%s, params:%o]', localId, params);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        const parameters = transceiver.sender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            parameters.encodings[idx] = { ...encoding, ...params };\n        });\n        await transceiver.sender.setParameters(parameters);\n    }\n    async getSenderStats(localId) {\n        this._assertSendDirection();\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        return transceiver.sender.getStats();\n    }\n    async sendDataChannel({ ordered, maxPacketLifeTime, maxRetransmits, label, protocol }) {\n        var _a;\n        this._assertSendDirection();\n        const options = {\n            negotiated: true,\n            id: this._nextSendSctpStreamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('sendDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // Increase next id.\n        this._nextSendSctpStreamId =\n            ++this._nextSendSctpStreamId % SCTP_NUM_STREAMS.MIS;\n        // If this is the first DataChannel we need to create the SDP answer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            const offer = await this._pc.createOffer();\n            const localSdpObject = sdpTransform.parse(offer.sdp);\n            const offerMediaObject = localSdpObject.media\n                .find((m) => m.type === 'application');\n            if (!this._transportReady) {\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('sendDataChannel() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            this._remoteSdp.sendSctpAssociation({ offerMediaObject });\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        const sctpStreamParameters = {\n            streamId: options.id,\n            ordered: options.ordered,\n            maxPacketLifeTime: options.maxPacketLifeTime,\n            maxRetransmits: options.maxRetransmits\n        };\n        return { dataChannel, sctpStreamParameters };\n    }\n    async receive({ trackId, kind, rtpParameters }) {\n        var _a;\n        this._assertRecvDirection();\n        logger.debug('receive() [trackId:%s, kind:%s]', trackId, kind);\n        const localId = rtpParameters.mid || String(this._mapMidTransceiver.size);\n        this._remoteSdp.receive({\n            mid: localId,\n            kind,\n            offerRtpParameters: rtpParameters,\n            streamId: rtpParameters.rtcp.cname,\n            trackId\n        });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('receive() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        let answer = await this._pc.createAnswer();\n        const localSdpObject = sdpTransform.parse(answer.sdp);\n        const answerMediaObject = localSdpObject.media\n            .find((m) => String(m.mid) === localId);\n        // May need to modify codec parameters in the answer based on codec\n        // parameters in the offer.\n        sdpCommonUtils.applyCodecParameters({\n            offerRtpParameters: rtpParameters,\n            answerMediaObject\n        });\n        answer = { type: 'answer', sdp: sdpTransform.write(localSdpObject) };\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        logger.debug('receive() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        const transceiver = this._pc.getTransceivers()\n            .find((t) => t.mid === localId);\n        if (!transceiver)\n            throw new Error('new RTCRtpTransceiver not found');\n        // Store in the map.\n        this._mapMidTransceiver.set(localId, transceiver);\n        return {\n            localId,\n            track: transceiver.receiver.track,\n            rtpReceiver: transceiver.receiver\n        };\n    }\n    async stopReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('stopReceiving() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        this._remoteSdp.closeMediaSection(transceiver.mid);\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('stopReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        this._mapMidTransceiver.delete(localId);\n    }\n    async pauseReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('pauseReceiving() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        transceiver.direction = 'inactive';\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('pauseReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n    }\n    async resumeReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('resumeReceiving() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        transceiver.direction = 'recvonly';\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('resumeReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n    }\n    async getReceiverStats(localId) {\n        this._assertRecvDirection();\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        return transceiver.receiver.getStats();\n    }\n    async receiveDataChannel({ sctpStreamParameters, label, protocol }) {\n        var _a;\n        this._assertRecvDirection();\n        const { streamId, ordered, maxPacketLifeTime, maxRetransmits } = sctpStreamParameters;\n        const options = {\n            negotiated: true,\n            id: streamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('receiveDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // If this is the first DataChannel we need to create the SDP offer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            this._remoteSdp.receiveSctpAssociation();\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            if (!this._transportReady) {\n                const localSdpObject = sdpTransform.parse(answer.sdp);\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        return { dataChannel };\n    }\n    async _setupTransport({ localDtlsRole, localSdpObject }) {\n        if (!localSdpObject)\n            localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        // Get our local DTLS parameters.\n        const dtlsParameters = sdpCommonUtils.extractDtlsParameters({ sdpObject: localSdpObject });\n        // Set our DTLS role.\n        dtlsParameters.role = localDtlsRole;\n        // Update the remote DTLS role in the SDP.\n        this._remoteSdp.updateDtlsRole(localDtlsRole === 'client' ? 'server' : 'client');\n        // Need to tell the remote transport about our parameters.\n        await this.safeEmitAsPromise('@connect', { dtlsParameters });\n        this._transportReady = true;\n    }\n    _assertSendDirection() {\n        if (this._direction !== 'send') {\n            throw new Error('method can just be called for handlers with \"send\" direction');\n        }\n    }\n    _assertRecvDirection() {\n        if (this._direction !== 'recv') {\n            throw new Error('method can just be called for handlers with \"recv\" direction');\n        }\n    }\n}\nexports.Chrome74 = Chrome74;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Chrome70 = void 0;\nconst sdpTransform = __importStar(require(\"sdp-transform\"));\nconst Logger_1 = require(\"../Logger\");\nconst utils = __importStar(require(\"../utils\"));\nconst ortc = __importStar(require(\"../ortc\"));\nconst sdpCommonUtils = __importStar(require(\"./sdp/commonUtils\"));\nconst sdpUnifiedPlanUtils = __importStar(require(\"./sdp/unifiedPlanUtils\"));\nconst HandlerInterface_1 = require(\"./HandlerInterface\");\nconst RemoteSdp_1 = require(\"./sdp/RemoteSdp\");\nconst scalabilityModes_1 = require(\"../scalabilityModes\");\nconst logger = new Logger_1.Logger('Chrome70');\nconst SCTP_NUM_STREAMS = { OS: 1024, MIS: 1024 };\nclass Chrome70 extends HandlerInterface_1.HandlerInterface {\n    constructor() {\n        super();\n        // Map of RTCTransceivers indexed by MID.\n        this._mapMidTransceiver = new Map();\n        // Local stream for sending.\n        this._sendStream = new MediaStream();\n        // Whether a DataChannel m=application section has been created.\n        this._hasDataChannelMediaSection = false;\n        // Sending DataChannel id value counter. Incremented for each new DataChannel.\n        this._nextSendSctpStreamId = 0;\n        // Got transport local and remote parameters.\n        this._transportReady = false;\n    }\n    /**\n     * Creates a factory function.\n     */\n    static createFactory() {\n        return () => new Chrome70();\n    }\n    get name() {\n        return 'Chrome70';\n    }\n    close() {\n        logger.debug('close()');\n        // Close RTCPeerConnection.\n        if (this._pc) {\n            try {\n                this._pc.close();\n            }\n            catch (error) { }\n        }\n    }\n    async getNativeRtpCapabilities() {\n        logger.debug('getNativeRtpCapabilities()');\n        const pc = new RTCPeerConnection({\n            iceServers: [],\n            iceTransportPolicy: 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'unified-plan'\n        });\n        try {\n            pc.addTransceiver('audio');\n            pc.addTransceiver('video');\n            const offer = await pc.createOffer();\n            try {\n                pc.close();\n            }\n            catch (error) { }\n            const sdpObject = sdpTransform.parse(offer.sdp);\n            const nativeRtpCapabilities = sdpCommonUtils.extractRtpCapabilities({ sdpObject });\n            return nativeRtpCapabilities;\n        }\n        catch (error) {\n            try {\n                pc.close();\n            }\n            catch (error2) { }\n            throw error;\n        }\n    }\n    async getNativeSctpCapabilities() {\n        logger.debug('getNativeSctpCapabilities()');\n        return {\n            numStreams: SCTP_NUM_STREAMS\n        };\n    }\n    run({ direction, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, extendedRtpCapabilities }) {\n        logger.debug('run()');\n        this._direction = direction;\n        this._remoteSdp = new RemoteSdp_1.RemoteSdp({\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters\n        });\n        this._sendingRtpParametersByKind =\n            {\n                audio: ortc.getSendingRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRtpParameters('video', extendedRtpCapabilities)\n            };\n        this._sendingRemoteRtpParametersByKind =\n            {\n                audio: ortc.getSendingRemoteRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRemoteRtpParameters('video', extendedRtpCapabilities)\n            };\n        if (dtlsParameters.role && dtlsParameters.role !== 'auto') {\n            this._forcedLocalDtlsRole = dtlsParameters.role === 'server'\n                ? 'client'\n                : 'server';\n        }\n        this._pc = new RTCPeerConnection({\n            iceServers: iceServers || [],\n            iceTransportPolicy: iceTransportPolicy || 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'unified-plan',\n            ...additionalSettings\n        }, proprietaryConstraints);\n        // Handle RTCPeerConnection connection status.\n        this._pc.addEventListener('iceconnectionstatechange', () => {\n            switch (this._pc.iceConnectionState) {\n                case 'checking':\n                    this.emit('@connectionstatechange', 'connecting');\n                    break;\n                case 'connected':\n                case 'completed':\n                    this.emit('@connectionstatechange', 'connected');\n                    break;\n                case 'failed':\n                    this.emit('@connectionstatechange', 'failed');\n                    break;\n                case 'disconnected':\n                    this.emit('@connectionstatechange', 'disconnected');\n                    break;\n                case 'closed':\n                    this.emit('@connectionstatechange', 'closed');\n                    break;\n            }\n        });\n    }\n    async updateIceServers(iceServers) {\n        logger.debug('updateIceServers()');\n        const configuration = this._pc.getConfiguration();\n        configuration.iceServers = iceServers;\n        this._pc.setConfiguration(configuration);\n    }\n    async restartIce(iceParameters) {\n        logger.debug('restartIce()');\n        // Provide the remote SDP handler with new remote ICE parameters.\n        this._remoteSdp.updateIceParameters(iceParameters);\n        if (!this._transportReady)\n            return;\n        if (this._direction === 'send') {\n            const offer = await this._pc.createOffer({ iceRestart: true });\n            logger.debug('restartIce() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n        }\n        else {\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            logger.debug('restartIce() | calling pc.setLocalDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n        }\n    }\n    async getTransportStats() {\n        return this._pc.getStats();\n    }\n    async send({ track, encodings, codecOptions, codec }) {\n        var _a;\n        this._assertSendDirection();\n        logger.debug('send() [kind:%s, track.id:%s]', track.kind, track.id);\n        const sendingRtpParameters = utils.clone(this._sendingRtpParametersByKind[track.kind], {});\n        // This may throw.\n        sendingRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRtpParameters.codecs, codec);\n        const sendingRemoteRtpParameters = utils.clone(this._sendingRemoteRtpParametersByKind[track.kind], {});\n        // This may throw.\n        sendingRemoteRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRemoteRtpParameters.codecs, codec);\n        const mediaSectionIdx = this._remoteSdp.getNextMediaSectionIdx();\n        const transceiver = this._pc.addTransceiver(track, { direction: 'sendonly', streams: [this._sendStream] });\n        let offer = await this._pc.createOffer();\n        let localSdpObject = sdpTransform.parse(offer.sdp);\n        let offerMediaObject;\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        if (encodings && encodings.length > 1) {\n            logger.debug('send() | enabling legacy simulcast');\n            localSdpObject = sdpTransform.parse(offer.sdp);\n            offerMediaObject = localSdpObject.media[mediaSectionIdx.idx];\n            sdpUnifiedPlanUtils.addLegacySimulcast({\n                offerMediaObject,\n                numStreams: encodings.length\n            });\n            offer = { type: 'offer', sdp: sdpTransform.write(localSdpObject) };\n        }\n        // Special case for VP9 with SVC.\n        let hackVp9Svc = false;\n        const layers = (0, scalabilityModes_1.parse)((encodings || [{}])[0].scalabilityMode);\n        if (encodings &&\n            encodings.length === 1 &&\n            layers.spatialLayers > 1 &&\n            sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/vp9') {\n            logger.debug('send() | enabling legacy simulcast for VP9 SVC');\n            hackVp9Svc = true;\n            localSdpObject = sdpTransform.parse(offer.sdp);\n            offerMediaObject = localSdpObject.media[mediaSectionIdx.idx];\n            sdpUnifiedPlanUtils.addLegacySimulcast({\n                offerMediaObject,\n                numStreams: layers.spatialLayers\n            });\n            offer = { type: 'offer', sdp: sdpTransform.write(localSdpObject) };\n        }\n        logger.debug('send() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        // If encodings are given, apply them now.\n        if (encodings) {\n            logger.debug('send() | applying given encodings');\n            const parameters = transceiver.sender.getParameters();\n            for (let idx = 0; idx < (parameters.encodings || []).length; ++idx) {\n                const encoding = parameters.encodings[idx];\n                const desiredEncoding = encodings[idx];\n                // Should not happen but just in case.\n                if (!desiredEncoding)\n                    break;\n                parameters.encodings[idx] = Object.assign(encoding, desiredEncoding);\n            }\n            await transceiver.sender.setParameters(parameters);\n        }\n        // We can now get the transceiver.mid.\n        const localId = transceiver.mid;\n        // Set MID.\n        sendingRtpParameters.mid = localId;\n        localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        offerMediaObject = localSdpObject.media[mediaSectionIdx.idx];\n        // Set RTCP CNAME.\n        sendingRtpParameters.rtcp.cname =\n            sdpCommonUtils.getCname({ offerMediaObject });\n        // Set RTP encodings.\n        sendingRtpParameters.encodings =\n            sdpUnifiedPlanUtils.getRtpEncodings({ offerMediaObject });\n        // Complete encodings with given values.\n        if (encodings) {\n            for (let idx = 0; idx < sendingRtpParameters.encodings.length; ++idx) {\n                if (encodings[idx])\n                    Object.assign(sendingRtpParameters.encodings[idx], encodings[idx]);\n            }\n        }\n        // Hack for VP9 SVC.\n        if (hackVp9Svc) {\n            sendingRtpParameters.encodings = [sendingRtpParameters.encodings[0]];\n        }\n        // If VP8 or H264 and there is effective simulcast, add scalabilityMode to\n        // each encoding.\n        if (sendingRtpParameters.encodings.length > 1 &&\n            (sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/vp8' ||\n                sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/h264')) {\n            for (const encoding of sendingRtpParameters.encodings) {\n                encoding.scalabilityMode = 'S1T3';\n            }\n        }\n        this._remoteSdp.send({\n            offerMediaObject,\n            reuseMid: mediaSectionIdx.reuseMid,\n            offerRtpParameters: sendingRtpParameters,\n            answerRtpParameters: sendingRemoteRtpParameters,\n            codecOptions\n        });\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('send() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        // Store in the map.\n        this._mapMidTransceiver.set(localId, transceiver);\n        return {\n            localId,\n            rtpParameters: sendingRtpParameters,\n            rtpSender: transceiver.sender\n        };\n    }\n    async stopSending(localId) {\n        this._assertSendDirection();\n        logger.debug('stopSending() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        transceiver.sender.replaceTrack(null);\n        this._pc.removeTrack(transceiver.sender);\n        this._remoteSdp.closeMediaSection(transceiver.mid);\n        const offer = await this._pc.createOffer();\n        logger.debug('stopSending() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopSending() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        this._mapMidTransceiver.delete(localId);\n    }\n    async replaceTrack(localId, track) {\n        this._assertSendDirection();\n        if (track) {\n            logger.debug('replaceTrack() [localId:%s, track.id:%s]', localId, track.id);\n        }\n        else {\n            logger.debug('replaceTrack() [localId:%s, no track]', localId);\n        }\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        await transceiver.sender.replaceTrack(track);\n    }\n    async setMaxSpatialLayer(localId, spatialLayer) {\n        this._assertSendDirection();\n        logger.debug('setMaxSpatialLayer() [localId:%s, spatialLayer:%s]', localId, spatialLayer);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        const parameters = transceiver.sender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            if (idx <= spatialLayer)\n                encoding.active = true;\n            else\n                encoding.active = false;\n        });\n        await transceiver.sender.setParameters(parameters);\n    }\n    async setRtpEncodingParameters(localId, params) {\n        this._assertSendDirection();\n        logger.debug('setRtpEncodingParameters() [localId:%s, params:%o]', localId, params);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        const parameters = transceiver.sender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            parameters.encodings[idx] = { ...encoding, ...params };\n        });\n        await transceiver.sender.setParameters(parameters);\n    }\n    async getSenderStats(localId) {\n        this._assertSendDirection();\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        return transceiver.sender.getStats();\n    }\n    async sendDataChannel({ ordered, maxPacketLifeTime, maxRetransmits, label, protocol }) {\n        var _a;\n        this._assertSendDirection();\n        const options = {\n            negotiated: true,\n            id: this._nextSendSctpStreamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmitTime: maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('sendDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // Increase next id.\n        this._nextSendSctpStreamId =\n            ++this._nextSendSctpStreamId % SCTP_NUM_STREAMS.MIS;\n        // If this is the first DataChannel we need to create the SDP answer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            const offer = await this._pc.createOffer();\n            const localSdpObject = sdpTransform.parse(offer.sdp);\n            const offerMediaObject = localSdpObject.media\n                .find((m) => m.type === 'application');\n            if (!this._transportReady) {\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('sendDataChannel() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            this._remoteSdp.sendSctpAssociation({ offerMediaObject });\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        const sctpStreamParameters = {\n            streamId: options.id,\n            ordered: options.ordered,\n            maxPacketLifeTime: options.maxPacketLifeTime,\n            maxRetransmits: options.maxRetransmits\n        };\n        return { dataChannel, sctpStreamParameters };\n    }\n    async receive({ trackId, kind, rtpParameters }) {\n        var _a;\n        this._assertRecvDirection();\n        logger.debug('receive() [trackId:%s, kind:%s]', trackId, kind);\n        const localId = rtpParameters.mid || String(this._mapMidTransceiver.size);\n        this._remoteSdp.receive({\n            mid: localId,\n            kind,\n            offerRtpParameters: rtpParameters,\n            streamId: rtpParameters.rtcp.cname,\n            trackId\n        });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('receive() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        let answer = await this._pc.createAnswer();\n        const localSdpObject = sdpTransform.parse(answer.sdp);\n        const answerMediaObject = localSdpObject.media\n            .find((m) => String(m.mid) === localId);\n        // May need to modify codec parameters in the answer based on codec\n        // parameters in the offer.\n        sdpCommonUtils.applyCodecParameters({\n            offerRtpParameters: rtpParameters,\n            answerMediaObject\n        });\n        answer = { type: 'answer', sdp: sdpTransform.write(localSdpObject) };\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        logger.debug('receive() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        const transceiver = this._pc.getTransceivers()\n            .find((t) => t.mid === localId);\n        if (!transceiver)\n            throw new Error('new RTCRtpTransceiver not found');\n        // Store in the map.\n        this._mapMidTransceiver.set(localId, transceiver);\n        return {\n            localId,\n            track: transceiver.receiver.track,\n            rtpReceiver: transceiver.receiver\n        };\n    }\n    async stopReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('stopReceiving() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        this._remoteSdp.closeMediaSection(transceiver.mid);\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('stopReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        this._mapMidTransceiver.delete(localId);\n    }\n    async pauseReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    async resumeReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    async getReceiverStats(localId) {\n        this._assertRecvDirection();\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        return transceiver.receiver.getStats();\n    }\n    async receiveDataChannel({ sctpStreamParameters, label, protocol }) {\n        var _a;\n        this._assertRecvDirection();\n        const { streamId, ordered, maxPacketLifeTime, maxRetransmits } = sctpStreamParameters;\n        const options = {\n            negotiated: true,\n            id: streamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmitTime: maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('receiveDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // If this is the first DataChannel we need to create the SDP offer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            this._remoteSdp.receiveSctpAssociation();\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            if (!this._transportReady) {\n                const localSdpObject = sdpTransform.parse(answer.sdp);\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        return { dataChannel };\n    }\n    async _setupTransport({ localDtlsRole, localSdpObject }) {\n        if (!localSdpObject)\n            localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        // Get our local DTLS parameters.\n        const dtlsParameters = sdpCommonUtils.extractDtlsParameters({ sdpObject: localSdpObject });\n        // Set our DTLS role.\n        dtlsParameters.role = localDtlsRole;\n        // Update the remote DTLS role in the SDP.\n        this._remoteSdp.updateDtlsRole(localDtlsRole === 'client' ? 'server' : 'client');\n        // Need to tell the remote transport about our parameters.\n        await this.safeEmitAsPromise('@connect', { dtlsParameters });\n        this._transportReady = true;\n    }\n    _assertSendDirection() {\n        if (this._direction !== 'send') {\n            throw new Error('method can just be called for handlers with \"send\" direction');\n        }\n    }\n    _assertRecvDirection() {\n        if (this._direction !== 'recv') {\n            throw new Error('method can just be called for handlers with \"recv\" direction');\n        }\n    }\n}\nexports.Chrome70 = Chrome70;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.addLegacySimulcast = exports.getRtpEncodings = void 0;\nfunction getRtpEncodings({ offerMediaObject, track }) {\n    // First media SSRC (or the only one).\n    let firstSsrc;\n    const ssrcs = new Set();\n    for (const line of offerMediaObject.ssrcs || []) {\n        if (line.attribute !== 'msid')\n            continue;\n        const trackId = line.value.split(' ')[1];\n        if (trackId === track.id) {\n            const ssrc = line.id;\n            ssrcs.add(ssrc);\n            if (!firstSsrc)\n                firstSsrc = ssrc;\n        }\n    }\n    if (ssrcs.size === 0)\n        throw new Error(`a=ssrc line with msid information not found [track.id:${track.id}]`);\n    const ssrcToRtxSsrc = new Map();\n    // First assume RTX is used.\n    for (const line of offerMediaObject.ssrcGroups || []) {\n        if (line.semantics !== 'FID')\n            continue;\n        let [ssrc, rtxSsrc] = line.ssrcs.split(/\\s+/);\n        ssrc = Number(ssrc);\n        rtxSsrc = Number(rtxSsrc);\n        if (ssrcs.has(ssrc)) {\n            // Remove both the SSRC and RTX SSRC from the set so later we know that they\n            // are already handled.\n            ssrcs.delete(ssrc);\n            ssrcs.delete(rtxSsrc);\n            // Add to the map.\n            ssrcToRtxSsrc.set(ssrc, rtxSsrc);\n        }\n    }\n    // If the set of SSRCs is not empty it means that RTX is not being used, so take\n    // media SSRCs from there.\n    for (const ssrc of ssrcs) {\n        // Add to the map.\n        ssrcToRtxSsrc.set(ssrc, null);\n    }\n    const encodings = [];\n    for (const [ssrc, rtxSsrc] of ssrcToRtxSsrc) {\n        const encoding = { ssrc };\n        if (rtxSsrc)\n            encoding.rtx = { ssrc: rtxSsrc };\n        encodings.push(encoding);\n    }\n    return encodings;\n}\nexports.getRtpEncodings = getRtpEncodings;\n/**\n * Adds multi-ssrc based simulcast into the given SDP media section offer.\n */\nfunction addLegacySimulcast({ offerMediaObject, track, numStreams }) {\n    if (numStreams <= 1)\n        throw new TypeError('numStreams must be greater than 1');\n    let firstSsrc;\n    let firstRtxSsrc;\n    let streamId;\n    // Get the SSRC.\n    const ssrcMsidLine = (offerMediaObject.ssrcs || [])\n        .find((line) => {\n        if (line.attribute !== 'msid')\n            return false;\n        const trackId = line.value.split(' ')[1];\n        if (trackId === track.id) {\n            firstSsrc = line.id;\n            streamId = line.value.split(' ')[0];\n            return true;\n        }\n        else {\n            return false;\n        }\n    });\n    if (!ssrcMsidLine)\n        throw new Error(`a=ssrc line with msid information not found [track.id:${track.id}]`);\n    // Get the SSRC for RTX.\n    (offerMediaObject.ssrcGroups || [])\n        .some((line) => {\n        if (line.semantics !== 'FID')\n            return false;\n        const ssrcs = line.ssrcs.split(/\\s+/);\n        if (Number(ssrcs[0]) === firstSsrc) {\n            firstRtxSsrc = Number(ssrcs[1]);\n            return true;\n        }\n        else {\n            return false;\n        }\n    });\n    const ssrcCnameLine = offerMediaObject.ssrcs\n        .find((line) => (line.attribute === 'cname' && line.id === firstSsrc));\n    if (!ssrcCnameLine)\n        throw new Error(`a=ssrc line with cname information not found [track.id:${track.id}]`);\n    const cname = ssrcCnameLine.value;\n    const ssrcs = [];\n    const rtxSsrcs = [];\n    for (let i = 0; i < numStreams; ++i) {\n        ssrcs.push(firstSsrc + i);\n        if (firstRtxSsrc)\n            rtxSsrcs.push(firstRtxSsrc + i);\n    }\n    offerMediaObject.ssrcGroups = offerMediaObject.ssrcGroups || [];\n    offerMediaObject.ssrcs = offerMediaObject.ssrcs || [];\n    offerMediaObject.ssrcGroups.push({\n        semantics: 'SIM',\n        ssrcs: ssrcs.join(' ')\n    });\n    for (let i = 0; i < ssrcs.length; ++i) {\n        const ssrc = ssrcs[i];\n        offerMediaObject.ssrcs.push({\n            id: ssrc,\n            attribute: 'cname',\n            value: cname\n        });\n        offerMediaObject.ssrcs.push({\n            id: ssrc,\n            attribute: 'msid',\n            value: `${streamId} ${track.id}`\n        });\n    }\n    for (let i = 0; i < rtxSsrcs.length; ++i) {\n        const ssrc = ssrcs[i];\n        const rtxSsrc = rtxSsrcs[i];\n        offerMediaObject.ssrcs.push({\n            id: rtxSsrc,\n            attribute: 'cname',\n            value: cname\n        });\n        offerMediaObject.ssrcs.push({\n            id: rtxSsrc,\n            attribute: 'msid',\n            value: `${streamId} ${track.id}`\n        });\n        offerMediaObject.ssrcGroups.push({\n            semantics: 'FID',\n            ssrcs: `${ssrc} ${rtxSsrc}`\n        });\n    }\n}\nexports.addLegacySimulcast = addLegacySimulcast;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Chrome67 = void 0;\nconst sdpTransform = __importStar(require(\"sdp-transform\"));\nconst Logger_1 = require(\"../Logger\");\nconst utils = __importStar(require(\"../utils\"));\nconst ortc = __importStar(require(\"../ortc\"));\nconst sdpCommonUtils = __importStar(require(\"./sdp/commonUtils\"));\nconst sdpPlanBUtils = __importStar(require(\"./sdp/planBUtils\"));\nconst HandlerInterface_1 = require(\"./HandlerInterface\");\nconst RemoteSdp_1 = require(\"./sdp/RemoteSdp\");\nconst logger = new Logger_1.Logger('Chrome67');\nconst SCTP_NUM_STREAMS = { OS: 1024, MIS: 1024 };\nclass Chrome67 extends HandlerInterface_1.HandlerInterface {\n    constructor() {\n        super();\n        // Local stream for sending.\n        this._sendStream = new MediaStream();\n        // Map of RTCRtpSender indexed by localId.\n        this._mapSendLocalIdRtpSender = new Map();\n        // Next sending localId.\n        this._nextSendLocalId = 0;\n        // Map of MID, RTP parameters and RTCRtpReceiver indexed by local id.\n        // Value is an Object with mid, rtpParameters and rtpReceiver.\n        this._mapRecvLocalIdInfo = new Map();\n        // Whether a DataChannel m=application section has been created.\n        this._hasDataChannelMediaSection = false;\n        // Sending DataChannel id value counter. Incremented for each new DataChannel.\n        this._nextSendSctpStreamId = 0;\n        // Got transport local and remote parameters.\n        this._transportReady = false;\n    }\n    /**\n     * Creates a factory function.\n     */\n    static createFactory() {\n        return () => new Chrome67();\n    }\n    get name() {\n        return 'Chrome67';\n    }\n    close() {\n        logger.debug('close()');\n        // Close RTCPeerConnection.\n        if (this._pc) {\n            try {\n                this._pc.close();\n            }\n            catch (error) { }\n        }\n    }\n    async getNativeRtpCapabilities() {\n        logger.debug('getNativeRtpCapabilities()');\n        const pc = new RTCPeerConnection({\n            iceServers: [],\n            iceTransportPolicy: 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'plan-b'\n        });\n        try {\n            const offer = await pc.createOffer({\n                offerToReceiveAudio: true,\n                offerToReceiveVideo: true\n            });\n            try {\n                pc.close();\n            }\n            catch (error) { }\n            const sdpObject = sdpTransform.parse(offer.sdp);\n            const nativeRtpCapabilities = sdpCommonUtils.extractRtpCapabilities({ sdpObject });\n            return nativeRtpCapabilities;\n        }\n        catch (error) {\n            try {\n                pc.close();\n            }\n            catch (error2) { }\n            throw error;\n        }\n    }\n    async getNativeSctpCapabilities() {\n        logger.debug('getNativeSctpCapabilities()');\n        return {\n            numStreams: SCTP_NUM_STREAMS\n        };\n    }\n    run({ direction, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, extendedRtpCapabilities }) {\n        logger.debug('run()');\n        this._direction = direction;\n        this._remoteSdp = new RemoteSdp_1.RemoteSdp({\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters,\n            planB: true\n        });\n        this._sendingRtpParametersByKind =\n            {\n                audio: ortc.getSendingRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRtpParameters('video', extendedRtpCapabilities)\n            };\n        this._sendingRemoteRtpParametersByKind =\n            {\n                audio: ortc.getSendingRemoteRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRemoteRtpParameters('video', extendedRtpCapabilities)\n            };\n        if (dtlsParameters.role && dtlsParameters.role !== 'auto') {\n            this._forcedLocalDtlsRole = dtlsParameters.role === 'server'\n                ? 'client'\n                : 'server';\n        }\n        this._pc = new RTCPeerConnection({\n            iceServers: iceServers || [],\n            iceTransportPolicy: iceTransportPolicy || 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'plan-b',\n            ...additionalSettings\n        }, proprietaryConstraints);\n        // Handle RTCPeerConnection connection status.\n        this._pc.addEventListener('iceconnectionstatechange', () => {\n            switch (this._pc.iceConnectionState) {\n                case 'checking':\n                    this.emit('@connectionstatechange', 'connecting');\n                    break;\n                case 'connected':\n                case 'completed':\n                    this.emit('@connectionstatechange', 'connected');\n                    break;\n                case 'failed':\n                    this.emit('@connectionstatechange', 'failed');\n                    break;\n                case 'disconnected':\n                    this.emit('@connectionstatechange', 'disconnected');\n                    break;\n                case 'closed':\n                    this.emit('@connectionstatechange', 'closed');\n                    break;\n            }\n        });\n    }\n    async updateIceServers(iceServers) {\n        logger.debug('updateIceServers()');\n        const configuration = this._pc.getConfiguration();\n        configuration.iceServers = iceServers;\n        this._pc.setConfiguration(configuration);\n    }\n    async restartIce(iceParameters) {\n        logger.debug('restartIce()');\n        // Provide the remote SDP handler with new remote ICE parameters.\n        this._remoteSdp.updateIceParameters(iceParameters);\n        if (!this._transportReady)\n            return;\n        if (this._direction === 'send') {\n            const offer = await this._pc.createOffer({ iceRestart: true });\n            logger.debug('restartIce() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n        }\n        else {\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            logger.debug('restartIce() | calling pc.setLocalDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n        }\n    }\n    async getTransportStats() {\n        return this._pc.getStats();\n    }\n    async send({ track, encodings, codecOptions, codec }) {\n        var _a;\n        this._assertSendDirection();\n        logger.debug('send() [kind:%s, track.id:%s]', track.kind, track.id);\n        if (codec) {\n            logger.warn('send() | codec selection is not available in %s handler', this.name);\n        }\n        this._sendStream.addTrack(track);\n        this._pc.addTrack(track, this._sendStream);\n        let offer = await this._pc.createOffer();\n        let localSdpObject = sdpTransform.parse(offer.sdp);\n        let offerMediaObject;\n        const sendingRtpParameters = utils.clone(this._sendingRtpParametersByKind[track.kind], {});\n        sendingRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRtpParameters.codecs);\n        const sendingRemoteRtpParameters = utils.clone(this._sendingRemoteRtpParametersByKind[track.kind], {});\n        sendingRemoteRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRemoteRtpParameters.codecs);\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        if (track.kind === 'video' && encodings && encodings.length > 1) {\n            logger.debug('send() | enabling simulcast');\n            localSdpObject = sdpTransform.parse(offer.sdp);\n            offerMediaObject = localSdpObject.media\n                .find((m) => m.type === 'video');\n            sdpPlanBUtils.addLegacySimulcast({\n                offerMediaObject,\n                track,\n                numStreams: encodings.length\n            });\n            offer = { type: 'offer', sdp: sdpTransform.write(localSdpObject) };\n        }\n        logger.debug('send() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        offerMediaObject = localSdpObject.media\n            .find((m) => m.type === track.kind);\n        // Set RTCP CNAME.\n        sendingRtpParameters.rtcp.cname =\n            sdpCommonUtils.getCname({ offerMediaObject });\n        // Set RTP encodings.\n        sendingRtpParameters.encodings =\n            sdpPlanBUtils.getRtpEncodings({ offerMediaObject, track });\n        // Complete encodings with given values.\n        if (encodings) {\n            for (let idx = 0; idx < sendingRtpParameters.encodings.length; ++idx) {\n                if (encodings[idx])\n                    Object.assign(sendingRtpParameters.encodings[idx], encodings[idx]);\n            }\n        }\n        // If VP8 and there is effective simulcast, add scalabilityMode to each\n        // encoding.\n        if (sendingRtpParameters.encodings.length > 1 &&\n            sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/vp8') {\n            for (const encoding of sendingRtpParameters.encodings) {\n                encoding.scalabilityMode = 'S1T3';\n            }\n        }\n        this._remoteSdp.send({\n            offerMediaObject,\n            offerRtpParameters: sendingRtpParameters,\n            answerRtpParameters: sendingRemoteRtpParameters,\n            codecOptions\n        });\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('send() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        const localId = String(this._nextSendLocalId);\n        this._nextSendLocalId++;\n        const rtpSender = this._pc.getSenders()\n            .find((s) => s.track === track);\n        // Insert into the map.\n        this._mapSendLocalIdRtpSender.set(localId, rtpSender);\n        return {\n            localId: localId,\n            rtpParameters: sendingRtpParameters,\n            rtpSender\n        };\n    }\n    async stopSending(localId) {\n        this._assertSendDirection();\n        logger.debug('stopSending() [localId:%s]', localId);\n        const rtpSender = this._mapSendLocalIdRtpSender.get(localId);\n        if (!rtpSender)\n            throw new Error('associated RTCRtpSender not found');\n        this._pc.removeTrack(rtpSender);\n        if (rtpSender.track)\n            this._sendStream.removeTrack(rtpSender.track);\n        this._mapSendLocalIdRtpSender.delete(localId);\n        const offer = await this._pc.createOffer();\n        logger.debug('stopSending() | calling pc.setLocalDescription() [offer:%o]', offer);\n        try {\n            await this._pc.setLocalDescription(offer);\n        }\n        catch (error) {\n            // NOTE: If there are no sending tracks, setLocalDescription() will fail with\n            // \"Failed to create channels\". If so, ignore it.\n            if (this._sendStream.getTracks().length === 0) {\n                logger.warn('stopSending() | ignoring expected error due no sending tracks: %s', error.toString());\n                return;\n            }\n            throw error;\n        }\n        if (this._pc.signalingState === 'stable')\n            return;\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopSending() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n    }\n    async replaceTrack(localId, track) {\n        this._assertSendDirection();\n        if (track) {\n            logger.debug('replaceTrack() [localId:%s, track.id:%s]', localId, track.id);\n        }\n        else {\n            logger.debug('replaceTrack() [localId:%s, no track]', localId);\n        }\n        const rtpSender = this._mapSendLocalIdRtpSender.get(localId);\n        if (!rtpSender)\n            throw new Error('associated RTCRtpSender not found');\n        const oldTrack = rtpSender.track;\n        await rtpSender.replaceTrack(track);\n        // Remove the old track from the local stream.\n        if (oldTrack)\n            this._sendStream.removeTrack(oldTrack);\n        // Add the new track to the local stream.\n        if (track)\n            this._sendStream.addTrack(track);\n    }\n    async setMaxSpatialLayer(localId, spatialLayer) {\n        this._assertSendDirection();\n        logger.debug('setMaxSpatialLayer() [localId:%s, spatialLayer:%s]', localId, spatialLayer);\n        const rtpSender = this._mapSendLocalIdRtpSender.get(localId);\n        if (!rtpSender)\n            throw new Error('associated RTCRtpSender not found');\n        const parameters = rtpSender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            if (idx <= spatialLayer)\n                encoding.active = true;\n            else\n                encoding.active = false;\n        });\n        await rtpSender.setParameters(parameters);\n    }\n    async setRtpEncodingParameters(localId, params) {\n        this._assertSendDirection();\n        logger.debug('setRtpEncodingParameters() [localId:%s, params:%o]', localId, params);\n        const rtpSender = this._mapSendLocalIdRtpSender.get(localId);\n        if (!rtpSender)\n            throw new Error('associated RTCRtpSender not found');\n        const parameters = rtpSender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            parameters.encodings[idx] = { ...encoding, ...params };\n        });\n        await rtpSender.setParameters(parameters);\n    }\n    async getSenderStats(localId) {\n        this._assertSendDirection();\n        const rtpSender = this._mapSendLocalIdRtpSender.get(localId);\n        if (!rtpSender)\n            throw new Error('associated RTCRtpSender not found');\n        return rtpSender.getStats();\n    }\n    async sendDataChannel({ ordered, maxPacketLifeTime, maxRetransmits, label, protocol }) {\n        var _a;\n        this._assertSendDirection();\n        const options = {\n            negotiated: true,\n            id: this._nextSendSctpStreamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmitTime: maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('sendDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // Increase next id.\n        this._nextSendSctpStreamId =\n            ++this._nextSendSctpStreamId % SCTP_NUM_STREAMS.MIS;\n        // If this is the first DataChannel we need to create the SDP answer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            const offer = await this._pc.createOffer();\n            const localSdpObject = sdpTransform.parse(offer.sdp);\n            const offerMediaObject = localSdpObject.media\n                .find((m) => m.type === 'application');\n            if (!this._transportReady) {\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('sendDataChannel() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            this._remoteSdp.sendSctpAssociation({ offerMediaObject });\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        const sctpStreamParameters = {\n            streamId: options.id,\n            ordered: options.ordered,\n            maxPacketLifeTime: options.maxPacketLifeTime,\n            maxRetransmits: options.maxRetransmits\n        };\n        return { dataChannel, sctpStreamParameters };\n    }\n    async receive({ trackId, kind, rtpParameters }) {\n        var _a;\n        this._assertRecvDirection();\n        logger.debug('receive() [trackId:%s, kind:%s]', trackId, kind);\n        const localId = trackId;\n        const mid = kind;\n        this._remoteSdp.receive({\n            mid,\n            kind,\n            offerRtpParameters: rtpParameters,\n            streamId: rtpParameters.rtcp.cname,\n            trackId\n        });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('receive() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        let answer = await this._pc.createAnswer();\n        const localSdpObject = sdpTransform.parse(answer.sdp);\n        const answerMediaObject = localSdpObject.media\n            .find((m) => String(m.mid) === mid);\n        // May need to modify codec parameters in the answer based on codec\n        // parameters in the offer.\n        sdpCommonUtils.applyCodecParameters({\n            offerRtpParameters: rtpParameters,\n            answerMediaObject\n        });\n        answer = { type: 'answer', sdp: sdpTransform.write(localSdpObject) };\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        logger.debug('receive() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        const rtpReceiver = this._pc.getReceivers()\n            .find((r) => r.track && r.track.id === localId);\n        if (!rtpReceiver)\n            throw new Error('new RTCRtpReceiver not');\n        // Insert into the map.\n        this._mapRecvLocalIdInfo.set(localId, { mid, rtpParameters, rtpReceiver });\n        return {\n            localId,\n            track: rtpReceiver.track,\n            rtpReceiver\n        };\n    }\n    async stopReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('stopReceiving() [localId:%s]', localId);\n        const { mid, rtpParameters } = this._mapRecvLocalIdInfo.get(localId) || {};\n        // Remove from the map.\n        this._mapRecvLocalIdInfo.delete(localId);\n        this._remoteSdp.planBStopReceiving({ mid: mid, offerRtpParameters: rtpParameters });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('stopReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n    }\n    async pauseReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    async resumeReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    async getReceiverStats(localId) {\n        this._assertRecvDirection();\n        const { rtpReceiver } = this._mapRecvLocalIdInfo.get(localId) || {};\n        if (!rtpReceiver)\n            throw new Error('associated RTCRtpReceiver not found');\n        return rtpReceiver.getStats();\n    }\n    async receiveDataChannel({ sctpStreamParameters, label, protocol }) {\n        var _a;\n        this._assertRecvDirection();\n        const { streamId, ordered, maxPacketLifeTime, maxRetransmits } = sctpStreamParameters;\n        const options = {\n            negotiated: true,\n            id: streamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmitTime: maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('receiveDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // If this is the first DataChannel we need to create the SDP offer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            this._remoteSdp.receiveSctpAssociation({ oldDataChannelSpec: true });\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            if (!this._transportReady) {\n                const localSdpObject = sdpTransform.parse(answer.sdp);\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        return { dataChannel };\n    }\n    async _setupTransport({ localDtlsRole, localSdpObject }) {\n        if (!localSdpObject)\n            localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        // Get our local DTLS parameters.\n        const dtlsParameters = sdpCommonUtils.extractDtlsParameters({ sdpObject: localSdpObject });\n        // Set our DTLS role.\n        dtlsParameters.role = localDtlsRole;\n        // Update the remote DTLS role in the SDP.\n        this._remoteSdp.updateDtlsRole(localDtlsRole === 'client' ? 'server' : 'client');\n        // Need to tell the remote transport about our parameters.\n        await this.safeEmitAsPromise('@connect', { dtlsParameters });\n        this._transportReady = true;\n    }\n    _assertSendDirection() {\n        if (this._direction !== 'send') {\n            throw new Error('method can just be called for handlers with \"send\" direction');\n        }\n    }\n    _assertRecvDirection() {\n        if (this._direction !== 'recv') {\n            throw new Error('method can just be called for handlers with \"recv\" direction');\n        }\n    }\n}\nexports.Chrome67 = Chrome67;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Chrome55 = void 0;\nconst sdpTransform = __importStar(require(\"sdp-transform\"));\nconst Logger_1 = require(\"../Logger\");\nconst errors_1 = require(\"../errors\");\nconst utils = __importStar(require(\"../utils\"));\nconst ortc = __importStar(require(\"../ortc\"));\nconst sdpCommonUtils = __importStar(require(\"./sdp/commonUtils\"));\nconst sdpPlanBUtils = __importStar(require(\"./sdp/planBUtils\"));\nconst HandlerInterface_1 = require(\"./HandlerInterface\");\nconst RemoteSdp_1 = require(\"./sdp/RemoteSdp\");\nconst logger = new Logger_1.Logger('Chrome55');\nconst SCTP_NUM_STREAMS = { OS: 1024, MIS: 1024 };\nclass Chrome55 extends HandlerInterface_1.HandlerInterface {\n    constructor() {\n        super();\n        // Local stream for sending.\n        this._sendStream = new MediaStream();\n        // Map of sending MediaStreamTracks indexed by localId.\n        this._mapSendLocalIdTrack = new Map();\n        // Next sending localId.\n        this._nextSendLocalId = 0;\n        // Map of MID, RTP parameters and RTCRtpReceiver indexed by local id.\n        // Value is an Object with mid, rtpParameters and rtpReceiver.\n        this._mapRecvLocalIdInfo = new Map();\n        // Whether a DataChannel m=application section has been created.\n        this._hasDataChannelMediaSection = false;\n        // Sending DataChannel id value counter. Incremented for each new DataChannel.\n        this._nextSendSctpStreamId = 0;\n        // Got transport local and remote parameters.\n        this._transportReady = false;\n    }\n    /**\n     * Creates a factory function.\n     */\n    static createFactory() {\n        return () => new Chrome55();\n    }\n    get name() {\n        return 'Chrome55';\n    }\n    close() {\n        logger.debug('close()');\n        // Close RTCPeerConnection.\n        if (this._pc) {\n            try {\n                this._pc.close();\n            }\n            catch (error) { }\n        }\n    }\n    async getNativeRtpCapabilities() {\n        logger.debug('getNativeRtpCapabilities()');\n        const pc = new RTCPeerConnection({\n            iceServers: [],\n            iceTransportPolicy: 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'plan-b'\n        });\n        try {\n            const offer = await pc.createOffer({\n                offerToReceiveAudio: true,\n                offerToReceiveVideo: true\n            });\n            try {\n                pc.close();\n            }\n            catch (error) { }\n            const sdpObject = sdpTransform.parse(offer.sdp);\n            const nativeRtpCapabilities = sdpCommonUtils.extractRtpCapabilities({ sdpObject });\n            return nativeRtpCapabilities;\n        }\n        catch (error) {\n            try {\n                pc.close();\n            }\n            catch (error2) { }\n            throw error;\n        }\n    }\n    async getNativeSctpCapabilities() {\n        logger.debug('getNativeSctpCapabilities()');\n        return {\n            numStreams: SCTP_NUM_STREAMS\n        };\n    }\n    run({ direction, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, extendedRtpCapabilities }) {\n        logger.debug('run()');\n        this._direction = direction;\n        this._remoteSdp = new RemoteSdp_1.RemoteSdp({\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters,\n            planB: true\n        });\n        this._sendingRtpParametersByKind =\n            {\n                audio: ortc.getSendingRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRtpParameters('video', extendedRtpCapabilities)\n            };\n        this._sendingRemoteRtpParametersByKind =\n            {\n                audio: ortc.getSendingRemoteRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRemoteRtpParameters('video', extendedRtpCapabilities)\n            };\n        if (dtlsParameters.role && dtlsParameters.role !== 'auto') {\n            this._forcedLocalDtlsRole = dtlsParameters.role === 'server'\n                ? 'client'\n                : 'server';\n        }\n        this._pc = new RTCPeerConnection({\n            iceServers: iceServers || [],\n            iceTransportPolicy: iceTransportPolicy || 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'plan-b',\n            ...additionalSettings\n        }, proprietaryConstraints);\n        // Handle RTCPeerConnection connection status.\n        this._pc.addEventListener('iceconnectionstatechange', () => {\n            switch (this._pc.iceConnectionState) {\n                case 'checking':\n                    this.emit('@connectionstatechange', 'connecting');\n                    break;\n                case 'connected':\n                case 'completed':\n                    this.emit('@connectionstatechange', 'connected');\n                    break;\n                case 'failed':\n                    this.emit('@connectionstatechange', 'failed');\n                    break;\n                case 'disconnected':\n                    this.emit('@connectionstatechange', 'disconnected');\n                    break;\n                case 'closed':\n                    this.emit('@connectionstatechange', 'closed');\n                    break;\n            }\n        });\n    }\n    async updateIceServers(iceServers) {\n        logger.debug('updateIceServers()');\n        const configuration = this._pc.getConfiguration();\n        configuration.iceServers = iceServers;\n        this._pc.setConfiguration(configuration);\n    }\n    async restartIce(iceParameters) {\n        logger.debug('restartIce()');\n        // Provide the remote SDP handler with new remote ICE parameters.\n        this._remoteSdp.updateIceParameters(iceParameters);\n        if (!this._transportReady)\n            return;\n        if (this._direction === 'send') {\n            const offer = await this._pc.createOffer({ iceRestart: true });\n            logger.debug('restartIce() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n        }\n        else {\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            logger.debug('restartIce() | calling pc.setLocalDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n        }\n    }\n    async getTransportStats() {\n        return this._pc.getStats();\n    }\n    async send({ track, encodings, codecOptions, codec }) {\n        var _a;\n        this._assertSendDirection();\n        logger.debug('send() [kind:%s, track.id:%s]', track.kind, track.id);\n        if (codec) {\n            logger.warn('send() | codec selection is not available in %s handler', this.name);\n        }\n        this._sendStream.addTrack(track);\n        this._pc.addStream(this._sendStream);\n        let offer = await this._pc.createOffer();\n        let localSdpObject = sdpTransform.parse(offer.sdp);\n        let offerMediaObject;\n        const sendingRtpParameters = utils.clone(this._sendingRtpParametersByKind[track.kind], {});\n        sendingRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRtpParameters.codecs);\n        const sendingRemoteRtpParameters = utils.clone(this._sendingRemoteRtpParametersByKind[track.kind], {});\n        sendingRemoteRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRemoteRtpParameters.codecs);\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        if (track.kind === 'video' && encodings && encodings.length > 1) {\n            logger.debug('send() | enabling simulcast');\n            localSdpObject = sdpTransform.parse(offer.sdp);\n            offerMediaObject = localSdpObject.media.find((m) => m.type === 'video');\n            sdpPlanBUtils.addLegacySimulcast({\n                offerMediaObject,\n                track,\n                numStreams: encodings.length\n            });\n            offer = { type: 'offer', sdp: sdpTransform.write(localSdpObject) };\n        }\n        logger.debug('send() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        offerMediaObject = localSdpObject.media\n            .find((m) => m.type === track.kind);\n        // Set RTCP CNAME.\n        sendingRtpParameters.rtcp.cname =\n            sdpCommonUtils.getCname({ offerMediaObject });\n        // Set RTP encodings.\n        sendingRtpParameters.encodings =\n            sdpPlanBUtils.getRtpEncodings({ offerMediaObject, track });\n        // Complete encodings with given values.\n        if (encodings) {\n            for (let idx = 0; idx < sendingRtpParameters.encodings.length; ++idx) {\n                if (encodings[idx])\n                    Object.assign(sendingRtpParameters.encodings[idx], encodings[idx]);\n            }\n        }\n        // If VP8 and there is effective simulcast, add scalabilityMode to each\n        // encoding.\n        if (sendingRtpParameters.encodings.length > 1 &&\n            sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/vp8') {\n            for (const encoding of sendingRtpParameters.encodings) {\n                encoding.scalabilityMode = 'S1T3';\n            }\n        }\n        this._remoteSdp.send({\n            offerMediaObject,\n            offerRtpParameters: sendingRtpParameters,\n            answerRtpParameters: sendingRemoteRtpParameters,\n            codecOptions\n        });\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('send() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        const localId = String(this._nextSendLocalId);\n        this._nextSendLocalId++;\n        // Insert into the map.\n        this._mapSendLocalIdTrack.set(localId, track);\n        return {\n            localId: localId,\n            rtpParameters: sendingRtpParameters\n        };\n    }\n    async stopSending(localId) {\n        this._assertSendDirection();\n        logger.debug('stopSending() [localId:%s]', localId);\n        const track = this._mapSendLocalIdTrack.get(localId);\n        if (!track)\n            throw new Error('track not found');\n        this._mapSendLocalIdTrack.delete(localId);\n        this._sendStream.removeTrack(track);\n        this._pc.addStream(this._sendStream);\n        const offer = await this._pc.createOffer();\n        logger.debug('stopSending() | calling pc.setLocalDescription() [offer:%o]', offer);\n        try {\n            await this._pc.setLocalDescription(offer);\n        }\n        catch (error) {\n            // NOTE: If there are no sending tracks, setLocalDescription() will fail with\n            // \"Failed to create channels\". If so, ignore it.\n            if (this._sendStream.getTracks().length === 0) {\n                logger.warn('stopSending() | ignoring expected error due no sending tracks: %s', error.toString());\n                return;\n            }\n            throw error;\n        }\n        if (this._pc.signalingState === 'stable')\n            return;\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopSending() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n    }\n    async replaceTrack(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId, track) {\n        throw new errors_1.UnsupportedError('not implemented');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async setMaxSpatialLayer(localId, spatialLayer) {\n        throw new errors_1.UnsupportedError(' not implemented');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async setRtpEncodingParameters(localId, params) {\n        throw new errors_1.UnsupportedError('not supported');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async getSenderStats(localId) {\n        throw new errors_1.UnsupportedError('not implemented');\n    }\n    async sendDataChannel({ ordered, maxPacketLifeTime, maxRetransmits, label, protocol }) {\n        var _a;\n        this._assertSendDirection();\n        const options = {\n            negotiated: true,\n            id: this._nextSendSctpStreamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmitTime: maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('sendDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // Increase next id.\n        this._nextSendSctpStreamId =\n            ++this._nextSendSctpStreamId % SCTP_NUM_STREAMS.MIS;\n        // If this is the first DataChannel we need to create the SDP answer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            const offer = await this._pc.createOffer();\n            const localSdpObject = sdpTransform.parse(offer.sdp);\n            const offerMediaObject = localSdpObject.media\n                .find((m) => m.type === 'application');\n            if (!this._transportReady) {\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('sendDataChannel() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            this._remoteSdp.sendSctpAssociation({ offerMediaObject });\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        const sctpStreamParameters = {\n            streamId: options.id,\n            ordered: options.ordered,\n            maxPacketLifeTime: options.maxPacketLifeTime,\n            maxRetransmits: options.maxRetransmits\n        };\n        return { dataChannel, sctpStreamParameters };\n    }\n    async receive({ trackId, kind, rtpParameters }) {\n        var _a;\n        this._assertRecvDirection();\n        logger.debug('receive() [trackId:%s, kind:%s]', trackId, kind);\n        const localId = trackId;\n        const mid = kind;\n        const streamId = rtpParameters.rtcp.cname;\n        this._remoteSdp.receive({\n            mid,\n            kind,\n            offerRtpParameters: rtpParameters,\n            streamId,\n            trackId\n        });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('receive() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        let answer = await this._pc.createAnswer();\n        const localSdpObject = sdpTransform.parse(answer.sdp);\n        const answerMediaObject = localSdpObject.media\n            .find((m) => String(m.mid) === mid);\n        // May need to modify codec parameters in the answer based on codec\n        // parameters in the offer.\n        sdpCommonUtils.applyCodecParameters({\n            offerRtpParameters: rtpParameters,\n            answerMediaObject\n        });\n        answer = { type: 'answer', sdp: sdpTransform.write(localSdpObject) };\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        logger.debug('receive() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        const stream = this._pc.getRemoteStreams()\n            .find((s) => s.id === streamId);\n        const track = stream.getTrackById(localId);\n        if (!track)\n            throw new Error('remote track not found');\n        // Insert into the map.\n        this._mapRecvLocalIdInfo.set(localId, { mid, rtpParameters });\n        return { localId, track };\n    }\n    async stopReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('stopReceiving() [localId:%s]', localId);\n        const { mid, rtpParameters } = this._mapRecvLocalIdInfo.get(localId) || {};\n        // Remove from the map.\n        this._mapRecvLocalIdInfo.delete(localId);\n        this._remoteSdp.planBStopReceiving({ mid: mid, offerRtpParameters: rtpParameters });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('stopReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n    }\n    async pauseReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    async resumeReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async getReceiverStats(localId) {\n        throw new errors_1.UnsupportedError('not implemented');\n    }\n    async receiveDataChannel({ sctpStreamParameters, label, protocol }) {\n        var _a;\n        this._assertRecvDirection();\n        const { streamId, ordered, maxPacketLifeTime, maxRetransmits } = sctpStreamParameters;\n        const options = {\n            negotiated: true,\n            id: streamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmitTime: maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('receiveDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // If this is the first DataChannel we need to create the SDP offer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            this._remoteSdp.receiveSctpAssociation({ oldDataChannelSpec: true });\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            if (!this._transportReady) {\n                const localSdpObject = sdpTransform.parse(answer.sdp);\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        return { dataChannel };\n    }\n    async _setupTransport({ localDtlsRole, localSdpObject }) {\n        if (!localSdpObject)\n            localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        // Get our local DTLS parameters.\n        const dtlsParameters = sdpCommonUtils.extractDtlsParameters({ sdpObject: localSdpObject });\n        // Set our DTLS role.\n        dtlsParameters.role = localDtlsRole;\n        // Update the remote DTLS role in the SDP.\n        this._remoteSdp.updateDtlsRole(localDtlsRole === 'client' ? 'server' : 'client');\n        // Need to tell the remote transport about our parameters.\n        await this.safeEmitAsPromise('@connect', { dtlsParameters });\n        this._transportReady = true;\n    }\n    _assertSendDirection() {\n        if (this._direction !== 'send') {\n            throw new Error('method can just be called for handlers with \"send\" direction');\n        }\n    }\n    _assertRecvDirection() {\n        if (this._direction !== 'recv') {\n            throw new Error('method can just be called for handlers with \"recv\" direction');\n        }\n    }\n}\nexports.Chrome55 = Chrome55;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Firefox60 = void 0;\nconst sdpTransform = __importStar(require(\"sdp-transform\"));\nconst Logger_1 = require(\"../Logger\");\nconst errors_1 = require(\"../errors\");\nconst utils = __importStar(require(\"../utils\"));\nconst ortc = __importStar(require(\"../ortc\"));\nconst sdpCommonUtils = __importStar(require(\"./sdp/commonUtils\"));\nconst sdpUnifiedPlanUtils = __importStar(require(\"./sdp/unifiedPlanUtils\"));\nconst HandlerInterface_1 = require(\"./HandlerInterface\");\nconst RemoteSdp_1 = require(\"./sdp/RemoteSdp\");\nconst logger = new Logger_1.Logger('Firefox60');\nconst SCTP_NUM_STREAMS = { OS: 16, MIS: 2048 };\nclass Firefox60 extends HandlerInterface_1.HandlerInterface {\n    constructor() {\n        super();\n        // Map of RTCTransceivers indexed by MID.\n        this._mapMidTransceiver = new Map();\n        // Local stream for sending.\n        this._sendStream = new MediaStream();\n        // Whether a DataChannel m=application section has been created.\n        this._hasDataChannelMediaSection = false;\n        // Sending DataChannel id value counter. Incremented for each new DataChannel.\n        this._nextSendSctpStreamId = 0;\n        // Got transport local and remote parameters.\n        this._transportReady = false;\n    }\n    /**\n     * Creates a factory function.\n     */\n    static createFactory() {\n        return () => new Firefox60();\n    }\n    get name() {\n        return 'Firefox60';\n    }\n    close() {\n        logger.debug('close()');\n        // Close RTCPeerConnection.\n        if (this._pc) {\n            try {\n                this._pc.close();\n            }\n            catch (error) { }\n        }\n    }\n    async getNativeRtpCapabilities() {\n        logger.debug('getNativeRtpCapabilities()');\n        const pc = new RTCPeerConnection({\n            iceServers: [],\n            iceTransportPolicy: 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require'\n        });\n        // NOTE: We need to add a real video track to get the RID extension mapping.\n        const canvas = document.createElement('canvas');\n        // NOTE: Otherwise Firefox fails in next line.\n        canvas.getContext('2d');\n        const fakeStream = canvas.captureStream();\n        const fakeVideoTrack = fakeStream.getVideoTracks()[0];\n        try {\n            pc.addTransceiver('audio', { direction: 'sendrecv' });\n            const videoTransceiver = pc.addTransceiver(fakeVideoTrack, { direction: 'sendrecv' });\n            const parameters = videoTransceiver.sender.getParameters();\n            const encodings = [\n                { rid: 'r0', maxBitrate: 100000 },\n                { rid: 'r1', maxBitrate: 500000 }\n            ];\n            parameters.encodings = encodings;\n            await videoTransceiver.sender.setParameters(parameters);\n            const offer = await pc.createOffer();\n            try {\n                canvas.remove();\n            }\n            catch (error) { }\n            try {\n                fakeVideoTrack.stop();\n            }\n            catch (error) { }\n            try {\n                pc.close();\n            }\n            catch (error) { }\n            const sdpObject = sdpTransform.parse(offer.sdp);\n            const nativeRtpCapabilities = sdpCommonUtils.extractRtpCapabilities({ sdpObject });\n            return nativeRtpCapabilities;\n        }\n        catch (error) {\n            try {\n                canvas.remove();\n            }\n            catch (error2) { }\n            try {\n                fakeVideoTrack.stop();\n            }\n            catch (error2) { }\n            try {\n                pc.close();\n            }\n            catch (error2) { }\n            throw error;\n        }\n    }\n    async getNativeSctpCapabilities() {\n        logger.debug('getNativeSctpCapabilities()');\n        return {\n            numStreams: SCTP_NUM_STREAMS\n        };\n    }\n    run({ direction, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, extendedRtpCapabilities }) {\n        logger.debug('run()');\n        this._direction = direction;\n        this._remoteSdp = new RemoteSdp_1.RemoteSdp({\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters\n        });\n        this._sendingRtpParametersByKind =\n            {\n                audio: ortc.getSendingRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRtpParameters('video', extendedRtpCapabilities)\n            };\n        this._sendingRemoteRtpParametersByKind =\n            {\n                audio: ortc.getSendingRemoteRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRemoteRtpParameters('video', extendedRtpCapabilities)\n            };\n        this._pc = new RTCPeerConnection({\n            iceServers: iceServers || [],\n            iceTransportPolicy: iceTransportPolicy || 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            ...additionalSettings\n        }, proprietaryConstraints);\n        // Handle RTCPeerConnection connection status.\n        this._pc.addEventListener('iceconnectionstatechange', () => {\n            switch (this._pc.iceConnectionState) {\n                case 'checking':\n                    this.emit('@connectionstatechange', 'connecting');\n                    break;\n                case 'connected':\n                case 'completed':\n                    this.emit('@connectionstatechange', 'connected');\n                    break;\n                case 'failed':\n                    this.emit('@connectionstatechange', 'failed');\n                    break;\n                case 'disconnected':\n                    this.emit('@connectionstatechange', 'disconnected');\n                    break;\n                case 'closed':\n                    this.emit('@connectionstatechange', 'closed');\n                    break;\n            }\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async updateIceServers(iceServers) {\n        // NOTE: Firefox does not implement pc.setConfiguration().\n        throw new errors_1.UnsupportedError('not supported');\n    }\n    async restartIce(iceParameters) {\n        logger.debug('restartIce()');\n        // Provide the remote SDP handler with new remote ICE parameters.\n        this._remoteSdp.updateIceParameters(iceParameters);\n        if (!this._transportReady)\n            return;\n        if (this._direction === 'send') {\n            const offer = await this._pc.createOffer({ iceRestart: true });\n            logger.debug('restartIce() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n        }\n        else {\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            logger.debug('restartIce() | calling pc.setLocalDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n        }\n    }\n    async getTransportStats() {\n        return this._pc.getStats();\n    }\n    async send({ track, encodings, codecOptions, codec }) {\n        this._assertSendDirection();\n        logger.debug('send() [kind:%s, track.id:%s]', track.kind, track.id);\n        if (encodings) {\n            encodings = utils.clone(encodings, []);\n            if (encodings.length > 1) {\n                encodings.forEach((encoding, idx) => {\n                    encoding.rid = `r${idx}`;\n                });\n                // Clone the encodings and reverse them because Firefox likes them\n                // from high to low.\n                encodings.reverse();\n            }\n        }\n        const sendingRtpParameters = utils.clone(this._sendingRtpParametersByKind[track.kind], {});\n        // This may throw.\n        sendingRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRtpParameters.codecs, codec);\n        const sendingRemoteRtpParameters = utils.clone(this._sendingRemoteRtpParametersByKind[track.kind], {});\n        // This may throw.\n        sendingRemoteRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRemoteRtpParameters.codecs, codec);\n        // NOTE: Firefox fails sometimes to properly anticipate the closed media\n        // section that it should use, so don't reuse closed media sections.\n        //   https://github.com/versatica/mediasoup-client/issues/104\n        //\n        // const mediaSectionIdx = this._remoteSdp!.getNextMediaSectionIdx();\n        const transceiver = this._pc.addTransceiver(track, { direction: 'sendonly', streams: [this._sendStream] });\n        // NOTE: This is not spec compliants. Encodings should be given in addTransceiver\n        // second argument, but Firefox does not support it.\n        if (encodings) {\n            const parameters = transceiver.sender.getParameters();\n            parameters.encodings = encodings;\n            await transceiver.sender.setParameters(parameters);\n        }\n        const offer = await this._pc.createOffer();\n        let localSdpObject = sdpTransform.parse(offer.sdp);\n        // In Firefox use DTLS role client even if we are the \"offerer\" since\n        // Firefox does not respect ICE-Lite.\n        if (!this._transportReady)\n            await this._setupTransport({ localDtlsRole: 'client', localSdpObject });\n        logger.debug('send() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        // We can now get the transceiver.mid.\n        const localId = transceiver.mid;\n        // Set MID.\n        sendingRtpParameters.mid = localId;\n        localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        const offerMediaObject = localSdpObject.media[localSdpObject.media.length - 1];\n        // Set RTCP CNAME.\n        sendingRtpParameters.rtcp.cname =\n            sdpCommonUtils.getCname({ offerMediaObject });\n        // Set RTP encodings by parsing the SDP offer if no encodings are given.\n        if (!encodings) {\n            sendingRtpParameters.encodings =\n                sdpUnifiedPlanUtils.getRtpEncodings({ offerMediaObject });\n        }\n        // Set RTP encodings by parsing the SDP offer and complete them with given\n        // one if just a single encoding has been given.\n        else if (encodings.length === 1) {\n            const newEncodings = sdpUnifiedPlanUtils.getRtpEncodings({ offerMediaObject });\n            Object.assign(newEncodings[0], encodings[0]);\n            sendingRtpParameters.encodings = newEncodings;\n        }\n        // Otherwise if more than 1 encoding are given use them verbatim (but\n        // reverse them back since we reversed them above to satisfy Firefox).\n        else {\n            sendingRtpParameters.encodings = encodings.reverse();\n        }\n        // If VP8 or H264 and there is effective simulcast, add scalabilityMode to\n        // each encoding.\n        if (sendingRtpParameters.encodings.length > 1 &&\n            (sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/vp8' ||\n                sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/h264')) {\n            for (const encoding of sendingRtpParameters.encodings) {\n                encoding.scalabilityMode = 'S1T3';\n            }\n        }\n        this._remoteSdp.send({\n            offerMediaObject,\n            offerRtpParameters: sendingRtpParameters,\n            answerRtpParameters: sendingRemoteRtpParameters,\n            codecOptions,\n            extmapAllowMixed: true\n        });\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('send() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        // Store in the map.\n        this._mapMidTransceiver.set(localId, transceiver);\n        return {\n            localId,\n            rtpParameters: sendingRtpParameters,\n            rtpSender: transceiver.sender\n        };\n    }\n    async stopSending(localId) {\n        logger.debug('stopSending() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated transceiver not found');\n        transceiver.sender.replaceTrack(null);\n        this._pc.removeTrack(transceiver.sender);\n        // NOTE: Cannot use closeMediaSection() due to the the note above in send()\n        // method.\n        // this._remoteSdp!.closeMediaSection(transceiver.mid);\n        this._remoteSdp.disableMediaSection(transceiver.mid);\n        const offer = await this._pc.createOffer();\n        logger.debug('stopSending() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopSending() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        this._mapMidTransceiver.delete(localId);\n    }\n    async replaceTrack(localId, track) {\n        this._assertSendDirection();\n        if (track) {\n            logger.debug('replaceTrack() [localId:%s, track.id:%s]', localId, track.id);\n        }\n        else {\n            logger.debug('replaceTrack() [localId:%s, no track]', localId);\n        }\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        await transceiver.sender.replaceTrack(track);\n    }\n    async setMaxSpatialLayer(localId, spatialLayer) {\n        this._assertSendDirection();\n        logger.debug('setMaxSpatialLayer() [localId:%s, spatialLayer:%s]', localId, spatialLayer);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated transceiver not found');\n        const parameters = transceiver.sender.getParameters();\n        // NOTE: We require encodings given from low to high, however Firefox\n        // requires them in reverse order, so do magic here.\n        spatialLayer = parameters.encodings.length - 1 - spatialLayer;\n        parameters.encodings.forEach((encoding, idx) => {\n            if (idx >= spatialLayer)\n                encoding.active = true;\n            else\n                encoding.active = false;\n        });\n        await transceiver.sender.setParameters(parameters);\n    }\n    async setRtpEncodingParameters(localId, params) {\n        this._assertSendDirection();\n        logger.debug('setRtpEncodingParameters() [localId:%s, params:%o]', localId, params);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        const parameters = transceiver.sender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            parameters.encodings[idx] = { ...encoding, ...params };\n        });\n        await transceiver.sender.setParameters(parameters);\n    }\n    async getSenderStats(localId) {\n        this._assertSendDirection();\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        return transceiver.sender.getStats();\n    }\n    async sendDataChannel({ ordered, maxPacketLifeTime, maxRetransmits, label, protocol }) {\n        this._assertSendDirection();\n        const options = {\n            negotiated: true,\n            id: this._nextSendSctpStreamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('sendDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // Increase next id.\n        this._nextSendSctpStreamId =\n            ++this._nextSendSctpStreamId % SCTP_NUM_STREAMS.MIS;\n        // If this is the first DataChannel we need to create the SDP answer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            const offer = await this._pc.createOffer();\n            const localSdpObject = sdpTransform.parse(offer.sdp);\n            const offerMediaObject = localSdpObject.media\n                .find((m) => m.type === 'application');\n            if (!this._transportReady)\n                await this._setupTransport({ localDtlsRole: 'client', localSdpObject });\n            logger.debug('sendDataChannel() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            this._remoteSdp.sendSctpAssociation({ offerMediaObject });\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        const sctpStreamParameters = {\n            streamId: options.id,\n            ordered: options.ordered,\n            maxPacketLifeTime: options.maxPacketLifeTime,\n            maxRetransmits: options.maxRetransmits\n        };\n        return { dataChannel, sctpStreamParameters };\n    }\n    async receive({ trackId, kind, rtpParameters }) {\n        this._assertRecvDirection();\n        logger.debug('receive() [trackId:%s, kind:%s]', trackId, kind);\n        const localId = rtpParameters.mid || String(this._mapMidTransceiver.size);\n        this._remoteSdp.receive({\n            mid: localId,\n            kind,\n            offerRtpParameters: rtpParameters,\n            streamId: rtpParameters.rtcp.cname,\n            trackId\n        });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('receive() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        let answer = await this._pc.createAnswer();\n        const localSdpObject = sdpTransform.parse(answer.sdp);\n        const answerMediaObject = localSdpObject.media\n            .find((m) => String(m.mid) === localId);\n        // May need to modify codec parameters in the answer based on codec\n        // parameters in the offer.\n        sdpCommonUtils.applyCodecParameters({\n            offerRtpParameters: rtpParameters,\n            answerMediaObject\n        });\n        answer = { type: 'answer', sdp: sdpTransform.write(localSdpObject) };\n        if (!this._transportReady)\n            await this._setupTransport({ localDtlsRole: 'client', localSdpObject });\n        logger.debug('receive() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        const transceiver = this._pc.getTransceivers()\n            .find((t) => t.mid === localId);\n        if (!transceiver)\n            throw new Error('new RTCRtpTransceiver not found');\n        // Store in the map.\n        this._mapMidTransceiver.set(localId, transceiver);\n        return {\n            localId,\n            track: transceiver.receiver.track,\n            rtpReceiver: transceiver.receiver\n        };\n    }\n    async stopReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('stopReceiving() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        this._remoteSdp.closeMediaSection(transceiver.mid);\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('stopReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        this._mapMidTransceiver.delete(localId);\n    }\n    async pauseReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('pauseReceiving() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        transceiver.direction = 'inactive';\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('pauseReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n    }\n    async resumeReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('resumeReceiving() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        transceiver.direction = 'recvonly';\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('resumeReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n    }\n    async getReceiverStats(localId) {\n        this._assertRecvDirection();\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        return transceiver.receiver.getStats();\n    }\n    async receiveDataChannel({ sctpStreamParameters, label, protocol }) {\n        this._assertRecvDirection();\n        const { streamId, ordered, maxPacketLifeTime, maxRetransmits } = sctpStreamParameters;\n        const options = {\n            negotiated: true,\n            id: streamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('receiveDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // If this is the first DataChannel we need to create the SDP offer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            this._remoteSdp.receiveSctpAssociation();\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            if (!this._transportReady) {\n                const localSdpObject = sdpTransform.parse(answer.sdp);\n                await this._setupTransport({ localDtlsRole: 'client', localSdpObject });\n            }\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        return { dataChannel };\n    }\n    async _setupTransport({ localDtlsRole, localSdpObject }) {\n        if (!localSdpObject)\n            localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        // Get our local DTLS parameters.\n        const dtlsParameters = sdpCommonUtils.extractDtlsParameters({ sdpObject: localSdpObject });\n        // Set our DTLS role.\n        dtlsParameters.role = localDtlsRole;\n        // Update the remote DTLS role in the SDP.\n        this._remoteSdp.updateDtlsRole(localDtlsRole === 'client' ? 'server' : 'client');\n        // Need to tell the remote transport about our parameters.\n        await this.safeEmitAsPromise('@connect', { dtlsParameters });\n        this._transportReady = true;\n    }\n    _assertSendDirection() {\n        if (this._direction !== 'send') {\n            throw new Error('method can just be called for handlers with \"send\" direction');\n        }\n    }\n    _assertRecvDirection() {\n        if (this._direction !== 'recv') {\n            throw new Error('method can just be called for handlers with \"recv\" direction');\n        }\n    }\n}\nexports.Firefox60 = Firefox60;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Safari12 = void 0;\nconst sdpTransform = __importStar(require(\"sdp-transform\"));\nconst Logger_1 = require(\"../Logger\");\nconst utils = __importStar(require(\"../utils\"));\nconst ortc = __importStar(require(\"../ortc\"));\nconst sdpCommonUtils = __importStar(require(\"./sdp/commonUtils\"));\nconst sdpUnifiedPlanUtils = __importStar(require(\"./sdp/unifiedPlanUtils\"));\nconst HandlerInterface_1 = require(\"./HandlerInterface\");\nconst RemoteSdp_1 = require(\"./sdp/RemoteSdp\");\nconst logger = new Logger_1.Logger('Safari12');\nconst SCTP_NUM_STREAMS = { OS: 1024, MIS: 1024 };\nclass Safari12 extends HandlerInterface_1.HandlerInterface {\n    constructor() {\n        super();\n        // Map of RTCTransceivers indexed by MID.\n        this._mapMidTransceiver = new Map();\n        // Local stream for sending.\n        this._sendStream = new MediaStream();\n        // Whether a DataChannel m=application section has been created.\n        this._hasDataChannelMediaSection = false;\n        // Sending DataChannel id value counter. Incremented for each new DataChannel.\n        this._nextSendSctpStreamId = 0;\n        // Got transport local and remote parameters.\n        this._transportReady = false;\n    }\n    /**\n     * Creates a factory function.\n     */\n    static createFactory() {\n        return () => new Safari12();\n    }\n    get name() {\n        return 'Safari12';\n    }\n    close() {\n        logger.debug('close()');\n        // Close RTCPeerConnection.\n        if (this._pc) {\n            try {\n                this._pc.close();\n            }\n            catch (error) { }\n        }\n    }\n    async getNativeRtpCapabilities() {\n        logger.debug('getNativeRtpCapabilities()');\n        const pc = new RTCPeerConnection({\n            iceServers: [],\n            iceTransportPolicy: 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require'\n        });\n        try {\n            pc.addTransceiver('audio');\n            pc.addTransceiver('video');\n            const offer = await pc.createOffer();\n            try {\n                pc.close();\n            }\n            catch (error) { }\n            const sdpObject = sdpTransform.parse(offer.sdp);\n            const nativeRtpCapabilities = sdpCommonUtils.extractRtpCapabilities({ sdpObject });\n            return nativeRtpCapabilities;\n        }\n        catch (error) {\n            try {\n                pc.close();\n            }\n            catch (error2) { }\n            throw error;\n        }\n    }\n    async getNativeSctpCapabilities() {\n        logger.debug('getNativeSctpCapabilities()');\n        return {\n            numStreams: SCTP_NUM_STREAMS\n        };\n    }\n    run({ direction, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, extendedRtpCapabilities }) {\n        logger.debug('run()');\n        this._direction = direction;\n        this._remoteSdp = new RemoteSdp_1.RemoteSdp({\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters\n        });\n        this._sendingRtpParametersByKind =\n            {\n                audio: ortc.getSendingRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRtpParameters('video', extendedRtpCapabilities)\n            };\n        this._sendingRemoteRtpParametersByKind =\n            {\n                audio: ortc.getSendingRemoteRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRemoteRtpParameters('video', extendedRtpCapabilities)\n            };\n        if (dtlsParameters.role && dtlsParameters.role !== 'auto') {\n            this._forcedLocalDtlsRole = dtlsParameters.role === 'server'\n                ? 'client'\n                : 'server';\n        }\n        this._pc = new RTCPeerConnection({\n            iceServers: iceServers || [],\n            iceTransportPolicy: iceTransportPolicy || 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            ...additionalSettings\n        }, proprietaryConstraints);\n        // Handle RTCPeerConnection connection status.\n        this._pc.addEventListener('iceconnectionstatechange', () => {\n            switch (this._pc.iceConnectionState) {\n                case 'checking':\n                    this.emit('@connectionstatechange', 'connecting');\n                    break;\n                case 'connected':\n                case 'completed':\n                    this.emit('@connectionstatechange', 'connected');\n                    break;\n                case 'failed':\n                    this.emit('@connectionstatechange', 'failed');\n                    break;\n                case 'disconnected':\n                    this.emit('@connectionstatechange', 'disconnected');\n                    break;\n                case 'closed':\n                    this.emit('@connectionstatechange', 'closed');\n                    break;\n            }\n        });\n    }\n    async updateIceServers(iceServers) {\n        logger.debug('updateIceServers()');\n        const configuration = this._pc.getConfiguration();\n        configuration.iceServers = iceServers;\n        this._pc.setConfiguration(configuration);\n    }\n    async restartIce(iceParameters) {\n        logger.debug('restartIce()');\n        // Provide the remote SDP handler with new remote ICE parameters.\n        this._remoteSdp.updateIceParameters(iceParameters);\n        if (!this._transportReady)\n            return;\n        if (this._direction === 'send') {\n            const offer = await this._pc.createOffer({ iceRestart: true });\n            logger.debug('restartIce() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n        }\n        else {\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            logger.debug('restartIce() | calling pc.setLocalDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n        }\n    }\n    async getTransportStats() {\n        return this._pc.getStats();\n    }\n    async send({ track, encodings, codecOptions, codec }) {\n        var _a;\n        this._assertSendDirection();\n        logger.debug('send() [kind:%s, track.id:%s]', track.kind, track.id);\n        const sendingRtpParameters = utils.clone(this._sendingRtpParametersByKind[track.kind], {});\n        // This may throw.\n        sendingRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRtpParameters.codecs, codec);\n        const sendingRemoteRtpParameters = utils.clone(this._sendingRemoteRtpParametersByKind[track.kind], {});\n        // This may throw.\n        sendingRemoteRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRemoteRtpParameters.codecs, codec);\n        const mediaSectionIdx = this._remoteSdp.getNextMediaSectionIdx();\n        const transceiver = this._pc.addTransceiver(track, { direction: 'sendonly', streams: [this._sendStream] });\n        let offer = await this._pc.createOffer();\n        let localSdpObject = sdpTransform.parse(offer.sdp);\n        let offerMediaObject;\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        if (encodings && encodings.length > 1) {\n            logger.debug('send() | enabling legacy simulcast');\n            localSdpObject = sdpTransform.parse(offer.sdp);\n            offerMediaObject = localSdpObject.media[mediaSectionIdx.idx];\n            sdpUnifiedPlanUtils.addLegacySimulcast({\n                offerMediaObject,\n                numStreams: encodings.length\n            });\n            offer = { type: 'offer', sdp: sdpTransform.write(localSdpObject) };\n        }\n        logger.debug('send() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        // We can now get the transceiver.mid.\n        const localId = transceiver.mid;\n        // Set MID.\n        sendingRtpParameters.mid = localId;\n        localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        offerMediaObject = localSdpObject.media[mediaSectionIdx.idx];\n        // Set RTCP CNAME.\n        sendingRtpParameters.rtcp.cname =\n            sdpCommonUtils.getCname({ offerMediaObject });\n        // Set RTP encodings.\n        sendingRtpParameters.encodings =\n            sdpUnifiedPlanUtils.getRtpEncodings({ offerMediaObject });\n        // Complete encodings with given values.\n        if (encodings) {\n            for (let idx = 0; idx < sendingRtpParameters.encodings.length; ++idx) {\n                if (encodings[idx])\n                    Object.assign(sendingRtpParameters.encodings[idx], encodings[idx]);\n            }\n        }\n        // If VP8 or H264 and there is effective simulcast, add scalabilityMode to\n        // each encoding.\n        if (sendingRtpParameters.encodings.length > 1 &&\n            (sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/vp8' ||\n                sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/h264')) {\n            for (const encoding of sendingRtpParameters.encodings) {\n                encoding.scalabilityMode = 'S1T3';\n            }\n        }\n        this._remoteSdp.send({\n            offerMediaObject,\n            reuseMid: mediaSectionIdx.reuseMid,\n            offerRtpParameters: sendingRtpParameters,\n            answerRtpParameters: sendingRemoteRtpParameters,\n            codecOptions\n        });\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('send() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        // Store in the map.\n        this._mapMidTransceiver.set(localId, transceiver);\n        return {\n            localId,\n            rtpParameters: sendingRtpParameters,\n            rtpSender: transceiver.sender\n        };\n    }\n    async stopSending(localId) {\n        this._assertSendDirection();\n        logger.debug('stopSending() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        transceiver.sender.replaceTrack(null);\n        this._pc.removeTrack(transceiver.sender);\n        this._remoteSdp.closeMediaSection(transceiver.mid);\n        const offer = await this._pc.createOffer();\n        logger.debug('stopSending() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopSending() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        this._mapMidTransceiver.delete(localId);\n    }\n    async replaceTrack(localId, track) {\n        this._assertSendDirection();\n        if (track) {\n            logger.debug('replaceTrack() [localId:%s, track.id:%s]', localId, track.id);\n        }\n        else {\n            logger.debug('replaceTrack() [localId:%s, no track]', localId);\n        }\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        await transceiver.sender.replaceTrack(track);\n    }\n    async setMaxSpatialLayer(localId, spatialLayer) {\n        this._assertSendDirection();\n        logger.debug('setMaxSpatialLayer() [localId:%s, spatialLayer:%s]', localId, spatialLayer);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        const parameters = transceiver.sender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            if (idx <= spatialLayer)\n                encoding.active = true;\n            else\n                encoding.active = false;\n        });\n        await transceiver.sender.setParameters(parameters);\n    }\n    async setRtpEncodingParameters(localId, params) {\n        this._assertSendDirection();\n        logger.debug('setRtpEncodingParameters() [localId:%s, params:%o]', localId, params);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        const parameters = transceiver.sender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            parameters.encodings[idx] = { ...encoding, ...params };\n        });\n        await transceiver.sender.setParameters(parameters);\n    }\n    async getSenderStats(localId) {\n        this._assertSendDirection();\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        return transceiver.sender.getStats();\n    }\n    async sendDataChannel({ ordered, maxPacketLifeTime, maxRetransmits, label, protocol }) {\n        var _a;\n        this._assertSendDirection();\n        const options = {\n            negotiated: true,\n            id: this._nextSendSctpStreamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('sendDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // Increase next id.\n        this._nextSendSctpStreamId =\n            ++this._nextSendSctpStreamId % SCTP_NUM_STREAMS.MIS;\n        // If this is the first DataChannel we need to create the SDP answer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            const offer = await this._pc.createOffer();\n            const localSdpObject = sdpTransform.parse(offer.sdp);\n            const offerMediaObject = localSdpObject.media\n                .find((m) => m.type === 'application');\n            if (!this._transportReady) {\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('sendDataChannel() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            this._remoteSdp.sendSctpAssociation({ offerMediaObject });\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        const sctpStreamParameters = {\n            streamId: options.id,\n            ordered: options.ordered,\n            maxPacketLifeTime: options.maxPacketLifeTime,\n            maxRetransmits: options.maxRetransmits\n        };\n        return { dataChannel, sctpStreamParameters };\n    }\n    async receive({ trackId, kind, rtpParameters }) {\n        var _a;\n        this._assertRecvDirection();\n        logger.debug('receive() [trackId:%s, kind:%s]', trackId, kind);\n        const localId = rtpParameters.mid || String(this._mapMidTransceiver.size);\n        this._remoteSdp.receive({\n            mid: localId,\n            kind,\n            offerRtpParameters: rtpParameters,\n            streamId: rtpParameters.rtcp.cname,\n            trackId\n        });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('receive() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        let answer = await this._pc.createAnswer();\n        const localSdpObject = sdpTransform.parse(answer.sdp);\n        const answerMediaObject = localSdpObject.media\n            .find((m) => String(m.mid) === localId);\n        // May need to modify codec parameters in the answer based on codec\n        // parameters in the offer.\n        sdpCommonUtils.applyCodecParameters({\n            offerRtpParameters: rtpParameters,\n            answerMediaObject\n        });\n        answer = { type: 'answer', sdp: sdpTransform.write(localSdpObject) };\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        logger.debug('receive() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        const transceiver = this._pc.getTransceivers()\n            .find((t) => t.mid === localId);\n        if (!transceiver)\n            throw new Error('new RTCRtpTransceiver not found');\n        // Store in the map.\n        this._mapMidTransceiver.set(localId, transceiver);\n        return {\n            localId,\n            track: transceiver.receiver.track,\n            rtpReceiver: transceiver.receiver\n        };\n    }\n    async stopReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('stopReceiving() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        this._remoteSdp.closeMediaSection(transceiver.mid);\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('stopReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        this._mapMidTransceiver.delete(localId);\n    }\n    async pauseReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('pauseReceiving() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        transceiver.direction = 'inactive';\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('pauseReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n    }\n    async resumeReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('resumeReceiving() [localId:%s]', localId);\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        transceiver.direction = 'recvonly';\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('resumeReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n    }\n    async getReceiverStats(localId) {\n        this._assertRecvDirection();\n        const transceiver = this._mapMidTransceiver.get(localId);\n        if (!transceiver)\n            throw new Error('associated RTCRtpTransceiver not found');\n        return transceiver.receiver.getStats();\n    }\n    async receiveDataChannel({ sctpStreamParameters, label, protocol }) {\n        var _a;\n        this._assertRecvDirection();\n        const { streamId, ordered, maxPacketLifeTime, maxRetransmits } = sctpStreamParameters;\n        const options = {\n            negotiated: true,\n            id: streamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('receiveDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // If this is the first DataChannel we need to create the SDP offer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            this._remoteSdp.receiveSctpAssociation();\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            if (!this._transportReady) {\n                const localSdpObject = sdpTransform.parse(answer.sdp);\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        return { dataChannel };\n    }\n    async _setupTransport({ localDtlsRole, localSdpObject }) {\n        if (!localSdpObject)\n            localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        // Get our local DTLS parameters.\n        const dtlsParameters = sdpCommonUtils.extractDtlsParameters({ sdpObject: localSdpObject });\n        // Set our DTLS role.\n        dtlsParameters.role = localDtlsRole;\n        // Update the remote DTLS role in the SDP.\n        this._remoteSdp.updateDtlsRole(localDtlsRole === 'client' ? 'server' : 'client');\n        // Need to tell the remote transport about our parameters.\n        await this.safeEmitAsPromise('@connect', { dtlsParameters });\n        this._transportReady = true;\n    }\n    _assertSendDirection() {\n        if (this._direction !== 'send') {\n            throw new Error('method can just be called for handlers with \"send\" direction');\n        }\n    }\n    _assertRecvDirection() {\n        if (this._direction !== 'recv') {\n            throw new Error('method can just be called for handlers with \"recv\" direction');\n        }\n    }\n}\nexports.Safari12 = Safari12;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Safari11 = void 0;\nconst sdpTransform = __importStar(require(\"sdp-transform\"));\nconst Logger_1 = require(\"../Logger\");\nconst utils = __importStar(require(\"../utils\"));\nconst ortc = __importStar(require(\"../ortc\"));\nconst sdpCommonUtils = __importStar(require(\"./sdp/commonUtils\"));\nconst sdpPlanBUtils = __importStar(require(\"./sdp/planBUtils\"));\nconst HandlerInterface_1 = require(\"./HandlerInterface\");\nconst RemoteSdp_1 = require(\"./sdp/RemoteSdp\");\nconst logger = new Logger_1.Logger('Safari11');\nconst SCTP_NUM_STREAMS = { OS: 1024, MIS: 1024 };\nclass Safari11 extends HandlerInterface_1.HandlerInterface {\n    constructor() {\n        super();\n        // Local stream for sending.\n        this._sendStream = new MediaStream();\n        // Map of RTCRtpSender indexed by localId.\n        this._mapSendLocalIdRtpSender = new Map();\n        // Next sending localId.\n        this._nextSendLocalId = 0;\n        // Map of MID, RTP parameters and RTCRtpReceiver indexed by local id.\n        // Value is an Object with mid, rtpParameters and rtpReceiver.\n        this._mapRecvLocalIdInfo = new Map();\n        // Whether a DataChannel m=application section has been created.\n        this._hasDataChannelMediaSection = false;\n        // Sending DataChannel id value counter. Incremented for each new DataChannel.\n        this._nextSendSctpStreamId = 0;\n        // Got transport local and remote parameters.\n        this._transportReady = false;\n    }\n    /**\n     * Creates a factory function.\n     */\n    static createFactory() {\n        return () => new Safari11();\n    }\n    get name() {\n        return 'Safari11';\n    }\n    close() {\n        logger.debug('close()');\n        // Close RTCPeerConnection.\n        if (this._pc) {\n            try {\n                this._pc.close();\n            }\n            catch (error) { }\n        }\n    }\n    async getNativeRtpCapabilities() {\n        logger.debug('getNativeRtpCapabilities()');\n        const pc = new RTCPeerConnection({\n            iceServers: [],\n            iceTransportPolicy: 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'plan-b'\n        });\n        try {\n            const offer = await pc.createOffer({\n                offerToReceiveAudio: true,\n                offerToReceiveVideo: true\n            });\n            try {\n                pc.close();\n            }\n            catch (error) { }\n            const sdpObject = sdpTransform.parse(offer.sdp);\n            const nativeRtpCapabilities = sdpCommonUtils.extractRtpCapabilities({ sdpObject });\n            return nativeRtpCapabilities;\n        }\n        catch (error) {\n            try {\n                pc.close();\n            }\n            catch (error2) { }\n            throw error;\n        }\n    }\n    async getNativeSctpCapabilities() {\n        logger.debug('getNativeSctpCapabilities()');\n        return {\n            numStreams: SCTP_NUM_STREAMS\n        };\n    }\n    run({ direction, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, extendedRtpCapabilities }) {\n        logger.debug('run()');\n        this._direction = direction;\n        this._remoteSdp = new RemoteSdp_1.RemoteSdp({\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters,\n            planB: true\n        });\n        this._sendingRtpParametersByKind =\n            {\n                audio: ortc.getSendingRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRtpParameters('video', extendedRtpCapabilities)\n            };\n        this._sendingRemoteRtpParametersByKind =\n            {\n                audio: ortc.getSendingRemoteRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRemoteRtpParameters('video', extendedRtpCapabilities)\n            };\n        if (dtlsParameters.role && dtlsParameters.role !== 'auto') {\n            this._forcedLocalDtlsRole = dtlsParameters.role === 'server'\n                ? 'client'\n                : 'server';\n        }\n        this._pc = new RTCPeerConnection({\n            iceServers: iceServers || [],\n            iceTransportPolicy: iceTransportPolicy || 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            ...additionalSettings\n        }, proprietaryConstraints);\n        // Handle RTCPeerConnection connection status.\n        this._pc.addEventListener('iceconnectionstatechange', () => {\n            switch (this._pc.iceConnectionState) {\n                case 'checking':\n                    this.emit('@connectionstatechange', 'connecting');\n                    break;\n                case 'connected':\n                case 'completed':\n                    this.emit('@connectionstatechange', 'connected');\n                    break;\n                case 'failed':\n                    this.emit('@connectionstatechange', 'failed');\n                    break;\n                case 'disconnected':\n                    this.emit('@connectionstatechange', 'disconnected');\n                    break;\n                case 'closed':\n                    this.emit('@connectionstatechange', 'closed');\n                    break;\n            }\n        });\n    }\n    async updateIceServers(iceServers) {\n        logger.debug('updateIceServers()');\n        const configuration = this._pc.getConfiguration();\n        configuration.iceServers = iceServers;\n        this._pc.setConfiguration(configuration);\n    }\n    async restartIce(iceParameters) {\n        logger.debug('restartIce()');\n        // Provide the remote SDP handler with new remote ICE parameters.\n        this._remoteSdp.updateIceParameters(iceParameters);\n        if (!this._transportReady)\n            return;\n        if (this._direction === 'send') {\n            const offer = await this._pc.createOffer({ iceRestart: true });\n            logger.debug('restartIce() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n        }\n        else {\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            logger.debug('restartIce() | calling pc.setLocalDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n        }\n    }\n    async getTransportStats() {\n        return this._pc.getStats();\n    }\n    async send({ track, encodings, codecOptions, codec }) {\n        var _a;\n        this._assertSendDirection();\n        logger.debug('send() [kind:%s, track.id:%s]', track.kind, track.id);\n        if (codec) {\n            logger.warn('send() | codec selection is not available in %s handler', this.name);\n        }\n        this._sendStream.addTrack(track);\n        this._pc.addTrack(track, this._sendStream);\n        let offer = await this._pc.createOffer();\n        let localSdpObject = sdpTransform.parse(offer.sdp);\n        let offerMediaObject;\n        const sendingRtpParameters = utils.clone(this._sendingRtpParametersByKind[track.kind], {});\n        sendingRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRtpParameters.codecs);\n        const sendingRemoteRtpParameters = utils.clone(this._sendingRemoteRtpParametersByKind[track.kind], {});\n        sendingRemoteRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRemoteRtpParameters.codecs);\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        if (track.kind === 'video' && encodings && encodings.length > 1) {\n            logger.debug('send() | enabling simulcast');\n            localSdpObject = sdpTransform.parse(offer.sdp);\n            offerMediaObject = localSdpObject.media.find((m) => m.type === 'video');\n            sdpPlanBUtils.addLegacySimulcast({\n                offerMediaObject,\n                track,\n                numStreams: encodings.length\n            });\n            offer = { type: 'offer', sdp: sdpTransform.write(localSdpObject) };\n        }\n        logger.debug('send() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        offerMediaObject = localSdpObject.media\n            .find((m) => m.type === track.kind);\n        // Set RTCP CNAME.\n        sendingRtpParameters.rtcp.cname =\n            sdpCommonUtils.getCname({ offerMediaObject });\n        // Set RTP encodings.\n        sendingRtpParameters.encodings =\n            sdpPlanBUtils.getRtpEncodings({ offerMediaObject, track });\n        // Complete encodings with given values.\n        if (encodings) {\n            for (let idx = 0; idx < sendingRtpParameters.encodings.length; ++idx) {\n                if (encodings[idx])\n                    Object.assign(sendingRtpParameters.encodings[idx], encodings[idx]);\n            }\n        }\n        // If VP8 and there is effective simulcast, add scalabilityMode to each\n        // encoding.\n        if (sendingRtpParameters.encodings.length > 1 &&\n            sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/vp8') {\n            for (const encoding of sendingRtpParameters.encodings) {\n                encoding.scalabilityMode = 'S1T3';\n            }\n        }\n        this._remoteSdp.send({\n            offerMediaObject,\n            offerRtpParameters: sendingRtpParameters,\n            answerRtpParameters: sendingRemoteRtpParameters,\n            codecOptions\n        });\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('send() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        const localId = String(this._nextSendLocalId);\n        this._nextSendLocalId++;\n        const rtpSender = this._pc.getSenders()\n            .find((s) => s.track === track);\n        // Insert into the map.\n        this._mapSendLocalIdRtpSender.set(localId, rtpSender);\n        return {\n            localId: localId,\n            rtpParameters: sendingRtpParameters,\n            rtpSender\n        };\n    }\n    async stopSending(localId) {\n        this._assertSendDirection();\n        const rtpSender = this._mapSendLocalIdRtpSender.get(localId);\n        if (!rtpSender)\n            throw new Error('associated RTCRtpSender not found');\n        if (rtpSender.track)\n            this._sendStream.removeTrack(rtpSender.track);\n        this._mapSendLocalIdRtpSender.delete(localId);\n        const offer = await this._pc.createOffer();\n        logger.debug('stopSending() | calling pc.setLocalDescription() [offer:%o]', offer);\n        try {\n            await this._pc.setLocalDescription(offer);\n        }\n        catch (error) {\n            // NOTE: If there are no sending tracks, setLocalDescription() will fail with\n            // \"Failed to create channels\". If so, ignore it.\n            if (this._sendStream.getTracks().length === 0) {\n                logger.warn('stopSending() | ignoring expected error due no sending tracks: %s', error.toString());\n                return;\n            }\n            throw error;\n        }\n        if (this._pc.signalingState === 'stable')\n            return;\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopSending() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n    }\n    async replaceTrack(localId, track) {\n        this._assertSendDirection();\n        if (track) {\n            logger.debug('replaceTrack() [localId:%s, track.id:%s]', localId, track.id);\n        }\n        else {\n            logger.debug('replaceTrack() [localId:%s, no track]', localId);\n        }\n        const rtpSender = this._mapSendLocalIdRtpSender.get(localId);\n        if (!rtpSender)\n            throw new Error('associated RTCRtpSender not found');\n        const oldTrack = rtpSender.track;\n        await rtpSender.replaceTrack(track);\n        // Remove the old track from the local stream.\n        if (oldTrack)\n            this._sendStream.removeTrack(oldTrack);\n        // Add the new track to the local stream.\n        if (track)\n            this._sendStream.addTrack(track);\n    }\n    async setMaxSpatialLayer(localId, spatialLayer) {\n        this._assertSendDirection();\n        logger.debug('setMaxSpatialLayer() [localId:%s, spatialLayer:%s]', localId, spatialLayer);\n        const rtpSender = this._mapSendLocalIdRtpSender.get(localId);\n        if (!rtpSender)\n            throw new Error('associated RTCRtpSender not found');\n        const parameters = rtpSender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            if (idx <= spatialLayer)\n                encoding.active = true;\n            else\n                encoding.active = false;\n        });\n        await rtpSender.setParameters(parameters);\n    }\n    async setRtpEncodingParameters(localId, params) {\n        this._assertSendDirection();\n        logger.debug('setRtpEncodingParameters() [localId:%s, params:%o]', localId, params);\n        const rtpSender = this._mapSendLocalIdRtpSender.get(localId);\n        if (!rtpSender)\n            throw new Error('associated RTCRtpSender not found');\n        const parameters = rtpSender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            parameters.encodings[idx] = { ...encoding, ...params };\n        });\n        await rtpSender.setParameters(parameters);\n    }\n    async getSenderStats(localId) {\n        this._assertSendDirection();\n        const rtpSender = this._mapSendLocalIdRtpSender.get(localId);\n        if (!rtpSender)\n            throw new Error('associated RTCRtpSender not found');\n        return rtpSender.getStats();\n    }\n    async sendDataChannel({ ordered, maxPacketLifeTime, maxRetransmits, label, protocol }) {\n        var _a;\n        this._assertSendDirection();\n        const options = {\n            negotiated: true,\n            id: this._nextSendSctpStreamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('sendDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // Increase next id.\n        this._nextSendSctpStreamId =\n            ++this._nextSendSctpStreamId % SCTP_NUM_STREAMS.MIS;\n        // If this is the first DataChannel we need to create the SDP answer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            const offer = await this._pc.createOffer();\n            const localSdpObject = sdpTransform.parse(offer.sdp);\n            const offerMediaObject = localSdpObject.media\n                .find((m) => m.type === 'application');\n            if (!this._transportReady) {\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('sendDataChannel() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            this._remoteSdp.sendSctpAssociation({ offerMediaObject });\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        const sctpStreamParameters = {\n            streamId: options.id,\n            ordered: options.ordered,\n            maxPacketLifeTime: options.maxPacketLifeTime,\n            maxRetransmits: options.maxRetransmits\n        };\n        return { dataChannel, sctpStreamParameters };\n    }\n    async receive({ trackId, kind, rtpParameters }) {\n        var _a;\n        this._assertRecvDirection();\n        logger.debug('receive() [trackId:%s, kind:%s]', trackId, kind);\n        const localId = trackId;\n        const mid = kind;\n        this._remoteSdp.receive({\n            mid,\n            kind,\n            offerRtpParameters: rtpParameters,\n            streamId: rtpParameters.rtcp.cname,\n            trackId\n        });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('receive() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        let answer = await this._pc.createAnswer();\n        const localSdpObject = sdpTransform.parse(answer.sdp);\n        const answerMediaObject = localSdpObject.media\n            .find((m) => String(m.mid) === mid);\n        // May need to modify codec parameters in the answer based on codec\n        // parameters in the offer.\n        sdpCommonUtils.applyCodecParameters({\n            offerRtpParameters: rtpParameters,\n            answerMediaObject\n        });\n        answer = { type: 'answer', sdp: sdpTransform.write(localSdpObject) };\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        logger.debug('receive() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        const rtpReceiver = this._pc.getReceivers()\n            .find((r) => r.track && r.track.id === localId);\n        if (!rtpReceiver)\n            throw new Error('new RTCRtpReceiver not');\n        // Insert into the map.\n        this._mapRecvLocalIdInfo.set(localId, { mid, rtpParameters, rtpReceiver });\n        return {\n            localId,\n            track: rtpReceiver.track,\n            rtpReceiver\n        };\n    }\n    async stopReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('stopReceiving() [localId:%s]', localId);\n        const { mid, rtpParameters } = this._mapRecvLocalIdInfo.get(localId) || {};\n        // Remove from the map.\n        this._mapRecvLocalIdInfo.delete(localId);\n        this._remoteSdp.planBStopReceiving({ mid: mid, offerRtpParameters: rtpParameters });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('stopReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n    }\n    async getReceiverStats(localId) {\n        this._assertRecvDirection();\n        const { rtpReceiver } = this._mapRecvLocalIdInfo.get(localId) || {};\n        if (!rtpReceiver)\n            throw new Error('associated RTCRtpReceiver not found');\n        return rtpReceiver.getStats();\n    }\n    async pauseReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    async resumeReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    async receiveDataChannel({ sctpStreamParameters, label, protocol }) {\n        var _a;\n        this._assertRecvDirection();\n        const { streamId, ordered, maxPacketLifeTime, maxRetransmits } = sctpStreamParameters;\n        const options = {\n            negotiated: true,\n            id: streamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('receiveDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // If this is the first DataChannel we need to create the SDP offer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            this._remoteSdp.receiveSctpAssociation({ oldDataChannelSpec: true });\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            if (!this._transportReady) {\n                const localSdpObject = sdpTransform.parse(answer.sdp);\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        return { dataChannel };\n    }\n    async _setupTransport({ localDtlsRole, localSdpObject }) {\n        if (!localSdpObject)\n            localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        // Get our local DTLS parameters.\n        const dtlsParameters = sdpCommonUtils.extractDtlsParameters({ sdpObject: localSdpObject });\n        // Set our DTLS role.\n        dtlsParameters.role = localDtlsRole;\n        // Update the remote DTLS role in the SDP.\n        this._remoteSdp.updateDtlsRole(localDtlsRole === 'client' ? 'server' : 'client');\n        // Need to tell the remote transport about our parameters.\n        await this.safeEmitAsPromise('@connect', { dtlsParameters });\n        this._transportReady = true;\n    }\n    _assertSendDirection() {\n        if (this._direction !== 'send') {\n            throw new Error('method can just be called for handlers with \"send\" direction');\n        }\n    }\n    _assertRecvDirection() {\n        if (this._direction !== 'recv') {\n            throw new Error('method can just be called for handlers with \"recv\" direction');\n        }\n    }\n}\nexports.Safari11 = Safari11;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mangleRtpParameters = exports.getCapabilities = void 0;\nconst utils = __importStar(require(\"../../utils\"));\n/**\n * Normalize ORTC based Edge's RTCRtpReceiver.getCapabilities() to produce a full\n * compliant ORTC RTCRtpCapabilities.\n */\nfunction getCapabilities() {\n    const nativeCaps = RTCRtpReceiver.getCapabilities();\n    const caps = utils.clone(nativeCaps, {});\n    for (const codec of caps.codecs) {\n        // Rename numChannels to channels.\n        codec.channels = codec.numChannels;\n        delete codec.numChannels;\n        // Add mimeType.\n        codec.mimeType = codec.mimeType || `${codec.kind}/${codec.name}`;\n        // NOTE: Edge sets some numeric parameters as string rather than number. Fix them.\n        if (codec.parameters) {\n            const parameters = codec.parameters;\n            if (parameters.apt)\n                parameters.apt = Number(parameters.apt);\n            if (parameters['packetization-mode'])\n                parameters['packetization-mode'] = Number(parameters['packetization-mode']);\n        }\n        // Delete emty parameter String in rtcpFeedback.\n        for (const feedback of codec.rtcpFeedback || []) {\n            if (!feedback.parameter)\n                feedback.parameter = '';\n        }\n    }\n    return caps;\n}\nexports.getCapabilities = getCapabilities;\n/**\n * Generate RTCRtpParameters as ORTC based Edge likes.\n */\nfunction mangleRtpParameters(rtpParameters) {\n    const params = utils.clone(rtpParameters, {});\n    // Rename mid to muxId.\n    if (params.mid) {\n        params.muxId = params.mid;\n        delete params.mid;\n    }\n    for (const codec of params.codecs) {\n        // Rename channels to numChannels.\n        if (codec.channels) {\n            codec.numChannels = codec.channels;\n            delete codec.channels;\n        }\n        // Add codec.name (requried by Edge).\n        if (codec.mimeType && !codec.name)\n            codec.name = codec.mimeType.split('/')[1];\n        // Remove mimeType.\n        delete codec.mimeType;\n    }\n    return params;\n}\nexports.mangleRtpParameters = mangleRtpParameters;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Edge11 = void 0;\nconst Logger_1 = require(\"../Logger\");\nconst errors_1 = require(\"../errors\");\nconst utils = __importStar(require(\"../utils\"));\nconst ortc = __importStar(require(\"../ortc\"));\nconst edgeUtils = __importStar(require(\"./ortc/edgeUtils\"));\nconst HandlerInterface_1 = require(\"./HandlerInterface\");\nconst logger = new Logger_1.Logger('Edge11');\nclass Edge11 extends HandlerInterface_1.HandlerInterface {\n    constructor() {\n        super();\n        // Map of RTCRtpSenders indexed by id.\n        this._rtpSenders = new Map();\n        // Map of RTCRtpReceivers indexed by id.\n        this._rtpReceivers = new Map();\n        // Next localId for sending tracks.\n        this._nextSendLocalId = 0;\n        // Got transport local and remote parameters.\n        this._transportReady = false;\n    }\n    /**\n     * Creates a factory function.\n     */\n    static createFactory() {\n        return () => new Edge11();\n    }\n    get name() {\n        return 'Edge11';\n    }\n    close() {\n        logger.debug('close()');\n        // Close the ICE gatherer.\n        // NOTE: Not yet implemented by Edge.\n        try {\n            this._iceGatherer.close();\n        }\n        catch (error) { }\n        // Close the ICE transport.\n        try {\n            this._iceTransport.stop();\n        }\n        catch (error) { }\n        // Close the DTLS transport.\n        try {\n            this._dtlsTransport.stop();\n        }\n        catch (error) { }\n        // Close RTCRtpSenders.\n        for (const rtpSender of this._rtpSenders.values()) {\n            try {\n                rtpSender.stop();\n            }\n            catch (error) { }\n        }\n        // Close RTCRtpReceivers.\n        for (const rtpReceiver of this._rtpReceivers.values()) {\n            try {\n                rtpReceiver.stop();\n            }\n            catch (error) { }\n        }\n    }\n    async getNativeRtpCapabilities() {\n        logger.debug('getNativeRtpCapabilities()');\n        return edgeUtils.getCapabilities();\n    }\n    async getNativeSctpCapabilities() {\n        logger.debug('getNativeSctpCapabilities()');\n        return {\n            numStreams: { OS: 0, MIS: 0 }\n        };\n    }\n    run({ direction, // eslint-disable-line @typescript-eslint/no-unused-vars\n    iceParameters, iceCandidates, dtlsParameters, sctpParameters, // eslint-disable-line @typescript-eslint/no-unused-vars\n    iceServers, iceTransportPolicy, additionalSettings, // eslint-disable-line @typescript-eslint/no-unused-vars\n    proprietaryConstraints, // eslint-disable-line @typescript-eslint/no-unused-vars\n    extendedRtpCapabilities }) {\n        logger.debug('run()');\n        this._sendingRtpParametersByKind =\n            {\n                audio: ortc.getSendingRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRtpParameters('video', extendedRtpCapabilities)\n            };\n        this._remoteIceParameters = iceParameters;\n        this._remoteIceCandidates = iceCandidates;\n        this._remoteDtlsParameters = dtlsParameters;\n        this._cname = `CNAME-${utils.generateRandomNumber()}`;\n        this._setIceGatherer({ iceServers, iceTransportPolicy });\n        this._setIceTransport();\n        this._setDtlsTransport();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async updateIceServers(iceServers) {\n        // NOTE: Edge 11 does not implement iceGatherer.gater().\n        throw new errors_1.UnsupportedError('not supported');\n    }\n    async restartIce(iceParameters) {\n        logger.debug('restartIce()');\n        this._remoteIceParameters = iceParameters;\n        if (!this._transportReady)\n            return;\n        logger.debug('restartIce() | calling iceTransport.start()');\n        this._iceTransport.start(this._iceGatherer, iceParameters, 'controlling');\n        for (const candidate of this._remoteIceCandidates) {\n            this._iceTransport.addRemoteCandidate(candidate);\n        }\n        this._iceTransport.addRemoteCandidate({});\n    }\n    async getTransportStats() {\n        return this._iceTransport.getStats();\n    }\n    async send(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    { track, encodings, codecOptions, codec }) {\n        logger.debug('send() [kind:%s, track.id:%s]', track.kind, track.id);\n        if (!this._transportReady)\n            await this._setupTransport({ localDtlsRole: 'server' });\n        logger.debug('send() | calling new RTCRtpSender()');\n        const rtpSender = new RTCRtpSender(track, this._dtlsTransport);\n        const rtpParameters = utils.clone(this._sendingRtpParametersByKind[track.kind], {});\n        rtpParameters.codecs = ortc.reduceCodecs(rtpParameters.codecs, codec);\n        const useRtx = rtpParameters.codecs\n            .some((_codec) => /.+\\/rtx$/i.test(_codec.mimeType));\n        if (!encodings)\n            encodings = [{}];\n        for (const encoding of encodings) {\n            encoding.ssrc = utils.generateRandomNumber();\n            if (useRtx)\n                encoding.rtx = { ssrc: utils.generateRandomNumber() };\n        }\n        rtpParameters.encodings = encodings;\n        // Fill RTCRtpParameters.rtcp.\n        rtpParameters.rtcp =\n            {\n                cname: this._cname,\n                reducedSize: true,\n                mux: true\n            };\n        // NOTE: Convert our standard RTCRtpParameters into those that Edge\n        // expects.\n        const edgeRtpParameters = edgeUtils.mangleRtpParameters(rtpParameters);\n        logger.debug('send() | calling rtpSender.send() [params:%o]', edgeRtpParameters);\n        await rtpSender.send(edgeRtpParameters);\n        const localId = String(this._nextSendLocalId);\n        this._nextSendLocalId++;\n        // Store it.\n        this._rtpSenders.set(localId, rtpSender);\n        return { localId, rtpParameters, rtpSender };\n    }\n    async stopSending(localId) {\n        logger.debug('stopSending() [localId:%s]', localId);\n        const rtpSender = this._rtpSenders.get(localId);\n        if (!rtpSender)\n            throw new Error('RTCRtpSender not found');\n        this._rtpSenders.delete(localId);\n        try {\n            logger.debug('stopSending() | calling rtpSender.stop()');\n            rtpSender.stop();\n        }\n        catch (error) {\n            logger.warn('stopSending() | rtpSender.stop() failed:%o', error);\n            throw error;\n        }\n    }\n    async replaceTrack(localId, track) {\n        if (track) {\n            logger.debug('replaceTrack() [localId:%s, track.id:%s]', localId, track.id);\n        }\n        else {\n            logger.debug('replaceTrack() [localId:%s, no track]', localId);\n        }\n        const rtpSender = this._rtpSenders.get(localId);\n        if (!rtpSender)\n            throw new Error('RTCRtpSender not found');\n        rtpSender.setTrack(track);\n    }\n    async setMaxSpatialLayer(localId, spatialLayer) {\n        logger.debug('setMaxSpatialLayer() [localId:%s, spatialLayer:%s]', localId, spatialLayer);\n        const rtpSender = this._rtpSenders.get(localId);\n        if (!rtpSender)\n            throw new Error('RTCRtpSender not found');\n        const parameters = rtpSender.getParameters();\n        parameters.encodings\n            .forEach((encoding, idx) => {\n            if (idx <= spatialLayer)\n                encoding.active = true;\n            else\n                encoding.active = false;\n        });\n        await rtpSender.setParameters(parameters);\n    }\n    async setRtpEncodingParameters(localId, params) {\n        logger.debug('setRtpEncodingParameters() [localId:%s, params:%o]', localId, params);\n        const rtpSender = this._rtpSenders.get(localId);\n        if (!rtpSender)\n            throw new Error('RTCRtpSender not found');\n        const parameters = rtpSender.getParameters();\n        parameters.encodings.forEach((encoding, idx) => {\n            parameters.encodings[idx] = { ...encoding, ...params };\n        });\n        await rtpSender.setParameters(parameters);\n    }\n    async getSenderStats(localId) {\n        const rtpSender = this._rtpSenders.get(localId);\n        if (!rtpSender)\n            throw new Error('RTCRtpSender not found');\n        return rtpSender.getStats();\n    }\n    async sendDataChannel(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    options) {\n        throw new errors_1.UnsupportedError('not implemented');\n    }\n    async receive({ trackId, kind, rtpParameters }) {\n        logger.debug('receive() [trackId:%s, kind:%s]', trackId, kind);\n        if (!this._transportReady)\n            await this._setupTransport({ localDtlsRole: 'server' });\n        logger.debug('receive() | calling new RTCRtpReceiver()');\n        const rtpReceiver = new RTCRtpReceiver(this._dtlsTransport, kind);\n        rtpReceiver.addEventListener('error', (event) => {\n            logger.error('rtpReceiver \"error\" event [event:%o]', event);\n        });\n        // NOTE: Convert our standard RTCRtpParameters into those that Edge\n        // expects.\n        const edgeRtpParameters = edgeUtils.mangleRtpParameters(rtpParameters);\n        logger.debug('receive() | calling rtpReceiver.receive() [params:%o]', edgeRtpParameters);\n        await rtpReceiver.receive(edgeRtpParameters);\n        const localId = trackId;\n        // Store it.\n        this._rtpReceivers.set(localId, rtpReceiver);\n        return {\n            localId,\n            track: rtpReceiver.track,\n            rtpReceiver\n        };\n    }\n    async stopReceiving(localId) {\n        logger.debug('stopReceiving() [localId:%s]', localId);\n        const rtpReceiver = this._rtpReceivers.get(localId);\n        if (!rtpReceiver)\n            throw new Error('RTCRtpReceiver not found');\n        this._rtpReceivers.delete(localId);\n        try {\n            logger.debug('stopReceiving() | calling rtpReceiver.stop()');\n            rtpReceiver.stop();\n        }\n        catch (error) {\n            logger.warn('stopReceiving() | rtpReceiver.stop() failed:%o', error);\n        }\n    }\n    async pauseReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    async resumeReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    async getReceiverStats(localId) {\n        const rtpReceiver = this._rtpReceivers.get(localId);\n        if (!rtpReceiver)\n            throw new Error('RTCRtpReceiver not found');\n        return rtpReceiver.getStats();\n    }\n    async receiveDataChannel(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    options) {\n        throw new errors_1.UnsupportedError('not implemented');\n    }\n    _setIceGatherer({ iceServers, iceTransportPolicy }) {\n        // @ts-ignore\n        const iceGatherer = new RTCIceGatherer({\n            iceServers: iceServers || [],\n            gatherPolicy: iceTransportPolicy || 'all'\n        });\n        iceGatherer.addEventListener('error', (event) => {\n            logger.error('iceGatherer \"error\" event [event:%o]', event);\n        });\n        // NOTE: Not yet implemented by Edge, which starts gathering automatically.\n        try {\n            iceGatherer.gather();\n        }\n        catch (error) {\n            logger.debug('_setIceGatherer() | iceGatherer.gather() failed: %s', error.toString());\n        }\n        this._iceGatherer = iceGatherer;\n    }\n    _setIceTransport() {\n        const iceTransport = new RTCIceTransport(this._iceGatherer);\n        // NOTE: Not yet implemented by Edge.\n        iceTransport.addEventListener('statechange', () => {\n            switch (iceTransport.state) {\n                case 'checking':\n                    this.emit('@connectionstatechange', 'connecting');\n                    break;\n                case 'connected':\n                case 'completed':\n                    this.emit('@connectionstatechange', 'connected');\n                    break;\n                case 'failed':\n                    this.emit('@connectionstatechange', 'failed');\n                    break;\n                case 'disconnected':\n                    this.emit('@connectionstatechange', 'disconnected');\n                    break;\n                case 'closed':\n                    this.emit('@connectionstatechange', 'closed');\n                    break;\n            }\n        });\n        // NOTE: Not standard, but implemented by Edge.\n        iceTransport.addEventListener('icestatechange', () => {\n            switch (iceTransport.state) {\n                case 'checking':\n                    this.emit('@connectionstatechange', 'connecting');\n                    break;\n                case 'connected':\n                case 'completed':\n                    this.emit('@connectionstatechange', 'connected');\n                    break;\n                case 'failed':\n                    this.emit('@connectionstatechange', 'failed');\n                    break;\n                case 'disconnected':\n                    this.emit('@connectionstatechange', 'disconnected');\n                    break;\n                case 'closed':\n                    this.emit('@connectionstatechange', 'closed');\n                    break;\n            }\n        });\n        iceTransport.addEventListener('candidatepairchange', (event) => {\n            logger.debug('iceTransport \"candidatepairchange\" event [pair:%o]', event.pair);\n        });\n        this._iceTransport = iceTransport;\n    }\n    _setDtlsTransport() {\n        const dtlsTransport = new RTCDtlsTransport(this._iceTransport);\n        // NOTE: Not yet implemented by Edge.\n        dtlsTransport.addEventListener('statechange', () => {\n            logger.debug('dtlsTransport \"statechange\" event [state:%s]', dtlsTransport.state);\n        });\n        // NOTE: Not standard, but implemented by Edge.\n        dtlsTransport.addEventListener('dtlsstatechange', () => {\n            logger.debug('dtlsTransport \"dtlsstatechange\" event [state:%s]', dtlsTransport.state);\n            if (dtlsTransport.state === 'closed')\n                this.emit('@connectionstatechange', 'closed');\n        });\n        dtlsTransport.addEventListener('error', (event) => {\n            logger.error('dtlsTransport \"error\" event [event:%o]', event);\n        });\n        this._dtlsTransport = dtlsTransport;\n    }\n    async _setupTransport({ localDtlsRole }) {\n        logger.debug('_setupTransport()');\n        // Get our local DTLS parameters.\n        const dtlsParameters = this._dtlsTransport.getLocalParameters();\n        dtlsParameters.role = localDtlsRole;\n        // Need to tell the remote transport about our parameters.\n        await this.safeEmitAsPromise('@connect', { dtlsParameters });\n        // Start the RTCIceTransport.\n        this._iceTransport.start(this._iceGatherer, this._remoteIceParameters, 'controlling');\n        // Add remote ICE candidates.\n        for (const candidate of this._remoteIceCandidates) {\n            this._iceTransport.addRemoteCandidate(candidate);\n        }\n        // Also signal a 'complete' candidate as per spec.\n        // NOTE: It should be {complete: true} but Edge prefers {}.\n        // NOTE: If we don't signal end of candidates, the Edge RTCIceTransport\n        // won't enter the 'completed' state.\n        this._iceTransport.addRemoteCandidate({});\n        // NOTE: Edge does not like SHA less than 256.\n        this._remoteDtlsParameters.fingerprints = this._remoteDtlsParameters.fingerprints\n            .filter((fingerprint) => {\n            return (fingerprint.algorithm === 'sha-256' ||\n                fingerprint.algorithm === 'sha-384' ||\n                fingerprint.algorithm === 'sha-512');\n        });\n        // Start the RTCDtlsTransport.\n        this._dtlsTransport.start(this._remoteDtlsParameters);\n        this._transportReady = true;\n    }\n}\nexports.Edge11 = Edge11;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReactNative = void 0;\nconst sdpTransform = __importStar(require(\"sdp-transform\"));\nconst Logger_1 = require(\"../Logger\");\nconst errors_1 = require(\"../errors\");\nconst utils = __importStar(require(\"../utils\"));\nconst ortc = __importStar(require(\"../ortc\"));\nconst sdpCommonUtils = __importStar(require(\"./sdp/commonUtils\"));\nconst sdpPlanBUtils = __importStar(require(\"./sdp/planBUtils\"));\nconst HandlerInterface_1 = require(\"./HandlerInterface\");\nconst RemoteSdp_1 = require(\"./sdp/RemoteSdp\");\nconst logger = new Logger_1.Logger('ReactNative');\nconst SCTP_NUM_STREAMS = { OS: 1024, MIS: 1024 };\nclass ReactNative extends HandlerInterface_1.HandlerInterface {\n    constructor() {\n        super();\n        // Local stream for sending.\n        this._sendStream = new MediaStream();\n        // Map of sending MediaStreamTracks indexed by localId.\n        this._mapSendLocalIdTrack = new Map();\n        // Next sending localId.\n        this._nextSendLocalId = 0;\n        // Map of MID, RTP parameters and RTCRtpReceiver indexed by local id.\n        // Value is an Object with mid, rtpParameters and rtpReceiver.\n        this._mapRecvLocalIdInfo = new Map();\n        // Whether a DataChannel m=application section has been created.\n        this._hasDataChannelMediaSection = false;\n        // Sending DataChannel id value counter. Incremented for each new DataChannel.\n        this._nextSendSctpStreamId = 0;\n        // Got transport local and remote parameters.\n        this._transportReady = false;\n    }\n    /**\n     * Creates a factory function.\n     */\n    static createFactory() {\n        return () => new ReactNative();\n    }\n    get name() {\n        return 'ReactNative';\n    }\n    close() {\n        logger.debug('close()');\n        // Free/dispose native MediaStream but DO NOT free/dispose native\n        // MediaStreamTracks (that is parent's business).\n        // @ts-ignore (proprietary API in react-native-webrtc).\n        this._sendStream.release(/* releaseTracks */ false);\n        // Close RTCPeerConnection.\n        if (this._pc) {\n            try {\n                this._pc.close();\n            }\n            catch (error) { }\n        }\n    }\n    async getNativeRtpCapabilities() {\n        logger.debug('getNativeRtpCapabilities()');\n        const pc = new RTCPeerConnection({\n            iceServers: [],\n            iceTransportPolicy: 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'plan-b'\n        });\n        try {\n            const offer = await pc.createOffer({\n                offerToReceiveAudio: true,\n                offerToReceiveVideo: true\n            });\n            try {\n                pc.close();\n            }\n            catch (error) { }\n            const sdpObject = sdpTransform.parse(offer.sdp);\n            const nativeRtpCapabilities = sdpCommonUtils.extractRtpCapabilities({ sdpObject });\n            return nativeRtpCapabilities;\n        }\n        catch (error) {\n            try {\n                pc.close();\n            }\n            catch (error2) { }\n            throw error;\n        }\n    }\n    async getNativeSctpCapabilities() {\n        logger.debug('getNativeSctpCapabilities()');\n        return {\n            numStreams: SCTP_NUM_STREAMS\n        };\n    }\n    run({ direction, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, extendedRtpCapabilities }) {\n        logger.debug('run()');\n        this._direction = direction;\n        this._remoteSdp = new RemoteSdp_1.RemoteSdp({\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters,\n            planB: true\n        });\n        this._sendingRtpParametersByKind =\n            {\n                audio: ortc.getSendingRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRtpParameters('video', extendedRtpCapabilities)\n            };\n        this._sendingRemoteRtpParametersByKind =\n            {\n                audio: ortc.getSendingRemoteRtpParameters('audio', extendedRtpCapabilities),\n                video: ortc.getSendingRemoteRtpParameters('video', extendedRtpCapabilities)\n            };\n        if (dtlsParameters.role && dtlsParameters.role !== 'auto') {\n            this._forcedLocalDtlsRole = dtlsParameters.role === 'server'\n                ? 'client'\n                : 'server';\n        }\n        this._pc = new RTCPeerConnection({\n            iceServers: iceServers || [],\n            iceTransportPolicy: iceTransportPolicy || 'all',\n            bundlePolicy: 'max-bundle',\n            rtcpMuxPolicy: 'require',\n            sdpSemantics: 'plan-b',\n            ...additionalSettings\n        }, proprietaryConstraints);\n        // Handle RTCPeerConnection connection status.\n        this._pc.addEventListener('iceconnectionstatechange', () => {\n            switch (this._pc.iceConnectionState) {\n                case 'checking':\n                    this.emit('@connectionstatechange', 'connecting');\n                    break;\n                case 'connected':\n                case 'completed':\n                    this.emit('@connectionstatechange', 'connected');\n                    break;\n                case 'failed':\n                    this.emit('@connectionstatechange', 'failed');\n                    break;\n                case 'disconnected':\n                    this.emit('@connectionstatechange', 'disconnected');\n                    break;\n                case 'closed':\n                    this.emit('@connectionstatechange', 'closed');\n                    break;\n            }\n        });\n    }\n    async updateIceServers(iceServers) {\n        logger.debug('updateIceServers()');\n        const configuration = this._pc.getConfiguration();\n        configuration.iceServers = iceServers;\n        this._pc.setConfiguration(configuration);\n    }\n    async restartIce(iceParameters) {\n        logger.debug('restartIce()');\n        // Provide the remote SDP handler with new remote ICE parameters.\n        this._remoteSdp.updateIceParameters(iceParameters);\n        if (!this._transportReady)\n            return;\n        if (this._direction === 'send') {\n            const offer = await this._pc.createOffer({ iceRestart: true });\n            logger.debug('restartIce() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n        }\n        else {\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('restartIce() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            logger.debug('restartIce() | calling pc.setLocalDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n        }\n    }\n    async getTransportStats() {\n        return this._pc.getStats();\n    }\n    async send({ track, encodings, codecOptions, codec }) {\n        var _a;\n        this._assertSendDirection();\n        logger.debug('send() [kind:%s, track.id:%s]', track.kind, track.id);\n        if (codec) {\n            logger.warn('send() | codec selection is not available in %s handler', this.name);\n        }\n        this._sendStream.addTrack(track);\n        this._pc.addStream(this._sendStream);\n        let offer = await this._pc.createOffer();\n        let localSdpObject = sdpTransform.parse(offer.sdp);\n        let offerMediaObject;\n        const sendingRtpParameters = utils.clone(this._sendingRtpParametersByKind[track.kind], {});\n        sendingRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRtpParameters.codecs);\n        const sendingRemoteRtpParameters = utils.clone(this._sendingRemoteRtpParametersByKind[track.kind], {});\n        sendingRemoteRtpParameters.codecs =\n            ortc.reduceCodecs(sendingRemoteRtpParameters.codecs);\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        if (track.kind === 'video' && encodings && encodings.length > 1) {\n            logger.debug('send() | enabling simulcast');\n            localSdpObject = sdpTransform.parse(offer.sdp);\n            offerMediaObject = localSdpObject.media\n                .find((m) => m.type === 'video');\n            sdpPlanBUtils.addLegacySimulcast({\n                offerMediaObject,\n                track,\n                numStreams: encodings.length\n            });\n            offer = { type: 'offer', sdp: sdpTransform.write(localSdpObject) };\n        }\n        logger.debug('send() | calling pc.setLocalDescription() [offer:%o]', offer);\n        await this._pc.setLocalDescription(offer);\n        localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        offerMediaObject = localSdpObject.media\n            .find((m) => m.type === track.kind);\n        // Set RTCP CNAME.\n        sendingRtpParameters.rtcp.cname =\n            sdpCommonUtils.getCname({ offerMediaObject });\n        // Set RTP encodings.\n        sendingRtpParameters.encodings =\n            sdpPlanBUtils.getRtpEncodings({ offerMediaObject, track });\n        // Complete encodings with given values.\n        if (encodings) {\n            for (let idx = 0; idx < sendingRtpParameters.encodings.length; ++idx) {\n                if (encodings[idx])\n                    Object.assign(sendingRtpParameters.encodings[idx], encodings[idx]);\n            }\n        }\n        // If VP8 or H264 and there is effective simulcast, add scalabilityMode to\n        // each encoding.\n        if (sendingRtpParameters.encodings.length > 1 &&\n            (sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/vp8' ||\n                sendingRtpParameters.codecs[0].mimeType.toLowerCase() === 'video/h264')) {\n            for (const encoding of sendingRtpParameters.encodings) {\n                encoding.scalabilityMode = 'S1T3';\n            }\n        }\n        this._remoteSdp.send({\n            offerMediaObject,\n            offerRtpParameters: sendingRtpParameters,\n            answerRtpParameters: sendingRemoteRtpParameters,\n            codecOptions\n        });\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('send() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n        const localId = String(this._nextSendLocalId);\n        this._nextSendLocalId++;\n        // Insert into the map.\n        this._mapSendLocalIdTrack.set(localId, track);\n        return {\n            localId: localId,\n            rtpParameters: sendingRtpParameters\n        };\n    }\n    async stopSending(localId) {\n        this._assertSendDirection();\n        logger.debug('stopSending() [localId:%s]', localId);\n        const track = this._mapSendLocalIdTrack.get(localId);\n        if (!track)\n            throw new Error('track not found');\n        this._mapSendLocalIdTrack.delete(localId);\n        this._sendStream.removeTrack(track);\n        this._pc.addStream(this._sendStream);\n        const offer = await this._pc.createOffer();\n        logger.debug('stopSending() | calling pc.setLocalDescription() [offer:%o]', offer);\n        try {\n            await this._pc.setLocalDescription(offer);\n        }\n        catch (error) {\n            // NOTE: If there are no sending tracks, setLocalDescription() will fail with\n            // \"Failed to create channels\". If so, ignore it.\n            if (this._sendStream.getTracks().length === 0) {\n                logger.warn('stopSending() | ignoring expected error due no sending tracks: %s', error.toString());\n                return;\n            }\n            throw error;\n        }\n        if (this._pc.signalingState === 'stable')\n            return;\n        const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopSending() | calling pc.setRemoteDescription() [answer:%o]', answer);\n        await this._pc.setRemoteDescription(answer);\n    }\n    async replaceTrack(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId, track) {\n        throw new errors_1.UnsupportedError('not implemented');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async setMaxSpatialLayer(localId, spatialLayer) {\n        throw new errors_1.UnsupportedError('not implemented');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async setRtpEncodingParameters(localId, params) {\n        throw new errors_1.UnsupportedError('not implemented');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async getSenderStats(localId) {\n        throw new errors_1.UnsupportedError('not implemented');\n    }\n    async sendDataChannel({ ordered, maxPacketLifeTime, maxRetransmits, label, protocol }) {\n        var _a;\n        this._assertSendDirection();\n        const options = {\n            negotiated: true,\n            id: this._nextSendSctpStreamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmitTime: maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('sendDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // Increase next id.\n        this._nextSendSctpStreamId =\n            ++this._nextSendSctpStreamId % SCTP_NUM_STREAMS.MIS;\n        // If this is the first DataChannel we need to create the SDP answer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            const offer = await this._pc.createOffer();\n            const localSdpObject = sdpTransform.parse(offer.sdp);\n            const offerMediaObject = localSdpObject.media\n                .find((m) => m.type === 'application');\n            if (!this._transportReady) {\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('sendDataChannel() | calling pc.setLocalDescription() [offer:%o]', offer);\n            await this._pc.setLocalDescription(offer);\n            this._remoteSdp.sendSctpAssociation({ offerMediaObject });\n            const answer = { type: 'answer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setRemoteDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        const sctpStreamParameters = {\n            streamId: options.id,\n            ordered: options.ordered,\n            maxPacketLifeTime: options.maxPacketLifeTime,\n            maxRetransmits: options.maxRetransmits\n        };\n        return { dataChannel, sctpStreamParameters };\n    }\n    async receive({ trackId, kind, rtpParameters }) {\n        var _a;\n        this._assertRecvDirection();\n        logger.debug('receive() [trackId:%s, kind:%s]', trackId, kind);\n        const localId = trackId;\n        const mid = kind;\n        let streamId = rtpParameters.rtcp.cname;\n        // NOTE: In React-Native we cannot reuse the same remote MediaStream for new\n        // remote tracks. This is because react-native-webrtc does not react on new\n        // tracks generated within already existing streams, so force the streamId\n        // to be different.\n        logger.debug('receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc');\n        streamId += `-hack-${utils.generateRandomNumber()}`;\n        this._remoteSdp.receive({\n            mid,\n            kind,\n            offerRtpParameters: rtpParameters,\n            streamId,\n            trackId\n        });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('receive() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        let answer = await this._pc.createAnswer();\n        const localSdpObject = sdpTransform.parse(answer.sdp);\n        const answerMediaObject = localSdpObject.media\n            .find((m) => String(m.mid) === mid);\n        // May need to modify codec parameters in the answer based on codec\n        // parameters in the offer.\n        sdpCommonUtils.applyCodecParameters({\n            offerRtpParameters: rtpParameters,\n            answerMediaObject\n        });\n        answer = { type: 'answer', sdp: sdpTransform.write(localSdpObject) };\n        if (!this._transportReady) {\n            await this._setupTransport({\n                localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                localSdpObject\n            });\n        }\n        logger.debug('receive() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n        const stream = this._pc.getRemoteStreams()\n            .find((s) => s.id === streamId);\n        const track = stream.getTrackById(localId);\n        if (!track)\n            throw new Error('remote track not found');\n        // Insert into the map.\n        this._mapRecvLocalIdInfo.set(localId, { mid, rtpParameters });\n        return { localId, track };\n    }\n    async stopReceiving(localId) {\n        this._assertRecvDirection();\n        logger.debug('stopReceiving() [localId:%s]', localId);\n        const { mid, rtpParameters } = this._mapRecvLocalIdInfo.get(localId) || {};\n        // Remove from the map.\n        this._mapRecvLocalIdInfo.delete(localId);\n        this._remoteSdp.planBStopReceiving({ mid: mid, offerRtpParameters: rtpParameters });\n        const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n        logger.debug('stopReceiving() | calling pc.setRemoteDescription() [offer:%o]', offer);\n        await this._pc.setRemoteDescription(offer);\n        const answer = await this._pc.createAnswer();\n        logger.debug('stopReceiving() | calling pc.setLocalDescription() [answer:%o]', answer);\n        await this._pc.setLocalDescription(answer);\n    }\n    async pauseReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    async resumeReceiving(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    localId) {\n        // Unimplemented.\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async getReceiverStats(localId) {\n        throw new errors_1.UnsupportedError('not implemented');\n    }\n    async receiveDataChannel({ sctpStreamParameters, label, protocol }) {\n        var _a;\n        this._assertRecvDirection();\n        const { streamId, ordered, maxPacketLifeTime, maxRetransmits } = sctpStreamParameters;\n        const options = {\n            negotiated: true,\n            id: streamId,\n            ordered,\n            maxPacketLifeTime,\n            maxRetransmitTime: maxPacketLifeTime,\n            maxRetransmits,\n            protocol\n        };\n        logger.debug('receiveDataChannel() [options:%o]', options);\n        const dataChannel = this._pc.createDataChannel(label, options);\n        // If this is the first DataChannel we need to create the SDP offer with\n        // m=application section.\n        if (!this._hasDataChannelMediaSection) {\n            this._remoteSdp.receiveSctpAssociation({ oldDataChannelSpec: true });\n            const offer = { type: 'offer', sdp: this._remoteSdp.getSdp() };\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]', offer);\n            await this._pc.setRemoteDescription(offer);\n            const answer = await this._pc.createAnswer();\n            if (!this._transportReady) {\n                const localSdpObject = sdpTransform.parse(answer.sdp);\n                await this._setupTransport({\n                    localDtlsRole: (_a = this._forcedLocalDtlsRole) !== null && _a !== void 0 ? _a : 'client',\n                    localSdpObject\n                });\n            }\n            logger.debug('receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]', answer);\n            await this._pc.setLocalDescription(answer);\n            this._hasDataChannelMediaSection = true;\n        }\n        return { dataChannel };\n    }\n    async _setupTransport({ localDtlsRole, localSdpObject }) {\n        if (!localSdpObject)\n            localSdpObject = sdpTransform.parse(this._pc.localDescription.sdp);\n        // Get our local DTLS parameters.\n        const dtlsParameters = sdpCommonUtils.extractDtlsParameters({ sdpObject: localSdpObject });\n        // Set our DTLS role.\n        dtlsParameters.role = localDtlsRole;\n        // Update the remote DTLS role in the SDP.\n        this._remoteSdp.updateDtlsRole(localDtlsRole === 'client' ? 'server' : 'client');\n        // Need to tell the remote transport about our parameters.\n        await this.safeEmitAsPromise('@connect', { dtlsParameters });\n        this._transportReady = true;\n    }\n    _assertSendDirection() {\n        if (this._direction !== 'send') {\n            throw new Error('method can just be called for handlers with \"send\" direction');\n        }\n    }\n    _assertRecvDirection() {\n        if (this._direction !== 'recv') {\n            throw new Error('method can just be called for handlers with \"recv\" direction');\n        }\n    }\n}\nexports.ReactNative = ReactNative;\n","\"use strict\";\n/* global RTCRtpTransceiver */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Device = exports.detectDevice = void 0;\nconst bowser_1 = __importDefault(require(\"bowser\"));\nconst Logger_1 = require(\"./Logger\");\nconst EnhancedEventEmitter_1 = require(\"./EnhancedEventEmitter\");\nconst errors_1 = require(\"./errors\");\nconst utils = __importStar(require(\"./utils\"));\nconst ortc = __importStar(require(\"./ortc\"));\nconst Transport_1 = require(\"./Transport\");\nconst Chrome74_1 = require(\"./handlers/Chrome74\");\nconst Chrome70_1 = require(\"./handlers/Chrome70\");\nconst Chrome67_1 = require(\"./handlers/Chrome67\");\nconst Chrome55_1 = require(\"./handlers/Chrome55\");\nconst Firefox60_1 = require(\"./handlers/Firefox60\");\nconst Safari12_1 = require(\"./handlers/Safari12\");\nconst Safari11_1 = require(\"./handlers/Safari11\");\nconst Edge11_1 = require(\"./handlers/Edge11\");\nconst ReactNative_1 = require(\"./handlers/ReactNative\");\nconst logger = new Logger_1.Logger('Device');\nfunction detectDevice() {\n    // React-Native.\n    // NOTE: react-native-webrtc >= 1.75.0 is required.\n    if (typeof navigator === 'object' && navigator.product === 'ReactNative') {\n        if (typeof RTCPeerConnection === 'undefined') {\n            logger.warn('this._detectDevice() | unsupported ReactNative without RTCPeerConnection');\n            return undefined;\n        }\n        logger.debug('this._detectDevice() | ReactNative handler chosen');\n        return 'ReactNative';\n    }\n    // Browser.\n    else if (typeof navigator === 'object' && typeof navigator.userAgent === 'string') {\n        const ua = navigator.userAgent;\n        const browser = bowser_1.default.getParser(ua);\n        const engine = browser.getEngine();\n        // Chrome, Chromium, and Edge.\n        if (browser.satisfies({ chrome: '>=74', chromium: '>=74', 'microsoft edge': '>=88' })) {\n            return 'Chrome74';\n        }\n        else if (browser.satisfies({ chrome: '>=70', chromium: '>=70' })) {\n            return 'Chrome70';\n        }\n        else if (browser.satisfies({ chrome: '>=67', chromium: '>=67' })) {\n            return 'Chrome67';\n        }\n        else if (browser.satisfies({ chrome: '>=55', chromium: '>=55' })) {\n            return 'Chrome55';\n        }\n        // Firefox.\n        else if (browser.satisfies({ firefox: '>=60' })) {\n            return 'Firefox60';\n        }\n        // Firefox on iOS.\n        else if (browser.satisfies({ ios: { OS: '>=14.3', firefox: '>=30.0' } })) {\n            return 'Safari12';\n        }\n        // Safari with Unified-Plan support enabled.\n        else if (browser.satisfies({ safari: '>=12.0' }) &&\n            typeof RTCRtpTransceiver !== 'undefined' &&\n            RTCRtpTransceiver.prototype.hasOwnProperty('currentDirection')) {\n            return 'Safari12';\n        }\n        // Safari with Plab-B support.\n        else if (browser.satisfies({ safari: '>=11' })) {\n            return 'Safari11';\n        }\n        // Old Edge with ORTC support.\n        else if (browser.satisfies({ 'microsoft edge': '>=11' }) &&\n            browser.satisfies({ 'microsoft edge': '<=18' })) {\n            return 'Edge11';\n        }\n        // Best effort for Chromium based browsers.\n        else if (engine.name && engine.name.toLowerCase() === 'blink') {\n            const match = ua.match(/(?:(?:Chrome|Chromium))[ /](\\w+)/i);\n            if (match) {\n                const version = Number(match[1]);\n                if (version >= 74) {\n                    return 'Chrome74';\n                }\n                else if (version >= 70) {\n                    return 'Chrome70';\n                }\n                else if (version >= 67) {\n                    return 'Chrome67';\n                }\n                else {\n                    return 'Chrome55';\n                }\n            }\n            else {\n                return 'Chrome74';\n            }\n        }\n        // Unsupported browser.\n        else {\n            logger.warn('this._detectDevice() | browser not supported [name:%s, version:%s]', browser.getBrowserName(), browser.getBrowserVersion());\n            return undefined;\n        }\n    }\n    // Unknown device.\n    else {\n        logger.warn('this._detectDevice() | unknown device');\n        return undefined;\n    }\n}\nexports.detectDevice = detectDevice;\nclass Device {\n    /**\n     * Create a new Device to connect to mediasoup server.\n     *\n     * @throws {UnsupportedError} if device is not supported.\n     */\n    constructor({ handlerName, handlerFactory, Handler } = {}) {\n        // Loaded flag.\n        this._loaded = false;\n        // Observer instance.\n        this._observer = new EnhancedEventEmitter_1.EnhancedEventEmitter();\n        logger.debug('constructor()');\n        // Handle deprecated option.\n        if (Handler) {\n            logger.warn('constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead');\n            if (typeof Handler === 'string')\n                handlerName = Handler;\n            else\n                throw new TypeError('non string Handler option no longer supported, use handlerFactory instead');\n        }\n        if (handlerName && handlerFactory) {\n            throw new TypeError('just one of handlerName or handlerInterface can be given');\n        }\n        if (handlerFactory) {\n            this._handlerFactory = handlerFactory;\n        }\n        else {\n            if (handlerName) {\n                logger.debug('constructor() | handler given: %s', handlerName);\n            }\n            else {\n                handlerName = detectDevice();\n                if (handlerName)\n                    logger.debug('constructor() | detected handler: %s', handlerName);\n                else\n                    throw new errors_1.UnsupportedError('device not supported');\n            }\n            switch (handlerName) {\n                case 'Chrome74':\n                    this._handlerFactory = Chrome74_1.Chrome74.createFactory();\n                    break;\n                case 'Chrome70':\n                    this._handlerFactory = Chrome70_1.Chrome70.createFactory();\n                    break;\n                case 'Chrome67':\n                    this._handlerFactory = Chrome67_1.Chrome67.createFactory();\n                    break;\n                case 'Chrome55':\n                    this._handlerFactory = Chrome55_1.Chrome55.createFactory();\n                    break;\n                case 'Firefox60':\n                    this._handlerFactory = Firefox60_1.Firefox60.createFactory();\n                    break;\n                case 'Safari12':\n                    this._handlerFactory = Safari12_1.Safari12.createFactory();\n                    break;\n                case 'Safari11':\n                    this._handlerFactory = Safari11_1.Safari11.createFactory();\n                    break;\n                case 'Edge11':\n                    this._handlerFactory = Edge11_1.Edge11.createFactory();\n                    break;\n                case 'ReactNative':\n                    this._handlerFactory = ReactNative_1.ReactNative.createFactory();\n                    break;\n                default:\n                    throw new TypeError(`unknown handlerName \"${handlerName}\"`);\n            }\n        }\n        // Create a temporal handler to get its name.\n        const handler = this._handlerFactory();\n        this._handlerName = handler.name;\n        handler.close();\n        this._extendedRtpCapabilities = undefined;\n        this._recvRtpCapabilities = undefined;\n        this._canProduceByKind =\n            {\n                audio: false,\n                video: false\n            };\n        this._sctpCapabilities = undefined;\n    }\n    /**\n     * The RTC handler name.\n     */\n    get handlerName() {\n        return this._handlerName;\n    }\n    /**\n     * Whether the Device is loaded.\n     */\n    get loaded() {\n        return this._loaded;\n    }\n    /**\n     * RTP capabilities of the Device for receiving media.\n     *\n     * @throws {InvalidStateError} if not loaded.\n     */\n    get rtpCapabilities() {\n        if (!this._loaded)\n            throw new errors_1.InvalidStateError('not loaded');\n        return this._recvRtpCapabilities;\n    }\n    /**\n     * SCTP capabilities of the Device.\n     *\n     * @throws {InvalidStateError} if not loaded.\n     */\n    get sctpCapabilities() {\n        if (!this._loaded)\n            throw new errors_1.InvalidStateError('not loaded');\n        return this._sctpCapabilities;\n    }\n    /**\n     * Observer.\n     *\n     * @emits newtransport - (transport: Transport)\n     */\n    get observer() {\n        return this._observer;\n    }\n    /**\n     * Initialize the Device.\n     */\n    async load({ routerRtpCapabilities }) {\n        logger.debug('load() [routerRtpCapabilities:%o]', routerRtpCapabilities);\n        routerRtpCapabilities = utils.clone(routerRtpCapabilities, undefined);\n        // Temporal handler to get its capabilities.\n        let handler;\n        try {\n            if (this._loaded)\n                throw new errors_1.InvalidStateError('already loaded');\n            // This may throw.\n            ortc.validateRtpCapabilities(routerRtpCapabilities);\n            handler = this._handlerFactory();\n            const nativeRtpCapabilities = await handler.getNativeRtpCapabilities();\n            logger.debug('load() | got native RTP capabilities:%o', nativeRtpCapabilities);\n            // This may throw.\n            ortc.validateRtpCapabilities(nativeRtpCapabilities);\n            // Get extended RTP capabilities.\n            this._extendedRtpCapabilities = ortc.getExtendedRtpCapabilities(nativeRtpCapabilities, routerRtpCapabilities);\n            logger.debug('load() | got extended RTP capabilities:%o', this._extendedRtpCapabilities);\n            // Check whether we can produce audio/video.\n            this._canProduceByKind.audio =\n                ortc.canSend('audio', this._extendedRtpCapabilities);\n            this._canProduceByKind.video =\n                ortc.canSend('video', this._extendedRtpCapabilities);\n            // Generate our receiving RTP capabilities for receiving media.\n            this._recvRtpCapabilities =\n                ortc.getRecvRtpCapabilities(this._extendedRtpCapabilities);\n            // This may throw.\n            ortc.validateRtpCapabilities(this._recvRtpCapabilities);\n            logger.debug('load() | got receiving RTP capabilities:%o', this._recvRtpCapabilities);\n            // Generate our SCTP capabilities.\n            this._sctpCapabilities = await handler.getNativeSctpCapabilities();\n            logger.debug('load() | got native SCTP capabilities:%o', this._sctpCapabilities);\n            // This may throw.\n            ortc.validateSctpCapabilities(this._sctpCapabilities);\n            logger.debug('load() succeeded');\n            this._loaded = true;\n            handler.close();\n        }\n        catch (error) {\n            if (handler)\n                handler.close();\n            throw error;\n        }\n    }\n    /**\n     * Whether we can produce audio/video.\n     *\n     * @throws {InvalidStateError} if not loaded.\n     * @throws {TypeError} if wrong arguments.\n     */\n    canProduce(kind) {\n        if (!this._loaded)\n            throw new errors_1.InvalidStateError('not loaded');\n        else if (kind !== 'audio' && kind !== 'video')\n            throw new TypeError(`invalid kind \"${kind}\"`);\n        return this._canProduceByKind[kind];\n    }\n    /**\n     * Creates a Transport for sending media.\n     *\n     * @throws {InvalidStateError} if not loaded.\n     * @throws {TypeError} if wrong arguments.\n     */\n    createSendTransport({ id, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, appData = {} }) {\n        logger.debug('createSendTransport()');\n        return this._createTransport({\n            direction: 'send',\n            id: id,\n            iceParameters: iceParameters,\n            iceCandidates: iceCandidates,\n            dtlsParameters: dtlsParameters,\n            sctpParameters: sctpParameters,\n            iceServers: iceServers,\n            iceTransportPolicy: iceTransportPolicy,\n            additionalSettings: additionalSettings,\n            proprietaryConstraints: proprietaryConstraints,\n            appData: appData\n        });\n    }\n    /**\n     * Creates a Transport for receiving media.\n     *\n     * @throws {InvalidStateError} if not loaded.\n     * @throws {TypeError} if wrong arguments.\n     */\n    createRecvTransport({ id, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, appData = {} }) {\n        logger.debug('createRecvTransport()');\n        return this._createTransport({\n            direction: 'recv',\n            id: id,\n            iceParameters: iceParameters,\n            iceCandidates: iceCandidates,\n            dtlsParameters: dtlsParameters,\n            sctpParameters: sctpParameters,\n            iceServers: iceServers,\n            iceTransportPolicy: iceTransportPolicy,\n            additionalSettings: additionalSettings,\n            proprietaryConstraints: proprietaryConstraints,\n            appData: appData\n        });\n    }\n    _createTransport({ direction, id, iceParameters, iceCandidates, dtlsParameters, sctpParameters, iceServers, iceTransportPolicy, additionalSettings, proprietaryConstraints, appData = {} }) {\n        if (!this._loaded)\n            throw new errors_1.InvalidStateError('not loaded');\n        else if (typeof id !== 'string')\n            throw new TypeError('missing id');\n        else if (typeof iceParameters !== 'object')\n            throw new TypeError('missing iceParameters');\n        else if (!Array.isArray(iceCandidates))\n            throw new TypeError('missing iceCandidates');\n        else if (typeof dtlsParameters !== 'object')\n            throw new TypeError('missing dtlsParameters');\n        else if (sctpParameters && typeof sctpParameters !== 'object')\n            throw new TypeError('wrong sctpParameters');\n        else if (appData && typeof appData !== 'object')\n            throw new TypeError('if given, appData must be an object');\n        // Create a new Transport.\n        const transport = new Transport_1.Transport({\n            direction,\n            id,\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters,\n            iceServers,\n            iceTransportPolicy,\n            additionalSettings,\n            proprietaryConstraints,\n            appData,\n            handlerFactory: this._handlerFactory,\n            extendedRtpCapabilities: this._extendedRtpCapabilities,\n            canProduceByKind: this._canProduceByKind\n        });\n        // Emit observer event.\n        this._observer.safeEmit('newtransport', transport);\n        return transport;\n    }\n}\nexports.Device = Device;\n","\"use strict\";\n/**\n * The RTP capabilities define what mediasoup or an endpoint can receive at\n * media level.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./Device\"), exports);\n__exportStar(require(\"./Transport\"), exports);\n__exportStar(require(\"./Producer\"), exports);\n__exportStar(require(\"./Consumer\"), exports);\n__exportStar(require(\"./DataProducer\"), exports);\n__exportStar(require(\"./DataConsumer\"), exports);\n__exportStar(require(\"./RtpParameters\"), exports);\n__exportStar(require(\"./SctpParameters\"), exports);\n__exportStar(require(\"./handlers/HandlerInterface\"), exports);\n__exportStar(require(\"./errors\"), exports);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.debug = exports.parseScalabilityMode = exports.detectDevice = exports.Device = exports.version = exports.types = void 0;\nconst debug_1 = __importDefault(require(\"debug\"));\nexports.debug = debug_1.default;\nconst Device_1 = require(\"./Device\");\nObject.defineProperty(exports, \"Device\", { enumerable: true, get: function () { return Device_1.Device; } });\nObject.defineProperty(exports, \"detectDevice\", { enumerable: true, get: function () { return Device_1.detectDevice; } });\nconst types = __importStar(require(\"./types\"));\nexports.types = types;\n/**\n * Expose mediasoup-client version.\n */\nexports.version = '3.6.47';\n/**\n * Expose parseScalabilityMode() function.\n */\nvar scalabilityModes_1 = require(\"./scalabilityModes\");\nObject.defineProperty(exports, \"parseScalabilityMode\", { enumerable: true, get: function () { return scalabilityModes_1.parse; } });\n","type Timeout = ReturnType<typeof setTimeout>;\n\nexport type TransportState =\n  | \"not-connected\"\n  | \"connected\"\n  | \"connecting\"\n  | \"error\";\nexport class WSTransport {\n    private receiveTimeoutReference?: Timeout;\n    private sendTimeoutReference?: Timeout;\n\n    constructor(\n    /* eslint-disable no-unused-vars */\n    private readonly url: string,\n    private readonly onMessageCallback: (\n      transport: WSTransport,\n      data: string | ArrayBuffer | Blob\n    ) => unknown,\n    private readonly onStateChange?: (state: TransportState) => unknown,\n    private readonly protocols: string[] | undefined = undefined,\n    private autoconnect = true,\n    private receiveMessageTimeoutTime: number|null = 5000,\n    private sendKeepAliveMessageInterval:number|null = 1000 /* eslint-enable no-unused-vars */\n    ) {}\n\n    public async connect() {\n        return this._connect().then(\n            () => true,\n            () => false\n        );\n    }\n\n    public disconnect(code?: number | undefined, reason?: string): void {\n        this.ws?.close(code, reason);\n        if (this.receiveTimeoutReference) {\n            clearTimeout(this.receiveTimeoutReference);\n        }\n        if (this.sendTimeoutReference) {\n            clearTimeout(this.sendTimeoutReference);\n        }\n    }\n\n    public async send(data: string | ArrayBufferLike | Blob | ArrayBufferView) {\n        let ws = this.ws;\n        if (!ws) {\n            if (!this.autoconnect) {\n                throw new Error(\"Not connected\");\n            }\n            ws = await this._connect();\n        }\n        ws.send(data);\n        this.resetNetworkSendTimeout();\n    }\n\n    private ws?: WebSocket;\n    private _wsPromise?: Promise<WebSocket>;\n    private async _connect() {\n        if (!this._wsPromise || this.ws?.readyState === WebSocket.CLOSED) {\n            this._wsPromise = new Promise<WebSocket>((resolve, reject) => {\n                const ws = new WebSocket(this.url, this.protocols);\n                ws.binaryType = \"arraybuffer\";\n                this.onStateChange?.(\"connecting\");\n                ws.addEventListener(\"open\", () => {\n                    this.onOpen();\n                    this.ws = ws;\n                    resolve(ws);\n                });\n                ws.addEventListener(\"error\", (e) => {\n                    console.error(e);\n                    this.onError();\n                    reject(e);\n                });\n                ws.addEventListener(\"close\", () => this.onClose());\n                ws.addEventListener(\"message\", (e) => this.onMessage(e.data));\n            });\n        }\n        return this._wsPromise;\n    }\n\n    private onMessage(data: string | ArrayBuffer | Blob) {\n        this.resetNetworkRecieveTimeout();\n        this.onMessageCallback(this, data);\n    }\n\n    private onOpen() {\n        this.resetNetworkSendTimeout();\n        this.resetNetworkRecieveTimeout();\n        this.onStateChange?.(\"connected\");\n    }\n\n    private onClose() {\n        this.ws = undefined;\n        this._wsPromise = undefined;\n        this.onStateChange?.(\"not-connected\");\n    }\n\n    private onError() {\n        this.onStateChange?.(\"error\");\n    }\n\n    private resetNetworkRecieveTimeout(): void {\n        if(this.receiveMessageTimeoutTime === null) { return; }\n        if (this.receiveTimeoutReference) {\n            clearTimeout(this.receiveTimeoutReference);\n        }\n        this.receiveTimeoutReference = setTimeout(\n            () => this.disconnect(4400, \"timeout\"),\n            this.receiveMessageTimeoutTime\n        );\n    }\n\n    private resetNetworkSendTimeout(): void {\n        if(this.sendKeepAliveMessageInterval === null) { return; }\n        if (this.sendTimeoutReference) {\n            clearTimeout(this.sendTimeoutReference);\n        }\n        this.sendTimeoutReference = setTimeout(\n            () => this.send(new Uint8Array(0)),\n            this.sendKeepAliveMessageInterval\n        );\n    }\n}\n","type PromiseCallbacks<S, E> = {\n  resolve: (success: S) => void;\n  reject: (error: E) => void;\n};\n\nexport class PromiseCompleter<\n  Success = void,\n  Failure = Error,\n  PromiseId = string\n> {\n    public constructor(\n    private readonly callbacks = new Map<\n      PromiseId,\n      PromiseCallbacks<Success, Failure>\n    >()\n    ) {}\n\n    public createPromise(id: PromiseId) {\n        if (this.callbacks.has(id)) {\n            throw new Error(`PromiseId(${id}) is already in-use`);\n        }\n        return new Promise<Success>((resolve, reject) => {\n            this.callbacks.set(id, { resolve, reject });\n        });\n    }\n\n    public resolve(id: PromiseId, result: Success) {\n        this.useCallbacks(id).resolve(result);\n    }\n\n    public reject(id: PromiseId, error: Failure) {\n        this.useCallbacks(id).reject(error);\n    }\n\n    private useCallbacks(requestId: PromiseId) {\n        const completer = this.callbacks.get(requestId);\n        if (!completer) {\n            throw new Error(`Recieved response for unknown requestID(${requestId})`);\n        }\n        this.callbacks.delete(requestId);\n        return completer;\n    }\n}\n","import { createSlice, CaseReducer, PayloadAction } from \"@reduxjs/toolkit\";\nimport { ProducerID, SfuID } from \"../network/sfu\";\nimport { types as MediaSoup } from \"mediasoup-client\";\nimport { ValueOf } from \"../types\";\n\nexport type WebRtcState = {\n    sfus: Record<SfuID, SfuState>\n\n    videoInputs: MediaDeviceInfo[]\n    audioInputs: MediaDeviceInfo[]\n    audioOutputs: MediaDeviceInfo[]\n}\n\nexport type SfuState = {\n    consumerConnectionState?: MediaSoup.ConnectionState\n    producerConnectionState?: MediaSoup.ConnectionState\n    tracks: Record<ProducerID, TrackStatus>\n}\n\nexport type TrackStatus = {\n    localPause: boolean\n    globalPause: boolean\n}\n\nexport const initialState: WebRtcState = {\n    sfus: {},\n    videoInputs: [],\n    audioInputs: [],\n    audioOutputs: [],\n};\n\nconst setDevices: Reducer<MediaDeviceInfo[]> = (state, { payload: devices }) => {\n    const videoInputs: MediaDeviceInfo[] = [];\n    const audioInputs: MediaDeviceInfo[] = [];\n    const audioOutputs: MediaDeviceInfo[] = [];\n\n    devices.forEach(d => {\n        switch(d.kind) {\n        case \"videoinput\":\n            videoInputs.push(d);\n            break;\n        case \"audioinput\":\n            audioInputs.push(d);\n            break;\n        case \"audiooutput\":\n            audioOutputs.push(d);\n            break;\n        }\n    });\n\n    state.videoInputs = videoInputs;\n    state.audioInputs = audioInputs;\n    state.audioOutputs = audioOutputs;    \n};\n\ntype Reducer<P = void, T extends string = string> = CaseReducer<WebRtcState, PayloadAction<P, T>>;\n\nconst closeTrack: Reducer<{ id: SfuID, producerId: ProducerID }> = (state, { payload: { id, producerId } }) => {\n    const sfu = state.sfus[id];\n    if (sfu) {\n        delete sfu.tracks[producerId];\n    }\n};\n\nconst setTrack: Reducer<{ id: SfuID, producerId: ProducerID, status: TrackStatus }> = (state, { payload: { id, producerId, status } }) => {\n    const sfu = state.sfus[id];\n    if (sfu) {\n        sfu.tracks[producerId] = status;\n    } else {\n        state.sfus[id] = {\n            tracks: {\n                [producerId]: status\n            },\n        };\n    }\n};\n\nconst setConsumerConnectionStatus: Reducer<{ id: SfuID, connectionState: MediaSoup.ConnectionState }> = (state, { payload: { id, connectionState } }) => {\n    const sfu = state.sfus[id];\n    if (sfu) {\n        sfu.consumerConnectionState = connectionState;\n    } else {\n        state.sfus[id] = {\n            consumerConnectionState: connectionState,\n            tracks: {},\n        };\n    }\n};\n\nconst setProducerConnectionStatus: Reducer<{ id: SfuID, connectionState: MediaSoup.ConnectionState }> = (state, { payload: { id, connectionState } }) => {\n    const sfu = state.sfus[id];\n    if (sfu) {\n        sfu.producerConnectionState = connectionState;\n    } else {\n        state.sfus[id] = {\n            producerConnectionState: connectionState,\n            tracks: {},\n        };\n    }\n};\n\n\nexport const webRtcSliceActionPrefix = \"webrtc\";\nconst webrtcSlice = createSlice({\n    name: webRtcSliceActionPrefix,\n    initialState,\n    reducers: {\n        closeTrack,\n        setTrack,\n        setConsumerConnectionStatus,\n        setProducerConnectionStatus,\n        setDevices,\n    },\n});\n\nexport const webrtcActions = webrtcSlice.actions;\nexport const webrtcReducer = webrtcSlice.reducer;\nexport type WebRtcAction = ReturnType<ValueOf<typeof webrtcSlice.actions>>;","import { types as MediaSoup, Device } from \"mediasoup-client\";\nimport { NewType } from \"../types\";\nimport { TransportState, WSTransport } from \"../network/websocketTransport\";\nimport { PromiseCompleter } from \"../network/promiseCompleter\";\nimport { Store } from \"@reduxjs/toolkit\";\nimport { Action, State } from \"../redux/reducer\";\nimport { webrtcActions } from \"../redux/webrtc\";\nimport produce from \"immer\";\n\nexport type SfuID = NewType<string, \"sfuId\">\nexport const newSfuID = (id: string) => id as SfuID;\n\nexport type ProducerID = NewType<string, \"producerId\">\nexport const newProducerID = (id: string) => id as ProducerID;\n\nexport type ConsumerID = NewType<string, \"consumerId\">\nexport const newConsumerID = (id: string) => id as ConsumerID;\n\nexport type RequestID = NewType<string, \"requestId\">\nexport const newRequestID = (id: string) => id as RequestID;\n\ntype RequestMessage = {\n    id: RequestID,\n    request: Request,\n}\n\ntype Request = {\n    routerRtpCapabilities?: unknown;\n    producerTransport?: unknown;\n    producerTransportConnect?: { dtlsParameters: MediaSoup.DtlsParameters };\n    createTrack?: { kind: MediaSoup.MediaKind, rtpParameters: MediaSoup.RtpParameters };\n\n    rtpCapabilities?: MediaSoup.RtpCapabilities;\n    consumerTransport?: unknown;\n    consumerTransportConnect?: { dtlsParameters: MediaSoup.DtlsParameters };\n    createConsumer?: { producerId: ProducerID };\n\n    locallyPause?: { paused: boolean, id: ProducerID };\n    globallyPause?: { paused: boolean, id: ProducerID };\n    end?: unknown;\n}\n\ntype Response = {\n    id: RequestID;\n    error: string,\n} | {\n    id: RequestID;\n    result: Result | void,\n}\n\ntype ResponseMessage = {\n    response?: Response,\n    consumerPaused?: PauseMessage,\n    producerPaused?: PauseMessage,\n    consumerClosed?: ProducerID\n    producerClosed?: ProducerID\n}\n\nexport type PauseMessage = {\n    id: ProducerID,\n    localPause: boolean,\n    globalPause: boolean,\n}\n\nexport type WebRtcTransportResult = {\n    id: string,\n    iceCandidates: MediaSoup.IceCandidate[],\n    iceParameters: MediaSoup.IceParameters,\n    dtlsParameters: MediaSoup.DtlsParameters,\n    sctpParameters?: MediaSoup.SctpParameters,\n}\n\n\ntype Result = {\n    routerRtpCapabilities?: MediaSoup.RtpCapabilities;\n    producerTransport?: WebRtcTransportResult;\n    createTrack?: ProducerID\n    consumerTransport?: WebRtcTransportResult;\n    consumerCreated?: {\n        id: ConsumerID,\n        producerId: ProducerID,\n        kind: MediaSoup.MediaKind,\n        rtpParameters: MediaSoup.RtpParameters,\n        paused: boolean,\n    },\n}\n\nexport type Track = {\n    producer?: MediaSoup.Producer\n    consumer?: MediaSoup.Consumer\n    localPause: boolean\n    globalPause: boolean\n}\n\nexport class SFU {\n    private readonly device = new Device();\n    private readonly tracks = new Map<ProducerID, Track>();\n\n    private readonly promiseCompleter = new PromiseCompleter<Result | void, string, RequestID>();\n    private readonly ws: WSTransport;\n\n    public constructor(\n        public readonly id: SfuID,\n        private readonly store: Store<unknown, Action>,\n        public readonly url: string,\n    ) {\n        this.ws = new WSTransport(\n            url,\n            (_, d) => this.onTransportMessage(d),\n            t => this.onTransportStateChange(t),\n            [\"live-sfu\"],\n            true,\n            null,\n        );\n        this.ws.connect().catch(e => console.error(e));\n    }\n\n    public async getTrack(id: ProducerID) {\n        const track = this.tracks.get(id);\n        const mediaTrack = track?.producer?.track || track?.consumer?.track;\n        if (mediaTrack) { return mediaTrack; }\n        const consumer = await this.consumeTrack(id);\n        return consumer.track;\n    }\n    \n    public async createProducer(track: MediaStreamTrack) {\n        const producerTransport = await this.producerTransport();\n        const canProduce = this.device.canProduce(track.kind as MediaSoup.MediaKind);\n        if (!canProduce) { console.warn(`It seems like the remote router is not ready or can not recieve '${track.kind}' tracks`); }\n        const producer = await producerTransport.produce({\n            track,\n            zeroRtpOnPause: true,\n            disableTrackOnPause: true,\n            stopTracks: true,\n        });\n        producer.on(\"transportclose\", () => console.log(`Producer(${producer.id})'s Transport(${producerTransport.id}) closed`));\n        producer.on(\"trackended\", () => console.log(`Producer(${producer.id}) ended`));\n\n        const id = producer.id as ProducerID;\n        this.setTrack(id, {\n            producer,\n            localPause: producer.paused,\n            globalPause: false\n        });\n        if(producer.paused) { await this.localPause(id, false); }\n        return producer;\n    }\n\n    private async consumeTrack(producerId: ProducerID) {\n        const consumerTransport = await this.consumerTransport();\n        await this.sendRtpCapabilities();\n        const response = await this.request({ createConsumer: { producerId } });\n        if (!response) { throw new Error(`Received empty response from SFU when trying to consume producerId(${producerId})`); }\n        if (!response.consumerCreated) { throw new Error(`Received response without consumer parameters from SFU when trying to consume producerId(${producerId})`); }\n\n        const consumer = await consumerTransport.consume(response.consumerCreated);\n        consumer.on(\"transportclose\", () => console.log(`Consumer(${consumer.id})'s Transport(${consumerTransport.id}) closed`));\n        consumer.on(\"trackended\", () => console.log(`Consumer(${consumer.id}) ended`));\n\n        this.setTrack(producerId as ProducerID, {\n            consumer,\n            localPause: consumer.paused,\n            globalPause: false\n        });\n        this.request({locallyPause: {id: producerId, paused: false}});\n        return consumer;\n    }\n\n    public async globalPause(id: ProducerID, paused: boolean) {\n        return this.request({globallyPause: {id, paused}});\n    }\n    public async localPause(id: ProducerID, paused: boolean) {\n        return this.request({locallyPause: {id, paused}});\n    }\n\n\n    @ExecuteOnce()\n    private async consumerTransport() {\n        await this.loadDevice();\n        const response = await this.request({ consumerTransport: {} });\n        if (!response) { throw new Error(\"Empty response from SFU\"); }\n        const { consumerTransport } = response;\n        if (!consumerTransport) { throw new Error(\"Response from SFU does not contain consumer transport\"); }\n        const transport = this.device.createRecvTransport(consumerTransport);\n        transport.on(\"connect\", ({ dtlsParameters }, success, error) => this.request({ consumerTransportConnect: { dtlsParameters } }).then(success, error));\n        transport.on(\"connectionstatechange\", (connectionState: MediaSoup.ConnectionState) => {\n            const action = webrtcActions.setConsumerConnectionStatus({ id: this.id, connectionState });\n            this.store.dispatch(action);\n        });\n        return transport;\n    }\n\n    @ExecuteOnce()\n    private async producerTransport() {\n        await this.loadDevice();\n        const result = await this.request({ producerTransport: {} });\n        if (!result) { throw new Error(\"Empty response from SFU\"); }\n        const { producerTransport } = result;\n        if (!producerTransport) { throw new Error(\"Response from SFU does not contain producer transport\"); }\n        const transport = this.device.createSendTransport(producerTransport);\n        transport.on(\"connect\", (producerTransportConnect, callback, error) => this.request({ producerTransportConnect }).then(callback, error));\n        transport.on(\"produce\", async (createTrack, callback, error) => {\n            try {\n                const response = await this.request({ createTrack });\n                if(!response) { return error(\"Empty response from SFU\"); }\n                const id = response.createTrack;\n                if(!response.createTrack) { return error(\"Empty response from SFU\"); }\n                callback({id});\n            } catch(e) {\n                error(e);\n            }\n        });\n        transport.on(\"connectionstatechange\", (connectionState: MediaSoup.ConnectionState) => {\n            const action = webrtcActions.setProducerConnectionStatus({ id: this.id, connectionState });\n            this.store.dispatch(action);\n        });\n        return transport;\n    }\n\n\n    @ExecuteOnce()\n    private async sendRtpCapabilities() {\n        const { rtpCapabilities } = this.device;\n        await this.request({ rtpCapabilities });\n    }\n\n    @ExecuteOnce()\n    private async loadDevice() {\n        const response = await this.request({ routerRtpCapabilities: {} });\n        if (!response) { throw new Error(\"Empty routerRtpCapabilities response from SFU\"); }\n        const routerRtpCapabilities = response.routerRtpCapabilities;\n        if (!routerRtpCapabilities) { throw new Error(\"Response from SFU does not contain routerRtpCapabilities\"); }\n        await this.device.load({ routerRtpCapabilities });\n    }\n\n    private async request(request: Request) {\n        const id = this.generateRequestId();\n        const message: RequestMessage = { id, request };\n        await this.ws.send(JSON.stringify(message));\n        return this.promiseCompleter.createPromise(id);\n    }\n\n    private _requestId = 0;\n    private generateRequestId() { return `${this._requestId++}` as RequestID; }\n\n    private onTransportStateChange(state: TransportState) {\n        console.log(`Transport state changed to ${state}`);\n    }\n\n    private onTransportMessage(data: string | ArrayBuffer | Blob) {\n        const message = SFU.parse(data);\n        if (!message) {  return this.ws.disconnect(4400); }\n        this.handleMessage(message).catch(e => console.error(e));\n    }\n\n    private static parse(data: string | ArrayBuffer | Blob): ResponseMessage | undefined {\n        if (typeof data !== \"string\") { return; }\n        if(data.length === 0) { return {}; }\n        const response = JSON.parse(data.toString()) as ResponseMessage;\n        if (typeof response !== \"object\" || !response) { return; }\n        return response;\n    }\n\n    private async handleMessage(message: ResponseMessage) {\n        if (message.response) { this.response(message.response); }\n        if (message.consumerPaused) { this.handlePauseMessage(message.consumerPaused); }\n        if (message.producerPaused) { this.handlePauseMessage(message.producerPaused); }\n\n        //Assumes that the user can't have both a producer and consumer for the same track\n        if (message.consumerClosed) { this.closeTrack(message.consumerClosed); }\n        if (message.producerClosed) { this.closeTrack(message.producerClosed); }\n    }\n\n    private response(response: Response) {\n        const { id } = response;\n        if (\"error\" in response) {\n            this.promiseCompleter.reject(id, response.error);\n        } else {\n            this.promiseCompleter.resolve(id, response.result);\n        }\n    }\n\n    private closeTrack(producerId: ProducerID) {\n        this.tracks.delete(producerId);\n\n        const action = webrtcActions.closeTrack({ id: this.id, producerId });\n        this.store.dispatch(action);\n    }\n\n    private setTrack(producerId: ProducerID, track: Track) {\n        this.tracks.set(producerId, track);\n        const action = webrtcActions.setTrack({\n            id: this.id,\n            producerId,\n            status: {\n                localPause: track.localPause,\n                globalPause: track.globalPause\n            }\n        });\n        this.store.dispatch(action);\n    }\n\n    private handlePauseMessage({ id: producerId, localPause, globalPause }: PauseMessage) {\n        const track = this.tracks.get(producerId);\n        console.log(\"pause\", track, localPause, globalPause);\n        if (!track) { return console.error(`Could not find Track(${producerId}) to pause/resume producer`); }\n\n        track.localPause = localPause;\n        track.globalPause = globalPause;\n\n        const action = webrtcActions.setTrack({ id: this.id, producerId, status: { localPause, globalPause } });\n        this.store.dispatch(action);\n    }\n}\n\n/**\n *  Decorator that ensures the decorated function body is executed only once, unless the function throws an error.\n *  All subsequent calls return the same value as the first call\n **/\nfunction ExecuteOnce() {\n    return (_target: object, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n        const childFunction = descriptor.value;\n        if (typeof childFunction !== \"function\") {\n            throw new TypeError(`Only methods can be decorated with @ExecuteOnce.  Property ${String(propertyKey)} is not a method.`);\n        }\n        let shouldReturnCache = false;\n        let cache: unknown;\n        descriptor.value = function (...args: any[]) {\n            if(shouldReturnCache) { return cache; }\n            try {\n                const result = cache = childFunction.apply(this, args);\n                shouldReturnCache = true;\n                if(result instanceof Promise) { result.catch(() => shouldReturnCache = false); }\n                return result;\n            } catch (e) {\n                shouldReturnCache = false;\n                throw e;\n            }\n\n        };\n        return descriptor;\n    };\n}","import { Store } from \"@reduxjs/toolkit\";\nimport React from \"react\";\nimport { ProducerID, SFU, SfuID, newSfuID, newProducerID } from \"../network/sfu\";\nimport { Action, State } from \"../redux/reducer\";\nimport { types as MediaSoup } from \"mediasoup-client\";\n\nexport class WebRtcManager {\n    public async getTrack({sfuId: sfu, producerId: producer}: TrackLocation) {\n        return await this.sfu(sfu).getTrack(producer);\n    }\n\n    public microphoneConstraints?: MediaStreamConstraints[\"audio\"];\n    public readonly microphone = new TrackSender(\n        () => this.sfu(),\n        microphoneGetter(() => this.microphoneConstraints),\n    );\n    \n    public cameraConstraints?: MediaStreamConstraints[\"video\"];\n    public readonly camera = new TrackSender(\n        () => this.sfu(),\n        cameraGetter(() => this.cameraConstraints),\n    );\n\n    public screenCaptureConstraints?: DisplayMediaStreamConstraints;\n    public readonly screenshare = new StreamSender(\n        () => this.sfu(),\n        screenCaptureGetter(() => this.screenCaptureConstraints),\n    );\n\n    public async globalPause({sfuId, producerId}: TrackLocation, paused: boolean) {\n        const sfu = this.sfus.get(sfuId);\n        if(!sfu) {throw new Error(`Not connected to SFU(${sfuId})`); }\n        await sfu.globalPause(producerId, paused);\n    }\n\n    public async localPause({sfuId, producerId}: TrackLocation, paused: boolean) {\n        const sfu = this.sfus.get(sfuId);\n        if(!sfu) {throw new Error(`Not connected to SFU(${sfuId})`); }\n        await sfu.localPause(producerId, paused);\n    }\n\n    public constructor(\n        public readonly store: Store<unknown, Action>,\n        public readonly selector: (s: unknown) => State,\n        public readonly getUrl: (id: SfuID) => URL,\n    ) {}\n\n    private readonly sfus = new Map<SfuID, SFU>();\n\n    private sfu(id: SfuID = newSfuID(\"test-sfu\")) {\n        let sfu = this.sfus.get(id);\n        if (!sfu) {\n            const url = this.getUrl(id).toString();\n            sfu = new SFU(id, this.store, url);\n            this.sfus.set(id, sfu);\n        }\n        return sfu;\n    }\n}\n\nexport class StreamSender {\n    public async start() {\n        await Promise.allSettled([\n            this.videoSender.start(), \n            this.audioSender.start(),\n        ]);\n    }\n\n    public async stop() {\n        await Promise.allSettled([\n            this.videoSender.stop(), \n            this.audioSender.stop(),\n        ]);\n    }\n\n    public readonly videoSender = new TrackSender(this.getSfu, () => videoTrack(this.getStream()));\n    public readonly audioSender = new TrackSender(this.getSfu, () => audioTrack(this.getStream()));\n\n    public constructor(\n        private readonly getSfu: () => SFU,\n        private readonly getStream: () => Promise<MediaStream>,\n    ) {}\n}\n\nexport class TrackSender {\n    public async start() {\n        const track = await this.getTrack();\n        if(!this.context) {\n            this.context = this.send(track);\n        } else {\n            const { producer, sfu } = await this.context;\n            if(producer.track === track) { return; }\n            await producer.replaceTrack({track});\n            await TrackSender.pause(sfu, producer, false);\n        }\n    }\n\n    public async stop() {\n        if(!this.context) { return; }\n        const { producer, sfu } = await this.context;\n        producer.track?.stop();\n        await producer.replaceTrack({track: null});\n        await TrackSender.pause(sfu, producer, true);\n    }\n\n    public get location() { return this._location; }\n\n    public constructor(\n        private readonly getSfu: () => SFU,\n        private readonly getTrack: () => Promise<MediaStreamTrack>,\n    ) {}\n\n    private context?: Promise<{ sfu: SFU, producer: MediaSoup.Producer }>;\n    private _location?: TrackLocation;\n    private async send(track: MediaStreamTrack, sfu = this.getSfu()) {\n        const producer = await sfu.createProducer(track);\n        this._location = { sfuId: sfu.id, producerId: newProducerID(producer.id) };\n        return { sfu, producer };\n    }\n\n    private static async pause(sfu: SFU, producer: MediaSoup.Producer, paused: boolean) {\n        if(producer.paused !== paused) {\n            const id = newProducerID(producer.id);\n            await sfu.localPause(id, paused);\n        }\n    }\n}\n\nexport type TrackLocation = { sfuId: SfuID, producerId: ProducerID }\n\nfunction microphoneGetter(getAudioContraints?: () => MediaStreamConstraints[\"audio\"]) {\n    return createTrackCache(\n        () => audioTrack(\n            navigator.mediaDevices.getUserMedia({\n                audio: getAudioContraints?.() || true,\n            })\n        )\n    );\n}\n\nfunction cameraGetter(getVideoContraints?: () => MediaStreamConstraints[\"video\"]) {\n    return createTrackCache(\n        () => videoTrack(\n            navigator.mediaDevices.getUserMedia({\n                video: getVideoContraints?.() || true,\n            })\n        )\n    );\n}\n\nfunction screenCaptureGetter(getContraints?: () =>  DisplayMediaStreamConstraints|undefined) {\n    return createCache(async (clearCache) => {\n        try {\n            const contraints = getContraints?.();\n            const stream = await navigator.mediaDevices.getDisplayMedia(contraints);\n            stream.getTracks().forEach(t => t.addEventListener(\"ended\", clearCache));\n            return stream;\n        } catch (e) {\n            clearCache();\n            throw e;\n        }\n    });\n}\n\nfunction createTrackCache(getTrack: () => Promise<MediaStreamTrack>) {\n    return createCache(async (clearCache) => {\n        try {\n            const track = await getTrack();\n            track.addEventListener(\"ended\", clearCache);\n            return track;\n        } catch (e) {\n            clearCache();\n            throw e;\n        }\n    });\n}\n\nconst audioTrack = async (stream: Promise<MediaStream>) => firstTrack((await stream).getAudioTracks());\nconst videoTrack = async (stream: Promise<MediaStream>) => firstTrack((await stream).getVideoTracks());\nfunction firstTrack(tracks: MediaStreamTrack[]) {\n    const track = tracks[0];\n    if(!track) { throw new Error(\"Could not get media track\"); }\n    if(tracks.length > 1) { console.log(`Got ${tracks.length} media tracks, can only use 1`); }\n    return track;\n}\n\ntype Initializer<T> = {(invalidateCache: {(): void}):T}\nfunction createCache<T>(initializeCache: Initializer<T> ): {():T} {\n    let cache: T|undefined;\n    let id = 0;\n    return () => {\n        if(cache === undefined) {\n            const invalidationId = id += 1;\n            const invalidateCache = () => {\n                if(invalidationId === id) { cache = undefined; }\n            };\n            cache = initializeCache(invalidateCache);\n        }\n        return cache;\n    };\n}\n\nexport const WebRtcContext = React.createContext<WebRtcManager>(null as any);\nWebRtcContext.displayName = \"KidsloopLiveWebRTC\";\n","import { useContext, useMemo } from \"react\";\nimport { useAsync, useAsyncCallback } from \"react-async-hook\";\nimport { useSelector } from \"react-redux\";\nimport { newSfuID, ProducerID } from \"../../network/sfu\";\nimport { State } from \"../../redux/reducer\";\nimport { StreamSender, TrackLocation, TrackSender, WebRtcContext } from \"../rtcContext\";\n\nexport const useCamera = (ctx = useContext(WebRtcContext)) => useTrackSender(ctx.camera, ctx);\nexport const useMicrophone = (ctx = useContext(WebRtcContext)) => useTrackSender(ctx.microphone, ctx);\nexport const useScreenshare = (ctx = useContext(WebRtcContext)) => useStreamSender(ctx.screenshare, ctx);\n\nexport const useStream = (\n    ids: ProducerID[],\n    ctx = useContext(WebRtcContext),\n) => {\n    const stream = useMemo(() => {\n        const stream = new MediaStream();\n        ids.map(producer => ctx\n            .getTrack({producerId: producer,sfuId: newSfuID(\"test-sfu\")})\n            .then(t => stream.addTrack(t)),\n        );\n        return stream;\n    }, ids);\n    return stream;\n};\n\nexport const useTrack = (\n    location: TrackLocation,\n    ctx = useContext(WebRtcContext),\n) => ({\n    track: useAsync((l: TrackLocation) => ctx.getTrack(l), [location]),\n    paused: useTrackPauseState(location, ctx),\n    localPause: useAsyncCallback((paused: boolean) => ctx.localPause(location, paused)),\n    globalPause: useAsyncCallback((paused: boolean) => ctx.globalPause(location, paused)),\n});\n\nconst useStreamSender = (\n    streamSender: StreamSender,\n    ctx = useContext(WebRtcContext),\n) => ({\n    start: useAsyncCallback(() => streamSender.start()),\n    stop: useAsyncCallback(() => streamSender.stop()),\n    videoPaused: useTrackPauseState(streamSender.videoSender.location, ctx),\n    audioPaused: useTrackPauseState(streamSender.audioSender.location, ctx),\n});\n\nconst useTrackSender = (\n    trackSender: TrackSender,\n    ctx = useContext(WebRtcContext),\n) => ({\n    start: useAsyncCallback(() => trackSender.start()),\n    stop: useAsyncCallback(() => trackSender.stop()),\n    paused: useTrackPauseState(trackSender.location, ctx),\n});\n\nconst useTrackPauseState = (\n    location?: TrackLocation,\n    ctx = useContext(WebRtcContext),\n) => useWebRtcState(\n    s => {\n        if(!location) {return;}\n        const { sfuId: sfu, producerId: producer } = location;\n        return s.webrtc.sfus[sfu]?.tracks[producer];\n    },\n    undefined,\n    ctx,\n);\n\nfunction useWebRtcState<T = unknown>(\n    selector: (state: State) => T,\n    equalityCheck?: (left: T, right: T) => boolean,\n    webrtc = useContext(WebRtcContext),\n) {\n    return useSelector(\n        (state) => selector(webrtc.selector(state)),\n        equalityCheck,\n    );\n}","// This file replaces `index.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\nimport { urlAlphabet } from './url-alphabet/index.js'\n\nif (false) {\n  // All bundlers will remove this block in the production bundle.\n  if (\n    typeof navigator !== 'undefined' &&\n    navigator.product === 'ReactNative' &&\n    typeof crypto === 'undefined'\n  ) {\n    throw new Error(\n      'React Native does not have a built-in secure random generator. ' +\n        'If you don’t need unpredictable IDs use `nanoid/non-secure`. ' +\n        'For secure IDs, import `react-native-get-random-values` ' +\n        'before Nano ID.'\n    )\n  }\n  if (typeof msCrypto !== 'undefined' && typeof crypto === 'undefined') {\n    throw new Error(\n      'Import file with `if (!window.crypto) window.crypto = window.msCrypto`' +\n        ' before importing Nano ID to fix IE 11 support'\n    )\n  }\n  if (typeof crypto === 'undefined') {\n    throw new Error(\n      'Your browser does not have secure random generator. ' +\n        'If you don’t need unpredictable IDs, you can use nanoid/non-secure.'\n    )\n  }\n}\n\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\n\nlet customRandom = (alphabet, size, getRandom) => {\n  // First, a bitmask is necessary to generate the ID. The bitmask makes bytes\n  // values closer to the alphabet size. The bitmask calculates the closest\n  // `2^31 - 1` number, which exceeds the alphabet size.\n  // For example, the bitmask for the alphabet size 30 is 31 (00011111).\n  // `Math.clz32` is not used, because it is not available in browsers.\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  // Though, the bitmask solution is not perfect since the bytes exceeding\n  // the alphabet size are refused. Therefore, to reliably generate the ID,\n  // the random bytes redundancy has to be satisfied.\n\n  // Note: every hardware random generator call is performance expensive,\n  // because the system call for entropy collection takes a lot of time.\n  // So, to avoid additional system calls, extra bytes are requested in advance.\n\n  // Next, a step determines how many random bytes to generate.\n  // The number of random bytes gets decided upon the ID size, mask,\n  // alphabet size, and magic number 1.6 (using 1.6 peaks at performance\n  // according to benchmarks).\n\n  // `-~f => Math.ceil(f)` if f is a float\n  // `-~i => i + 1` if i is an integer\n  let step = -~((1.6 * mask * size) / alphabet.length)\n\n  return () => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      // A compact alternative for `for (var i = 0; i < step; i++)`.\n      let j = step\n      while (j--) {\n        // Adding `|| ''` refuses a random byte that exceeds the alphabet size.\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\n\nlet customAlphabet = (alphabet, size) => customRandom(alphabet, size, random)\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  while (size--) {\n    // It is incorrect to use bytes exceeding the alphabet size.\n    // The following mask reduces the random byte in the 0-255 value\n    // range to the 0-63 value range. Therefore, adding hacks, such\n    // as empty string fallback or magic numbers, is unneccessary because\n    // the bitmask trims bytes down to the alphabet size.\n    let byte = bytes[size] & 63\n    if (byte < 36) {\n      // `0-9a-z`\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      // `A-Z`\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte < 63) {\n      id += '_'\n    } else {\n      id += '-'\n    }\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","\"use strict\";\r\nmodule.exports = asPromise;\r\n\r\n/**\r\n * Callback as used by {@link util.asPromise}.\r\n * @typedef asPromiseCallback\r\n * @type {function}\r\n * @param {Error|null} error Error, if any\r\n * @param {...*} params Additional arguments\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Returns a promise from a node-style callback function.\r\n * @memberof util\r\n * @param {asPromiseCallback} fn Function to call\r\n * @param {*} ctx Function context\r\n * @param {...*} params Function arguments\r\n * @returns {Promise<*>} Promisified function\r\n */\r\nfunction asPromise(fn, ctx/*, varargs */) {\r\n    var params  = new Array(arguments.length - 1),\r\n        offset  = 0,\r\n        index   = 2,\r\n        pending = true;\r\n    while (index < arguments.length)\r\n        params[offset++] = arguments[index++];\r\n    return new Promise(function executor(resolve, reject) {\r\n        params[offset] = function callback(err/*, varargs */) {\r\n            if (pending) {\r\n                pending = false;\r\n                if (err)\r\n                    reject(err);\r\n                else {\r\n                    var params = new Array(arguments.length - 1),\r\n                        offset = 0;\r\n                    while (offset < params.length)\r\n                        params[offset++] = arguments[offset];\r\n                    resolve.apply(null, params);\r\n                }\r\n            }\r\n        };\r\n        try {\r\n            fn.apply(ctx || null, params);\r\n        } catch (err) {\r\n            if (pending) {\r\n                pending = false;\r\n                reject(err);\r\n            }\r\n        }\r\n    });\r\n}\r\n","\"use strict\";\r\n\r\n/**\r\n * A minimal base64 implementation for number arrays.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar base64 = exports;\r\n\r\n/**\r\n * Calculates the byte length of a base64 encoded string.\r\n * @param {string} string Base64 encoded string\r\n * @returns {number} Byte length\r\n */\r\nbase64.length = function length(string) {\r\n    var p = string.length;\r\n    if (!p)\r\n        return 0;\r\n    var n = 0;\r\n    while (--p % 4 > 1 && string.charAt(p) === \"=\")\r\n        ++n;\r\n    return Math.ceil(string.length * 3) / 4 - n;\r\n};\r\n\r\n// Base64 encoding table\r\nvar b64 = new Array(64);\r\n\r\n// Base64 decoding table\r\nvar s64 = new Array(123);\r\n\r\n// 65..90, 97..122, 48..57, 43, 47\r\nfor (var i = 0; i < 64;)\r\n    s64[b64[i] = i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i - 59 | 43] = i++;\r\n\r\n/**\r\n * Encodes a buffer to a base64 encoded string.\r\n * @param {Uint8Array} buffer Source buffer\r\n * @param {number} start Source start\r\n * @param {number} end Source end\r\n * @returns {string} Base64 encoded string\r\n */\r\nbase64.encode = function encode(buffer, start, end) {\r\n    var parts = null,\r\n        chunk = [];\r\n    var i = 0, // output index\r\n        j = 0, // goto index\r\n        t;     // temporary\r\n    while (start < end) {\r\n        var b = buffer[start++];\r\n        switch (j) {\r\n            case 0:\r\n                chunk[i++] = b64[b >> 2];\r\n                t = (b & 3) << 4;\r\n                j = 1;\r\n                break;\r\n            case 1:\r\n                chunk[i++] = b64[t | b >> 4];\r\n                t = (b & 15) << 2;\r\n                j = 2;\r\n                break;\r\n            case 2:\r\n                chunk[i++] = b64[t | b >> 6];\r\n                chunk[i++] = b64[b & 63];\r\n                j = 0;\r\n                break;\r\n        }\r\n        if (i > 8191) {\r\n            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));\r\n            i = 0;\r\n        }\r\n    }\r\n    if (j) {\r\n        chunk[i++] = b64[t];\r\n        chunk[i++] = 61;\r\n        if (j === 1)\r\n            chunk[i++] = 61;\r\n    }\r\n    if (parts) {\r\n        if (i)\r\n            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));\r\n        return parts.join(\"\");\r\n    }\r\n    return String.fromCharCode.apply(String, chunk.slice(0, i));\r\n};\r\n\r\nvar invalidEncoding = \"invalid encoding\";\r\n\r\n/**\r\n * Decodes a base64 encoded string to a buffer.\r\n * @param {string} string Source string\r\n * @param {Uint8Array} buffer Destination buffer\r\n * @param {number} offset Destination offset\r\n * @returns {number} Number of bytes written\r\n * @throws {Error} If encoding is invalid\r\n */\r\nbase64.decode = function decode(string, buffer, offset) {\r\n    var start = offset;\r\n    var j = 0, // goto index\r\n        t;     // temporary\r\n    for (var i = 0; i < string.length;) {\r\n        var c = string.charCodeAt(i++);\r\n        if (c === 61 && j > 1)\r\n            break;\r\n        if ((c = s64[c]) === undefined)\r\n            throw Error(invalidEncoding);\r\n        switch (j) {\r\n            case 0:\r\n                t = c;\r\n                j = 1;\r\n                break;\r\n            case 1:\r\n                buffer[offset++] = t << 2 | (c & 48) >> 4;\r\n                t = c;\r\n                j = 2;\r\n                break;\r\n            case 2:\r\n                buffer[offset++] = (t & 15) << 4 | (c & 60) >> 2;\r\n                t = c;\r\n                j = 3;\r\n                break;\r\n            case 3:\r\n                buffer[offset++] = (t & 3) << 6 | c;\r\n                j = 0;\r\n                break;\r\n        }\r\n    }\r\n    if (j === 1)\r\n        throw Error(invalidEncoding);\r\n    return offset - start;\r\n};\r\n\r\n/**\r\n * Tests if the specified string appears to be base64 encoded.\r\n * @param {string} string String to test\r\n * @returns {boolean} `true` if probably base64 encoded, otherwise false\r\n */\r\nbase64.test = function test(string) {\r\n    return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string);\r\n};\r\n","\"use strict\";\r\nmodule.exports = EventEmitter;\r\n\r\n/**\r\n * Constructs a new event emitter instance.\r\n * @classdesc A minimal event emitter.\r\n * @memberof util\r\n * @constructor\r\n */\r\nfunction EventEmitter() {\r\n\r\n    /**\r\n     * Registered listeners.\r\n     * @type {Object.<string,*>}\r\n     * @private\r\n     */\r\n    this._listeners = {};\r\n}\r\n\r\n/**\r\n * Registers an event listener.\r\n * @param {string} evt Event name\r\n * @param {function} fn Listener\r\n * @param {*} [ctx] Listener context\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.on = function on(evt, fn, ctx) {\r\n    (this._listeners[evt] || (this._listeners[evt] = [])).push({\r\n        fn  : fn,\r\n        ctx : ctx || this\r\n    });\r\n    return this;\r\n};\r\n\r\n/**\r\n * Removes an event listener or any matching listeners if arguments are omitted.\r\n * @param {string} [evt] Event name. Removes all listeners if omitted.\r\n * @param {function} [fn] Listener to remove. Removes all listeners of `evt` if omitted.\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.off = function off(evt, fn) {\r\n    if (evt === undefined)\r\n        this._listeners = {};\r\n    else {\r\n        if (fn === undefined)\r\n            this._listeners[evt] = [];\r\n        else {\r\n            var listeners = this._listeners[evt];\r\n            for (var i = 0; i < listeners.length;)\r\n                if (listeners[i].fn === fn)\r\n                    listeners.splice(i, 1);\r\n                else\r\n                    ++i;\r\n        }\r\n    }\r\n    return this;\r\n};\r\n\r\n/**\r\n * Emits an event by calling its listeners with the specified arguments.\r\n * @param {string} evt Event name\r\n * @param {...*} args Arguments\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.emit = function emit(evt) {\r\n    var listeners = this._listeners[evt];\r\n    if (listeners) {\r\n        var args = [],\r\n            i = 1;\r\n        for (; i < arguments.length;)\r\n            args.push(arguments[i++]);\r\n        for (i = 0; i < listeners.length;)\r\n            listeners[i].fn.apply(listeners[i++].ctx, args);\r\n    }\r\n    return this;\r\n};\r\n","\"use strict\";\r\n\r\nmodule.exports = factory(factory);\r\n\r\n/**\r\n * Reads / writes floats / doubles from / to buffers.\r\n * @name util.float\r\n * @namespace\r\n */\r\n\r\n/**\r\n * Writes a 32 bit float to a buffer using little endian byte order.\r\n * @name util.float.writeFloatLE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Writes a 32 bit float to a buffer using big endian byte order.\r\n * @name util.float.writeFloatBE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Reads a 32 bit float from a buffer using little endian byte order.\r\n * @name util.float.readFloatLE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Reads a 32 bit float from a buffer using big endian byte order.\r\n * @name util.float.readFloatBE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Writes a 64 bit double to a buffer using little endian byte order.\r\n * @name util.float.writeDoubleLE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Writes a 64 bit double to a buffer using big endian byte order.\r\n * @name util.float.writeDoubleBE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Reads a 64 bit double from a buffer using little endian byte order.\r\n * @name util.float.readDoubleLE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Reads a 64 bit double from a buffer using big endian byte order.\r\n * @name util.float.readDoubleBE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n// Factory function for the purpose of node-based testing in modified global environments\r\nfunction factory(exports) {\r\n\r\n    // float: typed array\r\n    if (typeof Float32Array !== \"undefined\") (function() {\r\n\r\n        var f32 = new Float32Array([ -0 ]),\r\n            f8b = new Uint8Array(f32.buffer),\r\n            le  = f8b[3] === 128;\r\n\r\n        function writeFloat_f32_cpy(val, buf, pos) {\r\n            f32[0] = val;\r\n            buf[pos    ] = f8b[0];\r\n            buf[pos + 1] = f8b[1];\r\n            buf[pos + 2] = f8b[2];\r\n            buf[pos + 3] = f8b[3];\r\n        }\r\n\r\n        function writeFloat_f32_rev(val, buf, pos) {\r\n            f32[0] = val;\r\n            buf[pos    ] = f8b[3];\r\n            buf[pos + 1] = f8b[2];\r\n            buf[pos + 2] = f8b[1];\r\n            buf[pos + 3] = f8b[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.writeFloatLE = le ? writeFloat_f32_cpy : writeFloat_f32_rev;\r\n        /* istanbul ignore next */\r\n        exports.writeFloatBE = le ? writeFloat_f32_rev : writeFloat_f32_cpy;\r\n\r\n        function readFloat_f32_cpy(buf, pos) {\r\n            f8b[0] = buf[pos    ];\r\n            f8b[1] = buf[pos + 1];\r\n            f8b[2] = buf[pos + 2];\r\n            f8b[3] = buf[pos + 3];\r\n            return f32[0];\r\n        }\r\n\r\n        function readFloat_f32_rev(buf, pos) {\r\n            f8b[3] = buf[pos    ];\r\n            f8b[2] = buf[pos + 1];\r\n            f8b[1] = buf[pos + 2];\r\n            f8b[0] = buf[pos + 3];\r\n            return f32[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.readFloatLE = le ? readFloat_f32_cpy : readFloat_f32_rev;\r\n        /* istanbul ignore next */\r\n        exports.readFloatBE = le ? readFloat_f32_rev : readFloat_f32_cpy;\r\n\r\n    // float: ieee754\r\n    })(); else (function() {\r\n\r\n        function writeFloat_ieee754(writeUint, val, buf, pos) {\r\n            var sign = val < 0 ? 1 : 0;\r\n            if (sign)\r\n                val = -val;\r\n            if (val === 0)\r\n                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos);\r\n            else if (isNaN(val))\r\n                writeUint(2143289344, buf, pos);\r\n            else if (val > 3.4028234663852886e+38) // +-Infinity\r\n                writeUint((sign << 31 | 2139095040) >>> 0, buf, pos);\r\n            else if (val < 1.1754943508222875e-38) // denormal\r\n                writeUint((sign << 31 | Math.round(val / 1.401298464324817e-45)) >>> 0, buf, pos);\r\n            else {\r\n                var exponent = Math.floor(Math.log(val) / Math.LN2),\r\n                    mantissa = Math.round(val * Math.pow(2, -exponent) * 8388608) & 8388607;\r\n                writeUint((sign << 31 | exponent + 127 << 23 | mantissa) >>> 0, buf, pos);\r\n            }\r\n        }\r\n\r\n        exports.writeFloatLE = writeFloat_ieee754.bind(null, writeUintLE);\r\n        exports.writeFloatBE = writeFloat_ieee754.bind(null, writeUintBE);\r\n\r\n        function readFloat_ieee754(readUint, buf, pos) {\r\n            var uint = readUint(buf, pos),\r\n                sign = (uint >> 31) * 2 + 1,\r\n                exponent = uint >>> 23 & 255,\r\n                mantissa = uint & 8388607;\r\n            return exponent === 255\r\n                ? mantissa\r\n                ? NaN\r\n                : sign * Infinity\r\n                : exponent === 0 // denormal\r\n                ? sign * 1.401298464324817e-45 * mantissa\r\n                : sign * Math.pow(2, exponent - 150) * (mantissa + 8388608);\r\n        }\r\n\r\n        exports.readFloatLE = readFloat_ieee754.bind(null, readUintLE);\r\n        exports.readFloatBE = readFloat_ieee754.bind(null, readUintBE);\r\n\r\n    })();\r\n\r\n    // double: typed array\r\n    if (typeof Float64Array !== \"undefined\") (function() {\r\n\r\n        var f64 = new Float64Array([-0]),\r\n            f8b = new Uint8Array(f64.buffer),\r\n            le  = f8b[7] === 128;\r\n\r\n        function writeDouble_f64_cpy(val, buf, pos) {\r\n            f64[0] = val;\r\n            buf[pos    ] = f8b[0];\r\n            buf[pos + 1] = f8b[1];\r\n            buf[pos + 2] = f8b[2];\r\n            buf[pos + 3] = f8b[3];\r\n            buf[pos + 4] = f8b[4];\r\n            buf[pos + 5] = f8b[5];\r\n            buf[pos + 6] = f8b[6];\r\n            buf[pos + 7] = f8b[7];\r\n        }\r\n\r\n        function writeDouble_f64_rev(val, buf, pos) {\r\n            f64[0] = val;\r\n            buf[pos    ] = f8b[7];\r\n            buf[pos + 1] = f8b[6];\r\n            buf[pos + 2] = f8b[5];\r\n            buf[pos + 3] = f8b[4];\r\n            buf[pos + 4] = f8b[3];\r\n            buf[pos + 5] = f8b[2];\r\n            buf[pos + 6] = f8b[1];\r\n            buf[pos + 7] = f8b[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.writeDoubleLE = le ? writeDouble_f64_cpy : writeDouble_f64_rev;\r\n        /* istanbul ignore next */\r\n        exports.writeDoubleBE = le ? writeDouble_f64_rev : writeDouble_f64_cpy;\r\n\r\n        function readDouble_f64_cpy(buf, pos) {\r\n            f8b[0] = buf[pos    ];\r\n            f8b[1] = buf[pos + 1];\r\n            f8b[2] = buf[pos + 2];\r\n            f8b[3] = buf[pos + 3];\r\n            f8b[4] = buf[pos + 4];\r\n            f8b[5] = buf[pos + 5];\r\n            f8b[6] = buf[pos + 6];\r\n            f8b[7] = buf[pos + 7];\r\n            return f64[0];\r\n        }\r\n\r\n        function readDouble_f64_rev(buf, pos) {\r\n            f8b[7] = buf[pos    ];\r\n            f8b[6] = buf[pos + 1];\r\n            f8b[5] = buf[pos + 2];\r\n            f8b[4] = buf[pos + 3];\r\n            f8b[3] = buf[pos + 4];\r\n            f8b[2] = buf[pos + 5];\r\n            f8b[1] = buf[pos + 6];\r\n            f8b[0] = buf[pos + 7];\r\n            return f64[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.readDoubleLE = le ? readDouble_f64_cpy : readDouble_f64_rev;\r\n        /* istanbul ignore next */\r\n        exports.readDoubleBE = le ? readDouble_f64_rev : readDouble_f64_cpy;\r\n\r\n    // double: ieee754\r\n    })(); else (function() {\r\n\r\n        function writeDouble_ieee754(writeUint, off0, off1, val, buf, pos) {\r\n            var sign = val < 0 ? 1 : 0;\r\n            if (sign)\r\n                val = -val;\r\n            if (val === 0) {\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos + off1);\r\n            } else if (isNaN(val)) {\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint(2146959360, buf, pos + off1);\r\n            } else if (val > 1.7976931348623157e+308) { // +-Infinity\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint((sign << 31 | 2146435072) >>> 0, buf, pos + off1);\r\n            } else {\r\n                var mantissa;\r\n                if (val < 2.2250738585072014e-308) { // denormal\r\n                    mantissa = val / 5e-324;\r\n                    writeUint(mantissa >>> 0, buf, pos + off0);\r\n                    writeUint((sign << 31 | mantissa / 4294967296) >>> 0, buf, pos + off1);\r\n                } else {\r\n                    var exponent = Math.floor(Math.log(val) / Math.LN2);\r\n                    if (exponent === 1024)\r\n                        exponent = 1023;\r\n                    mantissa = val * Math.pow(2, -exponent);\r\n                    writeUint(mantissa * 4503599627370496 >>> 0, buf, pos + off0);\r\n                    writeUint((sign << 31 | exponent + 1023 << 20 | mantissa * 1048576 & 1048575) >>> 0, buf, pos + off1);\r\n                }\r\n            }\r\n        }\r\n\r\n        exports.writeDoubleLE = writeDouble_ieee754.bind(null, writeUintLE, 0, 4);\r\n        exports.writeDoubleBE = writeDouble_ieee754.bind(null, writeUintBE, 4, 0);\r\n\r\n        function readDouble_ieee754(readUint, off0, off1, buf, pos) {\r\n            var lo = readUint(buf, pos + off0),\r\n                hi = readUint(buf, pos + off1);\r\n            var sign = (hi >> 31) * 2 + 1,\r\n                exponent = hi >>> 20 & 2047,\r\n                mantissa = 4294967296 * (hi & 1048575) + lo;\r\n            return exponent === 2047\r\n                ? mantissa\r\n                ? NaN\r\n                : sign * Infinity\r\n                : exponent === 0 // denormal\r\n                ? sign * 5e-324 * mantissa\r\n                : sign * Math.pow(2, exponent - 1075) * (mantissa + 4503599627370496);\r\n        }\r\n\r\n        exports.readDoubleLE = readDouble_ieee754.bind(null, readUintLE, 0, 4);\r\n        exports.readDoubleBE = readDouble_ieee754.bind(null, readUintBE, 4, 0);\r\n\r\n    })();\r\n\r\n    return exports;\r\n}\r\n\r\n// uint helpers\r\n\r\nfunction writeUintLE(val, buf, pos) {\r\n    buf[pos    ] =  val        & 255;\r\n    buf[pos + 1] =  val >>> 8  & 255;\r\n    buf[pos + 2] =  val >>> 16 & 255;\r\n    buf[pos + 3] =  val >>> 24;\r\n}\r\n\r\nfunction writeUintBE(val, buf, pos) {\r\n    buf[pos    ] =  val >>> 24;\r\n    buf[pos + 1] =  val >>> 16 & 255;\r\n    buf[pos + 2] =  val >>> 8  & 255;\r\n    buf[pos + 3] =  val        & 255;\r\n}\r\n\r\nfunction readUintLE(buf, pos) {\r\n    return (buf[pos    ]\r\n          | buf[pos + 1] << 8\r\n          | buf[pos + 2] << 16\r\n          | buf[pos + 3] << 24) >>> 0;\r\n}\r\n\r\nfunction readUintBE(buf, pos) {\r\n    return (buf[pos    ] << 24\r\n          | buf[pos + 1] << 16\r\n          | buf[pos + 2] << 8\r\n          | buf[pos + 3]) >>> 0;\r\n}\r\n","\"use strict\";\r\nmodule.exports = inquire;\r\n\r\n/**\r\n * Requires a module only if available.\r\n * @memberof util\r\n * @param {string} moduleName Module to require\r\n * @returns {?Object} Required module if available and not empty, otherwise `null`\r\n */\r\nfunction inquire(moduleName) {\r\n    try {\r\n        var mod = eval(\"quire\".replace(/^/,\"re\"))(moduleName); // eslint-disable-line no-eval\r\n        if (mod && (mod.length || Object.keys(mod).length))\r\n            return mod;\r\n    } catch (e) {} // eslint-disable-line no-empty\r\n    return null;\r\n}\r\n","\"use strict\";\r\n\r\n/**\r\n * A minimal UTF8 implementation for number arrays.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar utf8 = exports;\r\n\r\n/**\r\n * Calculates the UTF8 byte length of a string.\r\n * @param {string} string String\r\n * @returns {number} Byte length\r\n */\r\nutf8.length = function utf8_length(string) {\r\n    var len = 0,\r\n        c = 0;\r\n    for (var i = 0; i < string.length; ++i) {\r\n        c = string.charCodeAt(i);\r\n        if (c < 128)\r\n            len += 1;\r\n        else if (c < 2048)\r\n            len += 2;\r\n        else if ((c & 0xFC00) === 0xD800 && (string.charCodeAt(i + 1) & 0xFC00) === 0xDC00) {\r\n            ++i;\r\n            len += 4;\r\n        } else\r\n            len += 3;\r\n    }\r\n    return len;\r\n};\r\n\r\n/**\r\n * Reads UTF8 bytes as a string.\r\n * @param {Uint8Array} buffer Source buffer\r\n * @param {number} start Source start\r\n * @param {number} end Source end\r\n * @returns {string} String read\r\n */\r\nutf8.read = function utf8_read(buffer, start, end) {\r\n    var len = end - start;\r\n    if (len < 1)\r\n        return \"\";\r\n    var parts = null,\r\n        chunk = [],\r\n        i = 0, // char offset\r\n        t;     // temporary\r\n    while (start < end) {\r\n        t = buffer[start++];\r\n        if (t < 128)\r\n            chunk[i++] = t;\r\n        else if (t > 191 && t < 224)\r\n            chunk[i++] = (t & 31) << 6 | buffer[start++] & 63;\r\n        else if (t > 239 && t < 365) {\r\n            t = ((t & 7) << 18 | (buffer[start++] & 63) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63) - 0x10000;\r\n            chunk[i++] = 0xD800 + (t >> 10);\r\n            chunk[i++] = 0xDC00 + (t & 1023);\r\n        } else\r\n            chunk[i++] = (t & 15) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63;\r\n        if (i > 8191) {\r\n            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));\r\n            i = 0;\r\n        }\r\n    }\r\n    if (parts) {\r\n        if (i)\r\n            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));\r\n        return parts.join(\"\");\r\n    }\r\n    return String.fromCharCode.apply(String, chunk.slice(0, i));\r\n};\r\n\r\n/**\r\n * Writes a string as UTF8 bytes.\r\n * @param {string} string Source string\r\n * @param {Uint8Array} buffer Destination buffer\r\n * @param {number} offset Destination offset\r\n * @returns {number} Bytes written\r\n */\r\nutf8.write = function utf8_write(string, buffer, offset) {\r\n    var start = offset,\r\n        c1, // character 1\r\n        c2; // character 2\r\n    for (var i = 0; i < string.length; ++i) {\r\n        c1 = string.charCodeAt(i);\r\n        if (c1 < 128) {\r\n            buffer[offset++] = c1;\r\n        } else if (c1 < 2048) {\r\n            buffer[offset++] = c1 >> 6       | 192;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        } else if ((c1 & 0xFC00) === 0xD800 && ((c2 = string.charCodeAt(i + 1)) & 0xFC00) === 0xDC00) {\r\n            c1 = 0x10000 + ((c1 & 0x03FF) << 10) + (c2 & 0x03FF);\r\n            ++i;\r\n            buffer[offset++] = c1 >> 18      | 240;\r\n            buffer[offset++] = c1 >> 12 & 63 | 128;\r\n            buffer[offset++] = c1 >> 6  & 63 | 128;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        } else {\r\n            buffer[offset++] = c1 >> 12      | 224;\r\n            buffer[offset++] = c1 >> 6  & 63 | 128;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        }\r\n    }\r\n    return offset - start;\r\n};\r\n","\"use strict\";\r\nmodule.exports = pool;\r\n\r\n/**\r\n * An allocator as used by {@link util.pool}.\r\n * @typedef PoolAllocator\r\n * @type {function}\r\n * @param {number} size Buffer size\r\n * @returns {Uint8Array} Buffer\r\n */\r\n\r\n/**\r\n * A slicer as used by {@link util.pool}.\r\n * @typedef PoolSlicer\r\n * @type {function}\r\n * @param {number} start Start offset\r\n * @param {number} end End offset\r\n * @returns {Uint8Array} Buffer slice\r\n * @this {Uint8Array}\r\n */\r\n\r\n/**\r\n * A general purpose buffer pool.\r\n * @memberof util\r\n * @function\r\n * @param {PoolAllocator} alloc Allocator\r\n * @param {PoolSlicer} slice Slicer\r\n * @param {number} [size=8192] Slab size\r\n * @returns {PoolAllocator} Pooled allocator\r\n */\r\nfunction pool(alloc, slice, size) {\r\n    var SIZE   = size || 8192;\r\n    var MAX    = SIZE >>> 1;\r\n    var slab   = null;\r\n    var offset = SIZE;\r\n    return function pool_alloc(size) {\r\n        if (size < 1 || size > MAX)\r\n            return alloc(size);\r\n        if (offset + size > SIZE) {\r\n            slab = alloc(SIZE);\r\n            offset = 0;\r\n        }\r\n        var buf = slice.call(slab, offset, offset += size);\r\n        if (offset & 7) // align to 32 bit\r\n            offset = (offset | 7) + 1;\r\n        return buf;\r\n    };\r\n}\r\n","\"use strict\";\nmodule.exports = LongBits;\n\nvar util = require(\"../util/minimal\");\n\n/**\n * Constructs new long bits.\n * @classdesc Helper class for working with the low and high bits of a 64 bit value.\n * @memberof util\n * @constructor\n * @param {number} lo Low 32 bits, unsigned\n * @param {number} hi High 32 bits, unsigned\n */\nfunction LongBits(lo, hi) {\n\n    // note that the casts below are theoretically unnecessary as of today, but older statically\n    // generated converter code might still call the ctor with signed 32bits. kept for compat.\n\n    /**\n     * Low bits.\n     * @type {number}\n     */\n    this.lo = lo >>> 0;\n\n    /**\n     * High bits.\n     * @type {number}\n     */\n    this.hi = hi >>> 0;\n}\n\n/**\n * Zero bits.\n * @memberof util.LongBits\n * @type {util.LongBits}\n */\nvar zero = LongBits.zero = new LongBits(0, 0);\n\nzero.toNumber = function() { return 0; };\nzero.zzEncode = zero.zzDecode = function() { return this; };\nzero.length = function() { return 1; };\n\n/**\n * Zero hash.\n * @memberof util.LongBits\n * @type {string}\n */\nvar zeroHash = LongBits.zeroHash = \"\\0\\0\\0\\0\\0\\0\\0\\0\";\n\n/**\n * Constructs new long bits from the specified number.\n * @param {number} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.fromNumber = function fromNumber(value) {\n    if (value === 0)\n        return zero;\n    var sign = value < 0;\n    if (sign)\n        value = -value;\n    var lo = value >>> 0,\n        hi = (value - lo) / 4294967296 >>> 0;\n    if (sign) {\n        hi = ~hi >>> 0;\n        lo = ~lo >>> 0;\n        if (++lo > 4294967295) {\n            lo = 0;\n            if (++hi > 4294967295)\n                hi = 0;\n        }\n    }\n    return new LongBits(lo, hi);\n};\n\n/**\n * Constructs new long bits from a number, long or string.\n * @param {Long|number|string} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.from = function from(value) {\n    if (typeof value === \"number\")\n        return LongBits.fromNumber(value);\n    if (util.isString(value)) {\n        /* istanbul ignore else */\n        if (util.Long)\n            value = util.Long.fromString(value);\n        else\n            return LongBits.fromNumber(parseInt(value, 10));\n    }\n    return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;\n};\n\n/**\n * Converts this long bits to a possibly unsafe JavaScript number.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {number} Possibly unsafe number\n */\nLongBits.prototype.toNumber = function toNumber(unsigned) {\n    if (!unsigned && this.hi >>> 31) {\n        var lo = ~this.lo + 1 >>> 0,\n            hi = ~this.hi     >>> 0;\n        if (!lo)\n            hi = hi + 1 >>> 0;\n        return -(lo + hi * 4294967296);\n    }\n    return this.lo + this.hi * 4294967296;\n};\n\n/**\n * Converts this long bits to a long.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long} Long\n */\nLongBits.prototype.toLong = function toLong(unsigned) {\n    return util.Long\n        ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned))\n        /* istanbul ignore next */\n        : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };\n};\n\nvar charCodeAt = String.prototype.charCodeAt;\n\n/**\n * Constructs new long bits from the specified 8 characters long hash.\n * @param {string} hash Hash\n * @returns {util.LongBits} Bits\n */\nLongBits.fromHash = function fromHash(hash) {\n    if (hash === zeroHash)\n        return zero;\n    return new LongBits(\n        ( charCodeAt.call(hash, 0)\n        | charCodeAt.call(hash, 1) << 8\n        | charCodeAt.call(hash, 2) << 16\n        | charCodeAt.call(hash, 3) << 24) >>> 0\n    ,\n        ( charCodeAt.call(hash, 4)\n        | charCodeAt.call(hash, 5) << 8\n        | charCodeAt.call(hash, 6) << 16\n        | charCodeAt.call(hash, 7) << 24) >>> 0\n    );\n};\n\n/**\n * Converts this long bits to a 8 characters long hash.\n * @returns {string} Hash\n */\nLongBits.prototype.toHash = function toHash() {\n    return String.fromCharCode(\n        this.lo        & 255,\n        this.lo >>> 8  & 255,\n        this.lo >>> 16 & 255,\n        this.lo >>> 24      ,\n        this.hi        & 255,\n        this.hi >>> 8  & 255,\n        this.hi >>> 16 & 255,\n        this.hi >>> 24\n    );\n};\n\n/**\n * Zig-zag encodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzEncode = function zzEncode() {\n    var mask =   this.hi >> 31;\n    this.hi  = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;\n    this.lo  = ( this.lo << 1                   ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Zig-zag decodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzDecode = function zzDecode() {\n    var mask = -(this.lo & 1);\n    this.lo  = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;\n    this.hi  = ( this.hi >>> 1                  ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Calculates the length of this longbits when encoded as a varint.\n * @returns {number} Length\n */\nLongBits.prototype.length = function length() {\n    var part0 =  this.lo,\n        part1 = (this.lo >>> 28 | this.hi << 4) >>> 0,\n        part2 =  this.hi >>> 24;\n    return part2 === 0\n         ? part1 === 0\n           ? part0 < 16384\n             ? part0 < 128 ? 1 : 2\n             : part0 < 2097152 ? 3 : 4\n           : part1 < 16384\n             ? part1 < 128 ? 5 : 6\n             : part1 < 2097152 ? 7 : 8\n         : part2 < 128 ? 9 : 10;\n};\n","\"use strict\";\nvar util = exports;\n\n// used to return a Promise where callback is omitted\nutil.asPromise = require(\"@protobufjs/aspromise\");\n\n// converts to / from base64 encoded strings\nutil.base64 = require(\"@protobufjs/base64\");\n\n// base class of rpc.Service\nutil.EventEmitter = require(\"@protobufjs/eventemitter\");\n\n// float handling accross browsers\nutil.float = require(\"@protobufjs/float\");\n\n// requires modules optionally and hides the call from bundlers\nutil.inquire = require(\"@protobufjs/inquire\");\n\n// converts to / from utf8 encoded strings\nutil.utf8 = require(\"@protobufjs/utf8\");\n\n// provides a node-like buffer pool in the browser\nutil.pool = require(\"@protobufjs/pool\");\n\n// utility to work with the low and high bits of a 64 bit value\nutil.LongBits = require(\"./longbits\");\n\n/**\n * Whether running within node or not.\n * @memberof util\n * @type {boolean}\n */\nutil.isNode = Boolean(typeof global !== \"undefined\"\n                   && global\n                   && global.process\n                   && global.process.versions\n                   && global.process.versions.node);\n\n/**\n * Global object reference.\n * @memberof util\n * @type {Object}\n */\nutil.global = util.isNode && global\n           || typeof window !== \"undefined\" && window\n           || typeof self   !== \"undefined\" && self\n           || this; // eslint-disable-line no-invalid-this\n\n/**\n * An immuable empty array.\n * @memberof util\n * @type {Array.<*>}\n * @const\n */\nutil.emptyArray = Object.freeze ? Object.freeze([]) : /* istanbul ignore next */ []; // used on prototypes\n\n/**\n * An immutable empty object.\n * @type {Object}\n * @const\n */\nutil.emptyObject = Object.freeze ? Object.freeze({}) : /* istanbul ignore next */ {}; // used on prototypes\n\n/**\n * Tests if the specified value is an integer.\n * @function\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is an integer\n */\nutil.isInteger = Number.isInteger || /* istanbul ignore next */ function isInteger(value) {\n    return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\n};\n\n/**\n * Tests if the specified value is a string.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a string\n */\nutil.isString = function isString(value) {\n    return typeof value === \"string\" || value instanceof String;\n};\n\n/**\n * Tests if the specified value is a non-null object.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a non-null object\n */\nutil.isObject = function isObject(value) {\n    return value && typeof value === \"object\";\n};\n\n/**\n * Checks if a property on a message is considered to be present.\n * This is an alias of {@link util.isSet}.\n * @function\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isset =\n\n/**\n * Checks if a property on a message is considered to be present.\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isSet = function isSet(obj, prop) {\n    var value = obj[prop];\n    if (value != null && obj.hasOwnProperty(prop)) // eslint-disable-line eqeqeq, no-prototype-builtins\n        return typeof value !== \"object\" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;\n    return false;\n};\n\n/**\n * Any compatible Buffer instance.\n * This is a minimal stand-alone definition of a Buffer instance. The actual type is that exported by node's typings.\n * @interface Buffer\n * @extends Uint8Array\n */\n\n/**\n * Node's Buffer class if available.\n * @type {Constructor<Buffer>}\n */\nutil.Buffer = (function() {\n    try {\n        var Buffer = util.inquire(\"buffer\").Buffer;\n        // refuse to use non-node buffers if not explicitly assigned (perf reasons):\n        return Buffer.prototype.utf8Write ? Buffer : /* istanbul ignore next */ null;\n    } catch (e) {\n        /* istanbul ignore next */\n        return null;\n    }\n})();\n\n// Internal alias of or polyfull for Buffer.from.\nutil._Buffer_from = null;\n\n// Internal alias of or polyfill for Buffer.allocUnsafe.\nutil._Buffer_allocUnsafe = null;\n\n/**\n * Creates a new buffer of whatever type supported by the environment.\n * @param {number|number[]} [sizeOrArray=0] Buffer size or number array\n * @returns {Uint8Array|Buffer} Buffer\n */\nutil.newBuffer = function newBuffer(sizeOrArray) {\n    /* istanbul ignore next */\n    return typeof sizeOrArray === \"number\"\n        ? util.Buffer\n            ? util._Buffer_allocUnsafe(sizeOrArray)\n            : new util.Array(sizeOrArray)\n        : util.Buffer\n            ? util._Buffer_from(sizeOrArray)\n            : typeof Uint8Array === \"undefined\"\n                ? sizeOrArray\n                : new Uint8Array(sizeOrArray);\n};\n\n/**\n * Array implementation used in the browser. `Uint8Array` if supported, otherwise `Array`.\n * @type {Constructor<Uint8Array>}\n */\nutil.Array = typeof Uint8Array !== \"undefined\" ? Uint8Array /* istanbul ignore next */ : Array;\n\n/**\n * Any compatible Long instance.\n * This is a minimal stand-alone definition of a Long instance. The actual type is that exported by long.js.\n * @interface Long\n * @property {number} low Low bits\n * @property {number} high High bits\n * @property {boolean} unsigned Whether unsigned or not\n */\n\n/**\n * Long.js's Long class if available.\n * @type {Constructor<Long>}\n */\nutil.Long = /* istanbul ignore next */ util.global.dcodeIO && /* istanbul ignore next */ util.global.dcodeIO.Long\n         || /* istanbul ignore next */ util.global.Long\n         || util.inquire(\"long\");\n\n/**\n * Regular expression used to verify 2 bit (`bool`) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key2Re = /^true|false|0|1$/;\n\n/**\n * Regular expression used to verify 32 bit (`int32` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key32Re = /^-?(?:0|[1-9][0-9]*)$/;\n\n/**\n * Regular expression used to verify 64 bit (`int64` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key64Re = /^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;\n\n/**\n * Converts a number or long to an 8 characters long hash string.\n * @param {Long|number} value Value to convert\n * @returns {string} Hash\n */\nutil.longToHash = function longToHash(value) {\n    return value\n        ? util.LongBits.from(value).toHash()\n        : util.LongBits.zeroHash;\n};\n\n/**\n * Converts an 8 characters long hash string to a long or number.\n * @param {string} hash Hash\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long|number} Original value\n */\nutil.longFromHash = function longFromHash(hash, unsigned) {\n    var bits = util.LongBits.fromHash(hash);\n    if (util.Long)\n        return util.Long.fromBits(bits.lo, bits.hi, unsigned);\n    return bits.toNumber(Boolean(unsigned));\n};\n\n/**\n * Merges the properties of the source object into the destination object.\n * @memberof util\n * @param {Object.<string,*>} dst Destination object\n * @param {Object.<string,*>} src Source object\n * @param {boolean} [ifNotSet=false] Merges only if the key is not already set\n * @returns {Object.<string,*>} Destination object\n */\nfunction merge(dst, src, ifNotSet) { // used by converters\n    for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)\n        if (dst[keys[i]] === undefined || !ifNotSet)\n            dst[keys[i]] = src[keys[i]];\n    return dst;\n}\n\nutil.merge = merge;\n\n/**\n * Converts the first character of a string to lower case.\n * @param {string} str String to convert\n * @returns {string} Converted string\n */\nutil.lcFirst = function lcFirst(str) {\n    return str.charAt(0).toLowerCase() + str.substring(1);\n};\n\n/**\n * Creates a custom error constructor.\n * @memberof util\n * @param {string} name Error name\n * @returns {Constructor<Error>} Custom error constructor\n */\nfunction newError(name) {\n\n    function CustomError(message, properties) {\n\n        if (!(this instanceof CustomError))\n            return new CustomError(message, properties);\n\n        // Error.call(this, message);\n        // ^ just returns a new error instance because the ctor can be called as a function\n\n        Object.defineProperty(this, \"message\", { get: function() { return message; } });\n\n        /* istanbul ignore next */\n        if (Error.captureStackTrace) // node\n            Error.captureStackTrace(this, CustomError);\n        else\n            Object.defineProperty(this, \"stack\", { value: new Error().stack || \"\" });\n\n        if (properties)\n            merge(this, properties);\n    }\n\n    (CustomError.prototype = Object.create(Error.prototype)).constructor = CustomError;\n\n    Object.defineProperty(CustomError.prototype, \"name\", { get: function() { return name; } });\n\n    CustomError.prototype.toString = function toString() {\n        return this.name + \": \" + this.message;\n    };\n\n    return CustomError;\n}\n\nutil.newError = newError;\n\n/**\n * Constructs a new protocol error.\n * @classdesc Error subclass indicating a protocol specifc error.\n * @memberof util\n * @extends Error\n * @template T extends Message<T>\n * @constructor\n * @param {string} message Error message\n * @param {Object.<string,*>} [properties] Additional properties\n * @example\n * try {\n *     MyMessage.decode(someBuffer); // throws if required fields are missing\n * } catch (e) {\n *     if (e instanceof ProtocolError && e.instance)\n *         console.log(\"decoded so far: \" + JSON.stringify(e.instance));\n * }\n */\nutil.ProtocolError = newError(\"ProtocolError\");\n\n/**\n * So far decoded message instance.\n * @name util.ProtocolError#instance\n * @type {Message<T>}\n */\n\n/**\n * A OneOf getter as returned by {@link util.oneOfGetter}.\n * @typedef OneOfGetter\n * @type {function}\n * @returns {string|undefined} Set field name, if any\n */\n\n/**\n * Builds a getter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfGetter} Unbound getter\n */\nutil.oneOfGetter = function getOneOf(fieldNames) {\n    var fieldMap = {};\n    for (var i = 0; i < fieldNames.length; ++i)\n        fieldMap[fieldNames[i]] = 1;\n\n    /**\n     * @returns {string|undefined} Set field name, if any\n     * @this Object\n     * @ignore\n     */\n    return function() { // eslint-disable-line consistent-return\n        for (var keys = Object.keys(this), i = keys.length - 1; i > -1; --i)\n            if (fieldMap[keys[i]] === 1 && this[keys[i]] !== undefined && this[keys[i]] !== null)\n                return keys[i];\n    };\n};\n\n/**\n * A OneOf setter as returned by {@link util.oneOfSetter}.\n * @typedef OneOfSetter\n * @type {function}\n * @param {string|undefined} value Field name\n * @returns {undefined}\n */\n\n/**\n * Builds a setter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfSetter} Unbound setter\n */\nutil.oneOfSetter = function setOneOf(fieldNames) {\n\n    /**\n     * @param {string} name Field name\n     * @returns {undefined}\n     * @this Object\n     * @ignore\n     */\n    return function(name) {\n        for (var i = 0; i < fieldNames.length; ++i)\n            if (fieldNames[i] !== name)\n                delete this[fieldNames[i]];\n    };\n};\n\n/**\n * Default conversion options used for {@link Message#toJSON} implementations.\n *\n * These options are close to proto3's JSON mapping with the exception that internal types like Any are handled just like messages. More precisely:\n *\n * - Longs become strings\n * - Enums become string keys\n * - Bytes become base64 encoded strings\n * - (Sub-)Messages become plain objects\n * - Maps become plain objects with all string keys\n * - Repeated fields become arrays\n * - NaN and Infinity for float and double fields become strings\n *\n * @type {IConversionOptions}\n * @see https://developers.google.com/protocol-buffers/docs/proto3?hl=en#json\n */\nutil.toJSONOptions = {\n    longs: String,\n    enums: String,\n    bytes: String,\n    json: true\n};\n\n// Sets up buffer utility according to the environment (called in index-minimal)\nutil._configure = function() {\n    var Buffer = util.Buffer;\n    /* istanbul ignore if */\n    if (!Buffer) {\n        util._Buffer_from = util._Buffer_allocUnsafe = null;\n        return;\n    }\n    // because node 4.x buffers are incompatible & immutable\n    // see: https://github.com/dcodeIO/protobuf.js/pull/665\n    util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from ||\n        /* istanbul ignore next */\n        function Buffer_from(value, encoding) {\n            return new Buffer(value, encoding);\n        };\n    util._Buffer_allocUnsafe = Buffer.allocUnsafe ||\n        /* istanbul ignore next */\n        function Buffer_allocUnsafe(size) {\n            return new Buffer(size);\n        };\n};\n","\"use strict\";\nmodule.exports = Writer;\n\nvar util      = require(\"./util/minimal\");\n\nvar BufferWriter; // cyclic\n\nvar LongBits  = util.LongBits,\n    base64    = util.base64,\n    utf8      = util.utf8;\n\n/**\n * Constructs a new writer operation instance.\n * @classdesc Scheduled writer operation.\n * @constructor\n * @param {function(*, Uint8Array, number)} fn Function to call\n * @param {number} len Value byte length\n * @param {*} val Value to write\n * @ignore\n */\nfunction Op(fn, len, val) {\n\n    /**\n     * Function to call.\n     * @type {function(Uint8Array, number, *)}\n     */\n    this.fn = fn;\n\n    /**\n     * Value byte length.\n     * @type {number}\n     */\n    this.len = len;\n\n    /**\n     * Next operation.\n     * @type {Writer.Op|undefined}\n     */\n    this.next = undefined;\n\n    /**\n     * Value to write.\n     * @type {*}\n     */\n    this.val = val; // type varies\n}\n\n/* istanbul ignore next */\nfunction noop() {} // eslint-disable-line no-empty-function\n\n/**\n * Constructs a new writer state instance.\n * @classdesc Copied writer state.\n * @memberof Writer\n * @constructor\n * @param {Writer} writer Writer to copy state from\n * @ignore\n */\nfunction State(writer) {\n\n    /**\n     * Current head.\n     * @type {Writer.Op}\n     */\n    this.head = writer.head;\n\n    /**\n     * Current tail.\n     * @type {Writer.Op}\n     */\n    this.tail = writer.tail;\n\n    /**\n     * Current buffer length.\n     * @type {number}\n     */\n    this.len = writer.len;\n\n    /**\n     * Next state.\n     * @type {State|null}\n     */\n    this.next = writer.states;\n}\n\n/**\n * Constructs a new writer instance.\n * @classdesc Wire format writer using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n */\nfunction Writer() {\n\n    /**\n     * Current length.\n     * @type {number}\n     */\n    this.len = 0;\n\n    /**\n     * Operations head.\n     * @type {Object}\n     */\n    this.head = new Op(noop, 0, 0);\n\n    /**\n     * Operations tail\n     * @type {Object}\n     */\n    this.tail = this.head;\n\n    /**\n     * Linked forked states.\n     * @type {Object|null}\n     */\n    this.states = null;\n\n    // When a value is written, the writer calculates its byte length and puts it into a linked\n    // list of operations to perform when finish() is called. This both allows us to allocate\n    // buffers of the exact required size and reduces the amount of work we have to do compared\n    // to first calculating over objects and then encoding over objects. In our case, the encoding\n    // part is just a linked list walk calling operations with already prepared values.\n}\n\nvar create = function create() {\n    return util.Buffer\n        ? function create_buffer_setup() {\n            return (Writer.create = function create_buffer() {\n                return new BufferWriter();\n            })();\n        }\n        /* istanbul ignore next */\n        : function create_array() {\n            return new Writer();\n        };\n};\n\n/**\n * Creates a new writer.\n * @function\n * @returns {BufferWriter|Writer} A {@link BufferWriter} when Buffers are supported, otherwise a {@link Writer}\n */\nWriter.create = create();\n\n/**\n * Allocates a buffer of the specified size.\n * @param {number} size Buffer size\n * @returns {Uint8Array} Buffer\n */\nWriter.alloc = function alloc(size) {\n    return new util.Array(size);\n};\n\n// Use Uint8Array buffer pool in the browser, just like node does with buffers\n/* istanbul ignore else */\nif (util.Array !== Array)\n    Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);\n\n/**\n * Pushes a new operation to the queue.\n * @param {function(Uint8Array, number, *)} fn Function to call\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @returns {Writer} `this`\n * @private\n */\nWriter.prototype._push = function push(fn, len, val) {\n    this.tail = this.tail.next = new Op(fn, len, val);\n    this.len += len;\n    return this;\n};\n\nfunction writeByte(val, buf, pos) {\n    buf[pos] = val & 255;\n}\n\nfunction writeVarint32(val, buf, pos) {\n    while (val > 127) {\n        buf[pos++] = val & 127 | 128;\n        val >>>= 7;\n    }\n    buf[pos] = val;\n}\n\n/**\n * Constructs a new varint writer operation instance.\n * @classdesc Scheduled varint writer operation.\n * @extends Op\n * @constructor\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @ignore\n */\nfunction VarintOp(len, val) {\n    this.len = len;\n    this.next = undefined;\n    this.val = val;\n}\n\nVarintOp.prototype = Object.create(Op.prototype);\nVarintOp.prototype.fn = writeVarint32;\n\n/**\n * Writes an unsigned 32 bit value as a varint.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.uint32 = function write_uint32(value) {\n    // here, the call to this.push has been inlined and a varint specific Op subclass is used.\n    // uint32 is by far the most frequently used operation and benefits significantly from this.\n    this.len += (this.tail = this.tail.next = new VarintOp(\n        (value = value >>> 0)\n                < 128       ? 1\n        : value < 16384     ? 2\n        : value < 2097152   ? 3\n        : value < 268435456 ? 4\n        :                     5,\n    value)).len;\n    return this;\n};\n\n/**\n * Writes a signed 32 bit value as a varint.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.int32 = function write_int32(value) {\n    return value < 0\n        ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) // 10 bytes per spec\n        : this.uint32(value);\n};\n\n/**\n * Writes a 32 bit value as a varint, zig-zag encoded.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sint32 = function write_sint32(value) {\n    return this.uint32((value << 1 ^ value >> 31) >>> 0);\n};\n\nfunction writeVarint64(val, buf, pos) {\n    while (val.hi) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;\n        val.hi >>>= 7;\n    }\n    while (val.lo > 127) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = val.lo >>> 7;\n    }\n    buf[pos++] = val.lo;\n}\n\n/**\n * Writes an unsigned 64 bit value as a varint.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.uint64 = function write_uint64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a signed 64 bit value as a varint.\n * @function\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.int64 = Writer.prototype.uint64;\n\n/**\n * Writes a signed 64 bit value as a varint, zig-zag encoded.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sint64 = function write_sint64(value) {\n    var bits = LongBits.from(value).zzEncode();\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a boolish value as a varint.\n * @param {boolean} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bool = function write_bool(value) {\n    return this._push(writeByte, 1, value ? 1 : 0);\n};\n\nfunction writeFixed32(val, buf, pos) {\n    buf[pos    ] =  val         & 255;\n    buf[pos + 1] =  val >>> 8   & 255;\n    buf[pos + 2] =  val >>> 16  & 255;\n    buf[pos + 3] =  val >>> 24;\n}\n\n/**\n * Writes an unsigned 32 bit value as fixed 32 bits.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.fixed32 = function write_fixed32(value) {\n    return this._push(writeFixed32, 4, value >>> 0);\n};\n\n/**\n * Writes a signed 32 bit value as fixed 32 bits.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sfixed32 = Writer.prototype.fixed32;\n\n/**\n * Writes an unsigned 64 bit value as fixed 64 bits.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.fixed64 = function write_fixed64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);\n};\n\n/**\n * Writes a signed 64 bit value as fixed 64 bits.\n * @function\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sfixed64 = Writer.prototype.fixed64;\n\n/**\n * Writes a float (32 bit).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.float = function write_float(value) {\n    return this._push(util.float.writeFloatLE, 4, value);\n};\n\n/**\n * Writes a double (64 bit float).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.double = function write_double(value) {\n    return this._push(util.float.writeDoubleLE, 8, value);\n};\n\nvar writeBytes = util.Array.prototype.set\n    ? function writeBytes_set(val, buf, pos) {\n        buf.set(val, pos); // also works for plain array values\n    }\n    /* istanbul ignore next */\n    : function writeBytes_for(val, buf, pos) {\n        for (var i = 0; i < val.length; ++i)\n            buf[pos + i] = val[i];\n    };\n\n/**\n * Writes a sequence of bytes.\n * @param {Uint8Array|string} value Buffer or base64 encoded string to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bytes = function write_bytes(value) {\n    var len = value.length >>> 0;\n    if (!len)\n        return this._push(writeByte, 1, 0);\n    if (util.isString(value)) {\n        var buf = Writer.alloc(len = base64.length(value));\n        base64.decode(value, buf, 0);\n        value = buf;\n    }\n    return this.uint32(len)._push(writeBytes, len, value);\n};\n\n/**\n * Writes a string.\n * @param {string} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.string = function write_string(value) {\n    var len = utf8.length(value);\n    return len\n        ? this.uint32(len)._push(utf8.write, len, value)\n        : this._push(writeByte, 1, 0);\n};\n\n/**\n * Forks this writer's state by pushing it to a stack.\n * Calling {@link Writer#reset|reset} or {@link Writer#ldelim|ldelim} resets the writer to the previous state.\n * @returns {Writer} `this`\n */\nWriter.prototype.fork = function fork() {\n    this.states = new State(this);\n    this.head = this.tail = new Op(noop, 0, 0);\n    this.len = 0;\n    return this;\n};\n\n/**\n * Resets this instance to the last state.\n * @returns {Writer} `this`\n */\nWriter.prototype.reset = function reset() {\n    if (this.states) {\n        this.head   = this.states.head;\n        this.tail   = this.states.tail;\n        this.len    = this.states.len;\n        this.states = this.states.next;\n    } else {\n        this.head = this.tail = new Op(noop, 0, 0);\n        this.len  = 0;\n    }\n    return this;\n};\n\n/**\n * Resets to the last state and appends the fork state's current write length as a varint followed by its operations.\n * @returns {Writer} `this`\n */\nWriter.prototype.ldelim = function ldelim() {\n    var head = this.head,\n        tail = this.tail,\n        len  = this.len;\n    this.reset().uint32(len);\n    if (len) {\n        this.tail.next = head.next; // skip noop\n        this.tail = tail;\n        this.len += len;\n    }\n    return this;\n};\n\n/**\n * Finishes the write operation.\n * @returns {Uint8Array} Finished buffer\n */\nWriter.prototype.finish = function finish() {\n    var head = this.head.next, // skip noop\n        buf  = this.constructor.alloc(this.len),\n        pos  = 0;\n    while (head) {\n        head.fn(head.val, buf, pos);\n        pos += head.len;\n        head = head.next;\n    }\n    // this.head = this.tail = null;\n    return buf;\n};\n\nWriter._configure = function(BufferWriter_) {\n    BufferWriter = BufferWriter_;\n    Writer.create = create();\n    BufferWriter._configure();\n};\n","\"use strict\";\nmodule.exports = BufferWriter;\n\n// extends Writer\nvar Writer = require(\"./writer\");\n(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new buffer writer instance.\n * @classdesc Wire format writer using node buffers.\n * @extends Writer\n * @constructor\n */\nfunction BufferWriter() {\n    Writer.call(this);\n}\n\nBufferWriter._configure = function () {\n    /**\n     * Allocates a buffer of the specified size.\n     * @function\n     * @param {number} size Buffer size\n     * @returns {Buffer} Buffer\n     */\n    BufferWriter.alloc = util._Buffer_allocUnsafe;\n\n    BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === \"set\"\n        ? function writeBytesBuffer_set(val, buf, pos) {\n          buf.set(val, pos); // faster than copy (requires node >= 4 where Buffers extend Uint8Array and set is properly inherited)\n          // also works for plain array values\n        }\n        /* istanbul ignore next */\n        : function writeBytesBuffer_copy(val, buf, pos) {\n          if (val.copy) // Buffer values\n            val.copy(buf, pos, 0, val.length);\n          else for (var i = 0; i < val.length;) // plain array values\n            buf[pos++] = val[i++];\n        };\n};\n\n\n/**\n * @override\n */\nBufferWriter.prototype.bytes = function write_bytes_buffer(value) {\n    if (util.isString(value))\n        value = util._Buffer_from(value, \"base64\");\n    var len = value.length >>> 0;\n    this.uint32(len);\n    if (len)\n        this._push(BufferWriter.writeBytesBuffer, len, value);\n    return this;\n};\n\nfunction writeStringBuffer(val, buf, pos) {\n    if (val.length < 40) // plain js is faster for short strings (probably due to redundant assertions)\n        util.utf8.write(val, buf, pos);\n    else if (buf.utf8Write)\n        buf.utf8Write(val, pos);\n    else\n        buf.write(val, pos);\n}\n\n/**\n * @override\n */\nBufferWriter.prototype.string = function write_string_buffer(value) {\n    var len = util.Buffer.byteLength(value);\n    this.uint32(len);\n    if (len)\n        this._push(writeStringBuffer, len, value);\n    return this;\n};\n\n\n/**\n * Finishes the write operation.\n * @name BufferWriter#finish\n * @function\n * @returns {Buffer} Finished buffer\n */\n\nBufferWriter._configure();\n","\"use strict\";\nmodule.exports = Reader;\n\nvar util      = require(\"./util/minimal\");\n\nvar BufferReader; // cyclic\n\nvar LongBits  = util.LongBits,\n    utf8      = util.utf8;\n\n/* istanbul ignore next */\nfunction indexOutOfRange(reader, writeLength) {\n    return RangeError(\"index out of range: \" + reader.pos + \" + \" + (writeLength || 1) + \" > \" + reader.len);\n}\n\n/**\n * Constructs a new reader instance using the specified buffer.\n * @classdesc Wire format reader using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n * @param {Uint8Array} buffer Buffer to read from\n */\nfunction Reader(buffer) {\n\n    /**\n     * Read buffer.\n     * @type {Uint8Array}\n     */\n    this.buf = buffer;\n\n    /**\n     * Read buffer position.\n     * @type {number}\n     */\n    this.pos = 0;\n\n    /**\n     * Read buffer length.\n     * @type {number}\n     */\n    this.len = buffer.length;\n}\n\nvar create_array = typeof Uint8Array !== \"undefined\"\n    ? function create_typed_array(buffer) {\n        if (buffer instanceof Uint8Array || Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    }\n    /* istanbul ignore next */\n    : function create_array(buffer) {\n        if (Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    };\n\nvar create = function create() {\n    return util.Buffer\n        ? function create_buffer_setup(buffer) {\n            return (Reader.create = function create_buffer(buffer) {\n                return util.Buffer.isBuffer(buffer)\n                    ? new BufferReader(buffer)\n                    /* istanbul ignore next */\n                    : create_array(buffer);\n            })(buffer);\n        }\n        /* istanbul ignore next */\n        : create_array;\n};\n\n/**\n * Creates a new reader using the specified buffer.\n * @function\n * @param {Uint8Array|Buffer} buffer Buffer to read from\n * @returns {Reader|BufferReader} A {@link BufferReader} if `buffer` is a Buffer, otherwise a {@link Reader}\n * @throws {Error} If `buffer` is not a valid buffer\n */\nReader.create = create();\n\nReader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */ util.Array.prototype.slice;\n\n/**\n * Reads a varint as an unsigned 32 bit value.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.uint32 = (function read_uint32_setup() {\n    var value = 4294967295; // optimizer type-hint, tends to deopt otherwise (?!)\n    return function read_uint32() {\n        value = (         this.buf[this.pos] & 127       ) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) <<  7) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] &  15) << 28) >>> 0; if (this.buf[this.pos++] < 128) return value;\n\n        /* istanbul ignore if */\n        if ((this.pos += 5) > this.len) {\n            this.pos = this.len;\n            throw indexOutOfRange(this, 10);\n        }\n        return value;\n    };\n})();\n\n/**\n * Reads a varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.int32 = function read_int32() {\n    return this.uint32() | 0;\n};\n\n/**\n * Reads a zig-zag encoded varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.sint32 = function read_sint32() {\n    var value = this.uint32();\n    return value >>> 1 ^ -(value & 1) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readLongVarint() {\n    // tends to deopt with local vars for octet etc.\n    var bits = new LongBits(0, 0);\n    var i = 0;\n    if (this.len - this.pos > 4) { // fast route (lo)\n        for (; i < 4; ++i) {\n            // 1st..4th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 5th\n        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;\n        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >>  4) >>> 0;\n        if (this.buf[this.pos++] < 128)\n            return bits;\n        i = 0;\n    } else {\n        for (; i < 3; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 1st..3th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 4th\n        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;\n        return bits;\n    }\n    if (this.len - this.pos > 4) { // fast route (hi)\n        for (; i < 5; ++i) {\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    } else {\n        for (; i < 5; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    }\n    /* istanbul ignore next */\n    throw Error(\"invalid varint encoding\");\n}\n\n/* eslint-enable no-invalid-this */\n\n/**\n * Reads a varint as a signed 64 bit value.\n * @name Reader#int64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as an unsigned 64 bit value.\n * @name Reader#uint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a zig-zag encoded varint as a signed 64 bit value.\n * @name Reader#sint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as a boolean.\n * @returns {boolean} Value read\n */\nReader.prototype.bool = function read_bool() {\n    return this.uint32() !== 0;\n};\n\nfunction readFixed32_end(buf, end) { // note that this uses `end`, not `pos`\n    return (buf[end - 4]\n          | buf[end - 3] << 8\n          | buf[end - 2] << 16\n          | buf[end - 1] << 24) >>> 0;\n}\n\n/**\n * Reads fixed 32 bits as an unsigned 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.fixed32 = function read_fixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4);\n};\n\n/**\n * Reads fixed 32 bits as a signed 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.sfixed32 = function read_sfixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readFixed64(/* this: Reader */) {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 8);\n\n    return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));\n}\n\n/* eslint-enable no-invalid-this */\n\n/**\n * Reads fixed 64 bits.\n * @name Reader#fixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads zig-zag encoded fixed 64 bits.\n * @name Reader#sfixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a float (32 bit) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.float = function read_float() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readFloatLE(this.buf, this.pos);\n    this.pos += 4;\n    return value;\n};\n\n/**\n * Reads a double (64 bit float) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.double = function read_double() {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readDoubleLE(this.buf, this.pos);\n    this.pos += 8;\n    return value;\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @returns {Uint8Array} Value read\n */\nReader.prototype.bytes = function read_bytes() {\n    var length = this.uint32(),\n        start  = this.pos,\n        end    = this.pos + length;\n\n    /* istanbul ignore if */\n    if (end > this.len)\n        throw indexOutOfRange(this, length);\n\n    this.pos += length;\n    if (Array.isArray(this.buf)) // plain array\n        return this.buf.slice(start, end);\n    return start === end // fix for IE 10/Win8 and others' subarray returning array of size 1\n        ? new this.buf.constructor(0)\n        : this._slice.call(this.buf, start, end);\n};\n\n/**\n * Reads a string preceeded by its byte length as a varint.\n * @returns {string} Value read\n */\nReader.prototype.string = function read_string() {\n    var bytes = this.bytes();\n    return utf8.read(bytes, 0, bytes.length);\n};\n\n/**\n * Skips the specified number of bytes if specified, otherwise skips a varint.\n * @param {number} [length] Length if known, otherwise a varint is assumed\n * @returns {Reader} `this`\n */\nReader.prototype.skip = function skip(length) {\n    if (typeof length === \"number\") {\n        /* istanbul ignore if */\n        if (this.pos + length > this.len)\n            throw indexOutOfRange(this, length);\n        this.pos += length;\n    } else {\n        do {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n        } while (this.buf[this.pos++] & 128);\n    }\n    return this;\n};\n\n/**\n * Skips the next element of the specified wire type.\n * @param {number} wireType Wire type received\n * @returns {Reader} `this`\n */\nReader.prototype.skipType = function(wireType) {\n    switch (wireType) {\n        case 0:\n            this.skip();\n            break;\n        case 1:\n            this.skip(8);\n            break;\n        case 2:\n            this.skip(this.uint32());\n            break;\n        case 3:\n            while ((wireType = this.uint32() & 7) !== 4) {\n                this.skipType(wireType);\n            }\n            break;\n        case 5:\n            this.skip(4);\n            break;\n\n        /* istanbul ignore next */\n        default:\n            throw Error(\"invalid wire type \" + wireType + \" at offset \" + this.pos);\n    }\n    return this;\n};\n\nReader._configure = function(BufferReader_) {\n    BufferReader = BufferReader_;\n    Reader.create = create();\n    BufferReader._configure();\n\n    var fn = util.Long ? \"toLong\" : /* istanbul ignore next */ \"toNumber\";\n    util.merge(Reader.prototype, {\n\n        int64: function read_int64() {\n            return readLongVarint.call(this)[fn](false);\n        },\n\n        uint64: function read_uint64() {\n            return readLongVarint.call(this)[fn](true);\n        },\n\n        sint64: function read_sint64() {\n            return readLongVarint.call(this).zzDecode()[fn](false);\n        },\n\n        fixed64: function read_fixed64() {\n            return readFixed64.call(this)[fn](true);\n        },\n\n        sfixed64: function read_sfixed64() {\n            return readFixed64.call(this)[fn](false);\n        }\n\n    });\n};\n","\"use strict\";\nmodule.exports = BufferReader;\n\n// extends Reader\nvar Reader = require(\"./reader\");\n(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new buffer reader instance.\n * @classdesc Wire format reader using node buffers.\n * @extends Reader\n * @constructor\n * @param {Buffer} buffer Buffer to read from\n */\nfunction BufferReader(buffer) {\n    Reader.call(this, buffer);\n\n    /**\n     * Read buffer.\n     * @name BufferReader#buf\n     * @type {Buffer}\n     */\n}\n\nBufferReader._configure = function () {\n    /* istanbul ignore else */\n    if (util.Buffer)\n        BufferReader.prototype._slice = util.Buffer.prototype.slice;\n};\n\n\n/**\n * @override\n */\nBufferReader.prototype.string = function read_string_buffer() {\n    var len = this.uint32(); // modifies pos\n    return this.buf.utf8Slice\n        ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len))\n        : this.buf.toString(\"utf-8\", this.pos, this.pos = Math.min(this.pos + len, this.len));\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @name BufferReader#bytes\n * @function\n * @returns {Buffer} Value read\n */\n\nBufferReader._configure();\n","\"use strict\";\nmodule.exports = Service;\n\nvar util = require(\"../util/minimal\");\n\n// Extends EventEmitter\n(Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;\n\n/**\n * A service method callback as used by {@link rpc.ServiceMethod|ServiceMethod}.\n *\n * Differs from {@link RPCImplCallback} in that it is an actual callback of a service method which may not return `response = null`.\n * @typedef rpc.ServiceMethodCallback\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {Error|null} error Error, if any\n * @param {TRes} [response] Response message\n * @returns {undefined}\n */\n\n/**\n * A service method part of a {@link rpc.Service} as created by {@link Service.create}.\n * @typedef rpc.ServiceMethod\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} [callback] Node-style callback called with the error, if any, and the response message\n * @returns {Promise<Message<TRes>>} Promise if `callback` has been omitted, otherwise `undefined`\n */\n\n/**\n * Constructs a new RPC service instance.\n * @classdesc An RPC service as returned by {@link Service#create}.\n * @exports rpc.Service\n * @extends util.EventEmitter\n * @constructor\n * @param {RPCImpl} rpcImpl RPC implementation\n * @param {boolean} [requestDelimited=false] Whether requests are length-delimited\n * @param {boolean} [responseDelimited=false] Whether responses are length-delimited\n */\nfunction Service(rpcImpl, requestDelimited, responseDelimited) {\n\n    if (typeof rpcImpl !== \"function\")\n        throw TypeError(\"rpcImpl must be a function\");\n\n    util.EventEmitter.call(this);\n\n    /**\n     * RPC implementation. Becomes `null` once the service is ended.\n     * @type {RPCImpl|null}\n     */\n    this.rpcImpl = rpcImpl;\n\n    /**\n     * Whether requests are length-delimited.\n     * @type {boolean}\n     */\n    this.requestDelimited = Boolean(requestDelimited);\n\n    /**\n     * Whether responses are length-delimited.\n     * @type {boolean}\n     */\n    this.responseDelimited = Boolean(responseDelimited);\n}\n\n/**\n * Calls a service method through {@link rpc.Service#rpcImpl|rpcImpl}.\n * @param {Method|rpc.ServiceMethod<TReq,TRes>} method Reflected or static method\n * @param {Constructor<TReq>} requestCtor Request constructor\n * @param {Constructor<TRes>} responseCtor Response constructor\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} callback Service callback\n * @returns {undefined}\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n */\nService.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {\n\n    if (!request)\n        throw TypeError(\"request must be specified\");\n\n    var self = this;\n    if (!callback)\n        return util.asPromise(rpcCall, self, method, requestCtor, responseCtor, request);\n\n    if (!self.rpcImpl) {\n        setTimeout(function() { callback(Error(\"already ended\")); }, 0);\n        return undefined;\n    }\n\n    try {\n        return self.rpcImpl(\n            method,\n            requestCtor[self.requestDelimited ? \"encodeDelimited\" : \"encode\"](request).finish(),\n            function rpcCallback(err, response) {\n\n                if (err) {\n                    self.emit(\"error\", err, method);\n                    return callback(err);\n                }\n\n                if (response === null) {\n                    self.end(/* endedByRPC */ true);\n                    return undefined;\n                }\n\n                if (!(response instanceof responseCtor)) {\n                    try {\n                        response = responseCtor[self.responseDelimited ? \"decodeDelimited\" : \"decode\"](response);\n                    } catch (err) {\n                        self.emit(\"error\", err, method);\n                        return callback(err);\n                    }\n                }\n\n                self.emit(\"data\", response, method);\n                return callback(null, response);\n            }\n        );\n    } catch (err) {\n        self.emit(\"error\", err, method);\n        setTimeout(function() { callback(err); }, 0);\n        return undefined;\n    }\n};\n\n/**\n * Ends this service and emits the `end` event.\n * @param {boolean} [endedByRPC=false] Whether the service has been ended by the RPC implementation.\n * @returns {rpc.Service} `this`\n */\nService.prototype.end = function end(endedByRPC) {\n    if (this.rpcImpl) {\n        if (!endedByRPC) // signal end to rpcImpl\n            this.rpcImpl(null, null, null);\n        this.rpcImpl = null;\n        this.emit(\"end\").off();\n    }\n    return this;\n};\n","\"use strict\";\n\n/**\n * Streaming RPC helpers.\n * @namespace\n */\nvar rpc = exports;\n\n/**\n * RPC implementation passed to {@link Service#create} performing a service request on network level, i.e. by utilizing http requests or websockets.\n * @typedef RPCImpl\n * @type {function}\n * @param {Method|rpc.ServiceMethod<Message<{}>,Message<{}>>} method Reflected or static method being called\n * @param {Uint8Array} requestData Request data\n * @param {RPCImplCallback} callback Callback function\n * @returns {undefined}\n * @example\n * function rpcImpl(method, requestData, callback) {\n *     if (protobuf.util.lcFirst(method.name) !== \"myMethod\") // compatible with static code\n *         throw Error(\"no such method\");\n *     asynchronouslyObtainAResponse(requestData, function(err, responseData) {\n *         callback(err, responseData);\n *     });\n * }\n */\n\n/**\n * Node-style callback as used by {@link RPCImpl}.\n * @typedef RPCImplCallback\n * @type {function}\n * @param {Error|null} error Error, if any, otherwise `null`\n * @param {Uint8Array|null} [response] Response data or `null` to signal end of stream, if there hasn't been an error\n * @returns {undefined}\n */\n\nrpc.Service = require(\"./rpc/service\");\n","\"use strict\";\nmodule.exports = {};\n\n/**\n * Named roots.\n * This is where pbjs stores generated structures (the option `-r, --root` specifies a name).\n * Can also be used manually to make roots available accross modules.\n * @name roots\n * @type {Object.<string,Root>}\n * @example\n * // pbjs -r myroot -o compiled.js ...\n *\n * // in another module:\n * require(\"./compiled.js\");\n *\n * // in any subsequent module:\n * var root = protobuf.roots[\"myroot\"];\n */\n","\"use strict\";\nvar protobuf = exports;\n\n/**\n * Build type, one of `\"full\"`, `\"light\"` or `\"minimal\"`.\n * @name build\n * @type {string}\n * @const\n */\nprotobuf.build = \"minimal\";\n\n// Serialization\nprotobuf.Writer       = require(\"./writer\");\nprotobuf.BufferWriter = require(\"./writer_buffer\");\nprotobuf.Reader       = require(\"./reader\");\nprotobuf.BufferReader = require(\"./reader_buffer\");\n\n// Utility\nprotobuf.util         = require(\"./util/minimal\");\nprotobuf.rpc          = require(\"./rpc\");\nprotobuf.roots        = require(\"./roots\");\nprotobuf.configure    = configure;\n\n/* istanbul ignore next */\n/**\n * Reconfigures the library according to the environment.\n * @returns {undefined}\n */\nfunction configure() {\n    protobuf.util._configure();\n    protobuf.Writer._configure(protobuf.BufferWriter);\n    protobuf.Reader._configure(protobuf.BufferReader);\n}\n\n// Set up buffer utility according to the environment\nconfigure();\n","// minimal library entry point.\n\n\"use strict\";\nmodule.exports = require(\"./src/index-minimal\");\n","/*eslint-disable block-scoped-var, id-length, no-control-regex, no-magic-numbers, no-prototype-builtins, no-redeclare, no-shadow, no-var, sort-vars*/\n\"use strict\";\n\nvar $protobuf = require(\"protobufjs/minimal\");\n\n// Common aliases\nvar $Reader = $protobuf.Reader, $Writer = $protobuf.Writer, $util = $protobuf.util;\n\n// Exported root namespace\nvar $root = $protobuf.roots[\"default\"] || ($protobuf.roots[\"default\"] = {});\n\n$root.ClassRequest = (function() {\n\n    /**\n     * Properties of a ClassRequest.\n     * @exports IClassRequest\n     * @interface IClassRequest\n     * @property {string|null} [requestId] ClassRequest requestId\n     * @property {IEndClassCommand|null} [endClass] ClassRequest endClass\n     * @property {ISetHostCommand|null} [setHost] ClassRequest setHost\n     * @property {ISetContentCommand|null} [setContent] ClassRequest setContent\n     * @property {ISetActivityStreamIdCommand|null} [setActivityStreamId] ClassRequest setActivityStreamId\n     * @property {IRewardTrophyToUserCommand|null} [rewardTrophyToUser] ClassRequest rewardTrophyToUser\n     * @property {IRewardTrophyToAllCommand|null} [rewardTrophyToAll] ClassRequest rewardTrophyToAll\n     * @property {ISendChatMessageCommand|null} [sendChatMessage] ClassRequest sendChatMessage\n     */\n\n    /**\n     * Constructs a new ClassRequest.\n     * @exports ClassRequest\n     * @classdesc Represents a ClassRequest.\n     * @implements IClassRequest\n     * @constructor\n     * @param {IClassRequest=} [properties] Properties to set\n     */\n    function ClassRequest(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ClassRequest requestId.\n     * @member {string} requestId\n     * @memberof ClassRequest\n     * @instance\n     */\n    ClassRequest.prototype.requestId = \"\";\n\n    /**\n     * ClassRequest endClass.\n     * @member {IEndClassCommand|null|undefined} endClass\n     * @memberof ClassRequest\n     * @instance\n     */\n    ClassRequest.prototype.endClass = null;\n\n    /**\n     * ClassRequest setHost.\n     * @member {ISetHostCommand|null|undefined} setHost\n     * @memberof ClassRequest\n     * @instance\n     */\n    ClassRequest.prototype.setHost = null;\n\n    /**\n     * ClassRequest setContent.\n     * @member {ISetContentCommand|null|undefined} setContent\n     * @memberof ClassRequest\n     * @instance\n     */\n    ClassRequest.prototype.setContent = null;\n\n    /**\n     * ClassRequest setActivityStreamId.\n     * @member {ISetActivityStreamIdCommand|null|undefined} setActivityStreamId\n     * @memberof ClassRequest\n     * @instance\n     */\n    ClassRequest.prototype.setActivityStreamId = null;\n\n    /**\n     * ClassRequest rewardTrophyToUser.\n     * @member {IRewardTrophyToUserCommand|null|undefined} rewardTrophyToUser\n     * @memberof ClassRequest\n     * @instance\n     */\n    ClassRequest.prototype.rewardTrophyToUser = null;\n\n    /**\n     * ClassRequest rewardTrophyToAll.\n     * @member {IRewardTrophyToAllCommand|null|undefined} rewardTrophyToAll\n     * @memberof ClassRequest\n     * @instance\n     */\n    ClassRequest.prototype.rewardTrophyToAll = null;\n\n    /**\n     * ClassRequest sendChatMessage.\n     * @member {ISendChatMessageCommand|null|undefined} sendChatMessage\n     * @memberof ClassRequest\n     * @instance\n     */\n    ClassRequest.prototype.sendChatMessage = null;\n\n    // OneOf field names bound to virtual getters and setters\n    var $oneOfFields;\n\n    /**\n     * ClassRequest command.\n     * @member {\"endClass\"|\"setHost\"|\"setContent\"|\"setActivityStreamId\"|\"rewardTrophyToUser\"|\"rewardTrophyToAll\"|\"sendChatMessage\"|undefined} command\n     * @memberof ClassRequest\n     * @instance\n     */\n    Object.defineProperty(ClassRequest.prototype, \"command\", {\n        get: $util.oneOfGetter($oneOfFields = [\"endClass\", \"setHost\", \"setContent\", \"setActivityStreamId\", \"rewardTrophyToUser\", \"rewardTrophyToAll\", \"sendChatMessage\"]),\n        set: $util.oneOfSetter($oneOfFields)\n    });\n\n    /**\n     * Creates a new ClassRequest instance using the specified properties.\n     * @function create\n     * @memberof ClassRequest\n     * @static\n     * @param {IClassRequest=} [properties] Properties to set\n     * @returns {ClassRequest} ClassRequest instance\n     */\n    ClassRequest.create = function create(properties) {\n        return new ClassRequest(properties);\n    };\n\n    /**\n     * Encodes the specified ClassRequest message. Does not implicitly {@link ClassRequest.verify|verify} messages.\n     * @function encode\n     * @memberof ClassRequest\n     * @static\n     * @param {IClassRequest} message ClassRequest message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ClassRequest.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.requestId != null && Object.hasOwnProperty.call(message, \"requestId\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.requestId);\n        if (message.endClass != null && Object.hasOwnProperty.call(message, \"endClass\"))\n            $root.EndClassCommand.encode(message.endClass, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();\n        if (message.setHost != null && Object.hasOwnProperty.call(message, \"setHost\"))\n            $root.SetHostCommand.encode(message.setHost, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();\n        if (message.setContent != null && Object.hasOwnProperty.call(message, \"setContent\"))\n            $root.SetContentCommand.encode(message.setContent, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();\n        if (message.setActivityStreamId != null && Object.hasOwnProperty.call(message, \"setActivityStreamId\"))\n            $root.SetActivityStreamIdCommand.encode(message.setActivityStreamId, writer.uint32(/* id 9, wireType 2 =*/74).fork()).ldelim();\n        if (message.rewardTrophyToUser != null && Object.hasOwnProperty.call(message, \"rewardTrophyToUser\"))\n            $root.RewardTrophyToUserCommand.encode(message.rewardTrophyToUser, writer.uint32(/* id 10, wireType 2 =*/82).fork()).ldelim();\n        if (message.rewardTrophyToAll != null && Object.hasOwnProperty.call(message, \"rewardTrophyToAll\"))\n            $root.RewardTrophyToAllCommand.encode(message.rewardTrophyToAll, writer.uint32(/* id 11, wireType 2 =*/90).fork()).ldelim();\n        if (message.sendChatMessage != null && Object.hasOwnProperty.call(message, \"sendChatMessage\"))\n            $root.SendChatMessageCommand.encode(message.sendChatMessage, writer.uint32(/* id 12, wireType 2 =*/98).fork()).ldelim();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ClassRequest message, length delimited. Does not implicitly {@link ClassRequest.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ClassRequest\n     * @static\n     * @param {IClassRequest} message ClassRequest message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ClassRequest.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ClassRequest message from the specified reader or buffer.\n     * @function decode\n     * @memberof ClassRequest\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ClassRequest} ClassRequest\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ClassRequest.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ClassRequest();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.requestId = reader.string();\n                break;\n            case 6:\n                message.endClass = $root.EndClassCommand.decode(reader, reader.uint32());\n                break;\n            case 7:\n                message.setHost = $root.SetHostCommand.decode(reader, reader.uint32());\n                break;\n            case 8:\n                message.setContent = $root.SetContentCommand.decode(reader, reader.uint32());\n                break;\n            case 9:\n                message.setActivityStreamId = $root.SetActivityStreamIdCommand.decode(reader, reader.uint32());\n                break;\n            case 10:\n                message.rewardTrophyToUser = $root.RewardTrophyToUserCommand.decode(reader, reader.uint32());\n                break;\n            case 11:\n                message.rewardTrophyToAll = $root.RewardTrophyToAllCommand.decode(reader, reader.uint32());\n                break;\n            case 12:\n                message.sendChatMessage = $root.SendChatMessageCommand.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ClassRequest message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ClassRequest\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ClassRequest} ClassRequest\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ClassRequest.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ClassRequest message.\n     * @function verify\n     * @memberof ClassRequest\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ClassRequest.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        var properties = {};\n        if (message.requestId != null && message.hasOwnProperty(\"requestId\"))\n            if (!$util.isString(message.requestId))\n                return \"requestId: string expected\";\n        if (message.endClass != null && message.hasOwnProperty(\"endClass\")) {\n            properties.command = 1;\n            {\n                var error = $root.EndClassCommand.verify(message.endClass);\n                if (error)\n                    return \"endClass.\" + error;\n            }\n        }\n        if (message.setHost != null && message.hasOwnProperty(\"setHost\")) {\n            if (properties.command === 1)\n                return \"command: multiple values\";\n            properties.command = 1;\n            {\n                var error = $root.SetHostCommand.verify(message.setHost);\n                if (error)\n                    return \"setHost.\" + error;\n            }\n        }\n        if (message.setContent != null && message.hasOwnProperty(\"setContent\")) {\n            if (properties.command === 1)\n                return \"command: multiple values\";\n            properties.command = 1;\n            {\n                var error = $root.SetContentCommand.verify(message.setContent);\n                if (error)\n                    return \"setContent.\" + error;\n            }\n        }\n        if (message.setActivityStreamId != null && message.hasOwnProperty(\"setActivityStreamId\")) {\n            if (properties.command === 1)\n                return \"command: multiple values\";\n            properties.command = 1;\n            {\n                var error = $root.SetActivityStreamIdCommand.verify(message.setActivityStreamId);\n                if (error)\n                    return \"setActivityStreamId.\" + error;\n            }\n        }\n        if (message.rewardTrophyToUser != null && message.hasOwnProperty(\"rewardTrophyToUser\")) {\n            if (properties.command === 1)\n                return \"command: multiple values\";\n            properties.command = 1;\n            {\n                var error = $root.RewardTrophyToUserCommand.verify(message.rewardTrophyToUser);\n                if (error)\n                    return \"rewardTrophyToUser.\" + error;\n            }\n        }\n        if (message.rewardTrophyToAll != null && message.hasOwnProperty(\"rewardTrophyToAll\")) {\n            if (properties.command === 1)\n                return \"command: multiple values\";\n            properties.command = 1;\n            {\n                var error = $root.RewardTrophyToAllCommand.verify(message.rewardTrophyToAll);\n                if (error)\n                    return \"rewardTrophyToAll.\" + error;\n            }\n        }\n        if (message.sendChatMessage != null && message.hasOwnProperty(\"sendChatMessage\")) {\n            if (properties.command === 1)\n                return \"command: multiple values\";\n            properties.command = 1;\n            {\n                var error = $root.SendChatMessageCommand.verify(message.sendChatMessage);\n                if (error)\n                    return \"sendChatMessage.\" + error;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a ClassRequest message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof ClassRequest\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {ClassRequest} ClassRequest\n     */\n    ClassRequest.fromObject = function fromObject(object) {\n        if (object instanceof $root.ClassRequest)\n            return object;\n        var message = new $root.ClassRequest();\n        if (object.requestId != null)\n            message.requestId = String(object.requestId);\n        if (object.endClass != null) {\n            if (typeof object.endClass !== \"object\")\n                throw TypeError(\".ClassRequest.endClass: object expected\");\n            message.endClass = $root.EndClassCommand.fromObject(object.endClass);\n        }\n        if (object.setHost != null) {\n            if (typeof object.setHost !== \"object\")\n                throw TypeError(\".ClassRequest.setHost: object expected\");\n            message.setHost = $root.SetHostCommand.fromObject(object.setHost);\n        }\n        if (object.setContent != null) {\n            if (typeof object.setContent !== \"object\")\n                throw TypeError(\".ClassRequest.setContent: object expected\");\n            message.setContent = $root.SetContentCommand.fromObject(object.setContent);\n        }\n        if (object.setActivityStreamId != null) {\n            if (typeof object.setActivityStreamId !== \"object\")\n                throw TypeError(\".ClassRequest.setActivityStreamId: object expected\");\n            message.setActivityStreamId = $root.SetActivityStreamIdCommand.fromObject(object.setActivityStreamId);\n        }\n        if (object.rewardTrophyToUser != null) {\n            if (typeof object.rewardTrophyToUser !== \"object\")\n                throw TypeError(\".ClassRequest.rewardTrophyToUser: object expected\");\n            message.rewardTrophyToUser = $root.RewardTrophyToUserCommand.fromObject(object.rewardTrophyToUser);\n        }\n        if (object.rewardTrophyToAll != null) {\n            if (typeof object.rewardTrophyToAll !== \"object\")\n                throw TypeError(\".ClassRequest.rewardTrophyToAll: object expected\");\n            message.rewardTrophyToAll = $root.RewardTrophyToAllCommand.fromObject(object.rewardTrophyToAll);\n        }\n        if (object.sendChatMessage != null) {\n            if (typeof object.sendChatMessage !== \"object\")\n                throw TypeError(\".ClassRequest.sendChatMessage: object expected\");\n            message.sendChatMessage = $root.SendChatMessageCommand.fromObject(object.sendChatMessage);\n        }\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a ClassRequest message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ClassRequest\n     * @static\n     * @param {ClassRequest} message ClassRequest\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ClassRequest.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.requestId = \"\";\n        if (message.requestId != null && message.hasOwnProperty(\"requestId\"))\n            object.requestId = message.requestId;\n        if (message.endClass != null && message.hasOwnProperty(\"endClass\")) {\n            object.endClass = $root.EndClassCommand.toObject(message.endClass, options);\n            if (options.oneofs)\n                object.command = \"endClass\";\n        }\n        if (message.setHost != null && message.hasOwnProperty(\"setHost\")) {\n            object.setHost = $root.SetHostCommand.toObject(message.setHost, options);\n            if (options.oneofs)\n                object.command = \"setHost\";\n        }\n        if (message.setContent != null && message.hasOwnProperty(\"setContent\")) {\n            object.setContent = $root.SetContentCommand.toObject(message.setContent, options);\n            if (options.oneofs)\n                object.command = \"setContent\";\n        }\n        if (message.setActivityStreamId != null && message.hasOwnProperty(\"setActivityStreamId\")) {\n            object.setActivityStreamId = $root.SetActivityStreamIdCommand.toObject(message.setActivityStreamId, options);\n            if (options.oneofs)\n                object.command = \"setActivityStreamId\";\n        }\n        if (message.rewardTrophyToUser != null && message.hasOwnProperty(\"rewardTrophyToUser\")) {\n            object.rewardTrophyToUser = $root.RewardTrophyToUserCommand.toObject(message.rewardTrophyToUser, options);\n            if (options.oneofs)\n                object.command = \"rewardTrophyToUser\";\n        }\n        if (message.rewardTrophyToAll != null && message.hasOwnProperty(\"rewardTrophyToAll\")) {\n            object.rewardTrophyToAll = $root.RewardTrophyToAllCommand.toObject(message.rewardTrophyToAll, options);\n            if (options.oneofs)\n                object.command = \"rewardTrophyToAll\";\n        }\n        if (message.sendChatMessage != null && message.hasOwnProperty(\"sendChatMessage\")) {\n            object.sendChatMessage = $root.SendChatMessageCommand.toObject(message.sendChatMessage, options);\n            if (options.oneofs)\n                object.command = \"sendChatMessage\";\n        }\n        return object;\n    };\n\n    /**\n     * Converts this ClassRequest to JSON.\n     * @function toJSON\n     * @memberof ClassRequest\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ClassRequest.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ClassRequest;\n})();\n\n$root.ClassResponse = (function() {\n\n    /**\n     * Properties of a ClassResponse.\n     * @exports IClassResponse\n     * @interface IClassResponse\n     * @property {string|null} [id] ClassResponse id\n     * @property {string|null} [error] ClassResponse error\n     */\n\n    /**\n     * Constructs a new ClassResponse.\n     * @exports ClassResponse\n     * @classdesc Represents a ClassResponse.\n     * @implements IClassResponse\n     * @constructor\n     * @param {IClassResponse=} [properties] Properties to set\n     */\n    function ClassResponse(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ClassResponse id.\n     * @member {string} id\n     * @memberof ClassResponse\n     * @instance\n     */\n    ClassResponse.prototype.id = \"\";\n\n    /**\n     * ClassResponse error.\n     * @member {string} error\n     * @memberof ClassResponse\n     * @instance\n     */\n    ClassResponse.prototype.error = \"\";\n\n    /**\n     * Creates a new ClassResponse instance using the specified properties.\n     * @function create\n     * @memberof ClassResponse\n     * @static\n     * @param {IClassResponse=} [properties] Properties to set\n     * @returns {ClassResponse} ClassResponse instance\n     */\n    ClassResponse.create = function create(properties) {\n        return new ClassResponse(properties);\n    };\n\n    /**\n     * Encodes the specified ClassResponse message. Does not implicitly {@link ClassResponse.verify|verify} messages.\n     * @function encode\n     * @memberof ClassResponse\n     * @static\n     * @param {IClassResponse} message ClassResponse message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ClassResponse.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.id != null && Object.hasOwnProperty.call(message, \"id\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.id);\n        if (message.error != null && Object.hasOwnProperty.call(message, \"error\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.error);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ClassResponse message, length delimited. Does not implicitly {@link ClassResponse.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ClassResponse\n     * @static\n     * @param {IClassResponse} message ClassResponse message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ClassResponse.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ClassResponse message from the specified reader or buffer.\n     * @function decode\n     * @memberof ClassResponse\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ClassResponse} ClassResponse\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ClassResponse.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ClassResponse();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.id = reader.string();\n                break;\n            case 2:\n                message.error = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ClassResponse message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ClassResponse\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ClassResponse} ClassResponse\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ClassResponse.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ClassResponse message.\n     * @function verify\n     * @memberof ClassResponse\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ClassResponse.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.id != null && message.hasOwnProperty(\"id\"))\n            if (!$util.isString(message.id))\n                return \"id: string expected\";\n        if (message.error != null && message.hasOwnProperty(\"error\"))\n            if (!$util.isString(message.error))\n                return \"error: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a ClassResponse message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof ClassResponse\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {ClassResponse} ClassResponse\n     */\n    ClassResponse.fromObject = function fromObject(object) {\n        if (object instanceof $root.ClassResponse)\n            return object;\n        var message = new $root.ClassResponse();\n        if (object.id != null)\n            message.id = String(object.id);\n        if (object.error != null)\n            message.error = String(object.error);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a ClassResponse message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ClassResponse\n     * @static\n     * @param {ClassResponse} message ClassResponse\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ClassResponse.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.id = \"\";\n            object.error = \"\";\n        }\n        if (message.id != null && message.hasOwnProperty(\"id\"))\n            object.id = message.id;\n        if (message.error != null && message.hasOwnProperty(\"error\"))\n            object.error = message.error;\n        return object;\n    };\n\n    /**\n     * Converts this ClassResponse to JSON.\n     * @function toJSON\n     * @memberof ClassResponse\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ClassResponse.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ClassResponse;\n})();\n\n$root.ClassMessage = (function() {\n\n    /**\n     * Properties of a ClassMessage.\n     * @exports IClassMessage\n     * @interface IClassMessage\n     * @property {IClassResponse|null} [response] ClassMessage response\n     * @property {IJoinEvent|null} [joinEvent] ClassMessage joinEvent\n     * @property {IDeviceConnectedEvent|null} [deviceConnected] ClassMessage deviceConnected\n     * @property {IDeviceDisconnectedEvent|null} [deviceDisconnected] ClassMessage deviceDisconnected\n     * @property {IClassEndedEvent|null} [classEnded] ClassMessage classEnded\n     * @property {IHostChangedEvent|null} [hostChanged] ClassMessage hostChanged\n     * @property {IContentChangedEvent|null} [contentChanged] ClassMessage contentChanged\n     * @property {IActivityStreamIdChangedEvent|null} [activityStreamIdChanged] ClassMessage activityStreamIdChanged\n     * @property {ITrophyRewardedToUserEvent|null} [trophyRewardedToUser] ClassMessage trophyRewardedToUser\n     * @property {ITrophyRewardedToAllEvent|null} [trophyRewardedToAll] ClassMessage trophyRewardedToAll\n     * @property {INewChatMessageEvent|null} [newChatMessage] ClassMessage newChatMessage\n     */\n\n    /**\n     * Constructs a new ClassMessage.\n     * @exports ClassMessage\n     * @classdesc Represents a ClassMessage.\n     * @implements IClassMessage\n     * @constructor\n     * @param {IClassMessage=} [properties] Properties to set\n     */\n    function ClassMessage(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ClassMessage response.\n     * @member {IClassResponse|null|undefined} response\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.response = null;\n\n    /**\n     * ClassMessage joinEvent.\n     * @member {IJoinEvent|null|undefined} joinEvent\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.joinEvent = null;\n\n    /**\n     * ClassMessage deviceConnected.\n     * @member {IDeviceConnectedEvent|null|undefined} deviceConnected\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.deviceConnected = null;\n\n    /**\n     * ClassMessage deviceDisconnected.\n     * @member {IDeviceDisconnectedEvent|null|undefined} deviceDisconnected\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.deviceDisconnected = null;\n\n    /**\n     * ClassMessage classEnded.\n     * @member {IClassEndedEvent|null|undefined} classEnded\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.classEnded = null;\n\n    /**\n     * ClassMessage hostChanged.\n     * @member {IHostChangedEvent|null|undefined} hostChanged\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.hostChanged = null;\n\n    /**\n     * ClassMessage contentChanged.\n     * @member {IContentChangedEvent|null|undefined} contentChanged\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.contentChanged = null;\n\n    /**\n     * ClassMessage activityStreamIdChanged.\n     * @member {IActivityStreamIdChangedEvent|null|undefined} activityStreamIdChanged\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.activityStreamIdChanged = null;\n\n    /**\n     * ClassMessage trophyRewardedToUser.\n     * @member {ITrophyRewardedToUserEvent|null|undefined} trophyRewardedToUser\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.trophyRewardedToUser = null;\n\n    /**\n     * ClassMessage trophyRewardedToAll.\n     * @member {ITrophyRewardedToAllEvent|null|undefined} trophyRewardedToAll\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.trophyRewardedToAll = null;\n\n    /**\n     * ClassMessage newChatMessage.\n     * @member {INewChatMessageEvent|null|undefined} newChatMessage\n     * @memberof ClassMessage\n     * @instance\n     */\n    ClassMessage.prototype.newChatMessage = null;\n\n    // OneOf field names bound to virtual getters and setters\n    var $oneOfFields;\n\n    /**\n     * ClassMessage event.\n     * @member {\"joinEvent\"|\"deviceConnected\"|\"deviceDisconnected\"|\"classEnded\"|\"hostChanged\"|\"contentChanged\"|\"activityStreamIdChanged\"|\"trophyRewardedToUser\"|\"trophyRewardedToAll\"|\"newChatMessage\"|undefined} event\n     * @memberof ClassMessage\n     * @instance\n     */\n    Object.defineProperty(ClassMessage.prototype, \"event\", {\n        get: $util.oneOfGetter($oneOfFields = [\"joinEvent\", \"deviceConnected\", \"deviceDisconnected\", \"classEnded\", \"hostChanged\", \"contentChanged\", \"activityStreamIdChanged\", \"trophyRewardedToUser\", \"trophyRewardedToAll\", \"newChatMessage\"]),\n        set: $util.oneOfSetter($oneOfFields)\n    });\n\n    /**\n     * Creates a new ClassMessage instance using the specified properties.\n     * @function create\n     * @memberof ClassMessage\n     * @static\n     * @param {IClassMessage=} [properties] Properties to set\n     * @returns {ClassMessage} ClassMessage instance\n     */\n    ClassMessage.create = function create(properties) {\n        return new ClassMessage(properties);\n    };\n\n    /**\n     * Encodes the specified ClassMessage message. Does not implicitly {@link ClassMessage.verify|verify} messages.\n     * @function encode\n     * @memberof ClassMessage\n     * @static\n     * @param {IClassMessage} message ClassMessage message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ClassMessage.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.response != null && Object.hasOwnProperty.call(message, \"response\"))\n            $root.ClassResponse.encode(message.response, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.joinEvent != null && Object.hasOwnProperty.call(message, \"joinEvent\"))\n            $root.JoinEvent.encode(message.joinEvent, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n        if (message.deviceConnected != null && Object.hasOwnProperty.call(message, \"deviceConnected\"))\n            $root.DeviceConnectedEvent.encode(message.deviceConnected, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();\n        if (message.deviceDisconnected != null && Object.hasOwnProperty.call(message, \"deviceDisconnected\"))\n            $root.DeviceDisconnectedEvent.encode(message.deviceDisconnected, writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();\n        if (message.classEnded != null && Object.hasOwnProperty.call(message, \"classEnded\"))\n            $root.ClassEndedEvent.encode(message.classEnded, writer.uint32(/* id 6, wireType 2 =*/50).fork()).ldelim();\n        if (message.hostChanged != null && Object.hasOwnProperty.call(message, \"hostChanged\"))\n            $root.HostChangedEvent.encode(message.hostChanged, writer.uint32(/* id 7, wireType 2 =*/58).fork()).ldelim();\n        if (message.contentChanged != null && Object.hasOwnProperty.call(message, \"contentChanged\"))\n            $root.ContentChangedEvent.encode(message.contentChanged, writer.uint32(/* id 8, wireType 2 =*/66).fork()).ldelim();\n        if (message.activityStreamIdChanged != null && Object.hasOwnProperty.call(message, \"activityStreamIdChanged\"))\n            $root.ActivityStreamIdChangedEvent.encode(message.activityStreamIdChanged, writer.uint32(/* id 9, wireType 2 =*/74).fork()).ldelim();\n        if (message.trophyRewardedToUser != null && Object.hasOwnProperty.call(message, \"trophyRewardedToUser\"))\n            $root.TrophyRewardedToUserEvent.encode(message.trophyRewardedToUser, writer.uint32(/* id 10, wireType 2 =*/82).fork()).ldelim();\n        if (message.trophyRewardedToAll != null && Object.hasOwnProperty.call(message, \"trophyRewardedToAll\"))\n            $root.TrophyRewardedToAllEvent.encode(message.trophyRewardedToAll, writer.uint32(/* id 11, wireType 2 =*/90).fork()).ldelim();\n        if (message.newChatMessage != null && Object.hasOwnProperty.call(message, \"newChatMessage\"))\n            $root.NewChatMessageEvent.encode(message.newChatMessage, writer.uint32(/* id 12, wireType 2 =*/98).fork()).ldelim();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ClassMessage message, length delimited. Does not implicitly {@link ClassMessage.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ClassMessage\n     * @static\n     * @param {IClassMessage} message ClassMessage message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ClassMessage.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ClassMessage message from the specified reader or buffer.\n     * @function decode\n     * @memberof ClassMessage\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ClassMessage} ClassMessage\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ClassMessage.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ClassMessage();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.response = $root.ClassResponse.decode(reader, reader.uint32());\n                break;\n            case 3:\n                message.joinEvent = $root.JoinEvent.decode(reader, reader.uint32());\n                break;\n            case 4:\n                message.deviceConnected = $root.DeviceConnectedEvent.decode(reader, reader.uint32());\n                break;\n            case 5:\n                message.deviceDisconnected = $root.DeviceDisconnectedEvent.decode(reader, reader.uint32());\n                break;\n            case 6:\n                message.classEnded = $root.ClassEndedEvent.decode(reader, reader.uint32());\n                break;\n            case 7:\n                message.hostChanged = $root.HostChangedEvent.decode(reader, reader.uint32());\n                break;\n            case 8:\n                message.contentChanged = $root.ContentChangedEvent.decode(reader, reader.uint32());\n                break;\n            case 9:\n                message.activityStreamIdChanged = $root.ActivityStreamIdChangedEvent.decode(reader, reader.uint32());\n                break;\n            case 10:\n                message.trophyRewardedToUser = $root.TrophyRewardedToUserEvent.decode(reader, reader.uint32());\n                break;\n            case 11:\n                message.trophyRewardedToAll = $root.TrophyRewardedToAllEvent.decode(reader, reader.uint32());\n                break;\n            case 12:\n                message.newChatMessage = $root.NewChatMessageEvent.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ClassMessage message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ClassMessage\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ClassMessage} ClassMessage\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ClassMessage.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ClassMessage message.\n     * @function verify\n     * @memberof ClassMessage\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ClassMessage.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        var properties = {};\n        if (message.response != null && message.hasOwnProperty(\"response\")) {\n            var error = $root.ClassResponse.verify(message.response);\n            if (error)\n                return \"response.\" + error;\n        }\n        if (message.joinEvent != null && message.hasOwnProperty(\"joinEvent\")) {\n            properties.event = 1;\n            {\n                var error = $root.JoinEvent.verify(message.joinEvent);\n                if (error)\n                    return \"joinEvent.\" + error;\n            }\n        }\n        if (message.deviceConnected != null && message.hasOwnProperty(\"deviceConnected\")) {\n            if (properties.event === 1)\n                return \"event: multiple values\";\n            properties.event = 1;\n            {\n                var error = $root.DeviceConnectedEvent.verify(message.deviceConnected);\n                if (error)\n                    return \"deviceConnected.\" + error;\n            }\n        }\n        if (message.deviceDisconnected != null && message.hasOwnProperty(\"deviceDisconnected\")) {\n            if (properties.event === 1)\n                return \"event: multiple values\";\n            properties.event = 1;\n            {\n                var error = $root.DeviceDisconnectedEvent.verify(message.deviceDisconnected);\n                if (error)\n                    return \"deviceDisconnected.\" + error;\n            }\n        }\n        if (message.classEnded != null && message.hasOwnProperty(\"classEnded\")) {\n            if (properties.event === 1)\n                return \"event: multiple values\";\n            properties.event = 1;\n            {\n                var error = $root.ClassEndedEvent.verify(message.classEnded);\n                if (error)\n                    return \"classEnded.\" + error;\n            }\n        }\n        if (message.hostChanged != null && message.hasOwnProperty(\"hostChanged\")) {\n            if (properties.event === 1)\n                return \"event: multiple values\";\n            properties.event = 1;\n            {\n                var error = $root.HostChangedEvent.verify(message.hostChanged);\n                if (error)\n                    return \"hostChanged.\" + error;\n            }\n        }\n        if (message.contentChanged != null && message.hasOwnProperty(\"contentChanged\")) {\n            if (properties.event === 1)\n                return \"event: multiple values\";\n            properties.event = 1;\n            {\n                var error = $root.ContentChangedEvent.verify(message.contentChanged);\n                if (error)\n                    return \"contentChanged.\" + error;\n            }\n        }\n        if (message.activityStreamIdChanged != null && message.hasOwnProperty(\"activityStreamIdChanged\")) {\n            if (properties.event === 1)\n                return \"event: multiple values\";\n            properties.event = 1;\n            {\n                var error = $root.ActivityStreamIdChangedEvent.verify(message.activityStreamIdChanged);\n                if (error)\n                    return \"activityStreamIdChanged.\" + error;\n            }\n        }\n        if (message.trophyRewardedToUser != null && message.hasOwnProperty(\"trophyRewardedToUser\")) {\n            if (properties.event === 1)\n                return \"event: multiple values\";\n            properties.event = 1;\n            {\n                var error = $root.TrophyRewardedToUserEvent.verify(message.trophyRewardedToUser);\n                if (error)\n                    return \"trophyRewardedToUser.\" + error;\n            }\n        }\n        if (message.trophyRewardedToAll != null && message.hasOwnProperty(\"trophyRewardedToAll\")) {\n            if (properties.event === 1)\n                return \"event: multiple values\";\n            properties.event = 1;\n            {\n                var error = $root.TrophyRewardedToAllEvent.verify(message.trophyRewardedToAll);\n                if (error)\n                    return \"trophyRewardedToAll.\" + error;\n            }\n        }\n        if (message.newChatMessage != null && message.hasOwnProperty(\"newChatMessage\")) {\n            if (properties.event === 1)\n                return \"event: multiple values\";\n            properties.event = 1;\n            {\n                var error = $root.NewChatMessageEvent.verify(message.newChatMessage);\n                if (error)\n                    return \"newChatMessage.\" + error;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a ClassMessage message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof ClassMessage\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {ClassMessage} ClassMessage\n     */\n    ClassMessage.fromObject = function fromObject(object) {\n        if (object instanceof $root.ClassMessage)\n            return object;\n        var message = new $root.ClassMessage();\n        if (object.response != null) {\n            if (typeof object.response !== \"object\")\n                throw TypeError(\".ClassMessage.response: object expected\");\n            message.response = $root.ClassResponse.fromObject(object.response);\n        }\n        if (object.joinEvent != null) {\n            if (typeof object.joinEvent !== \"object\")\n                throw TypeError(\".ClassMessage.joinEvent: object expected\");\n            message.joinEvent = $root.JoinEvent.fromObject(object.joinEvent);\n        }\n        if (object.deviceConnected != null) {\n            if (typeof object.deviceConnected !== \"object\")\n                throw TypeError(\".ClassMessage.deviceConnected: object expected\");\n            message.deviceConnected = $root.DeviceConnectedEvent.fromObject(object.deviceConnected);\n        }\n        if (object.deviceDisconnected != null) {\n            if (typeof object.deviceDisconnected !== \"object\")\n                throw TypeError(\".ClassMessage.deviceDisconnected: object expected\");\n            message.deviceDisconnected = $root.DeviceDisconnectedEvent.fromObject(object.deviceDisconnected);\n        }\n        if (object.classEnded != null) {\n            if (typeof object.classEnded !== \"object\")\n                throw TypeError(\".ClassMessage.classEnded: object expected\");\n            message.classEnded = $root.ClassEndedEvent.fromObject(object.classEnded);\n        }\n        if (object.hostChanged != null) {\n            if (typeof object.hostChanged !== \"object\")\n                throw TypeError(\".ClassMessage.hostChanged: object expected\");\n            message.hostChanged = $root.HostChangedEvent.fromObject(object.hostChanged);\n        }\n        if (object.contentChanged != null) {\n            if (typeof object.contentChanged !== \"object\")\n                throw TypeError(\".ClassMessage.contentChanged: object expected\");\n            message.contentChanged = $root.ContentChangedEvent.fromObject(object.contentChanged);\n        }\n        if (object.activityStreamIdChanged != null) {\n            if (typeof object.activityStreamIdChanged !== \"object\")\n                throw TypeError(\".ClassMessage.activityStreamIdChanged: object expected\");\n            message.activityStreamIdChanged = $root.ActivityStreamIdChangedEvent.fromObject(object.activityStreamIdChanged);\n        }\n        if (object.trophyRewardedToUser != null) {\n            if (typeof object.trophyRewardedToUser !== \"object\")\n                throw TypeError(\".ClassMessage.trophyRewardedToUser: object expected\");\n            message.trophyRewardedToUser = $root.TrophyRewardedToUserEvent.fromObject(object.trophyRewardedToUser);\n        }\n        if (object.trophyRewardedToAll != null) {\n            if (typeof object.trophyRewardedToAll !== \"object\")\n                throw TypeError(\".ClassMessage.trophyRewardedToAll: object expected\");\n            message.trophyRewardedToAll = $root.TrophyRewardedToAllEvent.fromObject(object.trophyRewardedToAll);\n        }\n        if (object.newChatMessage != null) {\n            if (typeof object.newChatMessage !== \"object\")\n                throw TypeError(\".ClassMessage.newChatMessage: object expected\");\n            message.newChatMessage = $root.NewChatMessageEvent.fromObject(object.newChatMessage);\n        }\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a ClassMessage message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ClassMessage\n     * @static\n     * @param {ClassMessage} message ClassMessage\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ClassMessage.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.response = null;\n        if (message.response != null && message.hasOwnProperty(\"response\"))\n            object.response = $root.ClassResponse.toObject(message.response, options);\n        if (message.joinEvent != null && message.hasOwnProperty(\"joinEvent\")) {\n            object.joinEvent = $root.JoinEvent.toObject(message.joinEvent, options);\n            if (options.oneofs)\n                object.event = \"joinEvent\";\n        }\n        if (message.deviceConnected != null && message.hasOwnProperty(\"deviceConnected\")) {\n            object.deviceConnected = $root.DeviceConnectedEvent.toObject(message.deviceConnected, options);\n            if (options.oneofs)\n                object.event = \"deviceConnected\";\n        }\n        if (message.deviceDisconnected != null && message.hasOwnProperty(\"deviceDisconnected\")) {\n            object.deviceDisconnected = $root.DeviceDisconnectedEvent.toObject(message.deviceDisconnected, options);\n            if (options.oneofs)\n                object.event = \"deviceDisconnected\";\n        }\n        if (message.classEnded != null && message.hasOwnProperty(\"classEnded\")) {\n            object.classEnded = $root.ClassEndedEvent.toObject(message.classEnded, options);\n            if (options.oneofs)\n                object.event = \"classEnded\";\n        }\n        if (message.hostChanged != null && message.hasOwnProperty(\"hostChanged\")) {\n            object.hostChanged = $root.HostChangedEvent.toObject(message.hostChanged, options);\n            if (options.oneofs)\n                object.event = \"hostChanged\";\n        }\n        if (message.contentChanged != null && message.hasOwnProperty(\"contentChanged\")) {\n            object.contentChanged = $root.ContentChangedEvent.toObject(message.contentChanged, options);\n            if (options.oneofs)\n                object.event = \"contentChanged\";\n        }\n        if (message.activityStreamIdChanged != null && message.hasOwnProperty(\"activityStreamIdChanged\")) {\n            object.activityStreamIdChanged = $root.ActivityStreamIdChangedEvent.toObject(message.activityStreamIdChanged, options);\n            if (options.oneofs)\n                object.event = \"activityStreamIdChanged\";\n        }\n        if (message.trophyRewardedToUser != null && message.hasOwnProperty(\"trophyRewardedToUser\")) {\n            object.trophyRewardedToUser = $root.TrophyRewardedToUserEvent.toObject(message.trophyRewardedToUser, options);\n            if (options.oneofs)\n                object.event = \"trophyRewardedToUser\";\n        }\n        if (message.trophyRewardedToAll != null && message.hasOwnProperty(\"trophyRewardedToAll\")) {\n            object.trophyRewardedToAll = $root.TrophyRewardedToAllEvent.toObject(message.trophyRewardedToAll, options);\n            if (options.oneofs)\n                object.event = \"trophyRewardedToAll\";\n        }\n        if (message.newChatMessage != null && message.hasOwnProperty(\"newChatMessage\")) {\n            object.newChatMessage = $root.NewChatMessageEvent.toObject(message.newChatMessage, options);\n            if (options.oneofs)\n                object.event = \"newChatMessage\";\n        }\n        return object;\n    };\n\n    /**\n     * Converts this ClassMessage to JSON.\n     * @function toJSON\n     * @memberof ClassMessage\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ClassMessage.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ClassMessage;\n})();\n\n$root.EndClassCommand = (function() {\n\n    /**\n     * Properties of an EndClassCommand.\n     * @exports IEndClassCommand\n     * @interface IEndClassCommand\n     */\n\n    /**\n     * Constructs a new EndClassCommand.\n     * @exports EndClassCommand\n     * @classdesc Represents an EndClassCommand.\n     * @implements IEndClassCommand\n     * @constructor\n     * @param {IEndClassCommand=} [properties] Properties to set\n     */\n    function EndClassCommand(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * Creates a new EndClassCommand instance using the specified properties.\n     * @function create\n     * @memberof EndClassCommand\n     * @static\n     * @param {IEndClassCommand=} [properties] Properties to set\n     * @returns {EndClassCommand} EndClassCommand instance\n     */\n    EndClassCommand.create = function create(properties) {\n        return new EndClassCommand(properties);\n    };\n\n    /**\n     * Encodes the specified EndClassCommand message. Does not implicitly {@link EndClassCommand.verify|verify} messages.\n     * @function encode\n     * @memberof EndClassCommand\n     * @static\n     * @param {IEndClassCommand} message EndClassCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    EndClassCommand.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified EndClassCommand message, length delimited. Does not implicitly {@link EndClassCommand.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof EndClassCommand\n     * @static\n     * @param {IEndClassCommand} message EndClassCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    EndClassCommand.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes an EndClassCommand message from the specified reader or buffer.\n     * @function decode\n     * @memberof EndClassCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {EndClassCommand} EndClassCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    EndClassCommand.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.EndClassCommand();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes an EndClassCommand message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof EndClassCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {EndClassCommand} EndClassCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    EndClassCommand.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies an EndClassCommand message.\n     * @function verify\n     * @memberof EndClassCommand\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    EndClassCommand.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        return null;\n    };\n\n    /**\n     * Creates an EndClassCommand message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof EndClassCommand\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {EndClassCommand} EndClassCommand\n     */\n    EndClassCommand.fromObject = function fromObject(object) {\n        if (object instanceof $root.EndClassCommand)\n            return object;\n        return new $root.EndClassCommand();\n    };\n\n    /**\n     * Creates a plain object from an EndClassCommand message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof EndClassCommand\n     * @static\n     * @param {EndClassCommand} message EndClassCommand\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    EndClassCommand.toObject = function toObject() {\n        return {};\n    };\n\n    /**\n     * Converts this EndClassCommand to JSON.\n     * @function toJSON\n     * @memberof EndClassCommand\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    EndClassCommand.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return EndClassCommand;\n})();\n\n$root.SetHostCommand = (function() {\n\n    /**\n     * Properties of a SetHostCommand.\n     * @exports ISetHostCommand\n     * @interface ISetHostCommand\n     * @property {string|null} [hostDeviceId] SetHostCommand hostDeviceId\n     */\n\n    /**\n     * Constructs a new SetHostCommand.\n     * @exports SetHostCommand\n     * @classdesc Represents a SetHostCommand.\n     * @implements ISetHostCommand\n     * @constructor\n     * @param {ISetHostCommand=} [properties] Properties to set\n     */\n    function SetHostCommand(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * SetHostCommand hostDeviceId.\n     * @member {string} hostDeviceId\n     * @memberof SetHostCommand\n     * @instance\n     */\n    SetHostCommand.prototype.hostDeviceId = \"\";\n\n    /**\n     * Creates a new SetHostCommand instance using the specified properties.\n     * @function create\n     * @memberof SetHostCommand\n     * @static\n     * @param {ISetHostCommand=} [properties] Properties to set\n     * @returns {SetHostCommand} SetHostCommand instance\n     */\n    SetHostCommand.create = function create(properties) {\n        return new SetHostCommand(properties);\n    };\n\n    /**\n     * Encodes the specified SetHostCommand message. Does not implicitly {@link SetHostCommand.verify|verify} messages.\n     * @function encode\n     * @memberof SetHostCommand\n     * @static\n     * @param {ISetHostCommand} message SetHostCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    SetHostCommand.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.hostDeviceId != null && Object.hasOwnProperty.call(message, \"hostDeviceId\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.hostDeviceId);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified SetHostCommand message, length delimited. Does not implicitly {@link SetHostCommand.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof SetHostCommand\n     * @static\n     * @param {ISetHostCommand} message SetHostCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    SetHostCommand.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a SetHostCommand message from the specified reader or buffer.\n     * @function decode\n     * @memberof SetHostCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {SetHostCommand} SetHostCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    SetHostCommand.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.SetHostCommand();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.hostDeviceId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a SetHostCommand message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof SetHostCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {SetHostCommand} SetHostCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    SetHostCommand.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a SetHostCommand message.\n     * @function verify\n     * @memberof SetHostCommand\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    SetHostCommand.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.hostDeviceId != null && message.hasOwnProperty(\"hostDeviceId\"))\n            if (!$util.isString(message.hostDeviceId))\n                return \"hostDeviceId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a SetHostCommand message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof SetHostCommand\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {SetHostCommand} SetHostCommand\n     */\n    SetHostCommand.fromObject = function fromObject(object) {\n        if (object instanceof $root.SetHostCommand)\n            return object;\n        var message = new $root.SetHostCommand();\n        if (object.hostDeviceId != null)\n            message.hostDeviceId = String(object.hostDeviceId);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a SetHostCommand message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof SetHostCommand\n     * @static\n     * @param {SetHostCommand} message SetHostCommand\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    SetHostCommand.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.hostDeviceId = \"\";\n        if (message.hostDeviceId != null && message.hasOwnProperty(\"hostDeviceId\"))\n            object.hostDeviceId = message.hostDeviceId;\n        return object;\n    };\n\n    /**\n     * Converts this SetHostCommand to JSON.\n     * @function toJSON\n     * @memberof SetHostCommand\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    SetHostCommand.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return SetHostCommand;\n})();\n\n$root.SetContentCommand = (function() {\n\n    /**\n     * Properties of a SetContentCommand.\n     * @exports ISetContentCommand\n     * @interface ISetContentCommand\n     * @property {IContent|null} [content] SetContentCommand content\n     */\n\n    /**\n     * Constructs a new SetContentCommand.\n     * @exports SetContentCommand\n     * @classdesc Represents a SetContentCommand.\n     * @implements ISetContentCommand\n     * @constructor\n     * @param {ISetContentCommand=} [properties] Properties to set\n     */\n    function SetContentCommand(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * SetContentCommand content.\n     * @member {IContent|null|undefined} content\n     * @memberof SetContentCommand\n     * @instance\n     */\n    SetContentCommand.prototype.content = null;\n\n    /**\n     * Creates a new SetContentCommand instance using the specified properties.\n     * @function create\n     * @memberof SetContentCommand\n     * @static\n     * @param {ISetContentCommand=} [properties] Properties to set\n     * @returns {SetContentCommand} SetContentCommand instance\n     */\n    SetContentCommand.create = function create(properties) {\n        return new SetContentCommand(properties);\n    };\n\n    /**\n     * Encodes the specified SetContentCommand message. Does not implicitly {@link SetContentCommand.verify|verify} messages.\n     * @function encode\n     * @memberof SetContentCommand\n     * @static\n     * @param {ISetContentCommand} message SetContentCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    SetContentCommand.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.content != null && Object.hasOwnProperty.call(message, \"content\"))\n            $root.Content.encode(message.content, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified SetContentCommand message, length delimited. Does not implicitly {@link SetContentCommand.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof SetContentCommand\n     * @static\n     * @param {ISetContentCommand} message SetContentCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    SetContentCommand.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a SetContentCommand message from the specified reader or buffer.\n     * @function decode\n     * @memberof SetContentCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {SetContentCommand} SetContentCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    SetContentCommand.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.SetContentCommand();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.content = $root.Content.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a SetContentCommand message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof SetContentCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {SetContentCommand} SetContentCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    SetContentCommand.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a SetContentCommand message.\n     * @function verify\n     * @memberof SetContentCommand\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    SetContentCommand.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.content != null && message.hasOwnProperty(\"content\")) {\n            var error = $root.Content.verify(message.content);\n            if (error)\n                return \"content.\" + error;\n        }\n        return null;\n    };\n\n    /**\n     * Creates a SetContentCommand message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof SetContentCommand\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {SetContentCommand} SetContentCommand\n     */\n    SetContentCommand.fromObject = function fromObject(object) {\n        if (object instanceof $root.SetContentCommand)\n            return object;\n        var message = new $root.SetContentCommand();\n        if (object.content != null) {\n            if (typeof object.content !== \"object\")\n                throw TypeError(\".SetContentCommand.content: object expected\");\n            message.content = $root.Content.fromObject(object.content);\n        }\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a SetContentCommand message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof SetContentCommand\n     * @static\n     * @param {SetContentCommand} message SetContentCommand\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    SetContentCommand.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.content = null;\n        if (message.content != null && message.hasOwnProperty(\"content\"))\n            object.content = $root.Content.toObject(message.content, options);\n        return object;\n    };\n\n    /**\n     * Converts this SetContentCommand to JSON.\n     * @function toJSON\n     * @memberof SetContentCommand\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    SetContentCommand.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return SetContentCommand;\n})();\n\n$root.SetActivityStreamIdCommand = (function() {\n\n    /**\n     * Properties of a SetActivityStreamIdCommand.\n     * @exports ISetActivityStreamIdCommand\n     * @interface ISetActivityStreamIdCommand\n     * @property {string|null} [activityStreamId] SetActivityStreamIdCommand activityStreamId\n     */\n\n    /**\n     * Constructs a new SetActivityStreamIdCommand.\n     * @exports SetActivityStreamIdCommand\n     * @classdesc Represents a SetActivityStreamIdCommand.\n     * @implements ISetActivityStreamIdCommand\n     * @constructor\n     * @param {ISetActivityStreamIdCommand=} [properties] Properties to set\n     */\n    function SetActivityStreamIdCommand(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * SetActivityStreamIdCommand activityStreamId.\n     * @member {string} activityStreamId\n     * @memberof SetActivityStreamIdCommand\n     * @instance\n     */\n    SetActivityStreamIdCommand.prototype.activityStreamId = \"\";\n\n    /**\n     * Creates a new SetActivityStreamIdCommand instance using the specified properties.\n     * @function create\n     * @memberof SetActivityStreamIdCommand\n     * @static\n     * @param {ISetActivityStreamIdCommand=} [properties] Properties to set\n     * @returns {SetActivityStreamIdCommand} SetActivityStreamIdCommand instance\n     */\n    SetActivityStreamIdCommand.create = function create(properties) {\n        return new SetActivityStreamIdCommand(properties);\n    };\n\n    /**\n     * Encodes the specified SetActivityStreamIdCommand message. Does not implicitly {@link SetActivityStreamIdCommand.verify|verify} messages.\n     * @function encode\n     * @memberof SetActivityStreamIdCommand\n     * @static\n     * @param {ISetActivityStreamIdCommand} message SetActivityStreamIdCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    SetActivityStreamIdCommand.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.activityStreamId != null && Object.hasOwnProperty.call(message, \"activityStreamId\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.activityStreamId);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified SetActivityStreamIdCommand message, length delimited. Does not implicitly {@link SetActivityStreamIdCommand.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof SetActivityStreamIdCommand\n     * @static\n     * @param {ISetActivityStreamIdCommand} message SetActivityStreamIdCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    SetActivityStreamIdCommand.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a SetActivityStreamIdCommand message from the specified reader or buffer.\n     * @function decode\n     * @memberof SetActivityStreamIdCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {SetActivityStreamIdCommand} SetActivityStreamIdCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    SetActivityStreamIdCommand.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.SetActivityStreamIdCommand();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.activityStreamId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a SetActivityStreamIdCommand message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof SetActivityStreamIdCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {SetActivityStreamIdCommand} SetActivityStreamIdCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    SetActivityStreamIdCommand.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a SetActivityStreamIdCommand message.\n     * @function verify\n     * @memberof SetActivityStreamIdCommand\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    SetActivityStreamIdCommand.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.activityStreamId != null && message.hasOwnProperty(\"activityStreamId\"))\n            if (!$util.isString(message.activityStreamId))\n                return \"activityStreamId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a SetActivityStreamIdCommand message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof SetActivityStreamIdCommand\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {SetActivityStreamIdCommand} SetActivityStreamIdCommand\n     */\n    SetActivityStreamIdCommand.fromObject = function fromObject(object) {\n        if (object instanceof $root.SetActivityStreamIdCommand)\n            return object;\n        var message = new $root.SetActivityStreamIdCommand();\n        if (object.activityStreamId != null)\n            message.activityStreamId = String(object.activityStreamId);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a SetActivityStreamIdCommand message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof SetActivityStreamIdCommand\n     * @static\n     * @param {SetActivityStreamIdCommand} message SetActivityStreamIdCommand\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    SetActivityStreamIdCommand.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.activityStreamId = \"\";\n        if (message.activityStreamId != null && message.hasOwnProperty(\"activityStreamId\"))\n            object.activityStreamId = message.activityStreamId;\n        return object;\n    };\n\n    /**\n     * Converts this SetActivityStreamIdCommand to JSON.\n     * @function toJSON\n     * @memberof SetActivityStreamIdCommand\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    SetActivityStreamIdCommand.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return SetActivityStreamIdCommand;\n})();\n\n$root.RewardTrophyToUserCommand = (function() {\n\n    /**\n     * Properties of a RewardTrophyToUserCommand.\n     * @exports IRewardTrophyToUserCommand\n     * @interface IRewardTrophyToUserCommand\n     * @property {string|null} [trophyType] RewardTrophyToUserCommand trophyType\n     * @property {string|null} [toUserId] RewardTrophyToUserCommand toUserId\n     */\n\n    /**\n     * Constructs a new RewardTrophyToUserCommand.\n     * @exports RewardTrophyToUserCommand\n     * @classdesc Represents a RewardTrophyToUserCommand.\n     * @implements IRewardTrophyToUserCommand\n     * @constructor\n     * @param {IRewardTrophyToUserCommand=} [properties] Properties to set\n     */\n    function RewardTrophyToUserCommand(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * RewardTrophyToUserCommand trophyType.\n     * @member {string} trophyType\n     * @memberof RewardTrophyToUserCommand\n     * @instance\n     */\n    RewardTrophyToUserCommand.prototype.trophyType = \"\";\n\n    /**\n     * RewardTrophyToUserCommand toUserId.\n     * @member {string} toUserId\n     * @memberof RewardTrophyToUserCommand\n     * @instance\n     */\n    RewardTrophyToUserCommand.prototype.toUserId = \"\";\n\n    /**\n     * Creates a new RewardTrophyToUserCommand instance using the specified properties.\n     * @function create\n     * @memberof RewardTrophyToUserCommand\n     * @static\n     * @param {IRewardTrophyToUserCommand=} [properties] Properties to set\n     * @returns {RewardTrophyToUserCommand} RewardTrophyToUserCommand instance\n     */\n    RewardTrophyToUserCommand.create = function create(properties) {\n        return new RewardTrophyToUserCommand(properties);\n    };\n\n    /**\n     * Encodes the specified RewardTrophyToUserCommand message. Does not implicitly {@link RewardTrophyToUserCommand.verify|verify} messages.\n     * @function encode\n     * @memberof RewardTrophyToUserCommand\n     * @static\n     * @param {IRewardTrophyToUserCommand} message RewardTrophyToUserCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    RewardTrophyToUserCommand.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.trophyType != null && Object.hasOwnProperty.call(message, \"trophyType\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.trophyType);\n        if (message.toUserId != null && Object.hasOwnProperty.call(message, \"toUserId\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.toUserId);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified RewardTrophyToUserCommand message, length delimited. Does not implicitly {@link RewardTrophyToUserCommand.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof RewardTrophyToUserCommand\n     * @static\n     * @param {IRewardTrophyToUserCommand} message RewardTrophyToUserCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    RewardTrophyToUserCommand.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a RewardTrophyToUserCommand message from the specified reader or buffer.\n     * @function decode\n     * @memberof RewardTrophyToUserCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {RewardTrophyToUserCommand} RewardTrophyToUserCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    RewardTrophyToUserCommand.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.RewardTrophyToUserCommand();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.trophyType = reader.string();\n                break;\n            case 2:\n                message.toUserId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a RewardTrophyToUserCommand message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof RewardTrophyToUserCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {RewardTrophyToUserCommand} RewardTrophyToUserCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    RewardTrophyToUserCommand.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a RewardTrophyToUserCommand message.\n     * @function verify\n     * @memberof RewardTrophyToUserCommand\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    RewardTrophyToUserCommand.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.trophyType != null && message.hasOwnProperty(\"trophyType\"))\n            if (!$util.isString(message.trophyType))\n                return \"trophyType: string expected\";\n        if (message.toUserId != null && message.hasOwnProperty(\"toUserId\"))\n            if (!$util.isString(message.toUserId))\n                return \"toUserId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a RewardTrophyToUserCommand message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof RewardTrophyToUserCommand\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {RewardTrophyToUserCommand} RewardTrophyToUserCommand\n     */\n    RewardTrophyToUserCommand.fromObject = function fromObject(object) {\n        if (object instanceof $root.RewardTrophyToUserCommand)\n            return object;\n        var message = new $root.RewardTrophyToUserCommand();\n        if (object.trophyType != null)\n            message.trophyType = String(object.trophyType);\n        if (object.toUserId != null)\n            message.toUserId = String(object.toUserId);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a RewardTrophyToUserCommand message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof RewardTrophyToUserCommand\n     * @static\n     * @param {RewardTrophyToUserCommand} message RewardTrophyToUserCommand\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    RewardTrophyToUserCommand.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.trophyType = \"\";\n            object.toUserId = \"\";\n        }\n        if (message.trophyType != null && message.hasOwnProperty(\"trophyType\"))\n            object.trophyType = message.trophyType;\n        if (message.toUserId != null && message.hasOwnProperty(\"toUserId\"))\n            object.toUserId = message.toUserId;\n        return object;\n    };\n\n    /**\n     * Converts this RewardTrophyToUserCommand to JSON.\n     * @function toJSON\n     * @memberof RewardTrophyToUserCommand\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    RewardTrophyToUserCommand.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return RewardTrophyToUserCommand;\n})();\n\n$root.RewardTrophyToAllCommand = (function() {\n\n    /**\n     * Properties of a RewardTrophyToAllCommand.\n     * @exports IRewardTrophyToAllCommand\n     * @interface IRewardTrophyToAllCommand\n     * @property {string|null} [trophyType] RewardTrophyToAllCommand trophyType\n     */\n\n    /**\n     * Constructs a new RewardTrophyToAllCommand.\n     * @exports RewardTrophyToAllCommand\n     * @classdesc Represents a RewardTrophyToAllCommand.\n     * @implements IRewardTrophyToAllCommand\n     * @constructor\n     * @param {IRewardTrophyToAllCommand=} [properties] Properties to set\n     */\n    function RewardTrophyToAllCommand(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * RewardTrophyToAllCommand trophyType.\n     * @member {string} trophyType\n     * @memberof RewardTrophyToAllCommand\n     * @instance\n     */\n    RewardTrophyToAllCommand.prototype.trophyType = \"\";\n\n    /**\n     * Creates a new RewardTrophyToAllCommand instance using the specified properties.\n     * @function create\n     * @memberof RewardTrophyToAllCommand\n     * @static\n     * @param {IRewardTrophyToAllCommand=} [properties] Properties to set\n     * @returns {RewardTrophyToAllCommand} RewardTrophyToAllCommand instance\n     */\n    RewardTrophyToAllCommand.create = function create(properties) {\n        return new RewardTrophyToAllCommand(properties);\n    };\n\n    /**\n     * Encodes the specified RewardTrophyToAllCommand message. Does not implicitly {@link RewardTrophyToAllCommand.verify|verify} messages.\n     * @function encode\n     * @memberof RewardTrophyToAllCommand\n     * @static\n     * @param {IRewardTrophyToAllCommand} message RewardTrophyToAllCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    RewardTrophyToAllCommand.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.trophyType != null && Object.hasOwnProperty.call(message, \"trophyType\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.trophyType);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified RewardTrophyToAllCommand message, length delimited. Does not implicitly {@link RewardTrophyToAllCommand.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof RewardTrophyToAllCommand\n     * @static\n     * @param {IRewardTrophyToAllCommand} message RewardTrophyToAllCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    RewardTrophyToAllCommand.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a RewardTrophyToAllCommand message from the specified reader or buffer.\n     * @function decode\n     * @memberof RewardTrophyToAllCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {RewardTrophyToAllCommand} RewardTrophyToAllCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    RewardTrophyToAllCommand.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.RewardTrophyToAllCommand();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.trophyType = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a RewardTrophyToAllCommand message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof RewardTrophyToAllCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {RewardTrophyToAllCommand} RewardTrophyToAllCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    RewardTrophyToAllCommand.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a RewardTrophyToAllCommand message.\n     * @function verify\n     * @memberof RewardTrophyToAllCommand\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    RewardTrophyToAllCommand.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.trophyType != null && message.hasOwnProperty(\"trophyType\"))\n            if (!$util.isString(message.trophyType))\n                return \"trophyType: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a RewardTrophyToAllCommand message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof RewardTrophyToAllCommand\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {RewardTrophyToAllCommand} RewardTrophyToAllCommand\n     */\n    RewardTrophyToAllCommand.fromObject = function fromObject(object) {\n        if (object instanceof $root.RewardTrophyToAllCommand)\n            return object;\n        var message = new $root.RewardTrophyToAllCommand();\n        if (object.trophyType != null)\n            message.trophyType = String(object.trophyType);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a RewardTrophyToAllCommand message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof RewardTrophyToAllCommand\n     * @static\n     * @param {RewardTrophyToAllCommand} message RewardTrophyToAllCommand\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    RewardTrophyToAllCommand.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.trophyType = \"\";\n        if (message.trophyType != null && message.hasOwnProperty(\"trophyType\"))\n            object.trophyType = message.trophyType;\n        return object;\n    };\n\n    /**\n     * Converts this RewardTrophyToAllCommand to JSON.\n     * @function toJSON\n     * @memberof RewardTrophyToAllCommand\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    RewardTrophyToAllCommand.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return RewardTrophyToAllCommand;\n})();\n\n$root.SendChatMessageCommand = (function() {\n\n    /**\n     * Properties of a SendChatMessageCommand.\n     * @exports ISendChatMessageCommand\n     * @interface ISendChatMessageCommand\n     * @property {string|null} [text] SendChatMessageCommand text\n     */\n\n    /**\n     * Constructs a new SendChatMessageCommand.\n     * @exports SendChatMessageCommand\n     * @classdesc Represents a SendChatMessageCommand.\n     * @implements ISendChatMessageCommand\n     * @constructor\n     * @param {ISendChatMessageCommand=} [properties] Properties to set\n     */\n    function SendChatMessageCommand(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * SendChatMessageCommand text.\n     * @member {string} text\n     * @memberof SendChatMessageCommand\n     * @instance\n     */\n    SendChatMessageCommand.prototype.text = \"\";\n\n    /**\n     * Creates a new SendChatMessageCommand instance using the specified properties.\n     * @function create\n     * @memberof SendChatMessageCommand\n     * @static\n     * @param {ISendChatMessageCommand=} [properties] Properties to set\n     * @returns {SendChatMessageCommand} SendChatMessageCommand instance\n     */\n    SendChatMessageCommand.create = function create(properties) {\n        return new SendChatMessageCommand(properties);\n    };\n\n    /**\n     * Encodes the specified SendChatMessageCommand message. Does not implicitly {@link SendChatMessageCommand.verify|verify} messages.\n     * @function encode\n     * @memberof SendChatMessageCommand\n     * @static\n     * @param {ISendChatMessageCommand} message SendChatMessageCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    SendChatMessageCommand.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.text != null && Object.hasOwnProperty.call(message, \"text\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.text);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified SendChatMessageCommand message, length delimited. Does not implicitly {@link SendChatMessageCommand.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof SendChatMessageCommand\n     * @static\n     * @param {ISendChatMessageCommand} message SendChatMessageCommand message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    SendChatMessageCommand.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a SendChatMessageCommand message from the specified reader or buffer.\n     * @function decode\n     * @memberof SendChatMessageCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {SendChatMessageCommand} SendChatMessageCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    SendChatMessageCommand.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.SendChatMessageCommand();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.text = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a SendChatMessageCommand message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof SendChatMessageCommand\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {SendChatMessageCommand} SendChatMessageCommand\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    SendChatMessageCommand.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a SendChatMessageCommand message.\n     * @function verify\n     * @memberof SendChatMessageCommand\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    SendChatMessageCommand.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.text != null && message.hasOwnProperty(\"text\"))\n            if (!$util.isString(message.text))\n                return \"text: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a SendChatMessageCommand message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof SendChatMessageCommand\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {SendChatMessageCommand} SendChatMessageCommand\n     */\n    SendChatMessageCommand.fromObject = function fromObject(object) {\n        if (object instanceof $root.SendChatMessageCommand)\n            return object;\n        var message = new $root.SendChatMessageCommand();\n        if (object.text != null)\n            message.text = String(object.text);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a SendChatMessageCommand message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof SendChatMessageCommand\n     * @static\n     * @param {SendChatMessageCommand} message SendChatMessageCommand\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    SendChatMessageCommand.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.text = \"\";\n        if (message.text != null && message.hasOwnProperty(\"text\"))\n            object.text = message.text;\n        return object;\n    };\n\n    /**\n     * Converts this SendChatMessageCommand to JSON.\n     * @function toJSON\n     * @memberof SendChatMessageCommand\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    SendChatMessageCommand.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return SendChatMessageCommand;\n})();\n\n$root.JoinEvent = (function() {\n\n    /**\n     * Properties of a JoinEvent.\n     * @exports IJoinEvent\n     * @interface IJoinEvent\n     * @property {IClassState|null} [state] JoinEvent state\n     * @property {string|null} [deviceId] JoinEvent deviceId\n     */\n\n    /**\n     * Constructs a new JoinEvent.\n     * @exports JoinEvent\n     * @classdesc Represents a JoinEvent.\n     * @implements IJoinEvent\n     * @constructor\n     * @param {IJoinEvent=} [properties] Properties to set\n     */\n    function JoinEvent(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * JoinEvent state.\n     * @member {IClassState|null|undefined} state\n     * @memberof JoinEvent\n     * @instance\n     */\n    JoinEvent.prototype.state = null;\n\n    /**\n     * JoinEvent deviceId.\n     * @member {string} deviceId\n     * @memberof JoinEvent\n     * @instance\n     */\n    JoinEvent.prototype.deviceId = \"\";\n\n    /**\n     * Creates a new JoinEvent instance using the specified properties.\n     * @function create\n     * @memberof JoinEvent\n     * @static\n     * @param {IJoinEvent=} [properties] Properties to set\n     * @returns {JoinEvent} JoinEvent instance\n     */\n    JoinEvent.create = function create(properties) {\n        return new JoinEvent(properties);\n    };\n\n    /**\n     * Encodes the specified JoinEvent message. Does not implicitly {@link JoinEvent.verify|verify} messages.\n     * @function encode\n     * @memberof JoinEvent\n     * @static\n     * @param {IJoinEvent} message JoinEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    JoinEvent.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.state != null && Object.hasOwnProperty.call(message, \"state\"))\n            $root.ClassState.encode(message.state, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.deviceId != null && Object.hasOwnProperty.call(message, \"deviceId\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.deviceId);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified JoinEvent message, length delimited. Does not implicitly {@link JoinEvent.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof JoinEvent\n     * @static\n     * @param {IJoinEvent} message JoinEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    JoinEvent.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a JoinEvent message from the specified reader or buffer.\n     * @function decode\n     * @memberof JoinEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {JoinEvent} JoinEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    JoinEvent.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.JoinEvent();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.state = $root.ClassState.decode(reader, reader.uint32());\n                break;\n            case 2:\n                message.deviceId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a JoinEvent message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof JoinEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {JoinEvent} JoinEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    JoinEvent.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a JoinEvent message.\n     * @function verify\n     * @memberof JoinEvent\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    JoinEvent.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.state != null && message.hasOwnProperty(\"state\")) {\n            var error = $root.ClassState.verify(message.state);\n            if (error)\n                return \"state.\" + error;\n        }\n        if (message.deviceId != null && message.hasOwnProperty(\"deviceId\"))\n            if (!$util.isString(message.deviceId))\n                return \"deviceId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a JoinEvent message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof JoinEvent\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {JoinEvent} JoinEvent\n     */\n    JoinEvent.fromObject = function fromObject(object) {\n        if (object instanceof $root.JoinEvent)\n            return object;\n        var message = new $root.JoinEvent();\n        if (object.state != null) {\n            if (typeof object.state !== \"object\")\n                throw TypeError(\".JoinEvent.state: object expected\");\n            message.state = $root.ClassState.fromObject(object.state);\n        }\n        if (object.deviceId != null)\n            message.deviceId = String(object.deviceId);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a JoinEvent message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof JoinEvent\n     * @static\n     * @param {JoinEvent} message JoinEvent\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    JoinEvent.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.state = null;\n            object.deviceId = \"\";\n        }\n        if (message.state != null && message.hasOwnProperty(\"state\"))\n            object.state = $root.ClassState.toObject(message.state, options);\n        if (message.deviceId != null && message.hasOwnProperty(\"deviceId\"))\n            object.deviceId = message.deviceId;\n        return object;\n    };\n\n    /**\n     * Converts this JoinEvent to JSON.\n     * @function toJSON\n     * @memberof JoinEvent\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    JoinEvent.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return JoinEvent;\n})();\n\n$root.ClassEndedEvent = (function() {\n\n    /**\n     * Properties of a ClassEndedEvent.\n     * @exports IClassEndedEvent\n     * @interface IClassEndedEvent\n     * @property {number|Long|null} [timestamp] ClassEndedEvent timestamp\n     */\n\n    /**\n     * Constructs a new ClassEndedEvent.\n     * @exports ClassEndedEvent\n     * @classdesc Represents a ClassEndedEvent.\n     * @implements IClassEndedEvent\n     * @constructor\n     * @param {IClassEndedEvent=} [properties] Properties to set\n     */\n    function ClassEndedEvent(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ClassEndedEvent timestamp.\n     * @member {number|Long} timestamp\n     * @memberof ClassEndedEvent\n     * @instance\n     */\n    ClassEndedEvent.prototype.timestamp = $util.Long ? $util.Long.fromBits(0,0,true) : 0;\n\n    /**\n     * Creates a new ClassEndedEvent instance using the specified properties.\n     * @function create\n     * @memberof ClassEndedEvent\n     * @static\n     * @param {IClassEndedEvent=} [properties] Properties to set\n     * @returns {ClassEndedEvent} ClassEndedEvent instance\n     */\n    ClassEndedEvent.create = function create(properties) {\n        return new ClassEndedEvent(properties);\n    };\n\n    /**\n     * Encodes the specified ClassEndedEvent message. Does not implicitly {@link ClassEndedEvent.verify|verify} messages.\n     * @function encode\n     * @memberof ClassEndedEvent\n     * @static\n     * @param {IClassEndedEvent} message ClassEndedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ClassEndedEvent.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.timestamp != null && Object.hasOwnProperty.call(message, \"timestamp\"))\n            writer.uint32(/* id 1, wireType 0 =*/8).uint64(message.timestamp);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ClassEndedEvent message, length delimited. Does not implicitly {@link ClassEndedEvent.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ClassEndedEvent\n     * @static\n     * @param {IClassEndedEvent} message ClassEndedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ClassEndedEvent.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ClassEndedEvent message from the specified reader or buffer.\n     * @function decode\n     * @memberof ClassEndedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ClassEndedEvent} ClassEndedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ClassEndedEvent.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ClassEndedEvent();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.timestamp = reader.uint64();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ClassEndedEvent message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ClassEndedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ClassEndedEvent} ClassEndedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ClassEndedEvent.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ClassEndedEvent message.\n     * @function verify\n     * @memberof ClassEndedEvent\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ClassEndedEvent.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.timestamp != null && message.hasOwnProperty(\"timestamp\"))\n            if (!$util.isInteger(message.timestamp) && !(message.timestamp && $util.isInteger(message.timestamp.low) && $util.isInteger(message.timestamp.high)))\n                return \"timestamp: integer|Long expected\";\n        return null;\n    };\n\n    /**\n     * Creates a ClassEndedEvent message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof ClassEndedEvent\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {ClassEndedEvent} ClassEndedEvent\n     */\n    ClassEndedEvent.fromObject = function fromObject(object) {\n        if (object instanceof $root.ClassEndedEvent)\n            return object;\n        var message = new $root.ClassEndedEvent();\n        if (object.timestamp != null)\n            if ($util.Long)\n                (message.timestamp = $util.Long.fromValue(object.timestamp)).unsigned = true;\n            else if (typeof object.timestamp === \"string\")\n                message.timestamp = parseInt(object.timestamp, 10);\n            else if (typeof object.timestamp === \"number\")\n                message.timestamp = object.timestamp;\n            else if (typeof object.timestamp === \"object\")\n                message.timestamp = new $util.LongBits(object.timestamp.low >>> 0, object.timestamp.high >>> 0).toNumber(true);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a ClassEndedEvent message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ClassEndedEvent\n     * @static\n     * @param {ClassEndedEvent} message ClassEndedEvent\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ClassEndedEvent.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            if ($util.Long) {\n                var long = new $util.Long(0, 0, true);\n                object.timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;\n            } else\n                object.timestamp = options.longs === String ? \"0\" : 0;\n        if (message.timestamp != null && message.hasOwnProperty(\"timestamp\"))\n            if (typeof message.timestamp === \"number\")\n                object.timestamp = options.longs === String ? String(message.timestamp) : message.timestamp;\n            else\n                object.timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.timestamp) : options.longs === Number ? new $util.LongBits(message.timestamp.low >>> 0, message.timestamp.high >>> 0).toNumber(true) : message.timestamp;\n        return object;\n    };\n\n    /**\n     * Converts this ClassEndedEvent to JSON.\n     * @function toJSON\n     * @memberof ClassEndedEvent\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ClassEndedEvent.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ClassEndedEvent;\n})();\n\n$root.DeviceConnectedEvent = (function() {\n\n    /**\n     * Properties of a DeviceConnectedEvent.\n     * @exports IDeviceConnectedEvent\n     * @interface IDeviceConnectedEvent\n     * @property {string|null} [name] DeviceConnectedEvent name\n     * @property {string|null} [role] DeviceConnectedEvent role\n     * @property {IDevice|null} [device] DeviceConnectedEvent device\n     */\n\n    /**\n     * Constructs a new DeviceConnectedEvent.\n     * @exports DeviceConnectedEvent\n     * @classdesc Represents a DeviceConnectedEvent.\n     * @implements IDeviceConnectedEvent\n     * @constructor\n     * @param {IDeviceConnectedEvent=} [properties] Properties to set\n     */\n    function DeviceConnectedEvent(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * DeviceConnectedEvent name.\n     * @member {string} name\n     * @memberof DeviceConnectedEvent\n     * @instance\n     */\n    DeviceConnectedEvent.prototype.name = \"\";\n\n    /**\n     * DeviceConnectedEvent role.\n     * @member {string} role\n     * @memberof DeviceConnectedEvent\n     * @instance\n     */\n    DeviceConnectedEvent.prototype.role = \"\";\n\n    /**\n     * DeviceConnectedEvent device.\n     * @member {IDevice|null|undefined} device\n     * @memberof DeviceConnectedEvent\n     * @instance\n     */\n    DeviceConnectedEvent.prototype.device = null;\n\n    /**\n     * Creates a new DeviceConnectedEvent instance using the specified properties.\n     * @function create\n     * @memberof DeviceConnectedEvent\n     * @static\n     * @param {IDeviceConnectedEvent=} [properties] Properties to set\n     * @returns {DeviceConnectedEvent} DeviceConnectedEvent instance\n     */\n    DeviceConnectedEvent.create = function create(properties) {\n        return new DeviceConnectedEvent(properties);\n    };\n\n    /**\n     * Encodes the specified DeviceConnectedEvent message. Does not implicitly {@link DeviceConnectedEvent.verify|verify} messages.\n     * @function encode\n     * @memberof DeviceConnectedEvent\n     * @static\n     * @param {IDeviceConnectedEvent} message DeviceConnectedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    DeviceConnectedEvent.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.name != null && Object.hasOwnProperty.call(message, \"name\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.name);\n        if (message.role != null && Object.hasOwnProperty.call(message, \"role\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.role);\n        if (message.device != null && Object.hasOwnProperty.call(message, \"device\"))\n            $root.Device.encode(message.device, writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified DeviceConnectedEvent message, length delimited. Does not implicitly {@link DeviceConnectedEvent.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof DeviceConnectedEvent\n     * @static\n     * @param {IDeviceConnectedEvent} message DeviceConnectedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    DeviceConnectedEvent.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a DeviceConnectedEvent message from the specified reader or buffer.\n     * @function decode\n     * @memberof DeviceConnectedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {DeviceConnectedEvent} DeviceConnectedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    DeviceConnectedEvent.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.DeviceConnectedEvent();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.name = reader.string();\n                break;\n            case 2:\n                message.role = reader.string();\n                break;\n            case 3:\n                message.device = $root.Device.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a DeviceConnectedEvent message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof DeviceConnectedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {DeviceConnectedEvent} DeviceConnectedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    DeviceConnectedEvent.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a DeviceConnectedEvent message.\n     * @function verify\n     * @memberof DeviceConnectedEvent\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    DeviceConnectedEvent.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.name != null && message.hasOwnProperty(\"name\"))\n            if (!$util.isString(message.name))\n                return \"name: string expected\";\n        if (message.role != null && message.hasOwnProperty(\"role\"))\n            if (!$util.isString(message.role))\n                return \"role: string expected\";\n        if (message.device != null && message.hasOwnProperty(\"device\")) {\n            var error = $root.Device.verify(message.device);\n            if (error)\n                return \"device.\" + error;\n        }\n        return null;\n    };\n\n    /**\n     * Creates a DeviceConnectedEvent message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof DeviceConnectedEvent\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {DeviceConnectedEvent} DeviceConnectedEvent\n     */\n    DeviceConnectedEvent.fromObject = function fromObject(object) {\n        if (object instanceof $root.DeviceConnectedEvent)\n            return object;\n        var message = new $root.DeviceConnectedEvent();\n        if (object.name != null)\n            message.name = String(object.name);\n        if (object.role != null)\n            message.role = String(object.role);\n        if (object.device != null) {\n            if (typeof object.device !== \"object\")\n                throw TypeError(\".DeviceConnectedEvent.device: object expected\");\n            message.device = $root.Device.fromObject(object.device);\n        }\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a DeviceConnectedEvent message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof DeviceConnectedEvent\n     * @static\n     * @param {DeviceConnectedEvent} message DeviceConnectedEvent\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    DeviceConnectedEvent.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.name = \"\";\n            object.role = \"\";\n            object.device = null;\n        }\n        if (message.name != null && message.hasOwnProperty(\"name\"))\n            object.name = message.name;\n        if (message.role != null && message.hasOwnProperty(\"role\"))\n            object.role = message.role;\n        if (message.device != null && message.hasOwnProperty(\"device\"))\n            object.device = $root.Device.toObject(message.device, options);\n        return object;\n    };\n\n    /**\n     * Converts this DeviceConnectedEvent to JSON.\n     * @function toJSON\n     * @memberof DeviceConnectedEvent\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    DeviceConnectedEvent.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return DeviceConnectedEvent;\n})();\n\n$root.DeviceDisconnectedEvent = (function() {\n\n    /**\n     * Properties of a DeviceDisconnectedEvent.\n     * @exports IDeviceDisconnectedEvent\n     * @interface IDeviceDisconnectedEvent\n     * @property {string|null} [deviceId] DeviceDisconnectedEvent deviceId\n     */\n\n    /**\n     * Constructs a new DeviceDisconnectedEvent.\n     * @exports DeviceDisconnectedEvent\n     * @classdesc Represents a DeviceDisconnectedEvent.\n     * @implements IDeviceDisconnectedEvent\n     * @constructor\n     * @param {IDeviceDisconnectedEvent=} [properties] Properties to set\n     */\n    function DeviceDisconnectedEvent(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * DeviceDisconnectedEvent deviceId.\n     * @member {string} deviceId\n     * @memberof DeviceDisconnectedEvent\n     * @instance\n     */\n    DeviceDisconnectedEvent.prototype.deviceId = \"\";\n\n    /**\n     * Creates a new DeviceDisconnectedEvent instance using the specified properties.\n     * @function create\n     * @memberof DeviceDisconnectedEvent\n     * @static\n     * @param {IDeviceDisconnectedEvent=} [properties] Properties to set\n     * @returns {DeviceDisconnectedEvent} DeviceDisconnectedEvent instance\n     */\n    DeviceDisconnectedEvent.create = function create(properties) {\n        return new DeviceDisconnectedEvent(properties);\n    };\n\n    /**\n     * Encodes the specified DeviceDisconnectedEvent message. Does not implicitly {@link DeviceDisconnectedEvent.verify|verify} messages.\n     * @function encode\n     * @memberof DeviceDisconnectedEvent\n     * @static\n     * @param {IDeviceDisconnectedEvent} message DeviceDisconnectedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    DeviceDisconnectedEvent.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.deviceId != null && Object.hasOwnProperty.call(message, \"deviceId\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.deviceId);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified DeviceDisconnectedEvent message, length delimited. Does not implicitly {@link DeviceDisconnectedEvent.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof DeviceDisconnectedEvent\n     * @static\n     * @param {IDeviceDisconnectedEvent} message DeviceDisconnectedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    DeviceDisconnectedEvent.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a DeviceDisconnectedEvent message from the specified reader or buffer.\n     * @function decode\n     * @memberof DeviceDisconnectedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {DeviceDisconnectedEvent} DeviceDisconnectedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    DeviceDisconnectedEvent.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.DeviceDisconnectedEvent();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.deviceId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a DeviceDisconnectedEvent message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof DeviceDisconnectedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {DeviceDisconnectedEvent} DeviceDisconnectedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    DeviceDisconnectedEvent.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a DeviceDisconnectedEvent message.\n     * @function verify\n     * @memberof DeviceDisconnectedEvent\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    DeviceDisconnectedEvent.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.deviceId != null && message.hasOwnProperty(\"deviceId\"))\n            if (!$util.isString(message.deviceId))\n                return \"deviceId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a DeviceDisconnectedEvent message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof DeviceDisconnectedEvent\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {DeviceDisconnectedEvent} DeviceDisconnectedEvent\n     */\n    DeviceDisconnectedEvent.fromObject = function fromObject(object) {\n        if (object instanceof $root.DeviceDisconnectedEvent)\n            return object;\n        var message = new $root.DeviceDisconnectedEvent();\n        if (object.deviceId != null)\n            message.deviceId = String(object.deviceId);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a DeviceDisconnectedEvent message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof DeviceDisconnectedEvent\n     * @static\n     * @param {DeviceDisconnectedEvent} message DeviceDisconnectedEvent\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    DeviceDisconnectedEvent.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.deviceId = \"\";\n        if (message.deviceId != null && message.hasOwnProperty(\"deviceId\"))\n            object.deviceId = message.deviceId;\n        return object;\n    };\n\n    /**\n     * Converts this DeviceDisconnectedEvent to JSON.\n     * @function toJSON\n     * @memberof DeviceDisconnectedEvent\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    DeviceDisconnectedEvent.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return DeviceDisconnectedEvent;\n})();\n\n$root.HostChangedEvent = (function() {\n\n    /**\n     * Properties of a HostChangedEvent.\n     * @exports IHostChangedEvent\n     * @interface IHostChangedEvent\n     * @property {string|null} [hostDeviceId] HostChangedEvent hostDeviceId\n     */\n\n    /**\n     * Constructs a new HostChangedEvent.\n     * @exports HostChangedEvent\n     * @classdesc Represents a HostChangedEvent.\n     * @implements IHostChangedEvent\n     * @constructor\n     * @param {IHostChangedEvent=} [properties] Properties to set\n     */\n    function HostChangedEvent(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * HostChangedEvent hostDeviceId.\n     * @member {string} hostDeviceId\n     * @memberof HostChangedEvent\n     * @instance\n     */\n    HostChangedEvent.prototype.hostDeviceId = \"\";\n\n    /**\n     * Creates a new HostChangedEvent instance using the specified properties.\n     * @function create\n     * @memberof HostChangedEvent\n     * @static\n     * @param {IHostChangedEvent=} [properties] Properties to set\n     * @returns {HostChangedEvent} HostChangedEvent instance\n     */\n    HostChangedEvent.create = function create(properties) {\n        return new HostChangedEvent(properties);\n    };\n\n    /**\n     * Encodes the specified HostChangedEvent message. Does not implicitly {@link HostChangedEvent.verify|verify} messages.\n     * @function encode\n     * @memberof HostChangedEvent\n     * @static\n     * @param {IHostChangedEvent} message HostChangedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    HostChangedEvent.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.hostDeviceId != null && Object.hasOwnProperty.call(message, \"hostDeviceId\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.hostDeviceId);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified HostChangedEvent message, length delimited. Does not implicitly {@link HostChangedEvent.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof HostChangedEvent\n     * @static\n     * @param {IHostChangedEvent} message HostChangedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    HostChangedEvent.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a HostChangedEvent message from the specified reader or buffer.\n     * @function decode\n     * @memberof HostChangedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {HostChangedEvent} HostChangedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    HostChangedEvent.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.HostChangedEvent();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.hostDeviceId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a HostChangedEvent message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof HostChangedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {HostChangedEvent} HostChangedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    HostChangedEvent.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a HostChangedEvent message.\n     * @function verify\n     * @memberof HostChangedEvent\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    HostChangedEvent.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.hostDeviceId != null && message.hasOwnProperty(\"hostDeviceId\"))\n            if (!$util.isString(message.hostDeviceId))\n                return \"hostDeviceId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a HostChangedEvent message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof HostChangedEvent\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {HostChangedEvent} HostChangedEvent\n     */\n    HostChangedEvent.fromObject = function fromObject(object) {\n        if (object instanceof $root.HostChangedEvent)\n            return object;\n        var message = new $root.HostChangedEvent();\n        if (object.hostDeviceId != null)\n            message.hostDeviceId = String(object.hostDeviceId);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a HostChangedEvent message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof HostChangedEvent\n     * @static\n     * @param {HostChangedEvent} message HostChangedEvent\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    HostChangedEvent.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.hostDeviceId = \"\";\n        if (message.hostDeviceId != null && message.hasOwnProperty(\"hostDeviceId\"))\n            object.hostDeviceId = message.hostDeviceId;\n        return object;\n    };\n\n    /**\n     * Converts this HostChangedEvent to JSON.\n     * @function toJSON\n     * @memberof HostChangedEvent\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    HostChangedEvent.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return HostChangedEvent;\n})();\n\n$root.ContentChangedEvent = (function() {\n\n    /**\n     * Properties of a ContentChangedEvent.\n     * @exports IContentChangedEvent\n     * @interface IContentChangedEvent\n     * @property {IContent|null} [content] ContentChangedEvent content\n     */\n\n    /**\n     * Constructs a new ContentChangedEvent.\n     * @exports ContentChangedEvent\n     * @classdesc Represents a ContentChangedEvent.\n     * @implements IContentChangedEvent\n     * @constructor\n     * @param {IContentChangedEvent=} [properties] Properties to set\n     */\n    function ContentChangedEvent(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ContentChangedEvent content.\n     * @member {IContent|null|undefined} content\n     * @memberof ContentChangedEvent\n     * @instance\n     */\n    ContentChangedEvent.prototype.content = null;\n\n    /**\n     * Creates a new ContentChangedEvent instance using the specified properties.\n     * @function create\n     * @memberof ContentChangedEvent\n     * @static\n     * @param {IContentChangedEvent=} [properties] Properties to set\n     * @returns {ContentChangedEvent} ContentChangedEvent instance\n     */\n    ContentChangedEvent.create = function create(properties) {\n        return new ContentChangedEvent(properties);\n    };\n\n    /**\n     * Encodes the specified ContentChangedEvent message. Does not implicitly {@link ContentChangedEvent.verify|verify} messages.\n     * @function encode\n     * @memberof ContentChangedEvent\n     * @static\n     * @param {IContentChangedEvent} message ContentChangedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContentChangedEvent.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.content != null && Object.hasOwnProperty.call(message, \"content\"))\n            $root.Content.encode(message.content, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ContentChangedEvent message, length delimited. Does not implicitly {@link ContentChangedEvent.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ContentChangedEvent\n     * @static\n     * @param {IContentChangedEvent} message ContentChangedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ContentChangedEvent.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ContentChangedEvent message from the specified reader or buffer.\n     * @function decode\n     * @memberof ContentChangedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ContentChangedEvent} ContentChangedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContentChangedEvent.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ContentChangedEvent();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.content = $root.Content.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ContentChangedEvent message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ContentChangedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ContentChangedEvent} ContentChangedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ContentChangedEvent.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ContentChangedEvent message.\n     * @function verify\n     * @memberof ContentChangedEvent\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ContentChangedEvent.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.content != null && message.hasOwnProperty(\"content\")) {\n            var error = $root.Content.verify(message.content);\n            if (error)\n                return \"content.\" + error;\n        }\n        return null;\n    };\n\n    /**\n     * Creates a ContentChangedEvent message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof ContentChangedEvent\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {ContentChangedEvent} ContentChangedEvent\n     */\n    ContentChangedEvent.fromObject = function fromObject(object) {\n        if (object instanceof $root.ContentChangedEvent)\n            return object;\n        var message = new $root.ContentChangedEvent();\n        if (object.content != null) {\n            if (typeof object.content !== \"object\")\n                throw TypeError(\".ContentChangedEvent.content: object expected\");\n            message.content = $root.Content.fromObject(object.content);\n        }\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a ContentChangedEvent message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ContentChangedEvent\n     * @static\n     * @param {ContentChangedEvent} message ContentChangedEvent\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ContentChangedEvent.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.content = null;\n        if (message.content != null && message.hasOwnProperty(\"content\"))\n            object.content = $root.Content.toObject(message.content, options);\n        return object;\n    };\n\n    /**\n     * Converts this ContentChangedEvent to JSON.\n     * @function toJSON\n     * @memberof ContentChangedEvent\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ContentChangedEvent.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ContentChangedEvent;\n})();\n\n$root.ActivityStreamIdChangedEvent = (function() {\n\n    /**\n     * Properties of an ActivityStreamIdChangedEvent.\n     * @exports IActivityStreamIdChangedEvent\n     * @interface IActivityStreamIdChangedEvent\n     * @property {string|null} [deviceId] ActivityStreamIdChangedEvent deviceId\n     * @property {string|null} [activityStreamId] ActivityStreamIdChangedEvent activityStreamId\n     */\n\n    /**\n     * Constructs a new ActivityStreamIdChangedEvent.\n     * @exports ActivityStreamIdChangedEvent\n     * @classdesc Represents an ActivityStreamIdChangedEvent.\n     * @implements IActivityStreamIdChangedEvent\n     * @constructor\n     * @param {IActivityStreamIdChangedEvent=} [properties] Properties to set\n     */\n    function ActivityStreamIdChangedEvent(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ActivityStreamIdChangedEvent deviceId.\n     * @member {string} deviceId\n     * @memberof ActivityStreamIdChangedEvent\n     * @instance\n     */\n    ActivityStreamIdChangedEvent.prototype.deviceId = \"\";\n\n    /**\n     * ActivityStreamIdChangedEvent activityStreamId.\n     * @member {string} activityStreamId\n     * @memberof ActivityStreamIdChangedEvent\n     * @instance\n     */\n    ActivityStreamIdChangedEvent.prototype.activityStreamId = \"\";\n\n    /**\n     * Creates a new ActivityStreamIdChangedEvent instance using the specified properties.\n     * @function create\n     * @memberof ActivityStreamIdChangedEvent\n     * @static\n     * @param {IActivityStreamIdChangedEvent=} [properties] Properties to set\n     * @returns {ActivityStreamIdChangedEvent} ActivityStreamIdChangedEvent instance\n     */\n    ActivityStreamIdChangedEvent.create = function create(properties) {\n        return new ActivityStreamIdChangedEvent(properties);\n    };\n\n    /**\n     * Encodes the specified ActivityStreamIdChangedEvent message. Does not implicitly {@link ActivityStreamIdChangedEvent.verify|verify} messages.\n     * @function encode\n     * @memberof ActivityStreamIdChangedEvent\n     * @static\n     * @param {IActivityStreamIdChangedEvent} message ActivityStreamIdChangedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ActivityStreamIdChangedEvent.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.deviceId != null && Object.hasOwnProperty.call(message, \"deviceId\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.deviceId);\n        if (message.activityStreamId != null && Object.hasOwnProperty.call(message, \"activityStreamId\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.activityStreamId);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ActivityStreamIdChangedEvent message, length delimited. Does not implicitly {@link ActivityStreamIdChangedEvent.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ActivityStreamIdChangedEvent\n     * @static\n     * @param {IActivityStreamIdChangedEvent} message ActivityStreamIdChangedEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ActivityStreamIdChangedEvent.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes an ActivityStreamIdChangedEvent message from the specified reader or buffer.\n     * @function decode\n     * @memberof ActivityStreamIdChangedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ActivityStreamIdChangedEvent} ActivityStreamIdChangedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ActivityStreamIdChangedEvent.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ActivityStreamIdChangedEvent();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.deviceId = reader.string();\n                break;\n            case 2:\n                message.activityStreamId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes an ActivityStreamIdChangedEvent message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ActivityStreamIdChangedEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ActivityStreamIdChangedEvent} ActivityStreamIdChangedEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ActivityStreamIdChangedEvent.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies an ActivityStreamIdChangedEvent message.\n     * @function verify\n     * @memberof ActivityStreamIdChangedEvent\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ActivityStreamIdChangedEvent.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.deviceId != null && message.hasOwnProperty(\"deviceId\"))\n            if (!$util.isString(message.deviceId))\n                return \"deviceId: string expected\";\n        if (message.activityStreamId != null && message.hasOwnProperty(\"activityStreamId\"))\n            if (!$util.isString(message.activityStreamId))\n                return \"activityStreamId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates an ActivityStreamIdChangedEvent message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof ActivityStreamIdChangedEvent\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {ActivityStreamIdChangedEvent} ActivityStreamIdChangedEvent\n     */\n    ActivityStreamIdChangedEvent.fromObject = function fromObject(object) {\n        if (object instanceof $root.ActivityStreamIdChangedEvent)\n            return object;\n        var message = new $root.ActivityStreamIdChangedEvent();\n        if (object.deviceId != null)\n            message.deviceId = String(object.deviceId);\n        if (object.activityStreamId != null)\n            message.activityStreamId = String(object.activityStreamId);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from an ActivityStreamIdChangedEvent message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ActivityStreamIdChangedEvent\n     * @static\n     * @param {ActivityStreamIdChangedEvent} message ActivityStreamIdChangedEvent\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ActivityStreamIdChangedEvent.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.deviceId = \"\";\n            object.activityStreamId = \"\";\n        }\n        if (message.deviceId != null && message.hasOwnProperty(\"deviceId\"))\n            object.deviceId = message.deviceId;\n        if (message.activityStreamId != null && message.hasOwnProperty(\"activityStreamId\"))\n            object.activityStreamId = message.activityStreamId;\n        return object;\n    };\n\n    /**\n     * Converts this ActivityStreamIdChangedEvent to JSON.\n     * @function toJSON\n     * @memberof ActivityStreamIdChangedEvent\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ActivityStreamIdChangedEvent.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ActivityStreamIdChangedEvent;\n})();\n\n$root.TrophyRewardedToUserEvent = (function() {\n\n    /**\n     * Properties of a TrophyRewardedToUserEvent.\n     * @exports ITrophyRewardedToUserEvent\n     * @interface ITrophyRewardedToUserEvent\n     * @property {ITrophy|null} [trophy] TrophyRewardedToUserEvent trophy\n     * @property {string|null} [toUserId] TrophyRewardedToUserEvent toUserId\n     */\n\n    /**\n     * Constructs a new TrophyRewardedToUserEvent.\n     * @exports TrophyRewardedToUserEvent\n     * @classdesc Represents a TrophyRewardedToUserEvent.\n     * @implements ITrophyRewardedToUserEvent\n     * @constructor\n     * @param {ITrophyRewardedToUserEvent=} [properties] Properties to set\n     */\n    function TrophyRewardedToUserEvent(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * TrophyRewardedToUserEvent trophy.\n     * @member {ITrophy|null|undefined} trophy\n     * @memberof TrophyRewardedToUserEvent\n     * @instance\n     */\n    TrophyRewardedToUserEvent.prototype.trophy = null;\n\n    /**\n     * TrophyRewardedToUserEvent toUserId.\n     * @member {string} toUserId\n     * @memberof TrophyRewardedToUserEvent\n     * @instance\n     */\n    TrophyRewardedToUserEvent.prototype.toUserId = \"\";\n\n    /**\n     * Creates a new TrophyRewardedToUserEvent instance using the specified properties.\n     * @function create\n     * @memberof TrophyRewardedToUserEvent\n     * @static\n     * @param {ITrophyRewardedToUserEvent=} [properties] Properties to set\n     * @returns {TrophyRewardedToUserEvent} TrophyRewardedToUserEvent instance\n     */\n    TrophyRewardedToUserEvent.create = function create(properties) {\n        return new TrophyRewardedToUserEvent(properties);\n    };\n\n    /**\n     * Encodes the specified TrophyRewardedToUserEvent message. Does not implicitly {@link TrophyRewardedToUserEvent.verify|verify} messages.\n     * @function encode\n     * @memberof TrophyRewardedToUserEvent\n     * @static\n     * @param {ITrophyRewardedToUserEvent} message TrophyRewardedToUserEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TrophyRewardedToUserEvent.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.trophy != null && Object.hasOwnProperty.call(message, \"trophy\"))\n            $root.Trophy.encode(message.trophy, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        if (message.toUserId != null && Object.hasOwnProperty.call(message, \"toUserId\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.toUserId);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified TrophyRewardedToUserEvent message, length delimited. Does not implicitly {@link TrophyRewardedToUserEvent.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof TrophyRewardedToUserEvent\n     * @static\n     * @param {ITrophyRewardedToUserEvent} message TrophyRewardedToUserEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TrophyRewardedToUserEvent.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a TrophyRewardedToUserEvent message from the specified reader or buffer.\n     * @function decode\n     * @memberof TrophyRewardedToUserEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {TrophyRewardedToUserEvent} TrophyRewardedToUserEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TrophyRewardedToUserEvent.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.TrophyRewardedToUserEvent();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.trophy = $root.Trophy.decode(reader, reader.uint32());\n                break;\n            case 2:\n                message.toUserId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a TrophyRewardedToUserEvent message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof TrophyRewardedToUserEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {TrophyRewardedToUserEvent} TrophyRewardedToUserEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TrophyRewardedToUserEvent.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a TrophyRewardedToUserEvent message.\n     * @function verify\n     * @memberof TrophyRewardedToUserEvent\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    TrophyRewardedToUserEvent.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.trophy != null && message.hasOwnProperty(\"trophy\")) {\n            var error = $root.Trophy.verify(message.trophy);\n            if (error)\n                return \"trophy.\" + error;\n        }\n        if (message.toUserId != null && message.hasOwnProperty(\"toUserId\"))\n            if (!$util.isString(message.toUserId))\n                return \"toUserId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a TrophyRewardedToUserEvent message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof TrophyRewardedToUserEvent\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {TrophyRewardedToUserEvent} TrophyRewardedToUserEvent\n     */\n    TrophyRewardedToUserEvent.fromObject = function fromObject(object) {\n        if (object instanceof $root.TrophyRewardedToUserEvent)\n            return object;\n        var message = new $root.TrophyRewardedToUserEvent();\n        if (object.trophy != null) {\n            if (typeof object.trophy !== \"object\")\n                throw TypeError(\".TrophyRewardedToUserEvent.trophy: object expected\");\n            message.trophy = $root.Trophy.fromObject(object.trophy);\n        }\n        if (object.toUserId != null)\n            message.toUserId = String(object.toUserId);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a TrophyRewardedToUserEvent message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof TrophyRewardedToUserEvent\n     * @static\n     * @param {TrophyRewardedToUserEvent} message TrophyRewardedToUserEvent\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    TrophyRewardedToUserEvent.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.trophy = null;\n            object.toUserId = \"\";\n        }\n        if (message.trophy != null && message.hasOwnProperty(\"trophy\"))\n            object.trophy = $root.Trophy.toObject(message.trophy, options);\n        if (message.toUserId != null && message.hasOwnProperty(\"toUserId\"))\n            object.toUserId = message.toUserId;\n        return object;\n    };\n\n    /**\n     * Converts this TrophyRewardedToUserEvent to JSON.\n     * @function toJSON\n     * @memberof TrophyRewardedToUserEvent\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    TrophyRewardedToUserEvent.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return TrophyRewardedToUserEvent;\n})();\n\n$root.TrophyRewardedToAllEvent = (function() {\n\n    /**\n     * Properties of a TrophyRewardedToAllEvent.\n     * @exports ITrophyRewardedToAllEvent\n     * @interface ITrophyRewardedToAllEvent\n     * @property {ITrophy|null} [trophy] TrophyRewardedToAllEvent trophy\n     */\n\n    /**\n     * Constructs a new TrophyRewardedToAllEvent.\n     * @exports TrophyRewardedToAllEvent\n     * @classdesc Represents a TrophyRewardedToAllEvent.\n     * @implements ITrophyRewardedToAllEvent\n     * @constructor\n     * @param {ITrophyRewardedToAllEvent=} [properties] Properties to set\n     */\n    function TrophyRewardedToAllEvent(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * TrophyRewardedToAllEvent trophy.\n     * @member {ITrophy|null|undefined} trophy\n     * @memberof TrophyRewardedToAllEvent\n     * @instance\n     */\n    TrophyRewardedToAllEvent.prototype.trophy = null;\n\n    /**\n     * Creates a new TrophyRewardedToAllEvent instance using the specified properties.\n     * @function create\n     * @memberof TrophyRewardedToAllEvent\n     * @static\n     * @param {ITrophyRewardedToAllEvent=} [properties] Properties to set\n     * @returns {TrophyRewardedToAllEvent} TrophyRewardedToAllEvent instance\n     */\n    TrophyRewardedToAllEvent.create = function create(properties) {\n        return new TrophyRewardedToAllEvent(properties);\n    };\n\n    /**\n     * Encodes the specified TrophyRewardedToAllEvent message. Does not implicitly {@link TrophyRewardedToAllEvent.verify|verify} messages.\n     * @function encode\n     * @memberof TrophyRewardedToAllEvent\n     * @static\n     * @param {ITrophyRewardedToAllEvent} message TrophyRewardedToAllEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TrophyRewardedToAllEvent.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.trophy != null && Object.hasOwnProperty.call(message, \"trophy\"))\n            $root.Trophy.encode(message.trophy, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified TrophyRewardedToAllEvent message, length delimited. Does not implicitly {@link TrophyRewardedToAllEvent.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof TrophyRewardedToAllEvent\n     * @static\n     * @param {ITrophyRewardedToAllEvent} message TrophyRewardedToAllEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    TrophyRewardedToAllEvent.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a TrophyRewardedToAllEvent message from the specified reader or buffer.\n     * @function decode\n     * @memberof TrophyRewardedToAllEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {TrophyRewardedToAllEvent} TrophyRewardedToAllEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TrophyRewardedToAllEvent.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.TrophyRewardedToAllEvent();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.trophy = $root.Trophy.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a TrophyRewardedToAllEvent message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof TrophyRewardedToAllEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {TrophyRewardedToAllEvent} TrophyRewardedToAllEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    TrophyRewardedToAllEvent.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a TrophyRewardedToAllEvent message.\n     * @function verify\n     * @memberof TrophyRewardedToAllEvent\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    TrophyRewardedToAllEvent.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.trophy != null && message.hasOwnProperty(\"trophy\")) {\n            var error = $root.Trophy.verify(message.trophy);\n            if (error)\n                return \"trophy.\" + error;\n        }\n        return null;\n    };\n\n    /**\n     * Creates a TrophyRewardedToAllEvent message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof TrophyRewardedToAllEvent\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {TrophyRewardedToAllEvent} TrophyRewardedToAllEvent\n     */\n    TrophyRewardedToAllEvent.fromObject = function fromObject(object) {\n        if (object instanceof $root.TrophyRewardedToAllEvent)\n            return object;\n        var message = new $root.TrophyRewardedToAllEvent();\n        if (object.trophy != null) {\n            if (typeof object.trophy !== \"object\")\n                throw TypeError(\".TrophyRewardedToAllEvent.trophy: object expected\");\n            message.trophy = $root.Trophy.fromObject(object.trophy);\n        }\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a TrophyRewardedToAllEvent message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof TrophyRewardedToAllEvent\n     * @static\n     * @param {TrophyRewardedToAllEvent} message TrophyRewardedToAllEvent\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    TrophyRewardedToAllEvent.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.trophy = null;\n        if (message.trophy != null && message.hasOwnProperty(\"trophy\"))\n            object.trophy = $root.Trophy.toObject(message.trophy, options);\n        return object;\n    };\n\n    /**\n     * Converts this TrophyRewardedToAllEvent to JSON.\n     * @function toJSON\n     * @memberof TrophyRewardedToAllEvent\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    TrophyRewardedToAllEvent.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return TrophyRewardedToAllEvent;\n})();\n\n$root.NewChatMessageEvent = (function() {\n\n    /**\n     * Properties of a NewChatMessageEvent.\n     * @exports INewChatMessageEvent\n     * @interface INewChatMessageEvent\n     * @property {IChatMessage|null} [chatMessage] NewChatMessageEvent chatMessage\n     */\n\n    /**\n     * Constructs a new NewChatMessageEvent.\n     * @exports NewChatMessageEvent\n     * @classdesc Represents a NewChatMessageEvent.\n     * @implements INewChatMessageEvent\n     * @constructor\n     * @param {INewChatMessageEvent=} [properties] Properties to set\n     */\n    function NewChatMessageEvent(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * NewChatMessageEvent chatMessage.\n     * @member {IChatMessage|null|undefined} chatMessage\n     * @memberof NewChatMessageEvent\n     * @instance\n     */\n    NewChatMessageEvent.prototype.chatMessage = null;\n\n    /**\n     * Creates a new NewChatMessageEvent instance using the specified properties.\n     * @function create\n     * @memberof NewChatMessageEvent\n     * @static\n     * @param {INewChatMessageEvent=} [properties] Properties to set\n     * @returns {NewChatMessageEvent} NewChatMessageEvent instance\n     */\n    NewChatMessageEvent.create = function create(properties) {\n        return new NewChatMessageEvent(properties);\n    };\n\n    /**\n     * Encodes the specified NewChatMessageEvent message. Does not implicitly {@link NewChatMessageEvent.verify|verify} messages.\n     * @function encode\n     * @memberof NewChatMessageEvent\n     * @static\n     * @param {INewChatMessageEvent} message NewChatMessageEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    NewChatMessageEvent.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.chatMessage != null && Object.hasOwnProperty.call(message, \"chatMessage\"))\n            $root.ChatMessage.encode(message.chatMessage, writer.uint32(/* id 1, wireType 2 =*/10).fork()).ldelim();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified NewChatMessageEvent message, length delimited. Does not implicitly {@link NewChatMessageEvent.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof NewChatMessageEvent\n     * @static\n     * @param {INewChatMessageEvent} message NewChatMessageEvent message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    NewChatMessageEvent.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a NewChatMessageEvent message from the specified reader or buffer.\n     * @function decode\n     * @memberof NewChatMessageEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {NewChatMessageEvent} NewChatMessageEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    NewChatMessageEvent.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.NewChatMessageEvent();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.chatMessage = $root.ChatMessage.decode(reader, reader.uint32());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a NewChatMessageEvent message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof NewChatMessageEvent\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {NewChatMessageEvent} NewChatMessageEvent\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    NewChatMessageEvent.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a NewChatMessageEvent message.\n     * @function verify\n     * @memberof NewChatMessageEvent\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    NewChatMessageEvent.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.chatMessage != null && message.hasOwnProperty(\"chatMessage\")) {\n            var error = $root.ChatMessage.verify(message.chatMessage);\n            if (error)\n                return \"chatMessage.\" + error;\n        }\n        return null;\n    };\n\n    /**\n     * Creates a NewChatMessageEvent message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof NewChatMessageEvent\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {NewChatMessageEvent} NewChatMessageEvent\n     */\n    NewChatMessageEvent.fromObject = function fromObject(object) {\n        if (object instanceof $root.NewChatMessageEvent)\n            return object;\n        var message = new $root.NewChatMessageEvent();\n        if (object.chatMessage != null) {\n            if (typeof object.chatMessage !== \"object\")\n                throw TypeError(\".NewChatMessageEvent.chatMessage: object expected\");\n            message.chatMessage = $root.ChatMessage.fromObject(object.chatMessage);\n        }\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a NewChatMessageEvent message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof NewChatMessageEvent\n     * @static\n     * @param {NewChatMessageEvent} message NewChatMessageEvent\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    NewChatMessageEvent.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults)\n            object.chatMessage = null;\n        if (message.chatMessage != null && message.hasOwnProperty(\"chatMessage\"))\n            object.chatMessage = $root.ChatMessage.toObject(message.chatMessage, options);\n        return object;\n    };\n\n    /**\n     * Converts this NewChatMessageEvent to JSON.\n     * @function toJSON\n     * @memberof NewChatMessageEvent\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    NewChatMessageEvent.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return NewChatMessageEvent;\n})();\n\n$root.ClassState = (function() {\n\n    /**\n     * Properties of a ClassState.\n     * @exports IClassState\n     * @interface IClassState\n     * @property {Object.<string,IUser>|null} [users] ClassState users\n     * @property {Object.<string,IDevice>|null} [devices] ClassState devices\n     * @property {Array.<IChatMessage>|null} [chatMessages] ClassState chatMessages\n     * @property {IContent|null} [content] ClassState content\n     * @property {string|null} [hostDeviceId] ClassState hostDeviceId\n     * @property {number|Long|null} [classEndedTime] ClassState classEndedTime\n     */\n\n    /**\n     * Constructs a new ClassState.\n     * @exports ClassState\n     * @classdesc Represents a ClassState.\n     * @implements IClassState\n     * @constructor\n     * @param {IClassState=} [properties] Properties to set\n     */\n    function ClassState(properties) {\n        this.users = {};\n        this.devices = {};\n        this.chatMessages = [];\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ClassState users.\n     * @member {Object.<string,IUser>} users\n     * @memberof ClassState\n     * @instance\n     */\n    ClassState.prototype.users = $util.emptyObject;\n\n    /**\n     * ClassState devices.\n     * @member {Object.<string,IDevice>} devices\n     * @memberof ClassState\n     * @instance\n     */\n    ClassState.prototype.devices = $util.emptyObject;\n\n    /**\n     * ClassState chatMessages.\n     * @member {Array.<IChatMessage>} chatMessages\n     * @memberof ClassState\n     * @instance\n     */\n    ClassState.prototype.chatMessages = $util.emptyArray;\n\n    /**\n     * ClassState content.\n     * @member {IContent|null|undefined} content\n     * @memberof ClassState\n     * @instance\n     */\n    ClassState.prototype.content = null;\n\n    /**\n     * ClassState hostDeviceId.\n     * @member {string} hostDeviceId\n     * @memberof ClassState\n     * @instance\n     */\n    ClassState.prototype.hostDeviceId = \"\";\n\n    /**\n     * ClassState classEndedTime.\n     * @member {number|Long} classEndedTime\n     * @memberof ClassState\n     * @instance\n     */\n    ClassState.prototype.classEndedTime = $util.Long ? $util.Long.fromBits(0,0,true) : 0;\n\n    /**\n     * Creates a new ClassState instance using the specified properties.\n     * @function create\n     * @memberof ClassState\n     * @static\n     * @param {IClassState=} [properties] Properties to set\n     * @returns {ClassState} ClassState instance\n     */\n    ClassState.create = function create(properties) {\n        return new ClassState(properties);\n    };\n\n    /**\n     * Encodes the specified ClassState message. Does not implicitly {@link ClassState.verify|verify} messages.\n     * @function encode\n     * @memberof ClassState\n     * @static\n     * @param {IClassState} message ClassState message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ClassState.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.users != null && Object.hasOwnProperty.call(message, \"users\"))\n            for (var keys = Object.keys(message.users), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 1, wireType 2 =*/10).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.User.encode(message.users[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        if (message.devices != null && Object.hasOwnProperty.call(message, \"devices\"))\n            for (var keys = Object.keys(message.devices), i = 0; i < keys.length; ++i) {\n                writer.uint32(/* id 2, wireType 2 =*/18).fork().uint32(/* id 1, wireType 2 =*/10).string(keys[i]);\n                $root.Device.encode(message.devices[keys[i]], writer.uint32(/* id 2, wireType 2 =*/18).fork()).ldelim().ldelim();\n            }\n        if (message.chatMessages != null && message.chatMessages.length)\n            for (var i = 0; i < message.chatMessages.length; ++i)\n                $root.ChatMessage.encode(message.chatMessages[i], writer.uint32(/* id 3, wireType 2 =*/26).fork()).ldelim();\n        if (message.content != null && Object.hasOwnProperty.call(message, \"content\"))\n            $root.Content.encode(message.content, writer.uint32(/* id 4, wireType 2 =*/34).fork()).ldelim();\n        if (message.hostDeviceId != null && Object.hasOwnProperty.call(message, \"hostDeviceId\"))\n            writer.uint32(/* id 5, wireType 2 =*/42).string(message.hostDeviceId);\n        if (message.classEndedTime != null && Object.hasOwnProperty.call(message, \"classEndedTime\"))\n            writer.uint32(/* id 6, wireType 0 =*/48).uint64(message.classEndedTime);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ClassState message, length delimited. Does not implicitly {@link ClassState.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ClassState\n     * @static\n     * @param {IClassState} message ClassState message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ClassState.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ClassState message from the specified reader or buffer.\n     * @function decode\n     * @memberof ClassState\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ClassState} ClassState\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ClassState.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ClassState(), key, value;\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                if (message.users === $util.emptyObject)\n                    message.users = {};\n                var end2 = reader.uint32() + reader.pos;\n                key = \"\";\n                value = null;\n                while (reader.pos < end2) {\n                    var tag2 = reader.uint32();\n                    switch (tag2 >>> 3) {\n                    case 1:\n                        key = reader.string();\n                        break;\n                    case 2:\n                        value = $root.User.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag2 & 7);\n                        break;\n                    }\n                }\n                message.users[key] = value;\n                break;\n            case 2:\n                if (message.devices === $util.emptyObject)\n                    message.devices = {};\n                var end2 = reader.uint32() + reader.pos;\n                key = \"\";\n                value = null;\n                while (reader.pos < end2) {\n                    var tag2 = reader.uint32();\n                    switch (tag2 >>> 3) {\n                    case 1:\n                        key = reader.string();\n                        break;\n                    case 2:\n                        value = $root.Device.decode(reader, reader.uint32());\n                        break;\n                    default:\n                        reader.skipType(tag2 & 7);\n                        break;\n                    }\n                }\n                message.devices[key] = value;\n                break;\n            case 3:\n                if (!(message.chatMessages && message.chatMessages.length))\n                    message.chatMessages = [];\n                message.chatMessages.push($root.ChatMessage.decode(reader, reader.uint32()));\n                break;\n            case 4:\n                message.content = $root.Content.decode(reader, reader.uint32());\n                break;\n            case 5:\n                message.hostDeviceId = reader.string();\n                break;\n            case 6:\n                message.classEndedTime = reader.uint64();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ClassState message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ClassState\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ClassState} ClassState\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ClassState.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ClassState message.\n     * @function verify\n     * @memberof ClassState\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ClassState.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.users != null && message.hasOwnProperty(\"users\")) {\n            if (!$util.isObject(message.users))\n                return \"users: object expected\";\n            var key = Object.keys(message.users);\n            for (var i = 0; i < key.length; ++i) {\n                var error = $root.User.verify(message.users[key[i]]);\n                if (error)\n                    return \"users.\" + error;\n            }\n        }\n        if (message.devices != null && message.hasOwnProperty(\"devices\")) {\n            if (!$util.isObject(message.devices))\n                return \"devices: object expected\";\n            var key = Object.keys(message.devices);\n            for (var i = 0; i < key.length; ++i) {\n                var error = $root.Device.verify(message.devices[key[i]]);\n                if (error)\n                    return \"devices.\" + error;\n            }\n        }\n        if (message.chatMessages != null && message.hasOwnProperty(\"chatMessages\")) {\n            if (!Array.isArray(message.chatMessages))\n                return \"chatMessages: array expected\";\n            for (var i = 0; i < message.chatMessages.length; ++i) {\n                var error = $root.ChatMessage.verify(message.chatMessages[i]);\n                if (error)\n                    return \"chatMessages.\" + error;\n            }\n        }\n        if (message.content != null && message.hasOwnProperty(\"content\")) {\n            var error = $root.Content.verify(message.content);\n            if (error)\n                return \"content.\" + error;\n        }\n        if (message.hostDeviceId != null && message.hasOwnProperty(\"hostDeviceId\"))\n            if (!$util.isString(message.hostDeviceId))\n                return \"hostDeviceId: string expected\";\n        if (message.classEndedTime != null && message.hasOwnProperty(\"classEndedTime\"))\n            if (!$util.isInteger(message.classEndedTime) && !(message.classEndedTime && $util.isInteger(message.classEndedTime.low) && $util.isInteger(message.classEndedTime.high)))\n                return \"classEndedTime: integer|Long expected\";\n        return null;\n    };\n\n    /**\n     * Creates a ClassState message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof ClassState\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {ClassState} ClassState\n     */\n    ClassState.fromObject = function fromObject(object) {\n        if (object instanceof $root.ClassState)\n            return object;\n        var message = new $root.ClassState();\n        if (object.users) {\n            if (typeof object.users !== \"object\")\n                throw TypeError(\".ClassState.users: object expected\");\n            message.users = {};\n            for (var keys = Object.keys(object.users), i = 0; i < keys.length; ++i) {\n                if (typeof object.users[keys[i]] !== \"object\")\n                    throw TypeError(\".ClassState.users: object expected\");\n                message.users[keys[i]] = $root.User.fromObject(object.users[keys[i]]);\n            }\n        }\n        if (object.devices) {\n            if (typeof object.devices !== \"object\")\n                throw TypeError(\".ClassState.devices: object expected\");\n            message.devices = {};\n            for (var keys = Object.keys(object.devices), i = 0; i < keys.length; ++i) {\n                if (typeof object.devices[keys[i]] !== \"object\")\n                    throw TypeError(\".ClassState.devices: object expected\");\n                message.devices[keys[i]] = $root.Device.fromObject(object.devices[keys[i]]);\n            }\n        }\n        if (object.chatMessages) {\n            if (!Array.isArray(object.chatMessages))\n                throw TypeError(\".ClassState.chatMessages: array expected\");\n            message.chatMessages = [];\n            for (var i = 0; i < object.chatMessages.length; ++i) {\n                if (typeof object.chatMessages[i] !== \"object\")\n                    throw TypeError(\".ClassState.chatMessages: object expected\");\n                message.chatMessages[i] = $root.ChatMessage.fromObject(object.chatMessages[i]);\n            }\n        }\n        if (object.content != null) {\n            if (typeof object.content !== \"object\")\n                throw TypeError(\".ClassState.content: object expected\");\n            message.content = $root.Content.fromObject(object.content);\n        }\n        if (object.hostDeviceId != null)\n            message.hostDeviceId = String(object.hostDeviceId);\n        if (object.classEndedTime != null)\n            if ($util.Long)\n                (message.classEndedTime = $util.Long.fromValue(object.classEndedTime)).unsigned = true;\n            else if (typeof object.classEndedTime === \"string\")\n                message.classEndedTime = parseInt(object.classEndedTime, 10);\n            else if (typeof object.classEndedTime === \"number\")\n                message.classEndedTime = object.classEndedTime;\n            else if (typeof object.classEndedTime === \"object\")\n                message.classEndedTime = new $util.LongBits(object.classEndedTime.low >>> 0, object.classEndedTime.high >>> 0).toNumber(true);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a ClassState message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ClassState\n     * @static\n     * @param {ClassState} message ClassState\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ClassState.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.arrays || options.defaults)\n            object.chatMessages = [];\n        if (options.objects || options.defaults) {\n            object.users = {};\n            object.devices = {};\n        }\n        if (options.defaults) {\n            object.content = null;\n            object.hostDeviceId = \"\";\n            if ($util.Long) {\n                var long = new $util.Long(0, 0, true);\n                object.classEndedTime = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;\n            } else\n                object.classEndedTime = options.longs === String ? \"0\" : 0;\n        }\n        var keys2;\n        if (message.users && (keys2 = Object.keys(message.users)).length) {\n            object.users = {};\n            for (var j = 0; j < keys2.length; ++j)\n                object.users[keys2[j]] = $root.User.toObject(message.users[keys2[j]], options);\n        }\n        if (message.devices && (keys2 = Object.keys(message.devices)).length) {\n            object.devices = {};\n            for (var j = 0; j < keys2.length; ++j)\n                object.devices[keys2[j]] = $root.Device.toObject(message.devices[keys2[j]], options);\n        }\n        if (message.chatMessages && message.chatMessages.length) {\n            object.chatMessages = [];\n            for (var j = 0; j < message.chatMessages.length; ++j)\n                object.chatMessages[j] = $root.ChatMessage.toObject(message.chatMessages[j], options);\n        }\n        if (message.content != null && message.hasOwnProperty(\"content\"))\n            object.content = $root.Content.toObject(message.content, options);\n        if (message.hostDeviceId != null && message.hasOwnProperty(\"hostDeviceId\"))\n            object.hostDeviceId = message.hostDeviceId;\n        if (message.classEndedTime != null && message.hasOwnProperty(\"classEndedTime\"))\n            if (typeof message.classEndedTime === \"number\")\n                object.classEndedTime = options.longs === String ? String(message.classEndedTime) : message.classEndedTime;\n            else\n                object.classEndedTime = options.longs === String ? $util.Long.prototype.toString.call(message.classEndedTime) : options.longs === Number ? new $util.LongBits(message.classEndedTime.low >>> 0, message.classEndedTime.high >>> 0).toNumber(true) : message.classEndedTime;\n        return object;\n    };\n\n    /**\n     * Converts this ClassState to JSON.\n     * @function toJSON\n     * @memberof ClassState\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ClassState.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ClassState;\n})();\n\n$root.User = (function() {\n\n    /**\n     * Properties of a User.\n     * @exports IUser\n     * @interface IUser\n     * @property {string|null} [id] User id\n     * @property {string|null} [name] User name\n     * @property {string|null} [role] User role\n     * @property {Array.<string>|null} [deviceIds] User deviceIds\n     * @property {Array.<ITrophy>|null} [trophies] User trophies\n     */\n\n    /**\n     * Constructs a new User.\n     * @exports User\n     * @classdesc Represents a User.\n     * @implements IUser\n     * @constructor\n     * @param {IUser=} [properties] Properties to set\n     */\n    function User(properties) {\n        this.deviceIds = [];\n        this.trophies = [];\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * User id.\n     * @member {string} id\n     * @memberof User\n     * @instance\n     */\n    User.prototype.id = \"\";\n\n    /**\n     * User name.\n     * @member {string} name\n     * @memberof User\n     * @instance\n     */\n    User.prototype.name = \"\";\n\n    /**\n     * User role.\n     * @member {string} role\n     * @memberof User\n     * @instance\n     */\n    User.prototype.role = \"\";\n\n    /**\n     * User deviceIds.\n     * @member {Array.<string>} deviceIds\n     * @memberof User\n     * @instance\n     */\n    User.prototype.deviceIds = $util.emptyArray;\n\n    /**\n     * User trophies.\n     * @member {Array.<ITrophy>} trophies\n     * @memberof User\n     * @instance\n     */\n    User.prototype.trophies = $util.emptyArray;\n\n    /**\n     * Creates a new User instance using the specified properties.\n     * @function create\n     * @memberof User\n     * @static\n     * @param {IUser=} [properties] Properties to set\n     * @returns {User} User instance\n     */\n    User.create = function create(properties) {\n        return new User(properties);\n    };\n\n    /**\n     * Encodes the specified User message. Does not implicitly {@link User.verify|verify} messages.\n     * @function encode\n     * @memberof User\n     * @static\n     * @param {IUser} message User message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    User.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.id != null && Object.hasOwnProperty.call(message, \"id\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.id);\n        if (message.name != null && Object.hasOwnProperty.call(message, \"name\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.name);\n        if (message.role != null && Object.hasOwnProperty.call(message, \"role\"))\n            writer.uint32(/* id 3, wireType 2 =*/26).string(message.role);\n        if (message.deviceIds != null && message.deviceIds.length)\n            for (var i = 0; i < message.deviceIds.length; ++i)\n                writer.uint32(/* id 4, wireType 2 =*/34).string(message.deviceIds[i]);\n        if (message.trophies != null && message.trophies.length)\n            for (var i = 0; i < message.trophies.length; ++i)\n                $root.Trophy.encode(message.trophies[i], writer.uint32(/* id 5, wireType 2 =*/42).fork()).ldelim();\n        return writer;\n    };\n\n    /**\n     * Encodes the specified User message, length delimited. Does not implicitly {@link User.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof User\n     * @static\n     * @param {IUser} message User message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    User.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a User message from the specified reader or buffer.\n     * @function decode\n     * @memberof User\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {User} User\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    User.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.User();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.id = reader.string();\n                break;\n            case 2:\n                message.name = reader.string();\n                break;\n            case 3:\n                message.role = reader.string();\n                break;\n            case 4:\n                if (!(message.deviceIds && message.deviceIds.length))\n                    message.deviceIds = [];\n                message.deviceIds.push(reader.string());\n                break;\n            case 5:\n                if (!(message.trophies && message.trophies.length))\n                    message.trophies = [];\n                message.trophies.push($root.Trophy.decode(reader, reader.uint32()));\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a User message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof User\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {User} User\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    User.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a User message.\n     * @function verify\n     * @memberof User\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    User.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.id != null && message.hasOwnProperty(\"id\"))\n            if (!$util.isString(message.id))\n                return \"id: string expected\";\n        if (message.name != null && message.hasOwnProperty(\"name\"))\n            if (!$util.isString(message.name))\n                return \"name: string expected\";\n        if (message.role != null && message.hasOwnProperty(\"role\"))\n            if (!$util.isString(message.role))\n                return \"role: string expected\";\n        if (message.deviceIds != null && message.hasOwnProperty(\"deviceIds\")) {\n            if (!Array.isArray(message.deviceIds))\n                return \"deviceIds: array expected\";\n            for (var i = 0; i < message.deviceIds.length; ++i)\n                if (!$util.isString(message.deviceIds[i]))\n                    return \"deviceIds: string[] expected\";\n        }\n        if (message.trophies != null && message.hasOwnProperty(\"trophies\")) {\n            if (!Array.isArray(message.trophies))\n                return \"trophies: array expected\";\n            for (var i = 0; i < message.trophies.length; ++i) {\n                var error = $root.Trophy.verify(message.trophies[i]);\n                if (error)\n                    return \"trophies.\" + error;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Creates a User message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof User\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {User} User\n     */\n    User.fromObject = function fromObject(object) {\n        if (object instanceof $root.User)\n            return object;\n        var message = new $root.User();\n        if (object.id != null)\n            message.id = String(object.id);\n        if (object.name != null)\n            message.name = String(object.name);\n        if (object.role != null)\n            message.role = String(object.role);\n        if (object.deviceIds) {\n            if (!Array.isArray(object.deviceIds))\n                throw TypeError(\".User.deviceIds: array expected\");\n            message.deviceIds = [];\n            for (var i = 0; i < object.deviceIds.length; ++i)\n                message.deviceIds[i] = String(object.deviceIds[i]);\n        }\n        if (object.trophies) {\n            if (!Array.isArray(object.trophies))\n                throw TypeError(\".User.trophies: array expected\");\n            message.trophies = [];\n            for (var i = 0; i < object.trophies.length; ++i) {\n                if (typeof object.trophies[i] !== \"object\")\n                    throw TypeError(\".User.trophies: object expected\");\n                message.trophies[i] = $root.Trophy.fromObject(object.trophies[i]);\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a User message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof User\n     * @static\n     * @param {User} message User\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    User.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.arrays || options.defaults) {\n            object.deviceIds = [];\n            object.trophies = [];\n        }\n        if (options.defaults) {\n            object.id = \"\";\n            object.name = \"\";\n            object.role = \"\";\n        }\n        if (message.id != null && message.hasOwnProperty(\"id\"))\n            object.id = message.id;\n        if (message.name != null && message.hasOwnProperty(\"name\"))\n            object.name = message.name;\n        if (message.role != null && message.hasOwnProperty(\"role\"))\n            object.role = message.role;\n        if (message.deviceIds && message.deviceIds.length) {\n            object.deviceIds = [];\n            for (var j = 0; j < message.deviceIds.length; ++j)\n                object.deviceIds[j] = message.deviceIds[j];\n        }\n        if (message.trophies && message.trophies.length) {\n            object.trophies = [];\n            for (var j = 0; j < message.trophies.length; ++j)\n                object.trophies[j] = $root.Trophy.toObject(message.trophies[j], options);\n        }\n        return object;\n    };\n\n    /**\n     * Converts this User to JSON.\n     * @function toJSON\n     * @memberof User\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    User.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return User;\n})();\n\n$root.Trophy = (function() {\n\n    /**\n     * Properties of a Trophy.\n     * @exports ITrophy\n     * @interface ITrophy\n     * @property {number|Long|null} [timestamp] Trophy timestamp\n     * @property {string|null} [type] Trophy type\n     * @property {string|null} [fromUserId] Trophy fromUserId\n     */\n\n    /**\n     * Constructs a new Trophy.\n     * @exports Trophy\n     * @classdesc Represents a Trophy.\n     * @implements ITrophy\n     * @constructor\n     * @param {ITrophy=} [properties] Properties to set\n     */\n    function Trophy(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * Trophy timestamp.\n     * @member {number|Long} timestamp\n     * @memberof Trophy\n     * @instance\n     */\n    Trophy.prototype.timestamp = $util.Long ? $util.Long.fromBits(0,0,true) : 0;\n\n    /**\n     * Trophy type.\n     * @member {string} type\n     * @memberof Trophy\n     * @instance\n     */\n    Trophy.prototype.type = \"\";\n\n    /**\n     * Trophy fromUserId.\n     * @member {string} fromUserId\n     * @memberof Trophy\n     * @instance\n     */\n    Trophy.prototype.fromUserId = \"\";\n\n    /**\n     * Creates a new Trophy instance using the specified properties.\n     * @function create\n     * @memberof Trophy\n     * @static\n     * @param {ITrophy=} [properties] Properties to set\n     * @returns {Trophy} Trophy instance\n     */\n    Trophy.create = function create(properties) {\n        return new Trophy(properties);\n    };\n\n    /**\n     * Encodes the specified Trophy message. Does not implicitly {@link Trophy.verify|verify} messages.\n     * @function encode\n     * @memberof Trophy\n     * @static\n     * @param {ITrophy} message Trophy message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Trophy.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.timestamp != null && Object.hasOwnProperty.call(message, \"timestamp\"))\n            writer.uint32(/* id 1, wireType 0 =*/8).uint64(message.timestamp);\n        if (message.type != null && Object.hasOwnProperty.call(message, \"type\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.type);\n        if (message.fromUserId != null && Object.hasOwnProperty.call(message, \"fromUserId\"))\n            writer.uint32(/* id 3, wireType 2 =*/26).string(message.fromUserId);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified Trophy message, length delimited. Does not implicitly {@link Trophy.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof Trophy\n     * @static\n     * @param {ITrophy} message Trophy message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Trophy.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a Trophy message from the specified reader or buffer.\n     * @function decode\n     * @memberof Trophy\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {Trophy} Trophy\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Trophy.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Trophy();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.timestamp = reader.uint64();\n                break;\n            case 2:\n                message.type = reader.string();\n                break;\n            case 3:\n                message.fromUserId = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a Trophy message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof Trophy\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {Trophy} Trophy\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Trophy.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a Trophy message.\n     * @function verify\n     * @memberof Trophy\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    Trophy.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.timestamp != null && message.hasOwnProperty(\"timestamp\"))\n            if (!$util.isInteger(message.timestamp) && !(message.timestamp && $util.isInteger(message.timestamp.low) && $util.isInteger(message.timestamp.high)))\n                return \"timestamp: integer|Long expected\";\n        if (message.type != null && message.hasOwnProperty(\"type\"))\n            if (!$util.isString(message.type))\n                return \"type: string expected\";\n        if (message.fromUserId != null && message.hasOwnProperty(\"fromUserId\"))\n            if (!$util.isString(message.fromUserId))\n                return \"fromUserId: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a Trophy message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof Trophy\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {Trophy} Trophy\n     */\n    Trophy.fromObject = function fromObject(object) {\n        if (object instanceof $root.Trophy)\n            return object;\n        var message = new $root.Trophy();\n        if (object.timestamp != null)\n            if ($util.Long)\n                (message.timestamp = $util.Long.fromValue(object.timestamp)).unsigned = true;\n            else if (typeof object.timestamp === \"string\")\n                message.timestamp = parseInt(object.timestamp, 10);\n            else if (typeof object.timestamp === \"number\")\n                message.timestamp = object.timestamp;\n            else if (typeof object.timestamp === \"object\")\n                message.timestamp = new $util.LongBits(object.timestamp.low >>> 0, object.timestamp.high >>> 0).toNumber(true);\n        if (object.type != null)\n            message.type = String(object.type);\n        if (object.fromUserId != null)\n            message.fromUserId = String(object.fromUserId);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a Trophy message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof Trophy\n     * @static\n     * @param {Trophy} message Trophy\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    Trophy.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            if ($util.Long) {\n                var long = new $util.Long(0, 0, true);\n                object.timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;\n            } else\n                object.timestamp = options.longs === String ? \"0\" : 0;\n            object.type = \"\";\n            object.fromUserId = \"\";\n        }\n        if (message.timestamp != null && message.hasOwnProperty(\"timestamp\"))\n            if (typeof message.timestamp === \"number\")\n                object.timestamp = options.longs === String ? String(message.timestamp) : message.timestamp;\n            else\n                object.timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.timestamp) : options.longs === Number ? new $util.LongBits(message.timestamp.low >>> 0, message.timestamp.high >>> 0).toNumber(true) : message.timestamp;\n        if (message.type != null && message.hasOwnProperty(\"type\"))\n            object.type = message.type;\n        if (message.fromUserId != null && message.hasOwnProperty(\"fromUserId\"))\n            object.fromUserId = message.fromUserId;\n        return object;\n    };\n\n    /**\n     * Converts this Trophy to JSON.\n     * @function toJSON\n     * @memberof Trophy\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    Trophy.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return Trophy;\n})();\n\n$root.Device = (function() {\n\n    /**\n     * Properties of a Device.\n     * @exports IDevice\n     * @interface IDevice\n     * @property {string|null} [id] Device id\n     * @property {string|null} [userId] Device userId\n     * @property {string|null} [activityStreamId] Device activityStreamId\n     * @property {Array.<string>|null} [webRtcStreamIds] Device webRtcStreamIds\n     */\n\n    /**\n     * Constructs a new Device.\n     * @exports Device\n     * @classdesc Represents a Device.\n     * @implements IDevice\n     * @constructor\n     * @param {IDevice=} [properties] Properties to set\n     */\n    function Device(properties) {\n        this.webRtcStreamIds = [];\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * Device id.\n     * @member {string} id\n     * @memberof Device\n     * @instance\n     */\n    Device.prototype.id = \"\";\n\n    /**\n     * Device userId.\n     * @member {string} userId\n     * @memberof Device\n     * @instance\n     */\n    Device.prototype.userId = \"\";\n\n    /**\n     * Device activityStreamId.\n     * @member {string} activityStreamId\n     * @memberof Device\n     * @instance\n     */\n    Device.prototype.activityStreamId = \"\";\n\n    /**\n     * Device webRtcStreamIds.\n     * @member {Array.<string>} webRtcStreamIds\n     * @memberof Device\n     * @instance\n     */\n    Device.prototype.webRtcStreamIds = $util.emptyArray;\n\n    /**\n     * Creates a new Device instance using the specified properties.\n     * @function create\n     * @memberof Device\n     * @static\n     * @param {IDevice=} [properties] Properties to set\n     * @returns {Device} Device instance\n     */\n    Device.create = function create(properties) {\n        return new Device(properties);\n    };\n\n    /**\n     * Encodes the specified Device message. Does not implicitly {@link Device.verify|verify} messages.\n     * @function encode\n     * @memberof Device\n     * @static\n     * @param {IDevice} message Device message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Device.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.id != null && Object.hasOwnProperty.call(message, \"id\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.id);\n        if (message.userId != null && Object.hasOwnProperty.call(message, \"userId\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.userId);\n        if (message.activityStreamId != null && Object.hasOwnProperty.call(message, \"activityStreamId\"))\n            writer.uint32(/* id 3, wireType 2 =*/26).string(message.activityStreamId);\n        if (message.webRtcStreamIds != null && message.webRtcStreamIds.length)\n            for (var i = 0; i < message.webRtcStreamIds.length; ++i)\n                writer.uint32(/* id 4, wireType 2 =*/34).string(message.webRtcStreamIds[i]);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified Device message, length delimited. Does not implicitly {@link Device.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof Device\n     * @static\n     * @param {IDevice} message Device message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Device.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a Device message from the specified reader or buffer.\n     * @function decode\n     * @memberof Device\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {Device} Device\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Device.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Device();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.id = reader.string();\n                break;\n            case 2:\n                message.userId = reader.string();\n                break;\n            case 3:\n                message.activityStreamId = reader.string();\n                break;\n            case 4:\n                if (!(message.webRtcStreamIds && message.webRtcStreamIds.length))\n                    message.webRtcStreamIds = [];\n                message.webRtcStreamIds.push(reader.string());\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a Device message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof Device\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {Device} Device\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Device.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a Device message.\n     * @function verify\n     * @memberof Device\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    Device.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.id != null && message.hasOwnProperty(\"id\"))\n            if (!$util.isString(message.id))\n                return \"id: string expected\";\n        if (message.userId != null && message.hasOwnProperty(\"userId\"))\n            if (!$util.isString(message.userId))\n                return \"userId: string expected\";\n        if (message.activityStreamId != null && message.hasOwnProperty(\"activityStreamId\"))\n            if (!$util.isString(message.activityStreamId))\n                return \"activityStreamId: string expected\";\n        if (message.webRtcStreamIds != null && message.hasOwnProperty(\"webRtcStreamIds\")) {\n            if (!Array.isArray(message.webRtcStreamIds))\n                return \"webRtcStreamIds: array expected\";\n            for (var i = 0; i < message.webRtcStreamIds.length; ++i)\n                if (!$util.isString(message.webRtcStreamIds[i]))\n                    return \"webRtcStreamIds: string[] expected\";\n        }\n        return null;\n    };\n\n    /**\n     * Creates a Device message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof Device\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {Device} Device\n     */\n    Device.fromObject = function fromObject(object) {\n        if (object instanceof $root.Device)\n            return object;\n        var message = new $root.Device();\n        if (object.id != null)\n            message.id = String(object.id);\n        if (object.userId != null)\n            message.userId = String(object.userId);\n        if (object.activityStreamId != null)\n            message.activityStreamId = String(object.activityStreamId);\n        if (object.webRtcStreamIds) {\n            if (!Array.isArray(object.webRtcStreamIds))\n                throw TypeError(\".Device.webRtcStreamIds: array expected\");\n            message.webRtcStreamIds = [];\n            for (var i = 0; i < object.webRtcStreamIds.length; ++i)\n                message.webRtcStreamIds[i] = String(object.webRtcStreamIds[i]);\n        }\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a Device message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof Device\n     * @static\n     * @param {Device} message Device\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    Device.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.arrays || options.defaults)\n            object.webRtcStreamIds = [];\n        if (options.defaults) {\n            object.id = \"\";\n            object.userId = \"\";\n            object.activityStreamId = \"\";\n        }\n        if (message.id != null && message.hasOwnProperty(\"id\"))\n            object.id = message.id;\n        if (message.userId != null && message.hasOwnProperty(\"userId\"))\n            object.userId = message.userId;\n        if (message.activityStreamId != null && message.hasOwnProperty(\"activityStreamId\"))\n            object.activityStreamId = message.activityStreamId;\n        if (message.webRtcStreamIds && message.webRtcStreamIds.length) {\n            object.webRtcStreamIds = [];\n            for (var j = 0; j < message.webRtcStreamIds.length; ++j)\n                object.webRtcStreamIds[j] = message.webRtcStreamIds[j];\n        }\n        return object;\n    };\n\n    /**\n     * Converts this Device to JSON.\n     * @function toJSON\n     * @memberof Device\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    Device.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return Device;\n})();\n\n$root.ChatMessage = (function() {\n\n    /**\n     * Properties of a ChatMessage.\n     * @exports IChatMessage\n     * @interface IChatMessage\n     * @property {string|null} [userId] ChatMessage userId\n     * @property {number|Long|null} [timestamp] ChatMessage timestamp\n     * @property {string|null} [text] ChatMessage text\n     */\n\n    /**\n     * Constructs a new ChatMessage.\n     * @exports ChatMessage\n     * @classdesc Represents a ChatMessage.\n     * @implements IChatMessage\n     * @constructor\n     * @param {IChatMessage=} [properties] Properties to set\n     */\n    function ChatMessage(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * ChatMessage userId.\n     * @member {string} userId\n     * @memberof ChatMessage\n     * @instance\n     */\n    ChatMessage.prototype.userId = \"\";\n\n    /**\n     * ChatMessage timestamp.\n     * @member {number|Long} timestamp\n     * @memberof ChatMessage\n     * @instance\n     */\n    ChatMessage.prototype.timestamp = $util.Long ? $util.Long.fromBits(0,0,true) : 0;\n\n    /**\n     * ChatMessage text.\n     * @member {string} text\n     * @memberof ChatMessage\n     * @instance\n     */\n    ChatMessage.prototype.text = \"\";\n\n    /**\n     * Creates a new ChatMessage instance using the specified properties.\n     * @function create\n     * @memberof ChatMessage\n     * @static\n     * @param {IChatMessage=} [properties] Properties to set\n     * @returns {ChatMessage} ChatMessage instance\n     */\n    ChatMessage.create = function create(properties) {\n        return new ChatMessage(properties);\n    };\n\n    /**\n     * Encodes the specified ChatMessage message. Does not implicitly {@link ChatMessage.verify|verify} messages.\n     * @function encode\n     * @memberof ChatMessage\n     * @static\n     * @param {IChatMessage} message ChatMessage message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ChatMessage.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.userId != null && Object.hasOwnProperty.call(message, \"userId\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.userId);\n        if (message.timestamp != null && Object.hasOwnProperty.call(message, \"timestamp\"))\n            writer.uint32(/* id 2, wireType 0 =*/16).uint64(message.timestamp);\n        if (message.text != null && Object.hasOwnProperty.call(message, \"text\"))\n            writer.uint32(/* id 3, wireType 2 =*/26).string(message.text);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified ChatMessage message, length delimited. Does not implicitly {@link ChatMessage.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof ChatMessage\n     * @static\n     * @param {IChatMessage} message ChatMessage message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    ChatMessage.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a ChatMessage message from the specified reader or buffer.\n     * @function decode\n     * @memberof ChatMessage\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {ChatMessage} ChatMessage\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ChatMessage.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.ChatMessage();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.userId = reader.string();\n                break;\n            case 2:\n                message.timestamp = reader.uint64();\n                break;\n            case 3:\n                message.text = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a ChatMessage message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof ChatMessage\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {ChatMessage} ChatMessage\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    ChatMessage.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a ChatMessage message.\n     * @function verify\n     * @memberof ChatMessage\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    ChatMessage.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.userId != null && message.hasOwnProperty(\"userId\"))\n            if (!$util.isString(message.userId))\n                return \"userId: string expected\";\n        if (message.timestamp != null && message.hasOwnProperty(\"timestamp\"))\n            if (!$util.isInteger(message.timestamp) && !(message.timestamp && $util.isInteger(message.timestamp.low) && $util.isInteger(message.timestamp.high)))\n                return \"timestamp: integer|Long expected\";\n        if (message.text != null && message.hasOwnProperty(\"text\"))\n            if (!$util.isString(message.text))\n                return \"text: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a ChatMessage message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof ChatMessage\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {ChatMessage} ChatMessage\n     */\n    ChatMessage.fromObject = function fromObject(object) {\n        if (object instanceof $root.ChatMessage)\n            return object;\n        var message = new $root.ChatMessage();\n        if (object.userId != null)\n            message.userId = String(object.userId);\n        if (object.timestamp != null)\n            if ($util.Long)\n                (message.timestamp = $util.Long.fromValue(object.timestamp)).unsigned = true;\n            else if (typeof object.timestamp === \"string\")\n                message.timestamp = parseInt(object.timestamp, 10);\n            else if (typeof object.timestamp === \"number\")\n                message.timestamp = object.timestamp;\n            else if (typeof object.timestamp === \"object\")\n                message.timestamp = new $util.LongBits(object.timestamp.low >>> 0, object.timestamp.high >>> 0).toNumber(true);\n        if (object.text != null)\n            message.text = String(object.text);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a ChatMessage message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof ChatMessage\n     * @static\n     * @param {ChatMessage} message ChatMessage\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    ChatMessage.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.userId = \"\";\n            if ($util.Long) {\n                var long = new $util.Long(0, 0, true);\n                object.timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;\n            } else\n                object.timestamp = options.longs === String ? \"0\" : 0;\n            object.text = \"\";\n        }\n        if (message.userId != null && message.hasOwnProperty(\"userId\"))\n            object.userId = message.userId;\n        if (message.timestamp != null && message.hasOwnProperty(\"timestamp\"))\n            if (typeof message.timestamp === \"number\")\n                object.timestamp = options.longs === String ? String(message.timestamp) : message.timestamp;\n            else\n                object.timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.timestamp) : options.longs === Number ? new $util.LongBits(message.timestamp.low >>> 0, message.timestamp.high >>> 0).toNumber(true) : message.timestamp;\n        if (message.text != null && message.hasOwnProperty(\"text\"))\n            object.text = message.text;\n        return object;\n    };\n\n    /**\n     * Converts this ChatMessage to JSON.\n     * @function toJSON\n     * @memberof ChatMessage\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    ChatMessage.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return ChatMessage;\n})();\n\n$root.Content = (function() {\n\n    /**\n     * Properties of a Content.\n     * @exports IContent\n     * @interface IContent\n     * @property {string|null} [type] Content type\n     * @property {string|null} [contentLocation] Content contentLocation\n     */\n\n    /**\n     * Constructs a new Content.\n     * @exports Content\n     * @classdesc Represents a Content.\n     * @implements IContent\n     * @constructor\n     * @param {IContent=} [properties] Properties to set\n     */\n    function Content(properties) {\n        if (properties)\n            for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n                if (properties[keys[i]] != null)\n                    this[keys[i]] = properties[keys[i]];\n    }\n\n    /**\n     * Content type.\n     * @member {string} type\n     * @memberof Content\n     * @instance\n     */\n    Content.prototype.type = \"\";\n\n    /**\n     * Content contentLocation.\n     * @member {string} contentLocation\n     * @memberof Content\n     * @instance\n     */\n    Content.prototype.contentLocation = \"\";\n\n    /**\n     * Creates a new Content instance using the specified properties.\n     * @function create\n     * @memberof Content\n     * @static\n     * @param {IContent=} [properties] Properties to set\n     * @returns {Content} Content instance\n     */\n    Content.create = function create(properties) {\n        return new Content(properties);\n    };\n\n    /**\n     * Encodes the specified Content message. Does not implicitly {@link Content.verify|verify} messages.\n     * @function encode\n     * @memberof Content\n     * @static\n     * @param {IContent} message Content message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Content.encode = function encode(message, writer) {\n        if (!writer)\n            writer = $Writer.create();\n        if (message.type != null && Object.hasOwnProperty.call(message, \"type\"))\n            writer.uint32(/* id 1, wireType 2 =*/10).string(message.type);\n        if (message.contentLocation != null && Object.hasOwnProperty.call(message, \"contentLocation\"))\n            writer.uint32(/* id 2, wireType 2 =*/18).string(message.contentLocation);\n        return writer;\n    };\n\n    /**\n     * Encodes the specified Content message, length delimited. Does not implicitly {@link Content.verify|verify} messages.\n     * @function encodeDelimited\n     * @memberof Content\n     * @static\n     * @param {IContent} message Content message or plain object to encode\n     * @param {$protobuf.Writer} [writer] Writer to encode to\n     * @returns {$protobuf.Writer} Writer\n     */\n    Content.encodeDelimited = function encodeDelimited(message, writer) {\n        return this.encode(message, writer).ldelim();\n    };\n\n    /**\n     * Decodes a Content message from the specified reader or buffer.\n     * @function decode\n     * @memberof Content\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @param {number} [length] Message length if known beforehand\n     * @returns {Content} Content\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Content.decode = function decode(reader, length) {\n        if (!(reader instanceof $Reader))\n            reader = $Reader.create(reader);\n        var end = length === undefined ? reader.len : reader.pos + length, message = new $root.Content();\n        while (reader.pos < end) {\n            var tag = reader.uint32();\n            switch (tag >>> 3) {\n            case 1:\n                message.type = reader.string();\n                break;\n            case 2:\n                message.contentLocation = reader.string();\n                break;\n            default:\n                reader.skipType(tag & 7);\n                break;\n            }\n        }\n        return message;\n    };\n\n    /**\n     * Decodes a Content message from the specified reader or buffer, length delimited.\n     * @function decodeDelimited\n     * @memberof Content\n     * @static\n     * @param {$protobuf.Reader|Uint8Array} reader Reader or buffer to decode from\n     * @returns {Content} Content\n     * @throws {Error} If the payload is not a reader or valid buffer\n     * @throws {$protobuf.util.ProtocolError} If required fields are missing\n     */\n    Content.decodeDelimited = function decodeDelimited(reader) {\n        if (!(reader instanceof $Reader))\n            reader = new $Reader(reader);\n        return this.decode(reader, reader.uint32());\n    };\n\n    /**\n     * Verifies a Content message.\n     * @function verify\n     * @memberof Content\n     * @static\n     * @param {Object.<string,*>} message Plain object to verify\n     * @returns {string|null} `null` if valid, otherwise the reason why it is not\n     */\n    Content.verify = function verify(message) {\n        if (typeof message !== \"object\" || message === null)\n            return \"object expected\";\n        if (message.type != null && message.hasOwnProperty(\"type\"))\n            if (!$util.isString(message.type))\n                return \"type: string expected\";\n        if (message.contentLocation != null && message.hasOwnProperty(\"contentLocation\"))\n            if (!$util.isString(message.contentLocation))\n                return \"contentLocation: string expected\";\n        return null;\n    };\n\n    /**\n     * Creates a Content message from a plain object. Also converts values to their respective internal types.\n     * @function fromObject\n     * @memberof Content\n     * @static\n     * @param {Object.<string,*>} object Plain object\n     * @returns {Content} Content\n     */\n    Content.fromObject = function fromObject(object) {\n        if (object instanceof $root.Content)\n            return object;\n        var message = new $root.Content();\n        if (object.type != null)\n            message.type = String(object.type);\n        if (object.contentLocation != null)\n            message.contentLocation = String(object.contentLocation);\n        return message;\n    };\n\n    /**\n     * Creates a plain object from a Content message. Also converts values to other types if specified.\n     * @function toObject\n     * @memberof Content\n     * @static\n     * @param {Content} message Content\n     * @param {$protobuf.IConversionOptions} [options] Conversion options\n     * @returns {Object.<string,*>} Plain object\n     */\n    Content.toObject = function toObject(message, options) {\n        if (!options)\n            options = {};\n        var object = {};\n        if (options.defaults) {\n            object.type = \"\";\n            object.contentLocation = \"\";\n        }\n        if (message.type != null && message.hasOwnProperty(\"type\"))\n            object.type = message.type;\n        if (message.contentLocation != null && message.hasOwnProperty(\"contentLocation\"))\n            object.contentLocation = message.contentLocation;\n        return object;\n    };\n\n    /**\n     * Converts this Content to JSON.\n     * @function toJSON\n     * @memberof Content\n     * @instance\n     * @returns {Object.<string,*>} JSON object\n     */\n    Content.prototype.toJSON = function toJSON() {\n        return this.constructor.toObject(this, $protobuf.util.toJSONOptions);\n    };\n\n    return Content;\n})();\n\nmodule.exports = $root;\n","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { createAction, createReducer } from \"@reduxjs/toolkit\";\nimport { combineReducers } from \"redux\";\nimport { DeviceID } from \"../models\";\nimport { TransportState } from \"../network/websocketTransport\";\nimport { ValueOf } from \"../types\";\nimport { classActions } from \"./class\";\n\nexport const setConnectionState = createAction<TransportState>(\n    \"setConnectionState\"\n);\nexport const connectionStatus = createReducer<TransportState>(\n    \"not-connected\",\n    (builder) => builder.addCase(setConnectionState, (_, { payload }) => payload)\n);\n\nexport const myDeviceId = createReducer<DeviceID | null>(null, (builder) =>\n    builder.addCase(classActions.join, (_, { payload }) => payload.deviceId)\n);\n\nexport const networkReducer = combineReducers({\n    connectionStatus,\n    myDeviceId,\n});\n\nconst networkActions = {\n    setConnectionState,\n};\n\nexport type NetworkAction = ReturnType<ValueOf<typeof networkActions>>;\n","import { Store } from \"@reduxjs/toolkit\";\nimport { nanoid } from \"nanoid\";\nimport {\n    Action,\n    ClassActionType,\n    classSliceActionPrefix,\n    NetworkHandlerCallback,\n    State,\n} from \"../ui\";\nimport { NewType } from \"../types\";\nimport {\n    ClassRequest,\n    IClassRequest,\n    ClassMessage,\n    IClassResponse,\n} from \"../protobuf\";\nimport { messageToClassAction } from \"../protobuf/actions\";\nimport { EventEmitter } from \"eventemitter3\";\nimport { setConnectionState } from \"../redux/network\";\nimport { TransportState, WSTransport } from \"./websocketTransport\";\nimport { PromiseCompleter } from \"./promiseCompleter\";\n\nexport type RequestID = NewType<string, \"RequestID\">;\nexport const newRequestId = (value: string): RequestID => value as RequestID;\n\nexport class Network<ApplicationState = unknown> {\n    private readonly rpc = new PromiseCompleter<void, string, RequestID>();\n    private transport?: WSTransport;\n\n    private readonly actionEmitter = new EventEmitter();\n    constructor(\n    /* eslint-disable no-unused-vars */\n    public readonly store: Store<ApplicationState, Action>,\n    public readonly selector: (\n      s: ApplicationState\n    ) => State /* eslint-enable no-unused-vars */\n    ) {}\n\n    public onClassAction<T extends ClassActionType = ClassActionType>(\n        actionType: T,\n        f: NetworkHandlerCallback<T>\n    ) {\n    // TODO: This event mapping is highly specific to the class slice, how to accomodate additional reducers/slices\n        const event = `${classSliceActionPrefix}/${actionType}`;\n        this.actionEmitter.addListener(event, f);\n        return () => {\n            this.actionEmitter.removeListener(event, f);\n        };\n    }\n\n    public async connect(url: string) {\n        if (this.transport) {\n            this.transport.disconnect();\n        }\n        this.transport = new WSTransport(\n            url,\n            (t, d) => this.onNetworkMessage(t, d),\n            (s) => this.onStateChange(s),\n            [\"live\"],\n            true\n        );\n        return await this.transport.connect();\n    }\n\n    public disconnect(code?: number, reason?: string) {\n        this.transport?.disconnect(code, reason);\n    }\n\n    private onStateChange(state: TransportState) {\n        this.store.dispatch(setConnectionState(state));\n    }\n\n    private onNetworkMessage(transport: WSTransport, data: unknown) {\n        if (!(data instanceof ArrayBuffer)) {\n            transport.disconnect(4401, \"Binary only protocol\");\n            return;\n        }\n        try {\n            if (data.byteLength <= 0) {\n                return;\n            }\n            const message = ClassMessage.decode(new Uint8Array(data));\n\n            if (message.response) {\n                this.handleResponse(message.response);\n            }\n\n            const action = messageToClassAction(message);\n            if (!action) {\n                return;\n            }\n\n            this.store.dispatch(action);\n            const state = this.selector(this.store.getState());\n            this.actionEmitter.emit(action.type, action.payload, state);\n        } catch (e) {\n            console.error(e);\n            transport.disconnect(4400, \"Parse error\");\n        }\n    }\n\n    private handleResponse(response: IClassResponse) {\n        if (!response.id) {\n            return;\n        }\n        const requestId = newRequestId(response.id);\n        if (response.error) {\n            this.rpc.reject(requestId, response.error);\n        } else {\n            this.rpc.resolve(requestId);\n        }\n    }\n\n    public async send(command: IClassRequest): Promise<void> {\n        if (!this.transport) {\n            throw Error(\"WebSocket has not been initialised\");\n        }\n        const requestId = nanoid() as RequestID;\n        const bytes = ClassRequest.encode({ requestId, ...command }).finish();\n        await this.transport.send(bytes);\n        return this.rpc.createPromise(requestId);\n    }\n}\n","import React, { useMemo, ReactNode } from \"react\";\nimport { useStore } from \"react-redux\";\nimport { Action, State } from \"../redux/reducer\";\nimport { Network } from \"../network/network\";\nimport NetworkContext from \"./networkContext\";\n\nexport interface NetworkProviderProps<ApplicationState = unknown> {\n  children?: ReactNode;\n  selector: (state: ApplicationState) => State;\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function NetworkProvider<ApplicationState = unknown>({\n    children,\n    selector,\n}: NetworkProviderProps<ApplicationState>) {\n    const store = useStore<ApplicationState, Action>();\n    const value = useMemo(() => new Network(store, selector), [store, selector]);\n    return (\n        <NetworkContext.Provider value={value as Network<unknown>}>\n            {children}\n        </NetworkContext.Provider>\n    );\n}\n","import React, { ReactNode, useEffect, useMemo } from \"react\";\nimport { useStore } from \"react-redux\";\nimport { SfuID } from \"../network/sfu\";\nimport { Action, State } from \"../redux/reducer\";\nimport { webrtcActions } from \"../redux/webrtc\";\nimport { WebRtcContext, WebRtcManager } from \"./rtcContext\";\nconst {addEventListener, removeEventListener, enumerateDevices} = navigator.mediaDevices;\n\nexport interface WebRtcProviderProps<ApplicationState = unknown> {\n  children?: ReactNode;\n  selector: (state: ApplicationState) => State;\n  getSfuUrl: (id: SfuID) => URL;\n}\n\nexport function WebRtcProvider<ApplicationState = unknown>({\n    children,\n    selector,\n    getSfuUrl,\n}: WebRtcProviderProps) {\n    const store = useStore<ApplicationState, Action>();\n    const value = useMemo(() => new WebRtcManager(store, selector, getSfuUrl), []);\n    useEffect(() => {\n        const onDeviceChange = () => enumerateDevices().then(\n            d => store.dispatch(webrtcActions.setDevices(d))\n        );\n        onDeviceChange();\n        addEventListener(\"devicechange\", onDeviceChange);\n        return () => { removeEventListener(\"devicechange\", onDeviceChange); };\n    }, []);\n    return (\n        <WebRtcContext.Provider value={value}>\n            {children}\n        </WebRtcContext.Provider>\n    );\n}\n","import { combineReducers } from \"redux\";\nimport { ClassAction, classReducer } from \"./class\";\nimport { NetworkAction, networkReducer } from \"./network\";\nimport { WebRtcAction, webrtcReducer } from \"./webrtc\";\n\nexport const reducer = combineReducers({\n    class: classReducer,\n    network: networkReducer,\n    webrtc: webrtcReducer,\n});\n\nexport type State = ReturnType<typeof reducer>\nexport type Action =\n  | ClassAction\n  | NetworkAction\n  | WebRtcAction\n","import { newUserRole, UserRole } from \"./models\";\n\nexport const roles = {\n    /** Consider using isTeacher() for comparison */\n    Teacher: newUserRole(\"teacher\"),\n    /** Consider using isStudent() for comparison */\n    Student: newUserRole(\"student\"),\n};\n\nexport function isTeacher({ role }: { role: UserRole }) {\n    return role === roles.Teacher;\n}\n\nexport function isStudent({ role }: { role: UserRole }) {\n    return role === roles.Student;\n}\n"],"names":["FeedbackType","QuickFeedbackType","ContentType","newUserId","value","newDeviceId","newActivityStreamId","newWebRtcStreamId","newTimestamp","newTrophyType","newUserRole","role","toLowerCase","values","o","Object","isAllowedToBecomeHost","INITIAL_ROOM_STATE","users","devices","chatMessages","content","type","Blank","contentLocation","hostDeviceId","undefined","classEndTime","join","_state","action","payload","state","endClass","timestamp","deviceConnect","name","device","id","userId","user","deviceIds","push","trophies","deviceDisconnect","deviceId","userIds","keys","sort","setHost","setContent","addChatMessage","chatMessage","setActivityStreamId","activityStreamId","activityStreamID","rewardTrophyToUser","to","trophy","rewardTrophyToAll","forEach","classSliceActionPrefix","classSlice","createSlice","initialState","reducers","classReducer","reducer","classActions","actions","validateChatMessage","text","console","error","validateContentType","validateContent","validateState","classState","m","validChatMessage","validContent","validatedDevice","validateDevice","validUser","validateUser","priorDeviceCount","length","filter","hasOwnProperty","classEndedTime","validTrophy","validateTrophy","map","webRtcStreamIds","webRTCStreamIDs","fromUserId","from","messageToClassAction","message","activityStreamIdChanged","activityStreamIdChangedAction","classEnded","classEndedAction","contentChanged","contentChangedAction","deviceConnected","deviceConnectedAction","deviceDisconnected","deviceDisconnectedAction","hostChanged","hostChangedAction","newChatMessage","newChatMessageAction","joinEvent","joinAction","trophyRewardedToAll","trophyRewardedToAllAction","trophyRewardedToUser","trophyRewardedToUserAction","event","toUserId","NetworkContext","React","createContext","useJoinClass","network","useContext","execute","joinClass","status","useAsyncCallback","url","connect","onError","e","useLeaveClass","leaveClass","reason","disconnect","useEndClass","useNetworkAction","useRewardTrophyToAll","trophyType","useRewardTrophyToUser","useSendChatMessage","sendChatMessage","useSetActivityStreamId","useSetContent","useSetHost","buildRequest","async","args","request","send","useNetworkHandler","actionType","callback","useEffect","onClassAction","useNetworkState","selector","equalityCheck","useSelector","displayName","newUserDeviceId","JSON","stringify","useUserDevices","filterRole","userDevices","class","resolveUserDevice","useHostUserDevice","useLocalUserDevice","myDeviceId","__decorate","decorators","target","key","desc","d","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","s","h","w","y","ms","val","options","parse","isFinite","long","fmtLong","fmtShort","Error","str","String","match","exec","n","parseFloat","msAbs","Math","abs","round","plural","isPlural","setup","env","createDebug","namespace","prevTime","namespacesCache","enabledCache","enableOverride","debug","enabled","self","curr","Number","Date","diff","prev","coerce","unshift","index","replace","format","formatter","formatters","call","splice","formatArgs","log","apply","useColors","color","selectColor","extend","destroy","enumerable","configurable","get","namespaces","set","v","init","delimiter","newDebug","this","toNamespace","regexp","toString","substring","default","stack","disable","names","skips","enable","save","split","len","RegExp","substr","test","humanize","require$$0","warn","hash","charCodeAt","colors","load","common","exports","module","lastC","storage","setItem","removeItem","getItem","process","DEBUG","window","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","$1","localStorage","localstorage","warned","j","t","l","Symbol","toStringTag","__esModule","create","bind","prototype","p","getFirstMatch","getSecondMatch","matchAndReturnConst","getWindowsVersionName","getMacOSVersionName","getAndroidVersionName","getVersionPrecision","compareVersions","a","max","u","Array","reverse","min","find","assign","concat","getBrowserAlias","BROWSER_ALIASES_MAP","getBrowserTypeByAlias","BROWSER_MAP","ENGINE_MAP","OS_MAP","PLATFORMS_MAP","Bada","BlackBerry","Chrome","Chromium","Electron","Epiphany","Firefox","Focus","Generic","Googlebot","Maxthon","Opera","PhantomJS","Puffin","QupZilla","QQ","QQLite","Safari","Sailfish","SeaMonkey","Sleipnir","Swing","Tizen","Vivaldi","WeChat","Roku","amazon_silk","android","bada","blackberry","chrome","chromium","electron","epiphany","firefox","focus","generic","googlebot","google_search","ie","k_meleon","maxthon","edge","mz","naver","opera","opera_coast","phantomjs","puffin","qupzilla","qq","qqlite","safari","sailfish","samsung_internet","seamonkey","sleipnir","swing","tizen","uc","vivaldi","webos","wechat","yandex","tablet","mobile","desktop","tv","WindowsPhone","Windows","MacOS","iOS","Android","WebOS","Linux","ChromeOS","PlayStation4","EdgeHTML","Blink","Trident","Presto","Gecko","WebKit","writable","getParser","getResult","_ua","parsedResult","getUA","parseBrowser","browser","some","describe","getBrowser","getBrowserName","getBrowserVersion","version","getOS","os","parseOS","getOSName","getOSVersion","getPlatform","platform","parsePlatform","getPlatformType","getEngine","engine","parseEngine","getEngineName","satisfies","isOS","isPlatform","f","isBrowser","compareVersion","indexOf","isEngine","is","search","versionName","vendor","model","__importDefault","mod","Logger_1","debug_1","APP_NAME","Logger","constructor","prefix","_debug","_warn","_error","info","EnhancedEventEmitter_1","events_1","require$$1","logger","EnhancedEventEmitter","EventEmitter","super","setMaxListeners","Infinity","safeEmit","numListeners","listenerCount","emit","Boolean","Promise","resolve","reject","errors","UnsupportedError","captureStackTrace","InvalidStateError","clone","data","defaultValue","generateRandomNumber","random","utils","Level1","ProfileLevelId","profile","level","DefaultProfileLevelId","BitPattern","_mask","byteMaskString","_maskedValue","isMatch","ProfilePattern","profile_idc","profile_iop","ProfilePatterns","isLevelAsymmetryAllowed","params","level_asymmetry_allowed","profile_level_id_numeric","level_idc","pattern","profile_level_id","profile_idc_iop_string","levelStr","parseProfileLevelId","params1","params2","profile_level_id_1","parseSdpProfileLevelId","profile_level_id_2","local_supported_params","remote_offered_params","local_profile_level_id","remote_profile_level_id","TypeError","local_level","remote_level","min_level","b","isLessLevel","answer_level","profileLevelIdToString","__createBinding","k","k2","__setModuleDefault","__importStar","result","ortc","h264","RTP_PROBATOR_MID","RTP_PROBATOR_SSRC","RTP_PROBATOR_CODEC_PAYLOAD_TYPE","validateRtpCapabilities","caps","codecs","isArray","codec","validateRtpCodecCapability","headerExtensions","ext","validateRtpHeaderExtension","MimeTypeRegex","mimeType","mimeTypeMatch","kind","preferredPayloadType","clockRate","channels","parameters","rtcpFeedback","fb","validateRtcpFeedback","parameter","uri","preferredId","preferredEncrypt","direction","validateRtpParameters","mid","validateRtpCodecParameters","validateRtpHeaderExtensionParameters","encodings","encoding","validateRtpEncodingParameters","rtcp","validateRtcpParameters","payloadType","encrypt","ssrc","rid","rtx","dtx","scalabilityMode","cname","reducedSize","validateSctpCapabilities","numStreams","validateNumSctpStreams","OS","MIS","validateSctpParameters","port","maxMessageSize","validateSctpStreamParameters","streamId","orderedGiven","ordered","maxPacketLifeTime","maxRetransmits","label","protocol","getExtendedRtpCapabilities","localCaps","remoteCaps","extendedRtpCapabilities","remoteCodec","isRtxCodec","matchingLocalCodec","localCodec","matchCodecs","strict","modify","extendedCodec","localPayloadType","localRtxPayloadType","remotePayloadType","remoteRtxPayloadType","localParameters","remoteParameters","reduceRtcpFeedback","matchingLocalRtxCodec","apt","matchingRemoteRtxCodec","remoteExt","matchingLocalExt","localExt","matchHeaderExtensions","extendedExt","sendId","recvId","getRecvRtpCapabilities","rtpCapabilities","rtxCodec","extendedExtension","getSendingRtpParameters","rtpParameters","getSendingRemoteRtpParameters","reduceCodecs","capCodec","filteredCodecs","idx","generateProbatorRtpParameters","videoRtpParameters","canSend","canReceive","firstMediaCodec","aCodec","bCodec","aMimeType","isSameProfile","selectedProfileLevelId","generateProfileLevelIdForAnswer","aExt","bExt","codecA","codecB","reducedRtcpFeedback","aFb","matchingBFb","bFb","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","done","then","lib","AwaitQueue","ClosedErrorClass","StoppedErrorClass","closed","pendingTasks","size","close","pendingTask","stopped","task","enqueuedAt","executedAt","stop","dump","now","enqueuedTime","getTime","executingTime","executeTask","shift","Producer_1","errors_1","require$$2","Producer","localId","rtpSender","track","stopTracks","disableTrackOnPause","zeroRtpOnPause","appData","_closed","_observer","_id","_localId","_rtpSender","_track","_kind","_rtpParameters","_paused","_maxSpatialLayer","_stopTracks","_disableTrackOnPause","_zeroRtpOnPause","_appData","_onTrackEnded","_handleTrack","paused","maxSpatialLayer","observer","_destroyTrack","transportClosed","safeEmitAsPromise","pause","catch","resume","readyState","spatialLayer","addEventListener","removeEventListener","Consumer_1","Consumer","producerId","rtpReceiver","_producerId","_rtpReceiver","DataProducer_1","DataProducer","dataChannel","sctpStreamParameters","_dataChannel","_sctpStreamParameters","_handleDataChannel","bufferedAmount","bufferedAmountLowThreshold","errorDetail","sctpCauseCode","DataConsumer_1","DataConsumer","dataProducerId","_dataProducerId","binaryType","Transport_1","awaitqueue_1","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","Transport","iceParameters","iceCandidates","dtlsParameters","sctpParameters","iceServers","iceTransportPolicy","additionalSettings","proprietaryConstraints","handlerFactory","canProduceByKind","_connectionState","_producers","Map","_consumers","_dataProducers","_dataConsumers","_probatorConsumerCreated","_awaitQueue","_direction","_extendedRtpCapabilities","_canProduceByKind","_maxSctpMessageSize","bundlePolicy","rtcpMuxPolicy","sdpSemantics","_handler","run","_handleHandler","handler","connectionState","producer","clear","consumer","dataProducer","dataConsumer","getTransportStats","restartIce","updateIceServers","codecOptions","normalizedEncodings","normalizedEncoding","active","scaleResolutionDownBy","maxBitrate","maxFramerate","adaptivePtime","priority","networkPriority","_handleProducer","stopSending","error2","receive","trackId","_handleConsumer","probatorRtpParameters","sendDataChannel","_handleDataProducer","receiveDataChannel","_handleDataConsumer","on","errback","delete","replaceTrack","setMaxSpatialLayer","setRtpEncodingParameters","getSenderStats","stopReceiving","pauseReceiving","resumeReceiving","getReceiverStats","grammar","grammarModule","reg","z","rate","address","subtype","config","sessionConfig","raddr","tcptype","generation","attribute","dir2","clksrcExt","mediaClockValue","rateNumerator","rateDenominator","obj","toIntIfInt","parseReg","location","needsBlank","keyLocation","rawName","attachProperties","validLine","sdp","session","media","slice","rtp","fmtp","paramReducer","acc","expr","reduce","parseParams","candidates","parts","component","ip","item","stream","scid","formatRegExp","formatStr","x","arg","makeLine","Function","defaultOuterOrder","defaultInnerOrder","writer","opts","mLine","payloads","outerOrder","innerOrder","el","parser","parseFmtpConfig","parsePayloads","parseRemoteCandidates","parseImageAttributes","parseSimulcastStreamList","commonUtils","sdpTransform","extractRtpCapabilities","sdpObject","codecsMap","gotAudio","gotVideo","rtcpFb","feedback","headerExtension","extractDtlsParameters","mediaObject","iceUfrag","fingerprint","fingerprints","algorithm","getCname","offerMediaObject","ssrcCnameLine","ssrcs","line","applyCodecParameters","offerRtpParameters","answerMediaObject","spropStereo","stereo","getRtpEncodings","Set","add","ssrcToRtxSsrc","ssrcGroups","semantics","rtxSsrc","has","addLegacySimulcast","ssrcMsidLine","firstSsrc","firstRtxSsrc","rtxSsrcs","unifiedPlanUtils","HandlerInterface_1","HandlerInterface","MediaSection_1","MediaSection","planB","_mediaObject","_planB","setIceParameters","candidate","candidateObject","foundation","transport","tcpType","endOfCandidates","iceOptions","setDtlsRole","getObject","usernameFragment","icePwd","password","simulcast","simulcast_03","rids","extmapAllowMixed","AnswerMediaSection","plainRtpParameters","answerRtpParameters","connection","ipVersion","getCodecName","codecParameters","opusStereo","opusFec","opusDtx","opusMaxPlaybackRate","opusMaxAverageBitrate","opusPtime","videoGoogleStartBitrate","videoGoogleMaxBitrate","videoGoogleMinBitrate","offerCodec","useinbandfec","usedtx","maxplaybackrate","maxaveragebitrate","ptime","dir1","list1","rtcpMux","rtcpRsize","xGoogleFlag","sctpPort","sctpmap","app","sctpmapNumber","OfferMediaSection","oldDataChannelSpec","msid","planBReceive","includes","trim","planBStopReceiving","group","RemoteSdp_1","RemoteSdp","_mediaSections","_midToIndex","_iceParameters","_iceCandidates","_dtlsParameters","_sctpParameters","_plainRtpParameters","_sdpObject","origin","ipVer","netType","sessionId","sessionVersion","username","timing","start","iceLite","icelite","msidSemantic","semantic","token","numFingerprints","groups","mids","updateIceParameters","mediaSection","updateDtlsRole","getNextMediaSectionIdx","reuseMid","_replaceMediaSection","_addMediaSection","oldMediaSection","disableMediaSection","closeMediaSection","_firstMid","_regenerateBundleMids","sendSctpAssociation","receiveSctpAssociation","getSdp","write","newMediaSection","scalabilityModes","ScalabilityModeRegex","spatialLayers","temporalLayers","Chrome74_1","sdpCommonUtils","sdpUnifiedPlanUtils","scalabilityModes_1","SCTP_NUM_STREAMS","Chrome74","_mapMidTransceiver","_sendStream","MediaStream","_hasDataChannelMediaSection","_nextSendSctpStreamId","_transportReady","static","_pc","pc","RTCPeerConnection","addTransceiver","offer","createOffer","_remoteSdp","_sendingRtpParametersByKind","audio","video","_sendingRemoteRtpParametersByKind","_forcedLocalDtlsRole","iceConnectionState","configuration","getConfiguration","setConfiguration","iceRestart","setLocalDescription","answer","setRemoteDescription","createAnswer","getStats","_a","_assertSendDirection","sendingRtpParameters","sendingRemoteRtpParameters","mediaSectionIdx","transceiver","streams","sendEncodings","localSdpObject","_setupTransport","localDtlsRole","hackVp9Svc","layers","localDescription","newEncodings","sender","removeTrack","getParameters","setParameters","negotiated","createDataChannel","_assertRecvDirection","getTransceivers","receiver","Chrome70_1","Chrome70","desiredEncoding","maxRetransmitTime","planBUtils","Chrome67_1","sdpPlanBUtils","Chrome67","_mapSendLocalIdRtpSender","_nextSendLocalId","_mapRecvLocalIdInfo","offerToReceiveAudio","offerToReceiveVideo","addTrack","getSenders","getTracks","signalingState","oldTrack","getReceivers","Chrome55_1","Chrome55","_mapSendLocalIdTrack","addStream","getRemoteStreams","getTrackById","Firefox60_1","Firefox60","canvas","createElement","getContext","fakeVideoTrack","captureStream","getVideoTracks","videoTransceiver","remove","Safari12_1","Safari12","Safari11_1","Safari11","edgeUtils","getCapabilities","nativeCaps","RTCRtpReceiver","numChannels","mangleRtpParameters","muxId","Edge11_1","Edge11","_rtpSenders","_rtpReceivers","_iceGatherer","_iceTransport","_dtlsTransport","_remoteIceParameters","_remoteIceCandidates","_remoteDtlsParameters","_cname","_setIceGatherer","_setIceTransport","_setDtlsTransport","addRemoteCandidate","RTCRtpSender","useRtx","_codec","mux","edgeRtpParameters","setTrack","iceGatherer","RTCIceGatherer","gatherPolicy","gather","iceTransport","RTCIceTransport","pair","dtlsTransport","RTCDtlsTransport","getLocalParameters","ReactNative_1","ReactNative","release","Device_1","bowser_1","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","detectDevice","product","ua","ios","RTCRtpTransceiver","Device","handlerName","Handler","_loaded","_handlerFactory","createFactory","_handlerName","_recvRtpCapabilities","_sctpCapabilities","loaded","sctpCapabilities","routerRtpCapabilities","nativeRtpCapabilities","getNativeRtpCapabilities","getNativeSctpCapabilities","canProduce","createSendTransport","_createTransport","createRecvTransport","RtpParameters","SctpParameters","__exportStar","types","WSTransport","onMessageCallback","onStateChange","protocols","autoconnect","receiveMessageTimeoutTime","sendKeepAliveMessageInterval","_connect","code","ws","receiveTimeoutReference","clearTimeout","sendTimeoutReference","resetNetworkSendTimeout","_wsPromise","WebSocket","CLOSED","onOpen","onClose","onMessage","resetNetworkRecieveTimeout","setTimeout","Uint8Array","PromiseCompleter","callbacks","createPromise","useCallbacks","requestId","completer","sfus","videoInputs","audioInputs","audioOutputs","setDevices","closeTrack","sfu","tracks","setConsumerConnectionStatus","consumerConnectionState","setProducerConnectionStatus","producerConnectionState","webRtcSliceActionPrefix","webrtcSlice","webrtcActions","webrtcReducer","newSfuID","newProducerID","SFU","store","_","onTransportMessage","onTransportStateChange","mediaTrack","consumeTrack","producerTransport","produce","localPause","globalPause","consumerTransport","sendRtpCapabilities","response","createConsumer","consumerCreated","consume","locallyPause","globallyPause","loadDevice","success","consumerTransportConnect","dispatch","producerTransportConnect","createTrack","generateRequestId","promiseCompleter","_requestId","handleMessage","consumerPaused","handlePauseMessage","producerPaused","consumerClosed","producerClosed","ExecuteOnce","_target","propertyKey","descriptor","childFunction","cache","shouldReturnCache","WebRtcManager","getUrl","TrackSender","microphoneGetter","microphoneConstraints","cameraGetter","cameraConstraints","StreamSender","screenCaptureGetter","screenCaptureConstraints","sfuId","getTrack","getSfu","getStream","videoTrack","audioTrack","allSettled","videoSender","audioSender","context","_location","createProducer","getAudioContraints","createTrackCache","mediaDevices","getUserMedia","getVideoContraints","getContraints","createCache","clearCache","contraints","getDisplayMedia","firstTrack","getAudioTracks","initializeCache","invalidationId","invalidateCache","WebRtcContext","useCamera","ctx","useTrackSender","camera","useMicrophone","microphone","useScreenshare","useStreamSender","screenshare","useStream","ids","useMemo","useTrack","useAsync","useTrackPauseState","streamSender","videoPaused","audioPaused","trackSender","useWebRtcState","webrtc","nanoid","bytes","crypto","getRandomValues","byte","toUpperCase","aspromise","asPromise","fn","offset","pending","err","base64","string","charAt","ceil","b64","s64","encode","buffer","end","chunk","fromCharCode","invalidEncoding","decode","eventemitter","_listeners","evt","off","listeners","float","factory","Float32Array","f32","f8b","le","writeFloat_f32_cpy","buf","pos","writeFloat_f32_rev","readFloat_f32_cpy","readFloat_f32_rev","writeFloatLE","writeFloatBE","readFloatLE","readFloatBE","writeFloat_ieee754","writeUint","sign","isNaN","exponent","floor","LN2","pow","readFloat_ieee754","readUint","uint","mantissa","NaN","writeUintLE","writeUintBE","readUintLE","readUintBE","Float64Array","f64","writeDouble_f64_cpy","writeDouble_f64_rev","readDouble_f64_cpy","readDouble_f64_rev","writeDoubleLE","writeDoubleBE","readDoubleLE","readDoubleBE","writeDouble_ieee754","off0","off1","readDouble_ieee754","lo","hi","inquire_1","inquire","moduleName","eval","utf8","read","c1","c2","pool_1","pool","alloc","SIZE","MAX","slab","longbits","LongBits","util","zero","toNumber","zzEncode","zzDecode","zeroHash","fromNumber","isString","Long","fromString","low","high","unsigned","toLong","fromHash","toHash","mask","part0","part1","part2","merge","dst","src","ifNotSet","newError","CustomError","properties","isNode","global","versions","node","emptyArray","freeze","emptyObject","isInteger","isObject","isset","isSet","prop","Buffer","utf8Write","_Buffer_from","_Buffer_allocUnsafe","newBuffer","sizeOrArray","dcodeIO","key2Re","key32Re","key64Re","longToHash","longFromHash","bits","fromBits","lcFirst","ProtocolError","oneOfGetter","fieldNames","fieldMap","oneOfSetter","toJSONOptions","longs","enums","json","_configure","allocUnsafe","Writer","BufferWriter","Op","noop","State","head","tail","states","writeByte","writeVarint32","VarintOp","writeVarint64","writeFixed32","subarray","_push","uint32","int32","sint32","uint64","int64","sint64","bool","fixed32","sfixed32","fixed64","sfixed64","double","writeBytes","fork","reset","ldelim","finish","BufferWriter_","writer_buffer","writeStringBuffer","writeBytesBuffer","copy","byteLength","reader","Reader","BufferReader","indexOutOfRange","writeLength","RangeError","create_array","isBuffer","readLongVarint","readFixed32_end","readFixed64","_slice","skip","skipType","wireType","BufferReader_","reader_buffer","utf8Slice","service","Service","rpcImpl","requestDelimited","responseDelimited","rpcCall","method","requestCtor","responseCtor","endedByRPC","roots","protobuf","configure","build","rpc","minimal","$protobuf","$Reader","$Writer","$util","$root","ClassRequest","$oneOfFields","EndClassCommand","SetHostCommand","SetContentCommand","SetActivityStreamIdCommand","RewardTrophyToUserCommand","RewardTrophyToAllCommand","SendChatMessageCommand","encodeDelimited","tag","decodeDelimited","verify","command","fromObject","object","toObject","defaults","oneofs","toJSON","ClassResponse","ClassMessage","JoinEvent","DeviceConnectedEvent","DeviceDisconnectedEvent","ClassEndedEvent","HostChangedEvent","ContentChangedEvent","ActivityStreamIdChangedEvent","TrophyRewardedToUserEvent","TrophyRewardedToAllEvent","NewChatMessageEvent","Content","ClassState","fromValue","Trophy","ChatMessage","User","end2","tag2","keys2","arrays","objects","formatProdErrorMessage","Events","EE","once","addListener","emitter","listener","_events","_eventsCount","clearEvent","__proto__","eventNames","events","getOwnPropertySymbols","handlers","ee","a1","a2","a3","a4","a5","removeListener","removeAllListeners","prefixed","randomString","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","proto","getPrototypeOf","miniKindOf","isDate","isError","constructorName","ctorName","stackTraceLimit","toDateString","getDate","setDate","kindOf","typeOfVal","NODE_ENV","warning","getUnexpectedStateShapeWarningMessage","inputState","unexpectedKeyCache","reducerKeys","argumentName","unexpectedKeys","assertReducerShape","combineReducers","finalReducers","shapeAssertionError","finalReducerKeys","warningMessage","hasChanged","nextState","_i","_key","previousStateForKey","nextStateForKey","isCrushed","setConnectionState","createAction","connectionStatus","createReducer","builder","addCase","networkReducer","newRequestId","Network","actionEmitter","onNetworkMessage","ArrayBuffer","handleResponse","getState","NetworkProvider","children","useStore","Provider","enumerateDevices","WebRtcProvider","getSfuUrl","onDeviceChange","roles","Teacher","Student","isTeacher","isStudent"],"mappings":"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"}